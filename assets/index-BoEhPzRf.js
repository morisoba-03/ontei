var v0=Object.defineProperty;var x0=(t,e,a)=>e in t?v0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var q=(t,e,a)=>x0(t,typeof e!="symbol"?e+"":e,a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=a(l);fetch(l.href,i)}})();var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function w0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var a=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var l=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(a,n,l.get?l:{enumerable:!0,get:function(){return t[n]}})}),a}var Kf={exports:{}},Hs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0=Symbol.for("react.transitional.element"),M0=Symbol.for("react.fragment");function Jf(t,e,a){var n=null;if(a!==void 0&&(n=""+a),e.key!==void 0&&(n=""+e.key),"key"in e){a={};for(var l in e)l!=="key"&&(a[l]=e[l])}else a=e;return e=a.ref,{$$typeof:T0,type:t,key:n,ref:e!==void 0?e:null,props:a}}Hs.Fragment=M0;Hs.jsx=Jf;Hs.jsxs=Jf;Kf.exports=Hs;var o=Kf.exports,If={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ao=Symbol.for("react.transitional.element"),N0=Symbol.for("react.portal"),j0=Symbol.for("react.fragment"),k0=Symbol.for("react.strict_mode"),A0=Symbol.for("react.profiler"),z0=Symbol.for("react.consumer"),_0=Symbol.for("react.context"),E0=Symbol.for("react.forward_ref"),C0=Symbol.for("react.suspense"),O0=Symbol.for("react.memo"),Pf=Symbol.for("react.lazy"),D0=Symbol.for("react.activity"),ru=Symbol.iterator;function U0(t){return t===null||typeof t!="object"?null:(t=ru&&t[ru]||t["@@iterator"],typeof t=="function"?t:null)}var Wf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$f=Object.assign,td={};function sl(t,e,a){this.props=t,this.context=e,this.refs=td,this.updater=a||Wf}sl.prototype.isReactComponent={};sl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ed(){}ed.prototype=sl.prototype;function no(t,e,a){this.props=t,this.context=e,this.refs=td,this.updater=a||Wf}var lo=no.prototype=new ed;lo.constructor=no;$f(lo,sl.prototype);lo.isPureReactComponent=!0;var cu=Array.isArray;function ec(){}var Dt={H:null,A:null,T:null,S:null},ad=Object.prototype.hasOwnProperty;function io(t,e,a){var n=a.ref;return{$$typeof:ao,type:t,key:e,ref:n!==void 0?n:null,props:a}}function R0(t,e){return io(t.type,e,t.props)}function so(t){return typeof t=="object"&&t!==null&&t.$$typeof===ao}function B0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return e[a]})}var ou=/\/+/g;function ur(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B0(""+t.key):e.toString(36)}function H0(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(ec,ec):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Nn(t,e,a,n,l){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ao:case N0:s=!0;break;case Pf:return s=t._init,Nn(s(t._payload),e,a,n,l)}}if(s)return l=l(t),s=n===""?"."+ur(t,0):n,cu(l)?(a="",s!=null&&(a=s.replace(ou,"$&/")+"/"),Nn(l,e,a,"",function(u){return u})):l!=null&&(so(l)&&(l=R0(l,a+(l.key==null||t&&t.key===l.key?"":(""+l.key).replace(ou,"$&/")+"/")+s)),e.push(l)),1;s=0;var r=n===""?".":n+":";if(cu(t))for(var c=0;c<t.length;c++)n=t[c],i=r+ur(n,c),s+=Nn(n,e,a,i,l);else if(c=U0(t),typeof c=="function")for(t=c.call(t),c=0;!(n=t.next()).done;)n=n.value,i=r+ur(n,c++),s+=Nn(n,e,a,i,l);else if(i==="object"){if(typeof t.then=="function")return Nn(H0(t),e,a,n,l);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function xi(t,e,a){if(t==null)return t;var n=[],l=0;return Nn(t,n,"","",function(i){return e.call(a,i,l++)}),n}function G0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},q0={map:xi,forEach:function(t,e,a){xi(t,function(){e.apply(this,arguments)},a)},count:function(t){var e=0;return xi(t,function(){e++}),e},toArray:function(t){return xi(t,function(e){return e})||[]},only:function(t){if(!so(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Activity=D0;nt.Children=q0;nt.Component=sl;nt.Fragment=j0;nt.Profiler=A0;nt.PureComponent=no;nt.StrictMode=k0;nt.Suspense=C0;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Dt.H.useMemoCache(t)}};nt.cache=function(t){return function(){return t.apply(null,arguments)}};nt.cacheSignal=function(){return null};nt.cloneElement=function(t,e,a){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var n=$f({},t.props),l=t.key;if(e!=null)for(i in e.key!==void 0&&(l=""+e.key),e)!ad.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(n[i]=e[i]);var i=arguments.length-2;if(i===1)n.children=a;else if(1<i){for(var s=Array(i),r=0;r<i;r++)s[r]=arguments[r+2];n.children=s}return io(t.type,l,n)};nt.createContext=function(t){return t={$$typeof:_0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:z0,_context:t},t};nt.createElement=function(t,e,a){var n,l={},i=null;if(e!=null)for(n in e.key!==void 0&&(i=""+e.key),e)ad.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(l[n]=e[n]);var s=arguments.length-2;if(s===1)l.children=a;else if(1<s){for(var r=Array(s),c=0;c<s;c++)r[c]=arguments[c+2];l.children=r}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)l[n]===void 0&&(l[n]=s[n]);return io(t,i,l)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:E0,render:t}};nt.isValidElement=so;nt.lazy=function(t){return{$$typeof:Pf,_payload:{_status:-1,_result:t},_init:G0}};nt.memo=function(t,e){return{$$typeof:O0,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=Dt.T,a={};Dt.T=a;try{var n=t(),l=Dt.S;l!==null&&l(a,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(ec,uu)}catch(i){uu(i)}finally{e!==null&&a.types!==null&&(e.types=a.types),Dt.T=e}};nt.unstable_useCacheRefresh=function(){return Dt.H.useCacheRefresh()};nt.use=function(t){return Dt.H.use(t)};nt.useActionState=function(t,e,a){return Dt.H.useActionState(t,e,a)};nt.useCallback=function(t,e){return Dt.H.useCallback(t,e)};nt.useContext=function(t){return Dt.H.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t,e){return Dt.H.useDeferredValue(t,e)};nt.useEffect=function(t,e){return Dt.H.useEffect(t,e)};nt.useEffectEvent=function(t){return Dt.H.useEffectEvent(t)};nt.useId=function(){return Dt.H.useId()};nt.useImperativeHandle=function(t,e,a){return Dt.H.useImperativeHandle(t,e,a)};nt.useInsertionEffect=function(t,e){return Dt.H.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return Dt.H.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return Dt.H.useMemo(t,e)};nt.useOptimistic=function(t,e){return Dt.H.useOptimistic(t,e)};nt.useReducer=function(t,e,a){return Dt.H.useReducer(t,e,a)};nt.useRef=function(t){return Dt.H.useRef(t)};nt.useState=function(t){return Dt.H.useState(t)};nt.useSyncExternalStore=function(t,e,a){return Dt.H.useSyncExternalStore(t,e,a)};nt.useTransition=function(){return Dt.H.useTransition()};nt.version="19.2.4";If.exports=nt;var V=If.exports,nd={exports:{}},Gs={},ld={exports:{}},id={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,D){var A=E.length;E.push(D);t:for(;0<A;){var Q=A-1>>>1,at=E[Q];if(0<l(at,D))E[Q]=D,E[A]=at,A=Q;else break t}}function a(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var D=E[0],A=E.pop();if(A!==D){E[0]=A;t:for(var Q=0,at=E.length,vt=at>>>1;Q<vt;){var K=2*(Q+1)-1,R=E[K],Y=K+1,W=E[Y];if(0>l(R,A))Y<at&&0>l(W,R)?(E[Q]=W,E[Y]=A,Q=Y):(E[Q]=R,E[K]=A,Q=K);else if(Y<at&&0>l(W,A))E[Q]=W,E[Y]=A,Q=Y;else break t}}return D}function l(E,D){var A=E.sortIndex-D.sortIndex;return A!==0?A:E.id-D.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,r=s.now();t.unstable_now=function(){return s.now()-r}}var c=[],u=[],h=1,g=null,f=3,d=!1,v=!1,y=!1,w=!1,p=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function S(E){for(var D=a(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=E)n(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=a(u)}}function T(E){if(y=!1,S(E),!v)if(a(c)!==null)v=!0,j||(j=!0,P());else{var D=a(u);D!==null&&st(T,D.startTime-E)}}var j=!1,M=-1,x=5,N=-1;function C(){return w?!0:!(t.unstable_now()-N<x)}function O(){if(w=!1,j){var E=t.unstable_now();N=E;var D=!0;try{t:{v=!1,y&&(y=!1,m(M),M=-1),d=!0;var A=f;try{e:{for(S(E),g=a(c);g!==null&&!(g.expirationTime>E&&C());){var Q=g.callback;if(typeof Q=="function"){g.callback=null,f=g.priorityLevel;var at=Q(g.expirationTime<=E);if(E=t.unstable_now(),typeof at=="function"){g.callback=at,S(E),D=!0;break e}g===a(c)&&n(c),S(E)}else n(c);g=a(c)}if(g!==null)D=!0;else{var vt=a(u);vt!==null&&st(T,vt.startTime-E),D=!1}}break t}finally{g=null,f=A,d=!1}D=void 0}}finally{D?P():j=!1}}}var P;if(typeof b=="function")P=function(){b(O)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,yt=rt.port2;rt.port1.onmessage=O,P=function(){yt.postMessage(null)}}else P=function(){p(O,0)};function st(E,D){M=p(function(){E(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(E){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var A=f;f=D;try{return E()}finally{f=A}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(E,D){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var A=f;f=E;try{return D()}finally{f=A}},t.unstable_scheduleCallback=function(E,D,A){var Q=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?Q+A:Q):A=Q,E){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=A+at,E={id:h++,callback:D,priorityLevel:E,startTime:A,expirationTime:at,sortIndex:-1},A>Q?(E.sortIndex=A,e(u,E),a(c)===null&&E===a(u)&&(y?(m(M),M=-1):y=!0,st(T,A-Q))):(E.sortIndex=at,e(c,E),v||d||(v=!0,j||(j=!0,P()))),E},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(E){var D=f;return function(){var A=f;f=D;try{return E.apply(this,arguments)}finally{f=A}}}})(id);ld.exports=id;var V0=ld.exports,sd={exports:{}},ce={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0=V;function rd(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ya(){}var re={d:{f:ya,r:function(){throw Error(rd(522))},D:ya,C:ya,L:ya,m:ya,X:ya,S:ya,M:ya},p:0,findDOMNode:null},L0=Symbol.for("react.portal");function X0(t,e,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L0,key:n==null?null:""+n,children:t,containerInfo:e,implementation:a}}var zl=Y0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function qs(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}ce.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re;ce.createPortal=function(t,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(rd(299));return X0(t,e,null,a)};ce.flushSync=function(t){var e=zl.T,a=re.p;try{if(zl.T=null,re.p=2,t)return t()}finally{zl.T=e,re.p=a,re.d.f()}};ce.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,re.d.C(t,e))};ce.prefetchDNS=function(t){typeof t=="string"&&re.d.D(t)};ce.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var a=e.as,n=qs(a,e.crossOrigin),l=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;a==="style"?re.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:n,integrity:l,fetchPriority:i}):a==="script"&&re.d.X(t,{crossOrigin:n,integrity:l,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};ce.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var a=qs(e.as,e.crossOrigin);re.d.M(t,{crossOrigin:a,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&re.d.M(t)};ce.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var a=e.as,n=qs(a,e.crossOrigin);re.d.L(t,a,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};ce.preloadModule=function(t,e){if(typeof t=="string")if(e){var a=qs(e.as,e.crossOrigin);re.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:a,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else re.d.m(t)};ce.requestFormReset=function(t){re.d.r(t)};ce.unstable_batchedUpdates=function(t,e){return t(e)};ce.useFormState=function(t,e,a){return zl.H.useFormState(t,e,a)};ce.useFormStatus=function(){return zl.H.useHostTransitionStatus()};ce.version="19.2.4";function cd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cd)}catch(t){console.error(t)}}cd(),sd.exports=ce;var Q0=sd.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=V0,od=V,Z0=Q0;function _(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ud(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function si(t){var e=t,a=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(a=e.return),t=e.return;while(t)}return e.tag===3?a:null}function fd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dd(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fu(t){if(si(t)!==t)throw Error(_(188))}function F0(t){var e=t.alternate;if(!e){if(e=si(t),e===null)throw Error(_(188));return e!==t?null:t}for(var a=t,n=e;;){var l=a.return;if(l===null)break;var i=l.alternate;if(i===null){if(n=l.return,n!==null){a=n;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===a)return fu(l),t;if(i===n)return fu(l),e;i=i.sibling}throw Error(_(188))}if(a.return!==n.return)a=l,n=i;else{for(var s=!1,r=l.child;r;){if(r===a){s=!0,a=l,n=i;break}if(r===n){s=!0,n=l,a=i;break}r=r.sibling}if(!s){for(r=i.child;r;){if(r===a){s=!0,a=i,n=l;break}if(r===n){s=!0,n=i,a=l;break}r=r.sibling}if(!s)throw Error(_(189))}}if(a.alternate!==n)throw Error(_(190))}if(a.tag!==3)throw Error(_(188));return a.stateNode.current===a?t:e}function hd(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=hd(t),e!==null)return e;t=t.sibling}return null}var Ut=Object.assign,K0=Symbol.for("react.element"),Si=Symbol.for("react.transitional.element"),Ml=Symbol.for("react.portal"),_n=Symbol.for("react.fragment"),md=Symbol.for("react.strict_mode"),ac=Symbol.for("react.profiler"),gd=Symbol.for("react.consumer"),sa=Symbol.for("react.context"),ro=Symbol.for("react.forward_ref"),nc=Symbol.for("react.suspense"),lc=Symbol.for("react.suspense_list"),co=Symbol.for("react.memo"),Sa=Symbol.for("react.lazy"),ic=Symbol.for("react.activity"),J0=Symbol.for("react.memo_cache_sentinel"),du=Symbol.iterator;function pl(t){return t===null||typeof t!="object"?null:(t=du&&t[du]||t["@@iterator"],typeof t=="function"?t:null)}var I0=Symbol.for("react.client.reference");function sc(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I0?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _n:return"Fragment";case ac:return"Profiler";case md:return"StrictMode";case nc:return"Suspense";case lc:return"SuspenseList";case ic:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Ml:return"Portal";case sa:return t.displayName||"Context";case gd:return(t._context.displayName||"Context")+".Consumer";case ro:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case co:return e=t.displayName||null,e!==null?e:sc(t.type)||"Memo";case Sa:e=t._payload,t=t._init;try{return sc(t(e))}catch{}}return null}var Nl=Array.isArray,tt=od.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,St=Z0.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,an={pending:!1,data:null,method:null,action:null},rc=[],En=-1;function Ke(t){return{current:t}}function $t(t){0>En||(t.current=rc[En],rc[En]=null,En--)}function Et(t,e){En++,rc[En]=t.current,t.current=e}var Ze=Ke(null),Ql=Ke(null),Ca=Ke(null),ls=Ke(null);function is(t,e){switch(Et(Ca,e),Et(Ql,t),Et(Ze,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?vf(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=vf(e),t=Um(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$t(Ze),Et(Ze,t)}function Jn(){$t(Ze),$t(Ql),$t(Ca)}function cc(t){t.memoizedState!==null&&Et(ls,t);var e=Ze.current,a=Um(e,t.type);e!==a&&(Et(Ql,t),Et(Ze,a))}function ss(t){Ql.current===t&&($t(Ze),$t(Ql)),ls.current===t&&($t(ls),ai._currentValue=an)}var fr,hu;function Pa(t){if(fr===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);fr=e&&e[1]||"",hu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fr+t+hu}var dr=!1;function hr(t,e){if(!t||dr)return"";dr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(d){var f=d}Reflect.construct(t,[],g)}else{try{g.call()}catch(d){f=d}t.call(g.prototype)}}else{try{throw Error()}catch(d){f=d}(g=t())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(d){if(d&&f&&typeof d.stack=="string")return[d.stack,f.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),s=i[0],r=i[1];if(s&&r){var c=s.split(`
`),u=r.split(`
`);for(l=n=0;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;for(;l<u.length&&!u[l].includes("DetermineComponentFrameRoot");)l++;if(n===c.length||l===u.length)for(n=c.length-1,l=u.length-1;1<=n&&0<=l&&c[n]!==u[l];)l--;for(;1<=n&&0<=l;n--,l--)if(c[n]!==u[l]){if(n!==1||l!==1)do if(n--,l--,0>l||c[n]!==u[l]){var h=`
`+c[n].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=n&&0<=l);break}}}finally{dr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Pa(a):""}function P0(t,e){switch(t.tag){case 26:case 27:case 5:return Pa(t.type);case 16:return Pa("Lazy");case 13:return t.child!==e&&e!==null?Pa("Suspense Fallback"):Pa("Suspense");case 19:return Pa("SuspenseList");case 0:case 15:return hr(t.type,!1);case 11:return hr(t.type.render,!1);case 1:return hr(t.type,!0);case 31:return Pa("Activity");default:return""}}function mu(t){try{var e="",a=null;do e+=P0(t,a),a=t,t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var oc=Object.prototype.hasOwnProperty,oo=Jt.unstable_scheduleCallback,mr=Jt.unstable_cancelCallback,W0=Jt.unstable_shouldYield,$0=Jt.unstable_requestPaint,Te=Jt.unstable_now,tg=Jt.unstable_getCurrentPriorityLevel,pd=Jt.unstable_ImmediatePriority,bd=Jt.unstable_UserBlockingPriority,rs=Jt.unstable_NormalPriority,eg=Jt.unstable_LowPriority,yd=Jt.unstable_IdlePriority,ag=Jt.log,ng=Jt.unstable_setDisableYieldValue,ri=null,Me=null;function ka(t){if(typeof ag=="function"&&ng(t),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(ri,t)}catch{}}var Ne=Math.clz32?Math.clz32:sg,lg=Math.log,ig=Math.LN2;function sg(t){return t>>>=0,t===0?32:31-(lg(t)/ig|0)|0}var wi=256,Ti=262144,Mi=4194304;function Wa(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vs(t,e,a){var n=t.pendingLanes;if(n===0)return 0;var l=0,i=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var r=n&134217727;return r!==0?(n=r&~i,n!==0?l=Wa(n):(s&=r,s!==0?l=Wa(s):a||(a=r&~t,a!==0&&(l=Wa(a))))):(r=n&~i,r!==0?l=Wa(r):s!==0?l=Wa(s):a||(a=n&~t,a!==0&&(l=Wa(a)))),l===0?0:e!==0&&e!==l&&!(e&i)&&(i=l&-l,a=e&-e,i>=a||i===32&&(a&4194048)!==0)?e:l}function ci(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function rg(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vd(){var t=Mi;return Mi<<=1,!(Mi&62914560)&&(Mi=4194304),t}function gr(t){for(var e=[],a=0;31>a;a++)e.push(t);return e}function oi(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function cg(t,e,a,n,l,i){var s=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var r=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(a=s&~a;0<a;){var h=31-Ne(a),g=1<<h;r[h]=0,c[h]=-1;var f=u[h];if(f!==null)for(u[h]=null,h=0;h<f.length;h++){var d=f[h];d!==null&&(d.lane&=-536870913)}a&=~g}n!==0&&xd(t,n,0),i!==0&&l===0&&t.tag!==0&&(t.suspendedLanes|=i&~(s&~e))}function xd(t,e,a){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-Ne(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|a&261930}function Sd(t,e){var a=t.entangledLanes|=e;for(t=t.entanglements;a;){var n=31-Ne(a),l=1<<n;l&e|t[n]&e&&(t[n]|=e),a&=~l}}function wd(t,e){var a=e&-e;return a=a&42?1:uo(a),a&(t.suspendedLanes|e)?0:a}function uo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function fo(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Td(){var t=St.p;return t!==0?t:(t=window.event,t===void 0?32:Zm(t.type))}function gu(t,e){var a=St.p;try{return St.p=t,e()}finally{St.p=a}}var Za=Math.random().toString(36).slice(2),ae="__reactFiber$"+Za,ge="__reactProps$"+Za,rl="__reactContainer$"+Za,uc="__reactEvents$"+Za,og="__reactListeners$"+Za,ug="__reactHandles$"+Za,pu="__reactResources$"+Za,ui="__reactMarker$"+Za;function ho(t){delete t[ae],delete t[ge],delete t[uc],delete t[og],delete t[ug]}function Cn(t){var e=t[ae];if(e)return e;for(var a=t.parentNode;a;){if(e=a[rl]||a[ae]){if(a=e.alternate,e.child!==null||a!==null&&a.child!==null)for(t=Mf(t);t!==null;){if(a=t[ae])return a;t=Mf(t)}return e}t=a,a=t.parentNode}return null}function cl(t){if(t=t[ae]||t[rl]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function jl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(_(33))}function Yn(t){var e=t[pu];return e||(e=t[pu]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Wt(t){t[ui]=!0}var Md=new Set,Nd={};function mn(t,e){In(t,e),In(t+"Capture",e)}function In(t,e){for(Nd[t]=e,t=0;t<e.length;t++)Md.add(e[t])}var fg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bu={},yu={};function dg(t){return oc.call(yu,t)?!0:oc.call(bu,t)?!1:fg.test(t)?yu[t]=!0:(bu[t]=!0,!1)}function Yi(t,e,a){if(dg(e))if(a===null)t.removeAttribute(e);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+a)}}function Ni(t,e,a){if(a===null)t.removeAttribute(e);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+a)}}function We(t,e,a,n){if(n===null)t.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(e,a,""+n)}}function _e(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hg(t,e,a){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(s){a=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(s){a=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fc(t){if(!t._valueTracker){var e=jd(t)?"checked":"value";t._valueTracker=hg(t,e,""+t[e])}}function kd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var a=e.getValue(),n="";return t&&(n=jd(t)?t.checked?"true":"false":t.value),t=n,t!==a?(e.setValue(t),!0):!1}function cs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var mg=/[\n"\\]/g;function Oe(t){return t.replace(mg,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function dc(t,e,a,n,l,i,s,r){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+_e(e)):t.value!==""+_e(e)&&(t.value=""+_e(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?hc(t,s,_e(e)):a!=null?hc(t,s,_e(a)):n!=null&&t.removeAttribute("value"),l==null&&i!=null&&(t.defaultChecked=!!i),l!=null&&(t.checked=l&&typeof l!="function"&&typeof l!="symbol"),r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.name=""+_e(r):t.removeAttribute("name")}function Ad(t,e,a,n,l,i,s,r){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||a!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){fc(t);return}a=a!=null?""+_e(a):"",e=e!=null?""+_e(e):a,r||e===t.value||(t.value=e),t.defaultValue=e}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,t.checked=r?t.checked:!!n,t.defaultChecked=!!n,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s),fc(t)}function hc(t,e,a){e==="number"&&cs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ln(t,e,a,n){if(t=t.options,e){e={};for(var l=0;l<a.length;l++)e["$"+a[l]]=!0;for(a=0;a<t.length;a++)l=e.hasOwnProperty("$"+t[a].value),t[a].selected!==l&&(t[a].selected=l),l&&n&&(t[a].defaultSelected=!0)}else{for(a=""+_e(a),e=null,l=0;l<t.length;l++){if(t[l].value===a){t[l].selected=!0,n&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function zd(t,e,a){if(e!=null&&(e=""+_e(e),e!==t.value&&(t.value=e),a==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=a!=null?""+_e(a):""}function _d(t,e,a,n){if(e==null){if(n!=null){if(a!=null)throw Error(_(92));if(Nl(n)){if(1<n.length)throw Error(_(93));n=n[0]}a=n}a==null&&(a=""),e=a}a=_e(e),t.defaultValue=a,n=t.textContent,n===a&&n!==""&&n!==null&&(t.value=n),fc(t)}function Pn(t,e){if(e){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=e;return}}t.textContent=e}var gg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vu(t,e,a){var n=e.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":n?t.setProperty(e,a):typeof a!="number"||a===0||gg.has(e)?e==="float"?t.cssFloat=a:t[e]=(""+a).trim():t[e]=a+"px"}function Ed(t,e,a){if(e!=null&&typeof e!="object")throw Error(_(62));if(t=t.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="");for(var l in e)n=e[l],e.hasOwnProperty(l)&&a[l]!==n&&vu(t,l,n)}else for(var i in e)e.hasOwnProperty(i)&&vu(t,i,e[i])}function mo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Li(t){return bg.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ra(){}var mc=null;function go(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var On=null,Xn=null;function xu(t){var e=cl(t);if(e&&(t=e.stateNode)){var a=t[ge]||null;t:switch(t=e.stateNode,e.type){case"input":if(dc(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),e=a.name,a.type==="radio"&&e!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Oe(""+e)+'"][type="radio"]'),e=0;e<a.length;e++){var n=a[e];if(n!==t&&n.form===t.form){var l=n[ge]||null;if(!l)throw Error(_(90));dc(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(e=0;e<a.length;e++)n=a[e],n.form===t.form&&kd(n)}break t;case"textarea":zd(t,a.value,a.defaultValue);break t;case"select":e=a.value,e!=null&&Ln(t,!!a.multiple,e,!1)}}}var pr=!1;function Cd(t,e,a){if(pr)return t(e,a);pr=!0;try{var n=t(e);return n}finally{if(pr=!1,(On!==null||Xn!==null)&&($s(),On&&(e=On,t=Xn,Xn=On=null,xu(e),t)))for(e=0;e<t.length;e++)xu(t[e])}}function Zl(t,e){var a=t.stateNode;if(a===null)return null;var n=a[ge]||null;if(n===null)return null;a=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break t;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(_(231,e,typeof a));return a}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(da)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){gc=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{gc=!1}var Aa=null,po=null,Xi=null;function Od(){if(Xi)return Xi;var t,e=po,a=e.length,n,l="value"in Aa?Aa.value:Aa.textContent,i=l.length;for(t=0;t<a&&e[t]===l[t];t++);var s=a-t;for(n=1;n<=s&&e[a-n]===l[i-n];n++);return Xi=l.slice(t,1<n?1-n:void 0)}function Qi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ji(){return!0}function Su(){return!1}function pe(t){function e(a,n,l,i,s){this._reactName=a,this._targetInst=l,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var r in t)t.hasOwnProperty(r)&&(a=t[r],this[r]=a?a(i):i[r]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ji:Su,this.isPropagationStopped=Su,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),e}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=pe(gn),fi=Ut({},gn,{view:0,detail:0}),yg=pe(fi),br,yr,yl,Ls=Ut({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(br=t.screenX-yl.screenX,yr=t.screenY-yl.screenY):yr=br=0,yl=t),br)},movementY:function(t){return"movementY"in t?t.movementY:yr}}),wu=pe(Ls),vg=Ut({},Ls,{dataTransfer:0}),xg=pe(vg),Sg=Ut({},fi,{relatedTarget:0}),vr=pe(Sg),wg=Ut({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tg=pe(wg),Mg=Ut({},gn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ng=pe(Mg),jg=Ut({},gn,{data:0}),Tu=pe(jg),kg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _g(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zg[t])?!!e[t]:!1}function bo(){return _g}var Eg=Ut({},fi,{key:function(t){if(t.key){var e=kg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ag[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bo,charCode:function(t){return t.type==="keypress"?Qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cg=pe(Eg),Og=Ut({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mu=pe(Og),Dg=Ut({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bo}),Ug=pe(Dg),Rg=Ut({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bg=pe(Rg),Hg=Ut({},Ls,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gg=pe(Hg),qg=Ut({},gn,{newState:0,oldState:0}),Vg=pe(qg),Yg=[9,13,27,32],yo=da&&"CompositionEvent"in window,_l=null;da&&"documentMode"in document&&(_l=document.documentMode);var Lg=da&&"TextEvent"in window&&!_l,Dd=da&&(!yo||_l&&8<_l&&11>=_l),Nu=" ",ju=!1;function Ud(t,e){switch(t){case"keyup":return Yg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dn=!1;function Xg(t,e){switch(t){case"compositionend":return Rd(e);case"keypress":return e.which!==32?null:(ju=!0,Nu);case"textInput":return t=e.data,t===Nu&&ju?null:t;default:return null}}function Qg(t,e){if(Dn)return t==="compositionend"||!yo&&Ud(t,e)?(t=Od(),Xi=po=Aa=null,Dn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dd&&e.locale!=="ko"?null:e.data;default:return null}}var Zg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zg[t.type]:e==="textarea"}function Bd(t,e,a,n){On?Xn?Xn.push(n):Xn=[n]:On=n,e=js(e,"onChange"),0<e.length&&(a=new Ys("onChange","change",null,a,n),t.push({event:a,listeners:e}))}var El=null,Fl=null;function Fg(t){Cm(t,0)}function Xs(t){var e=jl(t);if(kd(e))return t}function Au(t,e){if(t==="change")return e}var Hd=!1;if(da){var xr;if(da){var Sr="oninput"in document;if(!Sr){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),Sr=typeof zu.oninput=="function"}xr=Sr}else xr=!1;Hd=xr&&(!document.documentMode||9<document.documentMode)}function _u(){El&&(El.detachEvent("onpropertychange",Gd),Fl=El=null)}function Gd(t){if(t.propertyName==="value"&&Xs(Fl)){var e=[];Bd(e,Fl,t,go(t)),Cd(Fg,e)}}function Kg(t,e,a){t==="focusin"?(_u(),El=e,Fl=a,El.attachEvent("onpropertychange",Gd)):t==="focusout"&&_u()}function Jg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xs(Fl)}function Ig(t,e){if(t==="click")return Xs(e)}function Pg(t,e){if(t==="input"||t==="change")return Xs(e)}function Wg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ke=typeof Object.is=="function"?Object.is:Wg;function Kl(t,e){if(ke(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var a=Object.keys(t),n=Object.keys(e);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var l=a[n];if(!oc.call(e,l)||!ke(t[l],e[l]))return!1}return!0}function Eu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cu(t,e){var a=Eu(t);t=0;for(var n;a;){if(a.nodeType===3){if(n=t+a.textContent.length,t<=e&&n>=e)return{node:a,offset:e-t};t=n}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Eu(a)}}function qd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=cs(t.document);e instanceof t.HTMLIFrameElement;){try{var a=typeof e.contentWindow.location.href=="string"}catch{a=!1}if(a)t=e.contentWindow;else break;e=cs(t.document)}return e}function vo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var $g=da&&"documentMode"in document&&11>=document.documentMode,Un=null,pc=null,Cl=null,bc=!1;function Ou(t,e,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bc||Un==null||Un!==cs(n)||(n=Un,"selectionStart"in n&&vo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cl&&Kl(Cl,n)||(Cl=n,n=js(pc,"onSelect"),0<n.length&&(e=new Ys("onSelect","select",null,e,a),t.push({event:e,listeners:n}),e.target=Un)))}function Ka(t,e){var a={};return a[t.toLowerCase()]=e.toLowerCase(),a["Webkit"+t]="webkit"+e,a["Moz"+t]="moz"+e,a}var Rn={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},wr={},Yd={};da&&(Yd=document.createElement("div").style,"AnimationEvent"in window||(delete Rn.animationend.animation,delete Rn.animationiteration.animation,delete Rn.animationstart.animation),"TransitionEvent"in window||delete Rn.transitionend.transition);function pn(t){if(wr[t])return wr[t];if(!Rn[t])return t;var e=Rn[t],a;for(a in e)if(e.hasOwnProperty(a)&&a in Yd)return wr[t]=e[a];return t}var Ld=pn("animationend"),Xd=pn("animationiteration"),Qd=pn("animationstart"),tp=pn("transitionrun"),ep=pn("transitionstart"),ap=pn("transitioncancel"),Zd=pn("transitionend"),Fd=new Map,yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yc.push("scrollEnd");function Ye(t,e){Fd.set(t,e),mn(e,[t])}var os=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ze=[],Bn=0,xo=0;function Qs(){for(var t=Bn,e=xo=Bn=0;e<t;){var a=ze[e];ze[e++]=null;var n=ze[e];ze[e++]=null;var l=ze[e];ze[e++]=null;var i=ze[e];if(ze[e++]=null,n!==null&&l!==null){var s=n.pending;s===null?l.next=l:(l.next=s.next,s.next=l),n.pending=l}i!==0&&Kd(a,l,i)}}function Zs(t,e,a,n){ze[Bn++]=t,ze[Bn++]=e,ze[Bn++]=a,ze[Bn++]=n,xo|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function So(t,e,a,n){return Zs(t,e,a,n),us(t)}function bn(t,e){return Zs(t,null,null,e),us(t)}function Kd(t,e,a){t.lanes|=a;var n=t.alternate;n!==null&&(n.lanes|=a);for(var l=!1,i=t.return;i!==null;)i.childLanes|=a,n=i.alternate,n!==null&&(n.childLanes|=a),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(l=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,l&&e!==null&&(l=31-Ne(a),t=i.hiddenUpdates,n=t[l],n===null?t[l]=[e]:n.push(e),e.lane=a|536870912),i):null}function us(t){if(50<Vl)throw Vl=0,Gc=null,Error(_(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Hn={};function np(t,e,a,n){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Se(t,e,a,n){return new np(t,e,a,n)}function wo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oa(t,e){var a=t.alternate;return a===null?(a=Se(t.tag,e,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=e,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,e=t.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Jd(t,e){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,e=a.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Zi(t,e,a,n,l,i){var s=0;if(n=t,typeof t=="function")wo(t)&&(s=1);else if(typeof t=="string")s=cb(t,a,Ze.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case ic:return t=Se(31,a,e,l),t.elementType=ic,t.lanes=i,t;case _n:return nn(a.children,l,i,e);case md:s=8,l|=24;break;case ac:return t=Se(12,a,e,l|2),t.elementType=ac,t.lanes=i,t;case nc:return t=Se(13,a,e,l),t.elementType=nc,t.lanes=i,t;case lc:return t=Se(19,a,e,l),t.elementType=lc,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sa:s=10;break t;case gd:s=9;break t;case ro:s=11;break t;case co:s=14;break t;case Sa:s=16,n=null;break t}s=29,a=Error(_(130,t===null?"null":typeof t,"")),n=null}return e=Se(s,a,e,l),e.elementType=t,e.type=n,e.lanes=i,e}function nn(t,e,a,n){return t=Se(7,t,n,e),t.lanes=a,t}function Tr(t,e,a){return t=Se(6,t,null,e),t.lanes=a,t}function Id(t){var e=Se(18,null,null,0);return e.stateNode=t,e}function Mr(t,e,a){return e=Se(4,t.children!==null?t.children:[],t.key,e),e.lanes=a,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Du=new WeakMap;function De(t,e){if(typeof t=="object"&&t!==null){var a=Du.get(t);return a!==void 0?a:(e={value:t,source:e,stack:mu(e)},Du.set(t,e),e)}return{value:t,source:e,stack:mu(e)}}var Gn=[],qn=0,fs=null,Jl=0,Ee=[],Ce=0,Ya=null,Le=1,Xe="";function la(t,e){Gn[qn++]=Jl,Gn[qn++]=fs,fs=t,Jl=e}function Pd(t,e,a){Ee[Ce++]=Le,Ee[Ce++]=Xe,Ee[Ce++]=Ya,Ya=t;var n=Le;t=Xe;var l=32-Ne(n)-1;n&=~(1<<l),a+=1;var i=32-Ne(e)+l;if(30<i){var s=l-l%5;i=(n&(1<<s)-1).toString(32),n>>=s,l-=s,Le=1<<32-Ne(e)+l|a<<l|n,Xe=i+t}else Le=1<<i|a<<l|n,Xe=t}function To(t){t.return!==null&&(la(t,1),Pd(t,1,0))}function Mo(t){for(;t===fs;)fs=Gn[--qn],Gn[qn]=null,Jl=Gn[--qn],Gn[qn]=null;for(;t===Ya;)Ya=Ee[--Ce],Ee[Ce]=null,Xe=Ee[--Ce],Ee[Ce]=null,Le=Ee[--Ce],Ee[Ce]=null}function Wd(t,e){Ee[Ce++]=Le,Ee[Ce++]=Xe,Ee[Ce++]=Ya,Le=e.id,Xe=e.overflow,Ya=t}var ne=null,Ot=null,pt=!1,Oa=null,Ue=!1,vc=Error(_(519));function La(t){var e=Error(_(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(De(e,t)),vc}function Uu(t){var e=t.stateNode,a=t.type,n=t.memoizedProps;switch(e[ae]=t,e[ge]=n,a){case"dialog":ft("cancel",e),ft("close",e);break;case"iframe":case"object":case"embed":ft("load",e);break;case"video":case"audio":for(a=0;a<ti.length;a++)ft(ti[a],e);break;case"source":ft("error",e);break;case"img":case"image":case"link":ft("error",e),ft("load",e);break;case"details":ft("toggle",e);break;case"input":ft("invalid",e),Ad(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":ft("invalid",e);break;case"textarea":ft("invalid",e),_d(e,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||e.textContent===""+a||n.suppressHydrationWarning===!0||Dm(e.textContent,a)?(n.popover!=null&&(ft("beforetoggle",e),ft("toggle",e)),n.onScroll!=null&&ft("scroll",e),n.onScrollEnd!=null&&ft("scrollend",e),n.onClick!=null&&(e.onclick=ra),e=!0):e=!1,e||La(t,!0)}function Ru(t){for(ne=t.return;ne;)switch(ne.tag){case 5:case 31:case 13:Ue=!1;return;case 27:case 3:Ue=!0;return;default:ne=ne.return}}function xn(t){if(t!==ne)return!1;if(!pt)return Ru(t),pt=!0,!1;var e=t.tag,a;if((a=e!==3&&e!==27)&&((a=e===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Xc(t.type,t.memoizedProps)),a=!a),a&&Ot&&La(t),Ru(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_(317));Ot=Tf(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_(317));Ot=Tf(t)}else e===27?(e=Ot,Fa(t.type)?(t=Kc,Kc=null,Ot=t):Ot=e):Ot=ne?Be(t.stateNode.nextSibling):null;return!0}function cn(){Ot=ne=null,pt=!1}function Nr(){var t=Oa;return t!==null&&(he===null?he=t:he.push.apply(he,t),Oa=null),t}function Il(t){Oa===null?Oa=[t]:Oa.push(t)}var xc=Ke(null),yn=null,ca=null;function Ta(t,e,a){Et(xc,e._currentValue),e._currentValue=a}function ua(t){t._currentValue=xc.current,$t(xc)}function Sc(t,e,a){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===a)break;t=t.return}}function wc(t,e,a,n){var l=t.child;for(l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){var s=l.child;i=i.firstContext;t:for(;i!==null;){var r=i;i=l;for(var c=0;c<e.length;c++)if(r.context===e[c]){i.lanes|=a,r=i.alternate,r!==null&&(r.lanes|=a),Sc(i.return,a,t),n||(s=null);break t}i=r.next}}else if(l.tag===18){if(s=l.return,s===null)throw Error(_(341));s.lanes|=a,i=s.alternate,i!==null&&(i.lanes|=a),Sc(s,a,t),s=null}else s=l.child;if(s!==null)s.return=l;else for(s=l;s!==null;){if(s===t){s=null;break}if(l=s.sibling,l!==null){l.return=s.return,s=l;break}s=s.return}l=s}}function ol(t,e,a,n){t=null;for(var l=e,i=!1;l!==null;){if(!i){if(l.flags&524288)i=!0;else if(l.flags&262144)break}if(l.tag===10){var s=l.alternate;if(s===null)throw Error(_(387));if(s=s.memoizedProps,s!==null){var r=l.type;ke(l.pendingProps.value,s.value)||(t!==null?t.push(r):t=[r])}}else if(l===ls.current){if(s=l.alternate,s===null)throw Error(_(387));s.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(t!==null?t.push(ai):t=[ai])}l=l.return}t!==null&&wc(e,t,a,n),e.flags|=262144}function ds(t){for(t=t.firstContext;t!==null;){if(!ke(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function on(t){yn=t,ca=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function le(t){return $d(yn,t)}function ki(t,e){return yn===null&&on(t),$d(t,e)}function $d(t,e){var a=e._currentValue;if(e={context:e,memoizedValue:a,next:null},ca===null){if(t===null)throw Error(_(308));ca=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ca=ca.next=e;return a}var lp=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(a,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(a){return a()})}},ip=Jt.unstable_scheduleCallback,sp=Jt.unstable_NormalPriority,Qt={$$typeof:sa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function No(){return{controller:new lp,data:new Map,refCount:0}}function di(t){t.refCount--,t.refCount===0&&ip(sp,function(){t.controller.abort()})}var Ol=null,Tc=0,Wn=0,Qn=null;function rp(t,e){if(Ol===null){var a=Ol=[];Tc=0,Wn=Io(),Qn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return Tc++,e.then(Bu,Bu),e}function Bu(){if(--Tc===0&&Ol!==null){Qn!==null&&(Qn.status="fulfilled");var t=Ol;Ol=null,Wn=0,Qn=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function cp(t,e){var a=[],n={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var l=0;l<a.length;l++)(0,a[l])(e)},function(l){for(n.status="rejected",n.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),n}var Hu=tt.S;tt.S=function(t,e){hm=Te(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&rp(t,e),Hu!==null&&Hu(t,e)};var ln=Ke(null);function jo(){var t=ln.current;return t!==null?t:_t.pooledCache}function Fi(t,e){e===null?Et(ln,ln.current):Et(ln,e.pool)}function th(){var t=jo();return t===null?null:{parent:Qt._currentValue,pool:t}}var ul=Error(_(460)),ko=Error(_(474)),Fs=Error(_(542)),hs={then:function(){}};function Gu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function eh(t,e,a){switch(a=t[a],a===void 0?t.push(e):a!==e&&(e.then(ra,ra),e=a),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Vu(t),t;default:if(typeof e.status=="string")e.then(ra,ra);else{if(t=_t,t!==null&&100<t.shellSuspendCounter)throw Error(_(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var l=e;l.status="fulfilled",l.value=n}},function(n){if(e.status==="pending"){var l=e;l.status="rejected",l.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Vu(t),t}throw sn=e,ul}}function $a(t){try{var e=t._init;return e(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(sn=a,ul):a}}var sn=null;function qu(){if(sn===null)throw Error(_(459));var t=sn;return sn=null,t}function Vu(t){if(t===ul||t===Fs)throw Error(_(483))}var Zn=null,Pl=0;function Ai(t){var e=Pl;return Pl+=1,Zn===null&&(Zn=[]),eh(Zn,t,e)}function vl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function zi(t,e){throw e.$$typeof===K0?Error(_(525)):(t=Object.prototype.toString.call(e),Error(_(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function ah(t){function e(p,m){if(t){var b=p.deletions;b===null?(p.deletions=[m],p.flags|=16):b.push(m)}}function a(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function n(p){for(var m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function l(p,m){return p=oa(p,m),p.index=0,p.sibling=null,p}function i(p,m,b){return p.index=b,t?(b=p.alternate,b!==null?(b=b.index,b<m?(p.flags|=67108866,m):b):(p.flags|=67108866,m)):(p.flags|=1048576,m)}function s(p){return t&&p.alternate===null&&(p.flags|=67108866),p}function r(p,m,b,S){return m===null||m.tag!==6?(m=Tr(b,p.mode,S),m.return=p,m):(m=l(m,b),m.return=p,m)}function c(p,m,b,S){var T=b.type;return T===_n?h(p,m,b.props.children,S,b.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Sa&&$a(T)===m.type)?(m=l(m,b.props),vl(m,b),m.return=p,m):(m=Zi(b.type,b.key,b.props,null,p.mode,S),vl(m,b),m.return=p,m)}function u(p,m,b,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Mr(b,p.mode,S),m.return=p,m):(m=l(m,b.children||[]),m.return=p,m)}function h(p,m,b,S,T){return m===null||m.tag!==7?(m=nn(b,p.mode,S,T),m.return=p,m):(m=l(m,b),m.return=p,m)}function g(p,m,b){if(typeof m=="string"&&m!==""||typeof m=="number"||typeof m=="bigint")return m=Tr(""+m,p.mode,b),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Si:return b=Zi(m.type,m.key,m.props,null,p.mode,b),vl(b,m),b.return=p,b;case Ml:return m=Mr(m,p.mode,b),m.return=p,m;case Sa:return m=$a(m),g(p,m,b)}if(Nl(m)||pl(m))return m=nn(m,p.mode,b,null),m.return=p,m;if(typeof m.then=="function")return g(p,Ai(m),b);if(m.$$typeof===sa)return g(p,ki(p,m),b);zi(p,m)}return null}function f(p,m,b,S){var T=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return T!==null?null:r(p,m,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Si:return b.key===T?c(p,m,b,S):null;case Ml:return b.key===T?u(p,m,b,S):null;case Sa:return b=$a(b),f(p,m,b,S)}if(Nl(b)||pl(b))return T!==null?null:h(p,m,b,S,null);if(typeof b.then=="function")return f(p,m,Ai(b),S);if(b.$$typeof===sa)return f(p,m,ki(p,b),S);zi(p,b)}return null}function d(p,m,b,S,T){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return p=p.get(b)||null,r(m,p,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Si:return p=p.get(S.key===null?b:S.key)||null,c(m,p,S,T);case Ml:return p=p.get(S.key===null?b:S.key)||null,u(m,p,S,T);case Sa:return S=$a(S),d(p,m,b,S,T)}if(Nl(S)||pl(S))return p=p.get(b)||null,h(m,p,S,T,null);if(typeof S.then=="function")return d(p,m,b,Ai(S),T);if(S.$$typeof===sa)return d(p,m,b,ki(m,S),T);zi(m,S)}return null}function v(p,m,b,S){for(var T=null,j=null,M=m,x=m=0,N=null;M!==null&&x<b.length;x++){M.index>x?(N=M,M=null):N=M.sibling;var C=f(p,M,b[x],S);if(C===null){M===null&&(M=N);break}t&&M&&C.alternate===null&&e(p,M),m=i(C,m,x),j===null?T=C:j.sibling=C,j=C,M=N}if(x===b.length)return a(p,M),pt&&la(p,x),T;if(M===null){for(;x<b.length;x++)M=g(p,b[x],S),M!==null&&(m=i(M,m,x),j===null?T=M:j.sibling=M,j=M);return pt&&la(p,x),T}for(M=n(M);x<b.length;x++)N=d(M,p,x,b[x],S),N!==null&&(t&&N.alternate!==null&&M.delete(N.key===null?x:N.key),m=i(N,m,x),j===null?T=N:j.sibling=N,j=N);return t&&M.forEach(function(O){return e(p,O)}),pt&&la(p,x),T}function y(p,m,b,S){if(b==null)throw Error(_(151));for(var T=null,j=null,M=m,x=m=0,N=null,C=b.next();M!==null&&!C.done;x++,C=b.next()){M.index>x?(N=M,M=null):N=M.sibling;var O=f(p,M,C.value,S);if(O===null){M===null&&(M=N);break}t&&M&&O.alternate===null&&e(p,M),m=i(O,m,x),j===null?T=O:j.sibling=O,j=O,M=N}if(C.done)return a(p,M),pt&&la(p,x),T;if(M===null){for(;!C.done;x++,C=b.next())C=g(p,C.value,S),C!==null&&(m=i(C,m,x),j===null?T=C:j.sibling=C,j=C);return pt&&la(p,x),T}for(M=n(M);!C.done;x++,C=b.next())C=d(M,p,x,C.value,S),C!==null&&(t&&C.alternate!==null&&M.delete(C.key===null?x:C.key),m=i(C,m,x),j===null?T=C:j.sibling=C,j=C);return t&&M.forEach(function(P){return e(p,P)}),pt&&la(p,x),T}function w(p,m,b,S){if(typeof b=="object"&&b!==null&&b.type===_n&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Si:t:{for(var T=b.key;m!==null;){if(m.key===T){if(T=b.type,T===_n){if(m.tag===7){a(p,m.sibling),S=l(m,b.props.children),S.return=p,p=S;break t}}else if(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Sa&&$a(T)===m.type){a(p,m.sibling),S=l(m,b.props),vl(S,b),S.return=p,p=S;break t}a(p,m);break}else e(p,m);m=m.sibling}b.type===_n?(S=nn(b.props.children,p.mode,S,b.key),S.return=p,p=S):(S=Zi(b.type,b.key,b.props,null,p.mode,S),vl(S,b),S.return=p,p=S)}return s(p);case Ml:t:{for(T=b.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){a(p,m.sibling),S=l(m,b.children||[]),S.return=p,p=S;break t}else{a(p,m);break}else e(p,m);m=m.sibling}S=Mr(b,p.mode,S),S.return=p,p=S}return s(p);case Sa:return b=$a(b),w(p,m,b,S)}if(Nl(b))return v(p,m,b,S);if(pl(b)){if(T=pl(b),typeof T!="function")throw Error(_(150));return b=T.call(b),y(p,m,b,S)}if(typeof b.then=="function")return w(p,m,Ai(b),S);if(b.$$typeof===sa)return w(p,m,ki(p,b),S);zi(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,m!==null&&m.tag===6?(a(p,m.sibling),S=l(m,b),S.return=p,p=S):(a(p,m),S=Tr(b,p.mode,S),S.return=p,p=S),s(p)):a(p,m)}return function(p,m,b,S){try{Pl=0;var T=w(p,m,b,S);return Zn=null,T}catch(M){if(M===ul||M===Fs)throw M;var j=Se(29,M,null,p.mode);return j.lanes=S,j.return=p,j}finally{}}}var un=ah(!0),nh=ah(!1),wa=!1;function Ao(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mc(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Da(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(t,e,a){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,xt&2){var l=n.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),n.pending=e,e=us(t),Kd(t,null,a),e}return Zs(t,n,e,a),us(t)}function Dl(t,e,a){if(e=e.updateQueue,e!==null&&(e=e.shared,(a&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,a|=n,e.lanes=a,Sd(t,a)}}function jr(t,e){var a=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var l=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var s={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};i===null?l=i=s:i=i.next=s,a=a.next}while(a!==null);i===null?l=i=e:i=i.next=e}else l=i=e;a={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=e:t.next=e,a.lastBaseUpdate=e}var Nc=!1;function Ul(){if(Nc){var t=Qn;if(t!==null)throw t}}function Rl(t,e,a,n){Nc=!1;var l=t.updateQueue;wa=!1;var i=l.firstBaseUpdate,s=l.lastBaseUpdate,r=l.shared.pending;if(r!==null){l.shared.pending=null;var c=r,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var h=t.alternate;h!==null&&(h=h.updateQueue,r=h.lastBaseUpdate,r!==s&&(r===null?h.firstBaseUpdate=u:r.next=u,h.lastBaseUpdate=c))}if(i!==null){var g=l.baseState;s=0,h=u=c=null,r=i;do{var f=r.lane&-536870913,d=f!==r.lane;if(d?(ht&f)===f:(n&f)===f){f!==0&&f===Wn&&(Nc=!0),h!==null&&(h=h.next={lane:0,tag:r.tag,payload:r.payload,callback:null,next:null});t:{var v=t,y=r;f=e;var w=a;switch(y.tag){case 1:if(v=y.payload,typeof v=="function"){g=v.call(w,g,f);break t}g=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(w,g,f):v,f==null)break t;g=Ut({},g,f);break t;case 2:wa=!0}}f=r.callback,f!==null&&(t.flags|=64,d&&(t.flags|=8192),d=l.callbacks,d===null?l.callbacks=[f]:d.push(f))}else d={lane:f,tag:r.tag,payload:r.payload,callback:r.callback,next:null},h===null?(u=h=d,c=g):h=h.next=d,s|=f;if(r=r.next,r===null){if(r=l.shared.pending,r===null)break;d=r,r=d.next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}while(!0);h===null&&(c=g),l.baseState=c,l.firstBaseUpdate=u,l.lastBaseUpdate=h,i===null&&(l.shared.lanes=0),Qa|=s,t.lanes=s,t.memoizedState=g}}function lh(t,e){if(typeof t!="function")throw Error(_(191,t));t.call(e)}function ih(t,e){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)lh(a[t],e)}var $n=Ke(null),ms=Ke(0);function Yu(t,e){t=pa,Et(ms,t),Et($n,e),pa=t|e.baseLanes}function jc(){Et(ms,pa),Et($n,$n.current)}function zo(){pa=ms.current,$t($n),$t(ms)}var Ae=Ke(null),Re=null;function Ma(t){var e=t.alternate;Et(qt,qt.current&1),Et(Ae,t),Re===null&&(e===null||$n.current!==null||e.memoizedState!==null)&&(Re=t)}function kc(t){Et(qt,qt.current),Et(Ae,t),Re===null&&(Re=t)}function sh(t){t.tag===22?(Et(qt,qt.current),Et(Ae,t),Re===null&&(Re=t)):Na()}function Na(){Et(qt,qt.current),Et(Ae,Ae.current)}function xe(t){$t(Ae),Re===t&&(Re=null),$t(qt)}var qt=Ke(0);function gs(t){for(var e=t;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Zc(a)||Fc(a)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ha=0,lt=null,At=null,Lt=null,ps=!1,Fn=!1,fn=!1,bs=0,Wl=0,Kn=null,op=0;function Ht(){throw Error(_(321))}function _o(t,e){if(e===null)return!1;for(var a=0;a<e.length&&a<t.length;a++)if(!ke(t[a],e[a]))return!1;return!0}function Eo(t,e,a,n,l,i){return ha=i,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tt.H=t===null||t.memoizedState===null?Bh:Yo,fn=!1,i=a(n,l),fn=!1,Fn&&(i=ch(e,a,n,l)),rh(t),i}function rh(t){tt.H=$l;var e=At!==null&&At.next!==null;if(ha=0,Lt=At=lt=null,ps=!1,Wl=0,Kn=null,e)throw Error(_(300));t===null||Zt||(t=t.dependencies,t!==null&&ds(t)&&(Zt=!0))}function ch(t,e,a,n){lt=t;var l=0;do{if(Fn&&(Kn=null),Wl=0,Fn=!1,25<=l)throw Error(_(301));if(l+=1,Lt=At=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}tt.H=Hh,i=e(a,n)}while(Fn);return i}function up(){var t=tt.H,e=t.useState()[0];return e=typeof e.then=="function"?hi(e):e,t=t.useState()[0],(At!==null?At.memoizedState:null)!==t&&(lt.flags|=1024),e}function Co(){var t=bs!==0;return bs=0,t}function Oo(t,e,a){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a}function Do(t){if(ps){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}ps=!1}ha=0,Lt=At=lt=null,Fn=!1,Wl=bs=0,Kn=null}function se(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?lt.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function Vt(){if(At===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Lt===null?lt.memoizedState:Lt.next;if(e!==null)Lt=e,At=t;else{if(t===null)throw lt.alternate===null?Error(_(467)):Error(_(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Lt===null?lt.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function Ks(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hi(t){var e=Wl;return Wl+=1,Kn===null&&(Kn=[]),t=eh(Kn,t,e),e=lt,(Lt===null?e.memoizedState:Lt.next)===null&&(e=e.alternate,tt.H=e===null||e.memoizedState===null?Bh:Yo),t}function Js(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hi(t);if(t.$$typeof===sa)return le(t)}throw Error(_(438,String(t)))}function Uo(t){var e=null,a=lt.updateQueue;if(a!==null&&(e=a.memoCache),e==null){var n=lt.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(l){return l.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),a===null&&(a=Ks(),lt.updateQueue=a),a.memoCache=e,a=e.data[e.index],a===void 0)for(a=e.data[e.index]=Array(t),n=0;n<t;n++)a[n]=J0;return e.index++,a}function ma(t,e){return typeof e=="function"?e(t):e}function Ki(t){var e=Vt();return Ro(e,At,t)}function Ro(t,e,a){var n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=a;var l=t.baseQueue,i=n.pending;if(i!==null){if(l!==null){var s=l.next;l.next=i.next,i.next=s}e.baseQueue=l=i,n.pending=null}if(i=t.baseState,l===null)t.memoizedState=i;else{e=l.next;var r=s=null,c=null,u=e,h=!1;do{var g=u.lane&-536870913;if(g!==u.lane?(ht&g)===g:(ha&g)===g){var f=u.revertLane;if(f===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),g===Wn&&(h=!0);else if((ha&f)===f){u=u.next,f===Wn&&(h=!0);continue}else g={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(r=c=g,s=i):c=c.next=g,lt.lanes|=f,Qa|=f;g=u.action,fn&&a(i,g),i=u.hasEagerState?u.eagerState:a(i,g)}else f={lane:g,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(r=c=f,s=i):c=c.next=f,lt.lanes|=g,Qa|=g;u=u.next}while(u!==null&&u!==e);if(c===null?s=i:c.next=r,!ke(i,t.memoizedState)&&(Zt=!0,h&&(a=Qn,a!==null)))throw a;t.memoizedState=i,t.baseState=s,t.baseQueue=c,n.lastRenderedState=i}return l===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function kr(t){var e=Vt(),a=e.queue;if(a===null)throw Error(_(311));a.lastRenderedReducer=t;var n=a.dispatch,l=a.pending,i=e.memoizedState;if(l!==null){a.pending=null;var s=l=l.next;do i=t(i,s.action),s=s.next;while(s!==l);ke(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),a.lastRenderedState=i}return[i,n]}function oh(t,e,a){var n=lt,l=Vt(),i=pt;if(i){if(a===void 0)throw Error(_(407));a=a()}else a=e();var s=!ke((At||l).memoizedState,a);if(s&&(l.memoizedState=a,Zt=!0),l=l.queue,Bo(dh.bind(null,n,l,t),[t]),l.getSnapshot!==e||s||Lt!==null&&Lt.memoizedState.tag&1){if(n.flags|=2048,tl(9,{destroy:void 0},fh.bind(null,n,l,a,e),null),_t===null)throw Error(_(349));i||ha&127||uh(n,e,a)}return a}function uh(t,e,a){t.flags|=16384,t={getSnapshot:e,value:a},e=lt.updateQueue,e===null?(e=Ks(),lt.updateQueue=e,e.stores=[t]):(a=e.stores,a===null?e.stores=[t]:a.push(t))}function fh(t,e,a,n){e.value=a,e.getSnapshot=n,hh(e)&&mh(t)}function dh(t,e,a){return a(function(){hh(e)&&mh(t)})}function hh(t){var e=t.getSnapshot;t=t.value;try{var a=e();return!ke(t,a)}catch{return!0}}function mh(t){var e=bn(t,2);e!==null&&me(e,t,2)}function Ac(t){var e=se();if(typeof t=="function"){var a=t;if(t=a(),fn){ka(!0);try{a()}finally{ka(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},e}function gh(t,e,a,n){return t.baseState=a,Ro(t,At,typeof n=="function"?n:ma)}function fp(t,e,a,n,l){if(Ps(t))throw Error(_(485));if(t=e.action,t!==null){var i={payload:l,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){i.listeners.push(s)}};tt.T!==null?a(!0):i.isTransition=!1,n(i),a=e.pending,a===null?(i.next=e.pending=i,ph(e,i)):(i.next=a.next,e.pending=a.next=i)}}function ph(t,e){var a=e.action,n=e.payload,l=t.state;if(e.isTransition){var i=tt.T,s={};tt.T=s;try{var r=a(l,n),c=tt.S;c!==null&&c(s,r),Lu(t,e,r)}catch(u){zc(t,e,u)}finally{i!==null&&s.types!==null&&(i.types=s.types),tt.T=i}}else try{i=a(l,n),Lu(t,e,i)}catch(u){zc(t,e,u)}}function Lu(t,e,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Xu(t,e,n)},function(n){return zc(t,e,n)}):Xu(t,e,a)}function Xu(t,e,a){e.status="fulfilled",e.value=a,bh(e),t.state=a,e=t.pending,e!==null&&(a=e.next,a===e?t.pending=null:(a=a.next,e.next=a,ph(t,a)))}function zc(t,e,a){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=a,bh(e),e=e.next;while(e!==n)}t.action=null}function bh(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function yh(t,e){return e}function Qu(t,e){if(pt){var a=_t.formState;if(a!==null){t:{var n=lt;if(pt){if(Ot){e:{for(var l=Ot,i=Ue;l.nodeType!==8;){if(!i){l=null;break e}if(l=Be(l.nextSibling),l===null){l=null;break e}}i=l.data,l=i==="F!"||i==="F"?l:null}if(l){Ot=Be(l.nextSibling),n=l.data==="F!";break t}}La(n)}n=!1}n&&(e=a[0])}}return a=se(),a.memoizedState=a.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yh,lastRenderedState:e},a.queue=n,a=Dh.bind(null,lt,n),n.dispatch=a,n=Ac(!1),i=Vo.bind(null,lt,!1,n.queue),n=se(),l={state:e,dispatch:null,action:t,pending:null},n.queue=l,a=fp.bind(null,lt,l,i,a),l.dispatch=a,n.memoizedState=t,[e,a,!1]}function Zu(t){var e=Vt();return vh(e,At,t)}function vh(t,e,a){if(e=Ro(t,e,yh)[0],t=Ki(ma)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=hi(e)}catch(s){throw s===ul?Fs:s}else n=e;e=Vt();var l=e.queue,i=l.dispatch;return a!==e.memoizedState&&(lt.flags|=2048,tl(9,{destroy:void 0},dp.bind(null,l,a),null)),[n,i,t]}function dp(t,e){t.action=e}function Fu(t){var e=Vt(),a=At;if(a!==null)return vh(e,a,t);Vt(),e=e.memoizedState,a=Vt();var n=a.queue.dispatch;return a.memoizedState=t,[e,n,!1]}function tl(t,e,a,n){return t={tag:t,create:a,deps:n,inst:e,next:null},e=lt.updateQueue,e===null&&(e=Ks(),lt.updateQueue=e),a=e.lastEffect,a===null?e.lastEffect=t.next=t:(n=a.next,a.next=t,t.next=n,e.lastEffect=t),t}function xh(){return Vt().memoizedState}function Ji(t,e,a,n){var l=se();lt.flags|=t,l.memoizedState=tl(1|e,{destroy:void 0},a,n===void 0?null:n)}function Is(t,e,a,n){var l=Vt();n=n===void 0?null:n;var i=l.memoizedState.inst;At!==null&&n!==null&&_o(n,At.memoizedState.deps)?l.memoizedState=tl(e,i,a,n):(lt.flags|=t,l.memoizedState=tl(1|e,i,a,n))}function Ku(t,e){Ji(8390656,8,t,e)}function Bo(t,e){Is(2048,8,t,e)}function hp(t){lt.flags|=4;var e=lt.updateQueue;if(e===null)e=Ks(),lt.updateQueue=e,e.events=[t];else{var a=e.events;a===null?e.events=[t]:a.push(t)}}function Sh(t){var e=Vt().memoizedState;return hp({ref:e,nextImpl:t}),function(){if(xt&2)throw Error(_(440));return e.impl.apply(void 0,arguments)}}function wh(t,e){return Is(4,2,t,e)}function Th(t,e){return Is(4,4,t,e)}function Mh(t,e){if(typeof e=="function"){t=t();var a=e(t);return function(){typeof a=="function"?a():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Nh(t,e,a){a=a!=null?a.concat([t]):null,Is(4,4,Mh.bind(null,e,t),a)}function Ho(){}function jh(t,e){var a=Vt();e=e===void 0?null:e;var n=a.memoizedState;return e!==null&&_o(e,n[1])?n[0]:(a.memoizedState=[t,e],t)}function kh(t,e){var a=Vt();e=e===void 0?null:e;var n=a.memoizedState;if(e!==null&&_o(e,n[1]))return n[0];if(n=t(),fn){ka(!0);try{t()}finally{ka(!1)}}return a.memoizedState=[n,e],n}function Go(t,e,a){return a===void 0||ha&1073741824&&!(ht&261930)?t.memoizedState=e:(t.memoizedState=a,t=gm(),lt.lanes|=t,Qa|=t,a)}function Ah(t,e,a,n){return ke(a,e)?a:$n.current!==null?(t=Go(t,a,n),ke(t,e)||(Zt=!0),t):!(ha&42)||ha&1073741824&&!(ht&261930)?(Zt=!0,t.memoizedState=a):(t=gm(),lt.lanes|=t,Qa|=t,e)}function zh(t,e,a,n,l){var i=St.p;St.p=i!==0&&8>i?i:8;var s=tt.T,r={};tt.T=r,Vo(t,!1,e,a);try{var c=l(),u=tt.S;if(u!==null&&u(r,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=cp(c,n);Bl(t,e,h,je(t))}else Bl(t,e,n,je(t))}catch(g){Bl(t,e,{then:function(){},status:"rejected",reason:g},je())}finally{St.p=i,s!==null&&r.types!==null&&(s.types=r.types),tt.T=s}}function mp(){}function _c(t,e,a,n){if(t.tag!==5)throw Error(_(476));var l=_h(t).queue;zh(t,l,e,an,a===null?mp:function(){return Eh(t),a(n)})}function _h(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:an,baseState:an,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:an},next:null};var a={};return e.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:a},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Eh(t){var e=_h(t);e.next===null&&(e=t.alternate.memoizedState),Bl(t,e.next.queue,{},je())}function qo(){return le(ai)}function Ch(){return Vt().memoizedState}function Oh(){return Vt().memoizedState}function gp(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var a=je();t=Da(a);var n=Ua(e,t,a);n!==null&&(me(n,e,a),Dl(n,e,a)),e={cache:No()},t.payload=e;return}e=e.return}}function pp(t,e,a){var n=je();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ps(t)?Uh(e,a):(a=So(t,e,a,n),a!==null&&(me(a,t,n),Rh(a,e,n)))}function Dh(t,e,a){var n=je();Bl(t,e,a,n)}function Bl(t,e,a,n){var l={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ps(t))Uh(e,l);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,r=i(s,a);if(l.hasEagerState=!0,l.eagerState=r,ke(r,s))return Zs(t,e,l,0),_t===null&&Qs(),!1}catch{}finally{}if(a=So(t,e,l,n),a!==null)return me(a,t,n),Rh(a,e,n),!0}return!1}function Vo(t,e,a,n){if(n={lane:2,revertLane:Io(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ps(t)){if(e)throw Error(_(479))}else e=So(t,a,n,2),e!==null&&me(e,t,2)}function Ps(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function Uh(t,e){Fn=ps=!0;var a=t.pending;a===null?e.next=e:(e.next=a.next,a.next=e),t.pending=e}function Rh(t,e,a){if(a&4194048){var n=e.lanes;n&=t.pendingLanes,a|=n,e.lanes=a,Sd(t,a)}}var $l={readContext:le,use:Js,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};$l.useEffectEvent=Ht;var Bh={readContext:le,use:Js,useCallback:function(t,e){return se().memoizedState=[t,e===void 0?null:e],t},useContext:le,useEffect:Ku,useImperativeHandle:function(t,e,a){a=a!=null?a.concat([t]):null,Ji(4194308,4,Mh.bind(null,e,t),a)},useLayoutEffect:function(t,e){return Ji(4194308,4,t,e)},useInsertionEffect:function(t,e){Ji(4,2,t,e)},useMemo:function(t,e){var a=se();e=e===void 0?null:e;var n=t();if(fn){ka(!0);try{t()}finally{ka(!1)}}return a.memoizedState=[n,e],n},useReducer:function(t,e,a){var n=se();if(a!==void 0){var l=a(e);if(fn){ka(!0);try{a(e)}finally{ka(!1)}}}else l=e;return n.memoizedState=n.baseState=l,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:l},n.queue=t,t=t.dispatch=pp.bind(null,lt,t),[n.memoizedState,t]},useRef:function(t){var e=se();return t={current:t},e.memoizedState=t},useState:function(t){t=Ac(t);var e=t.queue,a=Dh.bind(null,lt,e);return e.dispatch=a,[t.memoizedState,a]},useDebugValue:Ho,useDeferredValue:function(t,e){var a=se();return Go(a,t,e)},useTransition:function(){var t=Ac(!1);return t=zh.bind(null,lt,t.queue,!0,!1),se().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,a){var n=lt,l=se();if(pt){if(a===void 0)throw Error(_(407));a=a()}else{if(a=e(),_t===null)throw Error(_(349));ht&127||uh(n,e,a)}l.memoizedState=a;var i={value:a,getSnapshot:e};return l.queue=i,Ku(dh.bind(null,n,i,t),[t]),n.flags|=2048,tl(9,{destroy:void 0},fh.bind(null,n,i,a,e),null),a},useId:function(){var t=se(),e=_t.identifierPrefix;if(pt){var a=Xe,n=Le;a=(n&~(1<<32-Ne(n)-1)).toString(32)+a,e="_"+e+"R_"+a,a=bs++,0<a&&(e+="H"+a.toString(32)),e+="_"}else a=op++,e="_"+e+"r_"+a.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:qo,useFormState:Qu,useActionState:Qu,useOptimistic:function(t){var e=se();e.memoizedState=e.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=a,e=Vo.bind(null,lt,!0,a),a.dispatch=e,[t,e]},useMemoCache:Uo,useCacheRefresh:function(){return se().memoizedState=gp.bind(null,lt)},useEffectEvent:function(t){var e=se(),a={impl:t};return e.memoizedState=a,function(){if(xt&2)throw Error(_(440));return a.impl.apply(void 0,arguments)}}},Yo={readContext:le,use:Js,useCallback:jh,useContext:le,useEffect:Bo,useImperativeHandle:Nh,useInsertionEffect:wh,useLayoutEffect:Th,useMemo:kh,useReducer:Ki,useRef:xh,useState:function(){return Ki(ma)},useDebugValue:Ho,useDeferredValue:function(t,e){var a=Vt();return Ah(a,At.memoizedState,t,e)},useTransition:function(){var t=Ki(ma)[0],e=Vt().memoizedState;return[typeof t=="boolean"?t:hi(t),e]},useSyncExternalStore:oh,useId:Ch,useHostTransitionStatus:qo,useFormState:Zu,useActionState:Zu,useOptimistic:function(t,e){var a=Vt();return gh(a,At,t,e)},useMemoCache:Uo,useCacheRefresh:Oh};Yo.useEffectEvent=Sh;var Hh={readContext:le,use:Js,useCallback:jh,useContext:le,useEffect:Bo,useImperativeHandle:Nh,useInsertionEffect:wh,useLayoutEffect:Th,useMemo:kh,useReducer:kr,useRef:xh,useState:function(){return kr(ma)},useDebugValue:Ho,useDeferredValue:function(t,e){var a=Vt();return At===null?Go(a,t,e):Ah(a,At.memoizedState,t,e)},useTransition:function(){var t=kr(ma)[0],e=Vt().memoizedState;return[typeof t=="boolean"?t:hi(t),e]},useSyncExternalStore:oh,useId:Ch,useHostTransitionStatus:qo,useFormState:Fu,useActionState:Fu,useOptimistic:function(t,e){var a=Vt();return At!==null?gh(a,At,t,e):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:Oh};Hh.useEffectEvent=Sh;function Ar(t,e,a,n){e=t.memoizedState,a=a(n,e),a=a==null?e:Ut({},e,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ec={enqueueSetState:function(t,e,a){t=t._reactInternals;var n=je(),l=Da(n);l.payload=e,a!=null&&(l.callback=a),e=Ua(t,l,n),e!==null&&(me(e,t,n),Dl(e,t,n))},enqueueReplaceState:function(t,e,a){t=t._reactInternals;var n=je(),l=Da(n);l.tag=1,l.payload=e,a!=null&&(l.callback=a),e=Ua(t,l,n),e!==null&&(me(e,t,n),Dl(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var a=je(),n=Da(a);n.tag=2,e!=null&&(n.callback=e),e=Ua(t,n,a),e!==null&&(me(e,t,a),Dl(e,t,a))}};function Ju(t,e,a,n,l,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!Kl(a,n)||!Kl(l,i):!0}function Iu(t,e,a,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,n),e.state!==t&&Ec.enqueueReplaceState(e,e.state,null)}function dn(t,e){var a=e;if("ref"in e){a={};for(var n in e)n!=="ref"&&(a[n]=e[n])}if(t=t.defaultProps){a===e&&(a=Ut({},a));for(var l in t)a[l]===void 0&&(a[l]=t[l])}return a}function Gh(t){os(t)}function qh(t){console.error(t)}function Vh(t){os(t)}function ys(t,e){try{var a=t.onUncaughtError;a(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function Pu(t,e,a){try{var n=t.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Cc(t,e,a){return a=Da(a),a.tag=3,a.payload={element:null},a.callback=function(){ys(t,e)},a}function Yh(t){return t=Da(t),t.tag=3,t}function Lh(t,e,a,n){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var i=n.value;t.payload=function(){return l(i)},t.callback=function(){Pu(e,a,n)}}var s=a.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Pu(e,a,n),typeof l!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var r=n.stack;this.componentDidCatch(n.value,{componentStack:r!==null?r:""})})}function bp(t,e,a,n,l){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=a.alternate,e!==null&&ol(e,a,l,!0),a=Ae.current,a!==null){switch(a.tag){case 31:case 13:return Re===null?Ts():a.alternate===null&&Gt===0&&(Gt=3),a.flags&=-257,a.flags|=65536,a.lanes=l,n===hs?a.flags|=16384:(e=a.updateQueue,e===null?a.updateQueue=new Set([n]):e.add(n),Gr(t,n,l)),!1;case 22:return a.flags|=65536,n===hs?a.flags|=16384:(e=a.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=e):(a=e.retryQueue,a===null?e.retryQueue=new Set([n]):a.add(n)),Gr(t,n,l)),!1}throw Error(_(435,a.tag))}return Gr(t,n,l),Ts(),!1}if(pt)return e=Ae.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=l,n!==vc&&(t=Error(_(422),{cause:n}),Il(De(t,a)))):(n!==vc&&(e=Error(_(423),{cause:n}),Il(De(e,a))),t=t.current.alternate,t.flags|=65536,l&=-l,t.lanes|=l,n=De(n,a),l=Cc(t.stateNode,n,l),jr(t,l),Gt!==4&&(Gt=2)),!1;var i=Error(_(520),{cause:n});if(i=De(i,a),ql===null?ql=[i]:ql.push(i),Gt!==4&&(Gt=2),e===null)return!0;n=De(n,a),a=e;do{switch(a.tag){case 3:return a.flags|=65536,t=l&-l,a.lanes|=t,t=Cc(a.stateNode,n,t),jr(a,t),!1;case 1:if(e=a.type,i=a.stateNode,(a.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Ra===null||!Ra.has(i))))return a.flags|=65536,l&=-l,a.lanes|=l,l=Yh(l),Lh(l,t,a,n),jr(a,l),!1}a=a.return}while(a!==null);return!1}var Lo=Error(_(461)),Zt=!1;function ee(t,e,a,n){e.child=t===null?nh(e,null,a,n):un(e,t.child,a,n)}function Wu(t,e,a,n,l){a=a.render;var i=e.ref;if("ref"in n){var s={};for(var r in n)r!=="ref"&&(s[r]=n[r])}else s=n;return on(e),n=Eo(t,e,a,s,i,l),r=Co(),t!==null&&!Zt?(Oo(t,e,l),ga(t,e,l)):(pt&&r&&To(e),e.flags|=1,ee(t,e,n,l),e.child)}function $u(t,e,a,n,l){if(t===null){var i=a.type;return typeof i=="function"&&!wo(i)&&i.defaultProps===void 0&&a.compare===null?(e.tag=15,e.type=i,Xh(t,e,i,n,l)):(t=Zi(a.type,null,n,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!Xo(t,l)){var s=i.memoizedProps;if(a=a.compare,a=a!==null?a:Kl,a(s,n)&&t.ref===e.ref)return ga(t,e,l)}return e.flags|=1,t=oa(i,n),t.ref=e.ref,t.return=e,e.child=t}function Xh(t,e,a,n,l){if(t!==null){var i=t.memoizedProps;if(Kl(i,n)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=n=i,Xo(t,l))t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,ga(t,e,l)}return Oc(t,e,a,n,l)}function Qh(t,e,a,n){var l=n.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|a:a,t!==null){for(n=e.child=t.child,l=0;n!==null;)l=l|n.lanes|n.childLanes,n=n.sibling;n=l&~i}else n=0,e.child=null;return tf(t,e,i,a,n)}if(a&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fi(e,i!==null?i.cachePool:null),i!==null?Yu(e,i):jc(),sh(e);else return n=e.lanes=536870912,tf(t,e,i!==null?i.baseLanes|a:a,a,n)}else i!==null?(Fi(e,i.cachePool),Yu(e,i),Na(),e.memoizedState=null):(t!==null&&Fi(e,null),jc(),Na());return ee(t,e,l,a),e.child}function kl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function tf(t,e,a,n,l){var i=jo();return i=i===null?null:{parent:Qt._currentValue,pool:i},e.memoizedState={baseLanes:a,cachePool:i},t!==null&&Fi(e,null),jc(),sh(e),t!==null&&ol(t,e,n,!0),e.childLanes=l,null}function Ii(t,e){return e=vs({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function ef(t,e,a){return un(e,t.child,null,a),t=Ii(e,e.pendingProps),t.flags|=2,xe(e),e.memoizedState=null,t}function yp(t,e,a){var n=e.pendingProps,l=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(pt){if(n.mode==="hidden")return t=Ii(e,n),e.lanes=536870912,kl(null,t);if(kc(e),(t=Ot)?(t=Bm(t,Ue),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ya!==null?{id:Le,overflow:Xe}:null,retryLane:536870912,hydrationErrors:null},a=Id(t),a.return=e,e.child=a,ne=e,Ot=null)):t=null,t===null)throw La(e);return e.lanes=536870912,null}return Ii(e,n)}var i=t.memoizedState;if(i!==null){var s=i.dehydrated;if(kc(e),l)if(e.flags&256)e.flags&=-257,e=ef(t,e,a);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(_(558));else if(Zt||ol(t,e,a,!1),l=(a&t.childLanes)!==0,Zt||l){if(n=_t,n!==null&&(s=wd(n,a),s!==0&&s!==i.retryLane))throw i.retryLane=s,bn(t,s),me(n,t,s),Lo;Ts(),e=ef(t,e,a)}else t=i.treeContext,Ot=Be(s.nextSibling),ne=e,pt=!0,Oa=null,Ue=!1,t!==null&&Wd(e,t),e=Ii(e,n),e.flags|=4096;return e}return t=oa(t.child,{mode:n.mode,children:n.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Pi(t,e){var a=e.ref;if(a===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(_(284));(t===null||t.ref!==a)&&(e.flags|=4194816)}}function Oc(t,e,a,n,l){return on(e),a=Eo(t,e,a,n,void 0,l),n=Co(),t!==null&&!Zt?(Oo(t,e,l),ga(t,e,l)):(pt&&n&&To(e),e.flags|=1,ee(t,e,a,l),e.child)}function af(t,e,a,n,l,i){return on(e),e.updateQueue=null,a=ch(e,n,a,l),rh(t),n=Co(),t!==null&&!Zt?(Oo(t,e,i),ga(t,e,i)):(pt&&n&&To(e),e.flags|=1,ee(t,e,a,i),e.child)}function nf(t,e,a,n,l){if(on(e),e.stateNode===null){var i=Hn,s=a.contextType;typeof s=="object"&&s!==null&&(i=le(s)),i=new a(n,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ec,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=n,i.state=e.memoizedState,i.refs={},Ao(e),s=a.contextType,i.context=typeof s=="object"&&s!==null?le(s):Hn,i.state=e.memoizedState,s=a.getDerivedStateFromProps,typeof s=="function"&&(Ar(e,a,s,n),i.state=e.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(s=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),s!==i.state&&Ec.enqueueReplaceState(i,i.state,null),Rl(e,n,i,l),Ul(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){i=e.stateNode;var r=e.memoizedProps,c=dn(a,r);i.props=c;var u=i.context,h=a.contextType;s=Hn,typeof h=="object"&&h!==null&&(s=le(h));var g=a.getDerivedStateFromProps;h=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function",r=e.pendingProps!==r,h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r||u!==s)&&Iu(e,i,n,s),wa=!1;var f=e.memoizedState;i.state=f,Rl(e,n,i,l),Ul(),u=e.memoizedState,r||f!==u||wa?(typeof g=="function"&&(Ar(e,a,g,n),u=e.memoizedState),(c=wa||Ju(e,a,c,n,f,u,s))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),i.props=n,i.state=u,i.context=s,n=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Mc(t,e),s=e.memoizedProps,h=dn(a,s),i.props=h,g=e.pendingProps,f=i.context,u=a.contextType,c=Hn,typeof u=="object"&&u!==null&&(c=le(u)),r=a.getDerivedStateFromProps,(u=typeof r=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==g||f!==c)&&Iu(e,i,n,c),wa=!1,f=e.memoizedState,i.state=f,Rl(e,n,i,l),Ul();var d=e.memoizedState;s!==g||f!==d||wa||t!==null&&t.dependencies!==null&&ds(t.dependencies)?(typeof r=="function"&&(Ar(e,a,r,n),d=e.memoizedState),(h=wa||Ju(e,a,h,n,f,d,c)||t!==null&&t.dependencies!==null&&ds(t.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,d,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,d,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=d),i.props=n,i.state=d,i.context=c,n=h):(typeof i.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return i=n,Pi(t,e),n=(e.flags&128)!==0,i||n?(i=e.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&n?(e.child=un(e,t.child,null,l),e.child=un(e,null,a,l)):ee(t,e,a,l),e.memoizedState=i.state,t=e.child):t=ga(t,e,l),t}function lf(t,e,a,n){return cn(),e.flags|=256,ee(t,e,a,n),e.child}var zr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _r(t){return{baseLanes:t,cachePool:th()}}function Er(t,e,a){return t=t!==null?t.childLanes&~a:0,e&&(t|=we),t}function Zh(t,e,a){var n=e.pendingProps,l=!1,i=(e.flags&128)!==0,s;if((s=i)||(s=t!==null&&t.memoizedState===null?!1:(qt.current&2)!==0),s&&(l=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(pt){if(l?Ma(e):Na(),(t=Ot)?(t=Bm(t,Ue),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ya!==null?{id:Le,overflow:Xe}:null,retryLane:536870912,hydrationErrors:null},a=Id(t),a.return=e,e.child=a,ne=e,Ot=null)):t=null,t===null)throw La(e);return Fc(t)?e.lanes=32:e.lanes=536870912,null}var r=n.children;return n=n.fallback,l?(Na(),l=e.mode,r=vs({mode:"hidden",children:r},l),n=nn(n,l,a,null),r.return=e,n.return=e,r.sibling=n,e.child=r,n=e.child,n.memoizedState=_r(a),n.childLanes=Er(t,s,a),e.memoizedState=zr,kl(null,n)):(Ma(e),Dc(e,r))}var c=t.memoizedState;if(c!==null&&(r=c.dehydrated,r!==null)){if(i)e.flags&256?(Ma(e),e.flags&=-257,e=Cr(t,e,a)):e.memoizedState!==null?(Na(),e.child=t.child,e.flags|=128,e=null):(Na(),r=n.fallback,l=e.mode,n=vs({mode:"visible",children:n.children},l),r=nn(r,l,a,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,un(e,t.child,null,a),n=e.child,n.memoizedState=_r(a),n.childLanes=Er(t,s,a),e.memoizedState=zr,e=kl(null,n));else if(Ma(e),Fc(r)){if(s=r.nextSibling&&r.nextSibling.dataset,s)var u=s.dgst;s=u,n=Error(_(419)),n.stack="",n.digest=s,Il({value:n,source:null,stack:null}),e=Cr(t,e,a)}else if(Zt||ol(t,e,a,!1),s=(a&t.childLanes)!==0,Zt||s){if(s=_t,s!==null&&(n=wd(s,a),n!==0&&n!==c.retryLane))throw c.retryLane=n,bn(t,n),me(s,t,n),Lo;Zc(r)||Ts(),e=Cr(t,e,a)}else Zc(r)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Ot=Be(r.nextSibling),ne=e,pt=!0,Oa=null,Ue=!1,t!==null&&Wd(e,t),e=Dc(e,n.children),e.flags|=4096);return e}return l?(Na(),r=n.fallback,l=e.mode,c=t.child,u=c.sibling,n=oa(c,{mode:"hidden",children:n.children}),n.subtreeFlags=c.subtreeFlags&65011712,u!==null?r=oa(u,r):(r=nn(r,l,a,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,kl(null,n),n=e.child,r=t.child.memoizedState,r===null?r=_r(a):(l=r.cachePool,l!==null?(c=Qt._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=th(),r={baseLanes:r.baseLanes|a,cachePool:l}),n.memoizedState=r,n.childLanes=Er(t,s,a),e.memoizedState=zr,kl(t.child,n)):(Ma(e),a=t.child,t=a.sibling,a=oa(a,{mode:"visible",children:n.children}),a.return=e,a.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=a,e.memoizedState=null,a)}function Dc(t,e){return e=vs({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function vs(t,e){return t=Se(22,t,null,e),t.lanes=0,t}function Cr(t,e,a){return un(e,t.child,null,a),t=Dc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sf(t,e,a){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Sc(t.return,e,a)}function Or(t,e,a,n,l,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:l,treeForkCount:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=a,s.tailMode=l,s.treeForkCount=i)}function Fh(t,e,a){var n=e.pendingProps,l=n.revealOrder,i=n.tail;n=n.children;var s=qt.current,r=(s&2)!==0;if(r?(s=s&1|2,e.flags|=128):s&=1,Et(qt,s),ee(t,e,n,a),n=pt?Jl:0,!r&&t!==null&&t.flags&128)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sf(t,a,e);else if(t.tag===19)sf(t,a,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(l){case"forwards":for(a=e.child,l=null;a!==null;)t=a.alternate,t!==null&&gs(t)===null&&(l=a),a=a.sibling;a=l,a===null?(l=e.child,e.child=null):(l=a.sibling,a.sibling=null),Or(e,!1,l,a,i,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&gs(t)===null){e.child=l;break}t=l.sibling,l.sibling=a,a=l,l=t}Or(e,!0,a,null,i,n);break;case"together":Or(e,!1,null,null,void 0,n);break;default:e.memoizedState=null}return e.child}function ga(t,e,a){if(t!==null&&(e.dependencies=t.dependencies),Qa|=e.lanes,!(a&e.childLanes))if(t!==null){if(ol(t,e,a,!1),(a&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(_(153));if(e.child!==null){for(t=e.child,a=oa(t,t.pendingProps),e.child=a,a.return=e;t.sibling!==null;)t=t.sibling,a=a.sibling=oa(t,t.pendingProps),a.return=e;a.sibling=null}return e.child}function Xo(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&ds(t)))}function vp(t,e,a){switch(e.tag){case 3:is(e,e.stateNode.containerInfo),Ta(e,Qt,t.memoizedState.cache),cn();break;case 27:case 5:cc(e);break;case 4:is(e,e.stateNode.containerInfo);break;case 10:Ta(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,kc(e),null;break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(Ma(e),e.flags|=128,null):a&e.child.childLanes?Zh(t,e,a):(Ma(e),t=ga(t,e,a),t!==null?t.sibling:null);Ma(e);break;case 19:var l=(t.flags&128)!==0;if(n=(a&e.childLanes)!==0,n||(ol(t,e,a,!1),n=(a&e.childLanes)!==0),l){if(n)return Fh(t,e,a);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Et(qt,qt.current),n)break;return null;case 22:return e.lanes=0,Qh(t,e,a,e.pendingProps);case 24:Ta(e,Qt,t.memoizedState.cache)}return ga(t,e,a)}function Kh(t,e,a){if(t!==null)if(t.memoizedProps!==e.pendingProps)Zt=!0;else{if(!Xo(t,a)&&!(e.flags&128))return Zt=!1,vp(t,e,a);Zt=!!(t.flags&131072)}else Zt=!1,pt&&e.flags&1048576&&Pd(e,Jl,e.index);switch(e.lanes=0,e.tag){case 16:t:{var n=e.pendingProps;if(t=$a(e.elementType),e.type=t,typeof t=="function")wo(t)?(n=dn(t,n),e.tag=1,e=nf(null,e,t,n,a)):(e.tag=0,e=Oc(null,e,t,n,a));else{if(t!=null){var l=t.$$typeof;if(l===ro){e.tag=11,e=Wu(null,e,t,n,a);break t}else if(l===co){e.tag=14,e=$u(null,e,t,n,a);break t}}throw e=sc(t)||t,Error(_(306,e,""))}}return e;case 0:return Oc(t,e,e.type,e.pendingProps,a);case 1:return n=e.type,l=dn(n,e.pendingProps),nf(t,e,n,l,a);case 3:t:{if(is(e,e.stateNode.containerInfo),t===null)throw Error(_(387));n=e.pendingProps;var i=e.memoizedState;l=i.element,Mc(t,e),Rl(e,n,null,a);var s=e.memoizedState;if(n=s.cache,Ta(e,Qt,n),n!==i.cache&&wc(e,[Qt],a,!0),Ul(),n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=lf(t,e,n,a);break t}else if(n!==l){l=De(Error(_(424)),e),Il(l),e=lf(t,e,n,a);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ot=Be(t.firstChild),ne=e,pt=!0,Oa=null,Ue=!0,a=nh(e,null,n,a),e.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cn(),n===l){e=ga(t,e,a);break t}ee(t,e,n,a)}e=e.child}return e;case 26:return Pi(t,e),t===null?(a=jf(e.type,null,e.pendingProps,null))?e.memoizedState=a:pt||(a=e.type,t=e.pendingProps,n=ks(Ca.current).createElement(a),n[ae]=e,n[ge]=t,ie(n,a,t),Wt(n),e.stateNode=n):e.memoizedState=jf(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return cc(e),t===null&&pt&&(n=e.stateNode=Hm(e.type,e.pendingProps,Ca.current),ne=e,Ue=!0,l=Ot,Fa(e.type)?(Kc=l,Ot=Be(n.firstChild)):Ot=l),ee(t,e,e.pendingProps.children,a),Pi(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&pt&&((l=n=Ot)&&(n=Jp(n,e.type,e.pendingProps,Ue),n!==null?(e.stateNode=n,ne=e,Ot=Be(n.firstChild),Ue=!1,l=!0):l=!1),l||La(e)),cc(e),l=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,n=i.children,Xc(l,i)?n=null:s!==null&&Xc(l,s)&&(e.flags|=32),e.memoizedState!==null&&(l=Eo(t,e,up,null,null,a),ai._currentValue=l),Pi(t,e),ee(t,e,n,a),e.child;case 6:return t===null&&pt&&((t=a=Ot)&&(a=Ip(a,e.pendingProps,Ue),a!==null?(e.stateNode=a,ne=e,Ot=null,t=!0):t=!1),t||La(e)),null;case 13:return Zh(t,e,a);case 4:return is(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=un(e,null,n,a):ee(t,e,n,a),e.child;case 11:return Wu(t,e,e.type,e.pendingProps,a);case 7:return ee(t,e,e.pendingProps,a),e.child;case 8:return ee(t,e,e.pendingProps.children,a),e.child;case 12:return ee(t,e,e.pendingProps.children,a),e.child;case 10:return n=e.pendingProps,Ta(e,e.type,n.value),ee(t,e,n.children,a),e.child;case 9:return l=e.type._context,n=e.pendingProps.children,on(e),l=le(l),n=n(l),e.flags|=1,ee(t,e,n,a),e.child;case 14:return $u(t,e,e.type,e.pendingProps,a);case 15:return Xh(t,e,e.type,e.pendingProps,a);case 19:return Fh(t,e,a);case 31:return yp(t,e,a);case 22:return Qh(t,e,a,e.pendingProps);case 24:return on(e),n=le(Qt),t===null?(l=jo(),l===null&&(l=_t,i=No(),l.pooledCache=i,i.refCount++,i!==null&&(l.pooledCacheLanes|=a),l=i),e.memoizedState={parent:n,cache:l},Ao(e),Ta(e,Qt,l)):(t.lanes&a&&(Mc(t,e),Rl(e,null,null,a),Ul()),l=t.memoizedState,i=e.memoizedState,l.parent!==n?(l={parent:n,cache:n},e.memoizedState=l,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=l),Ta(e,Qt,n)):(n=i.cache,Ta(e,Qt,n),n!==l.cache&&wc(e,[Qt],a,!0))),ee(t,e,e.pendingProps.children,a),e.child;case 29:throw e.pendingProps}throw Error(_(156,e.tag))}function $e(t){t.flags|=4}function Dr(t,e,a,n,l){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(l&335544128)===l)if(t.stateNode.complete)t.flags|=8192;else if(ym())t.flags|=8192;else throw sn=hs,ko}else t.flags&=-16777217}function rf(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Vm(e))if(ym())t.flags|=8192;else throw sn=hs,ko}function _i(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?vd():536870912,t.lanes|=e,el|=e)}function xl(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,a=0,n=0;if(e)for(var l=t.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=n,t.childLanes=a,e}function xp(t,e,a){var n=e.pendingProps;switch(Mo(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return Ct(e),null;case 3:return a=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ua(Qt),Jn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xn(e)?$e(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nr())),Ct(e),null;case 26:var l=e.type,i=e.memoizedState;return t===null?($e(e),i!==null?(Ct(e),rf(e,i)):(Ct(e),Dr(e,l,null,n,a))):i?i!==t.memoizedState?($e(e),Ct(e),rf(e,i)):(Ct(e),e.flags&=-16777217):(t=t.memoizedProps,t!==n&&$e(e),Ct(e),Dr(e,l,t,n,a)),null;case 27:if(ss(e),a=Ca.current,l=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&$e(e);else{if(!n){if(e.stateNode===null)throw Error(_(166));return Ct(e),null}t=Ze.current,xn(e)?Uu(e):(t=Hm(l,n,a),e.stateNode=t,$e(e))}return Ct(e),null;case 5:if(ss(e),l=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&$e(e);else{if(!n){if(e.stateNode===null)throw Error(_(166));return Ct(e),null}if(i=Ze.current,xn(e))Uu(e);else{var s=ks(Ca.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?i.multiple=!0:n.size&&(i.size=n.size);break;default:i=typeof n.is=="string"?s.createElement(l,{is:n.is}):s.createElement(l)}}i[ae]=e,i[ge]=n;t:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=i;t:switch(ie(i,l,n),l){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&$e(e)}}return Ct(e),Dr(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,a),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==n&&$e(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(_(166));if(t=Ca.current,xn(e)){if(t=e.stateNode,a=e.memoizedProps,n=null,l=ne,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}t[ae]=e,t=!!(t.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Dm(t.nodeValue,a)),t||La(e,!0)}else t=ks(t).createTextNode(n),t[ae]=e,e.stateNode=t}return Ct(e),null;case 31:if(a=e.memoizedState,t===null||t.memoizedState!==null){if(n=xn(e),a!==null){if(t===null){if(!n)throw Error(_(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_(557));t[ae]=e}else cn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),t=!1}else a=Nr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return e.flags&256?(xe(e),e):(xe(e),null);if(e.flags&128)throw Error(_(558))}return Ct(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(l=xn(e),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error(_(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(_(317));l[ae]=e}else cn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),l=!1}else l=Nr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),l=!0;if(!l)return e.flags&256?(xe(e),e):(xe(e),null)}return xe(e),e.flags&128?(e.lanes=a,e):(a=n!==null,t=t!==null&&t.memoizedState!==null,a&&(n=e.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==l&&(n.flags|=2048)),a!==t&&a&&(e.child.flags|=8192),_i(e,e.updateQueue),Ct(e),null);case 4:return Jn(),t===null&&Po(e.stateNode.containerInfo),Ct(e),null;case 10:return ua(e.type),Ct(e),null;case 19:if($t(qt),n=e.memoizedState,n===null)return Ct(e),null;if(l=(e.flags&128)!==0,i=n.rendering,i===null)if(l)xl(n,!1);else{if(Gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=gs(t),i!==null){for(e.flags|=128,xl(n,!1),t=i.updateQueue,e.updateQueue=t,_i(e,t),e.subtreeFlags=0,t=a,a=e.child;a!==null;)Jd(a,t),a=a.sibling;return Et(qt,qt.current&1|2),pt&&la(e,n.treeForkCount),e.child}t=t.sibling}n.tail!==null&&Te()>Ss&&(e.flags|=128,l=!0,xl(n,!1),e.lanes=4194304)}else{if(!l)if(t=gs(i),t!==null){if(e.flags|=128,l=!0,t=t.updateQueue,e.updateQueue=t,_i(e,t),xl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!i.alternate&&!pt)return Ct(e),null}else 2*Te()-n.renderingStartTime>Ss&&a!==536870912&&(e.flags|=128,l=!0,xl(n,!1),e.lanes=4194304);n.isBackwards?(i.sibling=e.child,e.child=i):(t=n.last,t!==null?t.sibling=i:e.child=i,n.last=i)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Te(),t.sibling=null,a=qt.current,Et(qt,l?a&1|2:a&1),pt&&la(e,n.treeForkCount),t):(Ct(e),null);case 22:case 23:return xe(e),zo(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?a&536870912&&!(e.flags&128)&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),a=e.updateQueue,a!==null&&_i(e,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==a&&(e.flags|=2048),t!==null&&$t(ln),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),ua(Qt),Ct(e),null;case 25:return null;case 30:return null}throw Error(_(156,e.tag))}function Sp(t,e){switch(Mo(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ua(Qt),Jn(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ss(e),null;case 31:if(e.memoizedState!==null){if(xe(e),e.alternate===null)throw Error(_(340));cn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(xe(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_(340));cn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(qt),null;case 4:return Jn(),null;case 10:return ua(e.type),null;case 22:case 23:return xe(e),zo(),t!==null&&$t(ln),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ua(Qt),null;case 25:return null;default:return null}}function Jh(t,e){switch(Mo(e),e.tag){case 3:ua(Qt),Jn();break;case 26:case 27:case 5:ss(e);break;case 4:Jn();break;case 31:e.memoizedState!==null&&xe(e);break;case 13:xe(e);break;case 19:$t(qt);break;case 10:ua(e.type);break;case 22:case 23:xe(e),zo(),t!==null&&$t(ln);break;case 24:ua(Qt)}}function mi(t,e){try{var a=e.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var l=n.next;a=l;do{if((a.tag&t)===t){n=void 0;var i=a.create,s=a.inst;n=i(),s.destroy=n}a=a.next}while(a!==l)}}catch(r){Nt(e,e.return,r)}}function Xa(t,e,a){try{var n=e.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var i=l.next;n=i;do{if((n.tag&t)===t){var s=n.inst,r=s.destroy;if(r!==void 0){s.destroy=void 0,l=e;var c=a,u=r;try{u()}catch(h){Nt(l,c,h)}}}n=n.next}while(n!==i)}}catch(h){Nt(e,e.return,h)}}function Ih(t){var e=t.updateQueue;if(e!==null){var a=t.stateNode;try{ih(e,a)}catch(n){Nt(t,t.return,n)}}}function Ph(t,e,a){a.props=dn(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(n){Nt(t,e,n)}}function Hl(t,e){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof a=="function"?t.refCleanup=a(n):a.current=n}}catch(l){Nt(t,e,l)}}function Qe(t,e){var a=t.ref,n=t.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(l){Nt(t,e,l)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){Nt(t,e,l)}else a.current=null}function Wh(t){var e=t.type,a=t.memoizedProps,n=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break t;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(l){Nt(t,t.return,l)}}function Ur(t,e,a){try{var n=t.stateNode;Lp(n,t.type,a,e),n[ge]=e}catch(l){Nt(t,t.return,l)}}function $h(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fa(t.type)||t.tag===4}function Rr(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||$h(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fa(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uc(t,e,a){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,e):(e=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,e.appendChild(t),a=a._reactRootContainer,a!=null||e.onclick!==null||(e.onclick=ra));else if(n!==4&&(n===27&&Fa(t.type)&&(a=t.stateNode,e=null),t=t.child,t!==null))for(Uc(t,e,a),t=t.sibling;t!==null;)Uc(t,e,a),t=t.sibling}function xs(t,e,a){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?a.insertBefore(t,e):a.appendChild(t);else if(n!==4&&(n===27&&Fa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(xs(t,e,a),t=t.sibling;t!==null;)xs(t,e,a),t=t.sibling}function tm(t){var e=t.stateNode,a=t.memoizedProps;try{for(var n=t.type,l=e.attributes;l.length;)e.removeAttributeNode(l[0]);ie(e,n,a),e[ae]=t,e[ge]=a}catch(i){Nt(t,t.return,i)}}var ia=!1,Xt=!1,Br=!1,cf=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function wp(t,e){if(t=t.containerInfo,Yc=Es,t=Vd(t),vo(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else t:{a=(a=t.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var l=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break t}var s=0,r=-1,c=-1,u=0,h=0,g=t,f=null;e:for(;;){for(var d;g!==a||l!==0&&g.nodeType!==3||(r=s+l),g!==i||n!==0&&g.nodeType!==3||(c=s+n),g.nodeType===3&&(s+=g.nodeValue.length),(d=g.firstChild)!==null;)f=g,g=d;for(;;){if(g===t)break e;if(f===a&&++u===l&&(r=s),f===i&&++h===n&&(c=s),(d=g.nextSibling)!==null)break;g=f,f=g.parentNode}g=d}a=r===-1||c===-1?null:{start:r,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lc={focusedElem:t,selectionRange:a},Es=!1,Pt=e;Pt!==null;)if(e=Pt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pt=t;else for(;Pt!==null;){switch(e=Pt,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)l=t[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,a=e,l=i.memoizedProps,i=i.memoizedState,n=a.stateNode;try{var v=dn(a.type,l);t=n.getSnapshotBeforeUpdate(v,i),n.__reactInternalSnapshotBeforeUpdate=t}catch(y){Nt(a,a.return,y)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,a=t.nodeType,a===9)Qc(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(_(163))}if(t=e.sibling,t!==null){t.return=e.return,Pt=t;break}Pt=e.return}}function em(t,e,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:ea(t,a),n&4&&mi(5,a);break;case 1:if(ea(t,a),n&4)if(t=a.stateNode,e===null)try{t.componentDidMount()}catch(s){Nt(a,a.return,s)}else{var l=dn(a.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(l,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){Nt(a,a.return,s)}}n&64&&Ih(a),n&512&&Hl(a,a.return);break;case 3:if(ea(t,a),n&64&&(t=a.updateQueue,t!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=a.child.stateNode;break;case 1:e=a.child.stateNode}try{ih(t,e)}catch(s){Nt(a,a.return,s)}}break;case 27:e===null&&n&4&&tm(a);case 26:case 5:ea(t,a),e===null&&n&4&&Wh(a),n&512&&Hl(a,a.return);break;case 12:ea(t,a);break;case 31:ea(t,a),n&4&&lm(t,a);break;case 13:ea(t,a),n&4&&im(t,a),n&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Ep.bind(null,a),Pp(t,a))));break;case 22:if(n=a.memoizedState!==null||ia,!n){e=e!==null&&e.memoizedState!==null||Xt,l=ia;var i=Xt;ia=n,(Xt=e)&&!i?na(t,a,(a.subtreeFlags&8772)!==0):ea(t,a),ia=l,Xt=i}break;case 30:break;default:ea(t,a)}}function am(t){var e=t.alternate;e!==null&&(t.alternate=null,am(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ho(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rt=null,de=!1;function ta(t,e,a){for(a=a.child;a!==null;)nm(t,e,a),a=a.sibling}function nm(t,e,a){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(ri,a)}catch{}switch(a.tag){case 26:Xt||Qe(a,e),ta(t,e,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Xt||Qe(a,e);var n=Rt,l=de;Fa(a.type)&&(Rt=a.stateNode,de=!1),ta(t,e,a),Yl(a.stateNode),Rt=n,de=l;break;case 5:Xt||Qe(a,e);case 6:if(n=Rt,l=de,Rt=null,ta(t,e,a),Rt=n,de=l,Rt!==null)if(de)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(a.stateNode)}catch(i){Nt(a,e,i)}else try{Rt.removeChild(a.stateNode)}catch(i){Nt(a,e,i)}break;case 18:Rt!==null&&(de?(t=Rt,Sf(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),il(t)):Sf(Rt,a.stateNode));break;case 4:n=Rt,l=de,Rt=a.stateNode.containerInfo,de=!0,ta(t,e,a),Rt=n,de=l;break;case 0:case 11:case 14:case 15:Xa(2,a,e),Xt||Xa(4,a,e),ta(t,e,a);break;case 1:Xt||(Qe(a,e),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Ph(a,e,n)),ta(t,e,a);break;case 21:ta(t,e,a);break;case 22:Xt=(n=Xt)||a.memoizedState!==null,ta(t,e,a),Xt=n;break;default:ta(t,e,a)}}function lm(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{il(t)}catch(a){Nt(e,e.return,a)}}}function im(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{il(t)}catch(a){Nt(e,e.return,a)}}function Tp(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new cf),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new cf),e;default:throw Error(_(435,t.tag))}}function Ei(t,e){var a=Tp(t);e.forEach(function(n){if(!a.has(n)){a.add(n);var l=Cp.bind(null,t,n);n.then(l,l)}})}function ue(t,e){var a=e.deletions;if(a!==null)for(var n=0;n<a.length;n++){var l=a[n],i=t,s=e,r=s;t:for(;r!==null;){switch(r.tag){case 27:if(Fa(r.type)){Rt=r.stateNode,de=!1;break t}break;case 5:Rt=r.stateNode,de=!1;break t;case 3:case 4:Rt=r.stateNode.containerInfo,de=!0;break t}r=r.return}if(Rt===null)throw Error(_(160));nm(i,s,l),Rt=null,de=!1,i=l.alternate,i!==null&&(i.return=null),l.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)sm(e,t),e=e.sibling}var Ve=null;function sm(t,e){var a=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ue(e,t),fe(t),n&4&&(Xa(3,t,t.return),mi(3,t),Xa(5,t,t.return));break;case 1:ue(e,t),fe(t),n&512&&(Xt||a===null||Qe(a,a.return)),n&64&&ia&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var l=Ve;if(ue(e,t),fe(t),n&512&&(Xt||a===null||Qe(a,a.return)),n&4){var i=a!==null?a.memoizedState:null;if(n=t.memoizedState,a===null)if(n===null)if(t.stateNode===null){t:{n=t.type,a=t.memoizedProps,l=l.ownerDocument||l;e:switch(n){case"title":i=l.getElementsByTagName("title")[0],(!i||i[ui]||i[ae]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=l.createElement(n),l.head.insertBefore(i,l.querySelector("head > title"))),ie(i,n,a),i[ae]=t,Wt(i),n=i;break t;case"link":var s=Af("link","href",l).get(n+(a.href||""));if(s){for(var r=0;r<s.length;r++)if(i=s[r],i.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&i.getAttribute("rel")===(a.rel==null?null:a.rel)&&i.getAttribute("title")===(a.title==null?null:a.title)&&i.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){s.splice(r,1);break e}}i=l.createElement(n),ie(i,n,a),l.head.appendChild(i);break;case"meta":if(s=Af("meta","content",l).get(n+(a.content||""))){for(r=0;r<s.length;r++)if(i=s[r],i.getAttribute("content")===(a.content==null?null:""+a.content)&&i.getAttribute("name")===(a.name==null?null:a.name)&&i.getAttribute("property")===(a.property==null?null:a.property)&&i.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&i.getAttribute("charset")===(a.charSet==null?null:a.charSet)){s.splice(r,1);break e}}i=l.createElement(n),ie(i,n,a),l.head.appendChild(i);break;default:throw Error(_(468,n))}i[ae]=t,Wt(i),n=i}t.stateNode=n}else zf(l,t.type,t.stateNode);else t.stateNode=kf(l,n,t.memoizedProps);else i!==n?(i===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):i.count--,n===null?zf(l,t.type,t.stateNode):kf(l,n,t.memoizedProps)):n===null&&t.stateNode!==null&&Ur(t,t.memoizedProps,a.memoizedProps)}break;case 27:ue(e,t),fe(t),n&512&&(Xt||a===null||Qe(a,a.return)),a!==null&&n&4&&Ur(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ue(e,t),fe(t),n&512&&(Xt||a===null||Qe(a,a.return)),t.flags&32){l=t.stateNode;try{Pn(l,"")}catch(v){Nt(t,t.return,v)}}n&4&&t.stateNode!=null&&(l=t.memoizedProps,Ur(t,l,a!==null?a.memoizedProps:l)),n&1024&&(Br=!0);break;case 6:if(ue(e,t),fe(t),n&4){if(t.stateNode===null)throw Error(_(162));n=t.memoizedProps,a=t.stateNode;try{a.nodeValue=n}catch(v){Nt(t,t.return,v)}}break;case 3:if(ts=null,l=Ve,Ve=As(e.containerInfo),ue(e,t),Ve=l,fe(t),n&4&&a!==null&&a.memoizedState.isDehydrated)try{il(e.containerInfo)}catch(v){Nt(t,t.return,v)}Br&&(Br=!1,rm(t));break;case 4:n=Ve,Ve=As(t.stateNode.containerInfo),ue(e,t),fe(t),Ve=n;break;case 12:ue(e,t),fe(t);break;case 31:ue(e,t),fe(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ei(t,n)));break;case 13:ue(e,t),fe(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ws=Te()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ei(t,n)));break;case 22:l=t.memoizedState!==null;var c=a!==null&&a.memoizedState!==null,u=ia,h=Xt;if(ia=u||l,Xt=h||c,ue(e,t),Xt=h,ia=u,fe(t),n&8192)t:for(e=t.stateNode,e._visibility=l?e._visibility&-2:e._visibility|1,l&&(a===null||c||ia||Xt||tn(t)),a=null,e=t;;){if(e.tag===5||e.tag===26){if(a===null){c=a=e;try{if(i=c.stateNode,l)s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{r=c.stateNode;var g=c.memoizedProps.style,f=g!=null&&g.hasOwnProperty("display")?g.display:null;r.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(v){Nt(c,c.return,v)}}}else if(e.tag===6){if(a===null){c=e;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(v){Nt(c,c.return,v)}}}else if(e.tag===18){if(a===null){c=e;try{var d=c.stateNode;l?wf(d,!0):wf(c.stateNode,!1)}catch(v){Nt(c,c.return,v)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;a===e&&(a=null),e=e.return}a===e&&(a=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=t.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Ei(t,a))));break;case 19:ue(e,t),fe(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ei(t,n)));break;case 30:break;case 21:break;default:ue(e,t),fe(t)}}function fe(t){var e=t.flags;if(e&2){try{for(var a,n=t.return;n!==null;){if($h(n)){a=n;break}n=n.return}if(a==null)throw Error(_(160));switch(a.tag){case 27:var l=a.stateNode,i=Rr(t);xs(t,i,l);break;case 5:var s=a.stateNode;a.flags&32&&(Pn(s,""),a.flags&=-33);var r=Rr(t);xs(t,r,s);break;case 3:case 4:var c=a.stateNode.containerInfo,u=Rr(t);Uc(t,u,c);break;default:throw Error(_(161))}}catch(h){Nt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;rm(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ea(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)em(t,e.alternate,e),e=e.sibling}function tn(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Xa(4,e,e.return),tn(e);break;case 1:Qe(e,e.return);var a=e.stateNode;typeof a.componentWillUnmount=="function"&&Ph(e,e.return,a),tn(e);break;case 27:Yl(e.stateNode);case 26:case 5:Qe(e,e.return),tn(e);break;case 22:e.memoizedState===null&&tn(e);break;case 30:tn(e);break;default:tn(e)}t=t.sibling}}function na(t,e,a){for(a=a&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,l=t,i=e,s=i.flags;switch(i.tag){case 0:case 11:case 15:na(l,i,a),mi(4,i);break;case 1:if(na(l,i,a),n=i,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(u){Nt(n,n.return,u)}if(n=i,l=n.updateQueue,l!==null){var r=n.stateNode;try{var c=l.shared.hiddenCallbacks;if(c!==null)for(l.shared.hiddenCallbacks=null,l=0;l<c.length;l++)lh(c[l],r)}catch(u){Nt(n,n.return,u)}}a&&s&64&&Ih(i),Hl(i,i.return);break;case 27:tm(i);case 26:case 5:na(l,i,a),a&&n===null&&s&4&&Wh(i),Hl(i,i.return);break;case 12:na(l,i,a);break;case 31:na(l,i,a),a&&s&4&&lm(l,i);break;case 13:na(l,i,a),a&&s&4&&im(l,i);break;case 22:i.memoizedState===null&&na(l,i,a),Hl(i,i.return);break;case 30:break;default:na(l,i,a)}e=e.sibling}}function Qo(t,e){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&di(a))}function Zo(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&di(t))}function qe(t,e,a,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cm(t,e,a,n),e=e.sibling}function cm(t,e,a,n){var l=e.flags;switch(e.tag){case 0:case 11:case 15:qe(t,e,a,n),l&2048&&mi(9,e);break;case 1:qe(t,e,a,n);break;case 3:qe(t,e,a,n),l&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&di(t)));break;case 12:if(l&2048){qe(t,e,a,n),t=e.stateNode;try{var i=e.memoizedProps,s=i.id,r=i.onPostCommit;typeof r=="function"&&r(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Nt(e,e.return,c)}}else qe(t,e,a,n);break;case 31:qe(t,e,a,n);break;case 13:qe(t,e,a,n);break;case 23:break;case 22:i=e.stateNode,s=e.alternate,e.memoizedState!==null?i._visibility&2?qe(t,e,a,n):Gl(t,e):i._visibility&2?qe(t,e,a,n):(i._visibility|=2,jn(t,e,a,n,(e.subtreeFlags&10256)!==0||!1)),l&2048&&Qo(s,e);break;case 24:qe(t,e,a,n),l&2048&&Zo(e.alternate,e);break;default:qe(t,e,a,n)}}function jn(t,e,a,n,l){for(l=l&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,s=e,r=a,c=n,u=s.flags;switch(s.tag){case 0:case 11:case 15:jn(i,s,r,c,l),mi(8,s);break;case 23:break;case 22:var h=s.stateNode;s.memoizedState!==null?h._visibility&2?jn(i,s,r,c,l):Gl(i,s):(h._visibility|=2,jn(i,s,r,c,l)),l&&u&2048&&Qo(s.alternate,s);break;case 24:jn(i,s,r,c,l),l&&u&2048&&Zo(s.alternate,s);break;default:jn(i,s,r,c,l)}e=e.sibling}}function Gl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var a=t,n=e,l=n.flags;switch(n.tag){case 22:Gl(a,n),l&2048&&Qo(n.alternate,n);break;case 24:Gl(a,n),l&2048&&Zo(n.alternate,n);break;default:Gl(a,n)}e=e.sibling}}var Al=8192;function Sn(t,e,a){if(t.subtreeFlags&Al)for(t=t.child;t!==null;)om(t,e,a),t=t.sibling}function om(t,e,a){switch(t.tag){case 26:Sn(t,e,a),t.flags&Al&&t.memoizedState!==null&&ob(a,Ve,t.memoizedState,t.memoizedProps);break;case 5:Sn(t,e,a);break;case 3:case 4:var n=Ve;Ve=As(t.stateNode.containerInfo),Sn(t,e,a),Ve=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Al,Al=16777216,Sn(t,e,a),Al=n):Sn(t,e,a));break;default:Sn(t,e,a)}}function um(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Sl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var a=0;a<e.length;a++){var n=e[a];Pt=n,dm(n,t)}um(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fm(t),t=t.sibling}function fm(t){switch(t.tag){case 0:case 11:case 15:Sl(t),t.flags&2048&&Xa(9,t,t.return);break;case 3:Sl(t);break;case 12:Sl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Wi(t)):Sl(t);break;default:Sl(t)}}function Wi(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var a=0;a<e.length;a++){var n=e[a];Pt=n,dm(n,t)}um(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Xa(8,e,e.return),Wi(e);break;case 22:a=e.stateNode,a._visibility&2&&(a._visibility&=-3,Wi(e));break;default:Wi(e)}t=t.sibling}}function dm(t,e){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:Xa(8,a,e);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:di(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Pt=n;else t:for(a=t;Pt!==null;){n=Pt;var l=n.sibling,i=n.return;if(am(n),n===a){Pt=null;break t}if(l!==null){l.return=i,Pt=l;break t}Pt=i}}}var Mp={getCacheForType:function(t){var e=le(Qt),a=e.data.get(t);return a===void 0&&(a=t(),e.data.set(t,a)),a},cacheSignal:function(){return le(Qt).controller.signal}},Np=typeof WeakMap=="function"?WeakMap:Map,xt=0,_t=null,dt=null,ht=0,Mt=0,ve=null,za=!1,fl=!1,Fo=!1,pa=0,Gt=0,Qa=0,rn=0,Ko=0,we=0,el=0,ql=null,he=null,Rc=!1,Ws=0,hm=0,Ss=1/0,ws=null,Ra=null,Kt=0,Ba=null,al=null,fa=0,Bc=0,Hc=null,mm=null,Vl=0,Gc=null;function je(){return xt&2&&ht!==0?ht&-ht:tt.T!==null?Io():Td()}function gm(){if(we===0)if(!(ht&536870912)||pt){var t=Ti;Ti<<=1,!(Ti&3932160)&&(Ti=262144),we=t}else we=536870912;return t=Ae.current,t!==null&&(t.flags|=32),we}function me(t,e,a){(t===_t&&(Mt===2||Mt===9)||t.cancelPendingCommit!==null)&&(nl(t,0),_a(t,ht,we,!1)),oi(t,a),(!(xt&2)||t!==_t)&&(t===_t&&(!(xt&2)&&(rn|=a),Gt===4&&_a(t,ht,we,!1)),Je(t))}function pm(t,e,a){if(xt&6)throw Error(_(327));var n=!a&&(e&127)===0&&(e&t.expiredLanes)===0||ci(t,e),l=n?Ap(t,e):Hr(t,e,!0),i=n;do{if(l===0){fl&&!n&&_a(t,e,0,!1);break}else{if(a=t.current.alternate,i&&!jp(a)){l=Hr(t,e,!1),i=!1;continue}if(l===2){if(i=e,t.errorRecoveryDisabledLanes&i)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;t:{var r=t;l=ql;var c=r.current.memoizedState.isDehydrated;if(c&&(nl(r,s).flags|=256),s=Hr(r,s,!1),s!==2){if(Fo&&!c){r.errorRecoveryDisabledLanes|=i,rn|=i,l=4;break t}i=he,he=l,i!==null&&(he===null?he=i:he.push.apply(he,i))}l=s}if(i=!1,l!==2)continue}}if(l===1){nl(t,0),_a(t,e,0,!0);break}t:{switch(n=t,i=l,i){case 0:case 1:throw Error(_(345));case 4:if((e&4194048)!==e)break;case 6:_a(n,e,we,!za);break t;case 2:he=null;break;case 3:case 5:break;default:throw Error(_(329))}if((e&62914560)===e&&(l=Ws+300-Te(),10<l)){if(_a(n,e,we,!za),Vs(n,0,!0)!==0)break t;fa=e,n.timeoutHandle=Rm(of.bind(null,n,a,he,ws,Rc,e,we,rn,el,za,i,"Throttled",-0,0),l);break t}of(n,a,he,ws,Rc,e,we,rn,el,za,i,null,-0,0)}}break}while(!0);Je(t)}function of(t,e,a,n,l,i,s,r,c,u,h,g,f,d){if(t.timeoutHandle=-1,g=e.subtreeFlags,g&8192||(g&16785408)===16785408){g={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ra},om(e,i,g);var v=(i&62914560)===i?Ws-Te():(i&4194048)===i?hm-Te():0;if(v=ub(g,v),v!==null){fa=i,t.cancelPendingCommit=v(ff.bind(null,t,e,i,a,n,l,s,r,c,h,g,null,f,d)),_a(t,i,s,!u);return}}ff(t,e,i,a,n,l,s,r,c)}function jp(t){for(var e=t;;){var a=e.tag;if((a===0||a===11||a===15)&&e.flags&16384&&(a=e.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var l=a[n],i=l.getSnapshot;l=l.value;try{if(!ke(i(),l))return!1}catch{return!1}}if(a=e.child,e.subtreeFlags&16384&&a!==null)a.return=e,e=a;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _a(t,e,a,n){e&=~Ko,e&=~rn,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var l=e;0<l;){var i=31-Ne(l),s=1<<i;n[i]=-1,l&=~s}a!==0&&xd(t,a,e)}function $s(){return xt&6?!0:(gi(0),!1)}function Jo(){if(dt!==null){if(Mt===0)var t=dt.return;else t=dt,ca=yn=null,Do(t),Zn=null,Pl=0,t=dt;for(;t!==null;)Jh(t.alternate,t),t=t.return;dt=null}}function nl(t,e){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Zp(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fa=0,Jo(),_t=t,dt=a=oa(t.current,null),ht=e,Mt=0,ve=null,za=!1,fl=ci(t,e),Fo=!1,el=we=Ko=rn=Qa=Gt=0,he=ql=null,Rc=!1,e&8&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var l=31-Ne(n),i=1<<l;e|=t[l],n&=~i}return pa=e,Qs(),a}function bm(t,e){lt=null,tt.H=$l,e===ul||e===Fs?(e=qu(),Mt=3):e===ko?(e=qu(),Mt=4):Mt=e===Lo?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ve=e,dt===null&&(Gt=1,ys(t,De(e,t.current)))}function ym(){var t=Ae.current;return t===null?!0:(ht&4194048)===ht?Re===null:(ht&62914560)===ht||ht&536870912?t===Re:!1}function vm(){var t=tt.H;return tt.H=$l,t===null?$l:t}function xm(){var t=tt.A;return tt.A=Mp,t}function Ts(){Gt=4,za||(ht&4194048)!==ht&&Ae.current!==null||(fl=!0),!(Qa&134217727)&&!(rn&134217727)||_t===null||_a(_t,ht,we,!1)}function Hr(t,e,a){var n=xt;xt|=2;var l=vm(),i=xm();(_t!==t||ht!==e)&&(ws=null,nl(t,e)),e=!1;var s=Gt;t:do try{if(Mt!==0&&dt!==null){var r=dt,c=ve;switch(Mt){case 8:Jo(),s=6;break t;case 3:case 2:case 9:case 6:Ae.current===null&&(e=!0);var u=Mt;if(Mt=0,ve=null,Vn(t,r,c,u),a&&fl){s=0;break t}break;default:u=Mt,Mt=0,ve=null,Vn(t,r,c,u)}}kp(),s=Gt;break}catch(h){bm(t,h)}while(!0);return e&&t.shellSuspendCounter++,ca=yn=null,xt=n,tt.H=l,tt.A=i,dt===null&&(_t=null,ht=0,Qs()),s}function kp(){for(;dt!==null;)Sm(dt)}function Ap(t,e){var a=xt;xt|=2;var n=vm(),l=xm();_t!==t||ht!==e?(ws=null,Ss=Te()+500,nl(t,e)):fl=ci(t,e);t:do try{if(Mt!==0&&dt!==null){e=dt;var i=ve;e:switch(Mt){case 1:Mt=0,ve=null,Vn(t,e,i,1);break;case 2:case 9:if(Gu(i)){Mt=0,ve=null,uf(e);break}e=function(){Mt!==2&&Mt!==9||_t!==t||(Mt=7),Je(t)},i.then(e,e);break t;case 3:Mt=7;break t;case 4:Mt=5;break t;case 7:Gu(i)?(Mt=0,ve=null,uf(e)):(Mt=0,ve=null,Vn(t,e,i,7));break;case 5:var s=null;switch(dt.tag){case 26:s=dt.memoizedState;case 5:case 27:var r=dt;if(s?Vm(s):r.stateNode.complete){Mt=0,ve=null;var c=r.sibling;if(c!==null)dt=c;else{var u=r.return;u!==null?(dt=u,tr(u)):dt=null}break e}}Mt=0,ve=null,Vn(t,e,i,5);break;case 6:Mt=0,ve=null,Vn(t,e,i,6);break;case 8:Jo(),Gt=6;break t;default:throw Error(_(462))}}zp();break}catch(h){bm(t,h)}while(!0);return ca=yn=null,tt.H=n,tt.A=l,xt=a,dt!==null?0:(_t=null,ht=0,Qs(),Gt)}function zp(){for(;dt!==null&&!W0();)Sm(dt)}function Sm(t){var e=Kh(t.alternate,t,pa);t.memoizedProps=t.pendingProps,e===null?tr(t):dt=e}function uf(t){var e=t,a=e.alternate;switch(e.tag){case 15:case 0:e=af(a,e,e.pendingProps,e.type,void 0,ht);break;case 11:e=af(a,e,e.pendingProps,e.type.render,e.ref,ht);break;case 5:Do(e);default:Jh(a,e),e=dt=Jd(e,pa),e=Kh(a,e,pa)}t.memoizedProps=t.pendingProps,e===null?tr(t):dt=e}function Vn(t,e,a,n){ca=yn=null,Do(e),Zn=null,Pl=0;var l=e.return;try{if(bp(t,l,e,a,ht)){Gt=1,ys(t,De(a,t.current)),dt=null;return}}catch(i){if(l!==null)throw dt=l,i;Gt=1,ys(t,De(a,t.current)),dt=null;return}e.flags&32768?(pt||n===1?t=!0:fl||ht&536870912?t=!1:(za=t=!0,(n===2||n===9||n===3||n===6)&&(n=Ae.current,n!==null&&n.tag===13&&(n.flags|=16384))),wm(e,t)):tr(e)}function tr(t){var e=t;do{if(e.flags&32768){wm(e,za);return}t=e.return;var a=xp(e.alternate,e,pa);if(a!==null){dt=a;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);Gt===0&&(Gt=5)}function wm(t,e){do{var a=Sp(t.alternate,t);if(a!==null){a.flags&=32767,dt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!e&&(t=t.sibling,t!==null)){dt=t;return}dt=t=a}while(t!==null);Gt=6,dt=null}function ff(t,e,a,n,l,i,s,r,c){t.cancelPendingCommit=null;do er();while(Kt!==0);if(xt&6)throw Error(_(327));if(e!==null){if(e===t.current)throw Error(_(177));if(i=e.lanes|e.childLanes,i|=xo,cg(t,a,i,s,r,c),t===_t&&(dt=_t=null,ht=0),al=e,Ba=t,fa=a,Bc=i,Hc=l,mm=n,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Op(rs,function(){return km(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,e.subtreeFlags&13878||n){n=tt.T,tt.T=null,l=St.p,St.p=2,s=xt,xt|=4;try{wp(t,e,a)}finally{xt=s,St.p=l,tt.T=n}}Kt=1,Tm(),Mm(),Nm()}}function Tm(){if(Kt===1){Kt=0;var t=Ba,e=al,a=(e.flags&13878)!==0;if(e.subtreeFlags&13878||a){a=tt.T,tt.T=null;var n=St.p;St.p=2;var l=xt;xt|=4;try{sm(e,t);var i=Lc,s=Vd(t.containerInfo),r=i.focusedElem,c=i.selectionRange;if(s!==r&&r&&r.ownerDocument&&qd(r.ownerDocument.documentElement,r)){if(c!==null&&vo(r)){var u=c.start,h=c.end;if(h===void 0&&(h=u),"selectionStart"in r)r.selectionStart=u,r.selectionEnd=Math.min(h,r.value.length);else{var g=r.ownerDocument||document,f=g&&g.defaultView||window;if(f.getSelection){var d=f.getSelection(),v=r.textContent.length,y=Math.min(c.start,v),w=c.end===void 0?y:Math.min(c.end,v);!d.extend&&y>w&&(s=w,w=y,y=s);var p=Cu(r,y),m=Cu(r,w);if(p&&m&&(d.rangeCount!==1||d.anchorNode!==p.node||d.anchorOffset!==p.offset||d.focusNode!==m.node||d.focusOffset!==m.offset)){var b=g.createRange();b.setStart(p.node,p.offset),d.removeAllRanges(),y>w?(d.addRange(b),d.extend(m.node,m.offset)):(b.setEnd(m.node,m.offset),d.addRange(b))}}}}for(g=[],d=r;d=d.parentNode;)d.nodeType===1&&g.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<g.length;r++){var S=g[r];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}Es=!!Yc,Lc=Yc=null}finally{xt=l,St.p=n,tt.T=a}}t.current=e,Kt=2}}function Mm(){if(Kt===2){Kt=0;var t=Ba,e=al,a=(e.flags&8772)!==0;if(e.subtreeFlags&8772||a){a=tt.T,tt.T=null;var n=St.p;St.p=2;var l=xt;xt|=4;try{em(t,e.alternate,e)}finally{xt=l,St.p=n,tt.T=a}}Kt=3}}function Nm(){if(Kt===4||Kt===3){Kt=0,$0();var t=Ba,e=al,a=fa,n=mm;e.subtreeFlags&10256||e.flags&10256?Kt=5:(Kt=0,al=Ba=null,jm(t,t.pendingLanes));var l=t.pendingLanes;if(l===0&&(Ra=null),fo(a),e=e.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(ri,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=tt.T,l=St.p,St.p=2,tt.T=null;try{for(var i=t.onRecoverableError,s=0;s<n.length;s++){var r=n[s];i(r.value,{componentStack:r.stack})}}finally{tt.T=e,St.p=l}}fa&3&&er(),Je(t),l=t.pendingLanes,a&261930&&l&42?t===Gc?Vl++:(Vl=0,Gc=t):Vl=0,gi(0)}}function jm(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,di(e)))}function er(){return Tm(),Mm(),Nm(),km()}function km(){if(Kt!==5)return!1;var t=Ba,e=Bc;Bc=0;var a=fo(fa),n=tt.T,l=St.p;try{St.p=32>a?32:a,tt.T=null,a=Hc,Hc=null;var i=Ba,s=fa;if(Kt=0,al=Ba=null,fa=0,xt&6)throw Error(_(331));var r=xt;if(xt|=4,fm(i.current),cm(i,i.current,s,a),xt=r,gi(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(ri,i)}catch{}return!0}finally{St.p=l,tt.T=n,jm(t,e)}}function df(t,e,a){e=De(a,e),e=Cc(t.stateNode,e,2),t=Ua(t,e,2),t!==null&&(oi(t,2),Je(t))}function Nt(t,e,a){if(t.tag===3)df(t,t,a);else for(;e!==null;){if(e.tag===3){df(e,t,a);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ra===null||!Ra.has(n))){t=De(a,t),a=Yh(2),n=Ua(e,a,2),n!==null&&(Lh(a,n,e,t),oi(n,2),Je(n));break}}e=e.return}}function Gr(t,e,a){var n=t.pingCache;if(n===null){n=t.pingCache=new Np;var l=new Set;n.set(e,l)}else l=n.get(e),l===void 0&&(l=new Set,n.set(e,l));l.has(a)||(Fo=!0,l.add(a),t=_p.bind(null,t,e,a),e.then(t,t))}function _p(t,e,a){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,_t===t&&(ht&a)===a&&(Gt===4||Gt===3&&(ht&62914560)===ht&&300>Te()-Ws?!(xt&2)&&nl(t,0):Ko|=a,el===ht&&(el=0)),Je(t)}function Am(t,e){e===0&&(e=vd()),t=bn(t,e),t!==null&&(oi(t,e),Je(t))}function Ep(t){var e=t.memoizedState,a=0;e!==null&&(a=e.retryLane),Am(t,a)}function Cp(t,e){var a=0;switch(t.tag){case 31:case 13:var n=t.stateNode,l=t.memoizedState;l!==null&&(a=l.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(_(314))}n!==null&&n.delete(e),Am(t,a)}function Op(t,e){return oo(t,e)}var Ms=null,kn=null,qc=!1,Ns=!1,qr=!1,Ea=0;function Je(t){t!==kn&&t.next===null&&(kn===null?Ms=kn=t:kn=kn.next=t),Ns=!0,qc||(qc=!0,Up())}function gi(t,e){if(!qr&&Ns){qr=!0;do for(var a=!1,n=Ms;n!==null;){if(t!==0){var l=n.pendingLanes;if(l===0)var i=0;else{var s=n.suspendedLanes,r=n.pingedLanes;i=(1<<31-Ne(42|t)+1)-1,i&=l&~(s&~r),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(a=!0,hf(n,i))}else i=ht,i=Vs(n,n===_t?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(i&3)||ci(n,i)||(a=!0,hf(n,i));n=n.next}while(a);qr=!1}}function Dp(){zm()}function zm(){Ns=qc=!1;var t=0;Ea!==0&&Qp()&&(t=Ea);for(var e=Te(),a=null,n=Ms;n!==null;){var l=n.next,i=_m(n,e);i===0?(n.next=null,a===null?Ms=l:a.next=l,l===null&&(kn=a)):(a=n,(t!==0||i&3)&&(Ns=!0)),n=l}Kt!==0&&Kt!==5||gi(t),Ea!==0&&(Ea=0)}function _m(t,e){for(var a=t.suspendedLanes,n=t.pingedLanes,l=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var s=31-Ne(i),r=1<<s,c=l[s];c===-1?(!(r&a)||r&n)&&(l[s]=rg(r,e)):c<=e&&(t.expiredLanes|=r),i&=~r}if(e=_t,a=ht,a=Vs(t,t===e?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,a===0||t===e&&(Mt===2||Mt===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&mr(n),t.callbackNode=null,t.callbackPriority=0;if(!(a&3)||ci(t,a)){if(e=a&-a,e===t.callbackPriority)return e;switch(n!==null&&mr(n),fo(a)){case 2:case 8:a=bd;break;case 32:a=rs;break;case 268435456:a=yd;break;default:a=rs}return n=Em.bind(null,t),a=oo(a,n),t.callbackPriority=e,t.callbackNode=a,e}return n!==null&&n!==null&&mr(n),t.callbackPriority=2,t.callbackNode=null,2}function Em(t,e){if(Kt!==0&&Kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(er()&&t.callbackNode!==a)return null;var n=ht;return n=Vs(t,t===_t?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(pm(t,n,e),_m(t,Te()),t.callbackNode!=null&&t.callbackNode===a?Em.bind(null,t):null)}function hf(t,e){if(er())return null;pm(t,e,!0)}function Up(){Fp(function(){xt&6?oo(pd,Dp):zm()})}function Io(){if(Ea===0){var t=Wn;t===0&&(t=wi,wi<<=1,!(wi&261888)&&(wi=256)),Ea=t}return Ea}function mf(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Li(""+t)}function gf(t,e){var a=e.ownerDocument.createElement("input");return a.name=e.name,a.value=e.value,t.id&&a.setAttribute("form",t.id),e.parentNode.insertBefore(a,e),t=new FormData(t),a.parentNode.removeChild(a),t}function Rp(t,e,a,n,l){if(e==="submit"&&a&&a.stateNode===l){var i=mf((l[ge]||null).action),s=n.submitter;s&&(e=(e=s[ge]||null)?mf(e.formAction):s.getAttribute("formAction"),e!==null&&(i=e,s=null));var r=new Ys("action","action",null,n,l);t.push({event:r,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ea!==0){var c=s?gf(l,s):new FormData(l);_c(a,{pending:!0,data:c,method:l.method,action:i},null,c)}}else typeof i=="function"&&(r.preventDefault(),c=s?gf(l,s):new FormData(l),_c(a,{pending:!0,data:c,method:l.method,action:i},i,c))},currentTarget:l}]})}}for(var Vr=0;Vr<yc.length;Vr++){var Yr=yc[Vr],Bp=Yr.toLowerCase(),Hp=Yr[0].toUpperCase()+Yr.slice(1);Ye(Bp,"on"+Hp)}Ye(Ld,"onAnimationEnd");Ye(Xd,"onAnimationIteration");Ye(Qd,"onAnimationStart");Ye("dblclick","onDoubleClick");Ye("focusin","onFocus");Ye("focusout","onBlur");Ye(tp,"onTransitionRun");Ye(ep,"onTransitionStart");Ye(ap,"onTransitionCancel");Ye(Zd,"onTransitionEnd");In("onMouseEnter",["mouseout","mouseover"]);In("onMouseLeave",["mouseout","mouseover"]);In("onPointerEnter",["pointerout","pointerover"]);In("onPointerLeave",["pointerout","pointerover"]);mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ti));function Cm(t,e){e=(e&4)!==0;for(var a=0;a<t.length;a++){var n=t[a],l=n.event;n=n.listeners;t:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var r=n[s],c=r.instance,u=r.currentTarget;if(r=r.listener,c!==i&&l.isPropagationStopped())break t;i=r,l.currentTarget=u;try{i(l)}catch(h){os(h)}l.currentTarget=null,i=c}else for(s=0;s<n.length;s++){if(r=n[s],c=r.instance,u=r.currentTarget,r=r.listener,c!==i&&l.isPropagationStopped())break t;i=r,l.currentTarget=u;try{i(l)}catch(h){os(h)}l.currentTarget=null,i=c}}}}function ft(t,e){var a=e[uc];a===void 0&&(a=e[uc]=new Set);var n=t+"__bubble";a.has(n)||(Om(e,t,2,!1),a.add(n))}function Lr(t,e,a){var n=0;e&&(n|=4),Om(a,t,n,e)}var Ci="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[Ci]){t[Ci]=!0,Md.forEach(function(a){a!=="selectionchange"&&(Gp.has(a)||Lr(a,!1,t),Lr(a,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ci]||(e[Ci]=!0,Lr("selectionchange",!1,e))}}function Om(t,e,a,n){switch(Zm(e)){case 2:var l=hb;break;case 8:l=mb;break;default:l=eu}a=l.bind(null,e,a,t),l=void 0,!gc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),n?l!==void 0?t.addEventListener(e,a,{capture:!0,passive:l}):t.addEventListener(e,a,!0):l!==void 0?t.addEventListener(e,a,{passive:l}):t.addEventListener(e,a,!1)}function Xr(t,e,a,n,l){var i=n;if(!(e&1)&&!(e&2)&&n!==null)t:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var r=n.stateNode.containerInfo;if(r===l)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&s.stateNode.containerInfo===l)return;s=s.return}for(;r!==null;){if(s=Cn(r),s===null)return;if(c=s.tag,c===5||c===6||c===26||c===27){n=i=s;continue t}r=r.parentNode}}n=n.return}Cd(function(){var u=i,h=go(a),g=[];t:{var f=Fd.get(t);if(f!==void 0){var d=Ys,v=t;switch(t){case"keypress":if(Qi(a)===0)break t;case"keydown":case"keyup":d=Cg;break;case"focusin":v="focus",d=vr;break;case"focusout":v="blur",d=vr;break;case"beforeblur":case"afterblur":d=vr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Ug;break;case Ld:case Xd:case Qd:d=Tg;break;case Zd:d=Bg;break;case"scroll":case"scrollend":d=yg;break;case"wheel":d=Gg;break;case"copy":case"cut":case"paste":d=Ng;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Mu;break;case"toggle":case"beforetoggle":d=Vg}var y=(e&4)!==0,w=!y&&(t==="scroll"||t==="scrollend"),p=y?f!==null?f+"Capture":null:f;y=[];for(var m=u,b;m!==null;){var S=m;if(b=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||b===null||p===null||(S=Zl(m,p),S!=null&&y.push(ei(m,S,b))),w)break;m=m.return}0<y.length&&(f=new d(f,v,null,a,h),g.push({event:f,listeners:y}))}}if(!(e&7)){t:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&a!==mc&&(v=a.relatedTarget||a.fromElement)&&(Cn(v)||v[rl]))break t;if((d||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,d?(v=a.relatedTarget||a.toElement,d=u,v=v?Cn(v):null,v!==null&&(w=si(v),y=v.tag,v!==w||y!==5&&y!==27&&y!==6)&&(v=null)):(d=null,v=u),d!==v)){if(y=wu,S="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=Mu,S="onPointerLeave",p="onPointerEnter",m="pointer"),w=d==null?f:jl(d),b=v==null?f:jl(v),f=new y(S,m+"leave",d,a,h),f.target=w,f.relatedTarget=b,S=null,Cn(h)===u&&(y=new y(p,m+"enter",v,a,h),y.target=b,y.relatedTarget=w,S=y),w=S,d&&v)e:{for(y=qp,p=d,m=v,b=0,S=p;S;S=y(S))b++;S=0;for(var T=m;T;T=y(T))S++;for(;0<b-S;)p=y(p),b--;for(;0<S-b;)m=y(m),S--;for(;b--;){if(p===m||m!==null&&p===m.alternate){y=p;break e}p=y(p),m=y(m)}y=null}else y=null;d!==null&&pf(g,f,d,y,!1),v!==null&&w!==null&&pf(g,w,v,y,!0)}}t:{if(f=u?jl(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var j=Au;else if(ku(f))if(Hd)j=Pg;else{j=Jg;var M=Kg}else d=f.nodeName,!d||d.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?u&&mo(u.elementType)&&(j=Au):j=Ig;if(j&&(j=j(t,u))){Bd(g,j,a,h);break t}M&&M(t,f,u),t==="focusout"&&u&&f.type==="number"&&u.memoizedProps.value!=null&&hc(f,"number",f.value)}switch(M=u?jl(u):window,t){case"focusin":(ku(M)||M.contentEditable==="true")&&(Un=M,pc=u,Cl=null);break;case"focusout":Cl=pc=Un=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,Ou(g,a,h);break;case"selectionchange":if($g)break;case"keydown":case"keyup":Ou(g,a,h)}var x;if(yo)t:{switch(t){case"compositionstart":var N="onCompositionStart";break t;case"compositionend":N="onCompositionEnd";break t;case"compositionupdate":N="onCompositionUpdate";break t}N=void 0}else Dn?Ud(t,a)&&(N="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(N="onCompositionStart");N&&(Dd&&a.locale!=="ko"&&(Dn||N!=="onCompositionStart"?N==="onCompositionEnd"&&Dn&&(x=Od()):(Aa=h,po="value"in Aa?Aa.value:Aa.textContent,Dn=!0)),M=js(u,N),0<M.length&&(N=new Tu(N,t,null,a,h),g.push({event:N,listeners:M}),x?N.data=x:(x=Rd(a),x!==null&&(N.data=x)))),(x=Lg?Xg(t,a):Qg(t,a))&&(N=js(u,"onBeforeInput"),0<N.length&&(M=new Tu("onBeforeInput","beforeinput",null,a,h),g.push({event:M,listeners:N}),M.data=x)),Rp(g,t,u,a,h)}Cm(g,e)})}function ei(t,e,a){return{instance:t,listener:e,currentTarget:a}}function js(t,e){for(var a=e+"Capture",n=[];t!==null;){var l=t,i=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||i===null||(l=Zl(t,a),l!=null&&n.unshift(ei(t,l,i)),l=Zl(t,e),l!=null&&n.push(ei(t,l,i))),t.tag===3)return n;t=t.return}return[]}function qp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function pf(t,e,a,n,l){for(var i=e._reactName,s=[];a!==null&&a!==n;){var r=a,c=r.alternate,u=r.stateNode;if(r=r.tag,c!==null&&c===n)break;r!==5&&r!==26&&r!==27||u===null||(c=u,l?(u=Zl(a,i),u!=null&&s.unshift(ei(a,u,c))):l||(u=Zl(a,i),u!=null&&s.push(ei(a,u,c)))),a=a.return}s.length!==0&&t.push({event:e,listeners:s})}var Vp=/\r\n?/g,Yp=/\u0000|\uFFFD/g;function bf(t){return(typeof t=="string"?t:""+t).replace(Vp,`
`).replace(Yp,"")}function Dm(t,e){return e=bf(e),bf(t)===e}function kt(t,e,a,n,l,i){switch(a){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||Pn(t,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&Pn(t,""+n);break;case"className":Ni(t,"class",n);break;case"tabIndex":Ni(t,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Ni(t,a,n);break;case"style":Ed(t,n,i);break;case"data":if(e!=="object"){Ni(t,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||a!=="href")){t.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(a);break}n=Li(""+n),t.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(a==="formAction"?(e!=="input"&&kt(t,e,"name",l.name,l,null),kt(t,e,"formEncType",l.formEncType,l,null),kt(t,e,"formMethod",l.formMethod,l,null),kt(t,e,"formTarget",l.formTarget,l,null)):(kt(t,e,"encType",l.encType,l,null),kt(t,e,"method",l.method,l,null),kt(t,e,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(a);break}n=Li(""+n),t.setAttribute(a,n);break;case"onClick":n!=null&&(t.onclick=ra);break;case"onScroll":n!=null&&ft("scroll",t);break;case"onScrollEnd":n!=null&&ft("scrollend",t);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(_(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(_(60));t.innerHTML=a}}break;case"multiple":t.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":t.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){t.removeAttribute("xlink:href");break}a=Li(""+n),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(a,""+n):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":n===!0?t.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(a,n):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?t.setAttribute(a,n):t.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?t.removeAttribute(a):t.setAttribute(a,n);break;case"popover":ft("beforetoggle",t),ft("toggle",t),Yi(t,"popover",n);break;case"xlinkActuate":We(t,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":We(t,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":We(t,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":We(t,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":We(t,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":We(t,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":We(t,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":We(t,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":We(t,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Yi(t,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=pg.get(a)||a,Yi(t,a,n))}}function Vc(t,e,a,n,l,i){switch(a){case"style":Ed(t,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(_(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(_(60));t.innerHTML=a}}break;case"children":typeof n=="string"?Pn(t,n):(typeof n=="number"||typeof n=="bigint")&&Pn(t,""+n);break;case"onScroll":n!=null&&ft("scroll",t);break;case"onScrollEnd":n!=null&&ft("scrollend",t);break;case"onClick":n!=null&&(t.onclick=ra);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nd.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),e=a.slice(2,l?a.length-7:void 0),i=t[ge]||null,i=i!=null?i[a]:null,typeof i=="function"&&t.removeEventListener(e,i,l),typeof n=="function")){typeof i!="function"&&i!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(e,n,l);break t}a in t?t[a]=n:n===!0?t.setAttribute(a,""):Yi(t,a,n)}}}function ie(t,e,a){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",t),ft("load",t);var n=!1,l=!1,i;for(i in a)if(a.hasOwnProperty(i)){var s=a[i];if(s!=null)switch(i){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(_(137,e));default:kt(t,e,i,s,a,null)}}l&&kt(t,e,"srcSet",a.srcSet,a,null),n&&kt(t,e,"src",a.src,a,null);return;case"input":ft("invalid",t);var r=i=s=l=null,c=null,u=null;for(n in a)if(a.hasOwnProperty(n)){var h=a[n];if(h!=null)switch(n){case"name":l=h;break;case"type":s=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":r=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(_(137,e));break;default:kt(t,e,n,h,a,null)}}Ad(t,i,r,c,u,s,l,!1);return;case"select":ft("invalid",t),n=s=i=null;for(l in a)if(a.hasOwnProperty(l)&&(r=a[l],r!=null))switch(l){case"value":i=r;break;case"defaultValue":s=r;break;case"multiple":n=r;default:kt(t,e,l,r,a,null)}e=i,a=s,t.multiple=!!n,e!=null?Ln(t,!!n,e,!1):a!=null&&Ln(t,!!n,a,!0);return;case"textarea":ft("invalid",t),i=l=n=null;for(s in a)if(a.hasOwnProperty(s)&&(r=a[s],r!=null))switch(s){case"value":n=r;break;case"defaultValue":l=r;break;case"children":i=r;break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(_(91));break;default:kt(t,e,s,r,a,null)}_d(t,n,l,i);return;case"option":for(c in a)if(a.hasOwnProperty(c)&&(n=a[c],n!=null))switch(c){case"selected":t.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:kt(t,e,c,n,a,null)}return;case"dialog":ft("beforetoggle",t),ft("toggle",t),ft("cancel",t),ft("close",t);break;case"iframe":case"object":ft("load",t);break;case"video":case"audio":for(n=0;n<ti.length;n++)ft(ti[n],t);break;case"image":ft("error",t),ft("load",t);break;case"details":ft("toggle",t);break;case"embed":case"source":case"link":ft("error",t),ft("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in a)if(a.hasOwnProperty(u)&&(n=a[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(_(137,e));default:kt(t,e,u,n,a,null)}return;default:if(mo(e)){for(h in a)a.hasOwnProperty(h)&&(n=a[h],n!==void 0&&Vc(t,e,h,n,a,void 0));return}}for(r in a)a.hasOwnProperty(r)&&(n=a[r],n!=null&&kt(t,e,r,n,a,null))}function Lp(t,e,a,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,i=null,s=null,r=null,c=null,u=null,h=null;for(d in a){var g=a[d];if(a.hasOwnProperty(d)&&g!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":c=g;default:n.hasOwnProperty(d)||kt(t,e,d,null,n,g)}}for(var f in n){var d=n[f];if(g=a[f],n.hasOwnProperty(f)&&(d!=null||g!=null))switch(f){case"type":i=d;break;case"name":l=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":r=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(_(137,e));break;default:d!==g&&kt(t,e,f,d,n,g)}}dc(t,s,r,c,u,h,i,l);return;case"select":d=s=r=f=null;for(i in a)if(c=a[i],a.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":d=c;default:n.hasOwnProperty(i)||kt(t,e,i,null,n,c)}for(l in n)if(i=n[l],c=a[l],n.hasOwnProperty(l)&&(i!=null||c!=null))switch(l){case"value":f=i;break;case"defaultValue":r=i;break;case"multiple":s=i;default:i!==c&&kt(t,e,l,i,n,c)}e=r,a=s,n=d,f!=null?Ln(t,!!a,f,!1):!!n!=!!a&&(e!=null?Ln(t,!!a,e,!0):Ln(t,!!a,a?[]:"",!1));return;case"textarea":d=f=null;for(r in a)if(l=a[r],a.hasOwnProperty(r)&&l!=null&&!n.hasOwnProperty(r))switch(r){case"value":break;case"children":break;default:kt(t,e,r,null,n,l)}for(s in n)if(l=n[s],i=a[s],n.hasOwnProperty(s)&&(l!=null||i!=null))switch(s){case"value":f=l;break;case"defaultValue":d=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(_(91));break;default:l!==i&&kt(t,e,s,l,n,i)}zd(t,f,d);return;case"option":for(var v in a)if(f=a[v],a.hasOwnProperty(v)&&f!=null&&!n.hasOwnProperty(v))switch(v){case"selected":t.selected=!1;break;default:kt(t,e,v,null,n,f)}for(c in n)if(f=n[c],d=a[c],n.hasOwnProperty(c)&&f!==d&&(f!=null||d!=null))switch(c){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:kt(t,e,c,f,n,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in a)f=a[y],a.hasOwnProperty(y)&&f!=null&&!n.hasOwnProperty(y)&&kt(t,e,y,null,n,f);for(u in n)if(f=n[u],d=a[u],n.hasOwnProperty(u)&&f!==d&&(f!=null||d!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(_(137,e));break;default:kt(t,e,u,f,n,d)}return;default:if(mo(e)){for(var w in a)f=a[w],a.hasOwnProperty(w)&&f!==void 0&&!n.hasOwnProperty(w)&&Vc(t,e,w,void 0,n,f);for(h in n)f=n[h],d=a[h],!n.hasOwnProperty(h)||f===d||f===void 0&&d===void 0||Vc(t,e,h,f,n,d);return}}for(var p in a)f=a[p],a.hasOwnProperty(p)&&f!=null&&!n.hasOwnProperty(p)&&kt(t,e,p,null,n,f);for(g in n)f=n[g],d=a[g],!n.hasOwnProperty(g)||f===d||f==null&&d==null||kt(t,e,g,f,n,d)}function yf(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xp(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var l=a[n],i=l.transferSize,s=l.initiatorType,r=l.duration;if(i&&r&&yf(s)){for(s=0,r=l.responseEnd,n+=1;n<a.length;n++){var c=a[n],u=c.startTime;if(u>r)break;var h=c.transferSize,g=c.initiatorType;h&&yf(g)&&(c=c.responseEnd,s+=h*(c<r?1:(r-u)/(c-u)))}if(--n,e+=8*(i+s)/(l.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Yc=null,Lc=null;function ks(t){return t.nodeType===9?t:t.ownerDocument}function vf(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Um(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qr=null;function Qp(){var t=window.event;return t&&t.type==="popstate"?t===Qr?!1:(Qr=t,!0):(Qr=null,!1)}var Rm=typeof setTimeout=="function"?setTimeout:void 0,Zp=typeof clearTimeout=="function"?clearTimeout:void 0,xf=typeof Promise=="function"?Promise:void 0,Fp=typeof queueMicrotask=="function"?queueMicrotask:typeof xf<"u"?function(t){return xf.resolve(null).then(t).catch(Kp)}:Rm;function Kp(t){setTimeout(function(){throw t})}function Fa(t){return t==="head"}function Sf(t,e){var a=e,n=0;do{var l=a.nextSibling;if(t.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(n===0){t.removeChild(l),il(e);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Yl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Yl(a);for(var i=a.firstChild;i;){var s=i.nextSibling,r=i.nodeName;i[ui]||r==="SCRIPT"||r==="STYLE"||r==="LINK"&&i.rel.toLowerCase()==="stylesheet"||a.removeChild(i),i=s}}else a==="body"&&Yl(t.ownerDocument.body);a=l}while(a);il(e)}function wf(t,e){var a=t;t=0;do{var n=a.nextSibling;if(a.nodeType===1?e?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(e?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=n}while(a)}function Qc(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var a=e;switch(e=e.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qc(a),ho(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Jp(t,e,a,n){for(;t.nodeType===1;){var l=a;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(n){if(!t[ui])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==l.rel||t.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||t.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||t.getAttribute("title")!==(l.title==null?null:l.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(l.src==null?null:l.src)||t.getAttribute("type")!==(l.type==null?null:l.type)||t.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=l.name==null?null:""+l.name;if(l.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=Be(t.nextSibling),t===null)break}return null}function Ip(t,e,a){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Be(t.nextSibling),t===null))return null;return t}function Bm(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Be(t.nextSibling),t===null))return null;return t}function Zc(t){return t.data==="$?"||t.data==="$~"}function Fc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Pp(t,e){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||a.readyState!=="loading")e();else{var n=function(){e(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),t._reactRetry=n}}function Be(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Kc=null;function Tf(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(e===0)return Be(t.nextSibling);e--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||e++}t=t.nextSibling}return null}function Mf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(e===0)return t;e--}else a!=="/$"&&a!=="/&"||e++}t=t.previousSibling}return null}function Hm(t,e,a){switch(e=ks(a),t){case"html":if(t=e.documentElement,!t)throw Error(_(452));return t;case"head":if(t=e.head,!t)throw Error(_(453));return t;case"body":if(t=e.body,!t)throw Error(_(454));return t;default:throw Error(_(451))}}function Yl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ho(t)}var He=new Map,Nf=new Set;function As(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ba=St.d;St.d={f:Wp,r:$p,D:tb,C:eb,L:ab,m:nb,X:ib,S:lb,M:sb};function Wp(){var t=ba.f(),e=$s();return t||e}function $p(t){var e=cl(t);e!==null&&e.tag===5&&e.type==="form"?Eh(e):ba.r(t)}var dl=typeof document>"u"?null:document;function Gm(t,e,a){var n=dl;if(n&&typeof e=="string"&&e){var l=Oe(e);l='link[rel="'+t+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),Nf.has(l)||(Nf.add(l),t={rel:t,crossOrigin:a,href:e},n.querySelector(l)===null&&(e=n.createElement("link"),ie(e,"link",t),Wt(e),n.head.appendChild(e)))}}function tb(t){ba.D(t),Gm("dns-prefetch",t,null)}function eb(t,e){ba.C(t,e),Gm("preconnect",t,e)}function ab(t,e,a){ba.L(t,e,a);var n=dl;if(n&&t&&e){var l='link[rel="preload"][as="'+Oe(e)+'"]';e==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Oe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Oe(a.imageSizes)+'"]')):l+='[href="'+Oe(t)+'"]';var i=l;switch(e){case"style":i=ll(t);break;case"script":i=hl(t)}He.has(i)||(t=Ut({rel:"preload",href:e==="image"&&a&&a.imageSrcSet?void 0:t,as:e},a),He.set(i,t),n.querySelector(l)!==null||e==="style"&&n.querySelector(pi(i))||e==="script"&&n.querySelector(bi(i))||(e=n.createElement("link"),ie(e,"link",t),Wt(e),n.head.appendChild(e)))}}function nb(t,e){ba.m(t,e);var a=dl;if(a&&t){var n=e&&typeof e.as=="string"?e.as:"script",l='link[rel="modulepreload"][as="'+Oe(n)+'"][href="'+Oe(t)+'"]',i=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=hl(t)}if(!He.has(i)&&(t=Ut({rel:"modulepreload",href:t},e),He.set(i,t),a.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bi(i)))return}n=a.createElement("link"),ie(n,"link",t),Wt(n),a.head.appendChild(n)}}}function lb(t,e,a){ba.S(t,e,a);var n=dl;if(n&&t){var l=Yn(n).hoistableStyles,i=ll(t);e=e||"default";var s=l.get(i);if(!s){var r={loading:0,preload:null};if(s=n.querySelector(pi(i)))r.loading=5;else{t=Ut({rel:"stylesheet",href:t,"data-precedence":e},a),(a=He.get(i))&&Wo(t,a);var c=s=n.createElement("link");Wt(c),ie(c,"link",t),c._p=new Promise(function(u,h){c.onload=u,c.onerror=h}),c.addEventListener("load",function(){r.loading|=1}),c.addEventListener("error",function(){r.loading|=2}),r.loading|=4,$i(s,e,n)}s={type:"stylesheet",instance:s,count:1,state:r},l.set(i,s)}}}function ib(t,e){ba.X(t,e);var a=dl;if(a&&t){var n=Yn(a).hoistableScripts,l=hl(t),i=n.get(l);i||(i=a.querySelector(bi(l)),i||(t=Ut({src:t,async:!0},e),(e=He.get(l))&&$o(t,e),i=a.createElement("script"),Wt(i),ie(i,"link",t),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function sb(t,e){ba.M(t,e);var a=dl;if(a&&t){var n=Yn(a).hoistableScripts,l=hl(t),i=n.get(l);i||(i=a.querySelector(bi(l)),i||(t=Ut({src:t,async:!0,type:"module"},e),(e=He.get(l))&&$o(t,e),i=a.createElement("script"),Wt(i),ie(i,"link",t),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function jf(t,e,a,n){var l=(l=Ca.current)?As(l):null;if(!l)throw Error(_(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(e=ll(a.href),a=Yn(l).hoistableStyles,n=a.get(e),n||(n={type:"style",instance:null,count:0,state:null},a.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ll(a.href);var i=Yn(l).hoistableStyles,s=i.get(t);if(s||(l=l.ownerDocument||l,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,s),(i=l.querySelector(pi(t)))&&!i._p&&(s.instance=i,s.state.loading=5),He.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},He.set(t,a),i||rb(l,t,a,s.state))),e&&n===null)throw Error(_(528,""));return s}if(e&&n!==null)throw Error(_(529,""));return null;case"script":return e=a.async,a=a.src,typeof a=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=hl(a),a=Yn(l).hoistableScripts,n=a.get(e),n||(n={type:"script",instance:null,count:0,state:null},a.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(_(444,t))}}function ll(t){return'href="'+Oe(t)+'"'}function pi(t){return'link[rel="stylesheet"]['+t+"]"}function qm(t){return Ut({},t,{"data-precedence":t.precedence,precedence:null})}function rb(t,e,a,n){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=t.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),ie(e,"link",a),Wt(e),t.head.appendChild(e))}function hl(t){return'[src="'+Oe(t)+'"]'}function bi(t){return"script[async]"+t}function kf(t,e,a){if(e.count++,e.instance===null)switch(e.type){case"style":var n=t.querySelector('style[data-href~="'+Oe(a.href)+'"]');if(n)return e.instance=n,Wt(n),n;var l=Ut({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement("style"),Wt(n),ie(n,"style",l),$i(n,a.precedence,t),e.instance=n;case"stylesheet":l=ll(a.href);var i=t.querySelector(pi(l));if(i)return e.state.loading|=4,e.instance=i,Wt(i),i;n=qm(a),(l=He.get(l))&&Wo(n,l),i=(t.ownerDocument||t).createElement("link"),Wt(i);var s=i;return s._p=new Promise(function(r,c){s.onload=r,s.onerror=c}),ie(i,"link",n),e.state.loading|=4,$i(i,a.precedence,t),e.instance=i;case"script":return i=hl(a.src),(l=t.querySelector(bi(i)))?(e.instance=l,Wt(l),l):(n=a,(l=He.get(i))&&(n=Ut({},a),$o(n,l)),t=t.ownerDocument||t,l=t.createElement("script"),Wt(l),ie(l,"link",n),t.head.appendChild(l),e.instance=l);case"void":return null;default:throw Error(_(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(n=e.instance,e.state.loading|=4,$i(n,a.precedence,t));return e.instance}function $i(t,e,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,i=l,s=0;s<n.length;s++){var r=n[s];if(r.dataset.precedence===e)i=r;else if(i!==l)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=a.nodeType===9?a.head:a,e.insertBefore(t,e.firstChild))}function Wo(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function $o(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var ts=null;function Af(t,e,a){if(ts===null){var n=new Map,l=ts=new Map;l.set(a,n)}else l=ts,n=l.get(a),n||(n=new Map,l.set(a,n));if(n.has(t))return n;for(n.set(t,null),a=a.getElementsByTagName(t),l=0;l<a.length;l++){var i=a[l];if(!(i[ui]||i[ae]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var s=i.getAttribute(e)||"";s=t+s;var r=n.get(s);r?r.push(i):n.set(s,[i])}}return n}function zf(t,e,a){t=t.ownerDocument||t,t.head.insertBefore(a,e==="title"?t.querySelector("head > title"):null)}function cb(t,e,a){if(a===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Vm(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function ob(t,e,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(a.state.loading&4)){if(a.instance===null){var l=ll(n.href),i=e.querySelector(pi(l));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=zs.bind(t),e.then(t,t)),a.state.loading|=4,a.instance=i,Wt(i);return}i=e.ownerDocument||e,n=qm(n),(l=He.get(l))&&Wo(n,l),i=i.createElement("link"),Wt(i);var s=i;s._p=new Promise(function(r,c){s.onload=r,s.onerror=c}),ie(i,"link",n),a.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,e),(e=a.state.preload)&&!(a.state.loading&3)&&(t.count++,a=zs.bind(t),e.addEventListener("load",a),e.addEventListener("error",a))}}var Zr=0;function ub(t,e){return t.stylesheets&&t.count===0&&es(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var n=setTimeout(function(){if(t.stylesheets&&es(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&Zr===0&&(Zr=62500*Xp());var l=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&es(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>Zr?50:800)+e);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(n),clearTimeout(l)}}:null}function zs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)es(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var _s=null;function es(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,_s=new Map,e.forEach(fb,t),_s=null,zs.call(t))}function fb(t,e){if(!(e.state.loading&4)){var a=_s.get(t);if(a)var n=a.get(null);else{a=new Map,_s.set(t,a);for(var l=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<l.length;i++){var s=l[i];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(a.set(s.dataset.precedence,s),n=s)}n&&a.set(null,n)}l=e.instance,s=l.getAttribute("data-precedence"),i=a.get(s)||n,i===n&&a.set(null,l),a.set(s,l),this.count++,n=zs.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),i?i.parentNode.insertBefore(l,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(l,t.firstChild)),e.state.loading|=4}}var ai={$$typeof:sa,Provider:null,Consumer:null,_currentValue:an,_currentValue2:an,_threadCount:0};function db(t,e,a,n,l,i,s,r,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gr(0),this.hiddenUpdates=gr(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Ym(t,e,a,n,l,i,s,r,c,u,h,g){return t=new db(t,e,a,s,c,u,h,g,r),e=1,i===!0&&(e|=24),i=Se(3,null,null,e),t.current=i,i.stateNode=t,e=No(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:n,isDehydrated:a,cache:e},Ao(i),t}function Lm(t){return t?(t=Hn,t):Hn}function Xm(t,e,a,n,l,i){l=Lm(l),n.context===null?n.context=l:n.pendingContext=l,n=Da(e),n.payload={element:a},i=i===void 0?null:i,i!==null&&(n.callback=i),a=Ua(t,n,e),a!==null&&(me(a,t,e),Dl(a,t,e))}function _f(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<e?a:e}}function tu(t,e){_f(t,e),(t=t.alternate)&&_f(t,e)}function Qm(t){if(t.tag===13||t.tag===31){var e=bn(t,67108864);e!==null&&me(e,t,67108864),tu(t,67108864)}}function Ef(t){if(t.tag===13||t.tag===31){var e=je();e=uo(e);var a=bn(t,e);a!==null&&me(a,t,e),tu(t,e)}}var Es=!0;function hb(t,e,a,n){var l=tt.T;tt.T=null;var i=St.p;try{St.p=2,eu(t,e,a,n)}finally{St.p=i,tt.T=l}}function mb(t,e,a,n){var l=tt.T;tt.T=null;var i=St.p;try{St.p=8,eu(t,e,a,n)}finally{St.p=i,tt.T=l}}function eu(t,e,a,n){if(Es){var l=Jc(n);if(l===null)Xr(t,e,n,Cs,a),Cf(t,n);else if(pb(l,t,e,a,n))n.stopPropagation();else if(Cf(t,n),e&4&&-1<gb.indexOf(t)){for(;l!==null;){var i=cl(l);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var s=Wa(i.pendingLanes);if(s!==0){var r=i;for(r.pendingLanes|=2,r.entangledLanes|=2;s;){var c=1<<31-Ne(s);r.entanglements[1]|=c,s&=~c}Je(i),!(xt&6)&&(Ss=Te()+500,gi(0))}}break;case 31:case 13:r=bn(i,2),r!==null&&me(r,i,2),$s(),tu(i,2)}if(i=Jc(n),i===null&&Xr(t,e,n,Cs,a),i===l)break;l=i}l!==null&&n.stopPropagation()}else Xr(t,e,n,null,a)}}function Jc(t){return t=go(t),au(t)}var Cs=null;function au(t){if(Cs=null,t=Cn(t),t!==null){var e=si(t);if(e===null)t=null;else{var a=e.tag;if(a===13){if(t=fd(e),t!==null)return t;t=null}else if(a===31){if(t=dd(e),t!==null)return t;t=null}else if(a===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Cs=t,null}function Zm(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tg()){case pd:return 2;case bd:return 8;case rs:case eg:return 32;case yd:return 268435456;default:return 32}default:return 32}}var Ic=!1,Ha=null,Ga=null,qa=null,ni=new Map,li=new Map,ja=[],gb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cf(t,e){switch(t){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":ni.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(e.pointerId)}}function wl(t,e,a,n,l,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:a,eventSystemFlags:n,nativeEvent:i,targetContainers:[l]},e!==null&&(e=cl(e),e!==null&&Qm(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function pb(t,e,a,n,l){switch(e){case"focusin":return Ha=wl(Ha,t,e,a,n,l),!0;case"dragenter":return Ga=wl(Ga,t,e,a,n,l),!0;case"mouseover":return qa=wl(qa,t,e,a,n,l),!0;case"pointerover":var i=l.pointerId;return ni.set(i,wl(ni.get(i)||null,t,e,a,n,l)),!0;case"gotpointercapture":return i=l.pointerId,li.set(i,wl(li.get(i)||null,t,e,a,n,l)),!0}return!1}function Fm(t){var e=Cn(t.target);if(e!==null){var a=si(e);if(a!==null){if(e=a.tag,e===13){if(e=fd(a),e!==null){t.blockedOn=e,gu(t.priority,function(){Ef(a)});return}}else if(e===31){if(e=dd(a),e!==null){t.blockedOn=e,gu(t.priority,function(){Ef(a)});return}}else if(e===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function as(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var a=Jc(t.nativeEvent);if(a===null){a=t.nativeEvent;var n=new a.constructor(a.type,a);mc=n,a.target.dispatchEvent(n),mc=null}else return e=cl(a),e!==null&&Qm(e),t.blockedOn=a,!1;e.shift()}return!0}function Of(t,e,a){as(t)&&a.delete(e)}function bb(){Ic=!1,Ha!==null&&as(Ha)&&(Ha=null),Ga!==null&&as(Ga)&&(Ga=null),qa!==null&&as(qa)&&(qa=null),ni.forEach(Of),li.forEach(Of)}function Oi(t,e){t.blockedOn===e&&(t.blockedOn=null,Ic||(Ic=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,bb)))}var Di=null;function Df(t){Di!==t&&(Di=t,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,function(){Di===t&&(Di=null);for(var e=0;e<t.length;e+=3){var a=t[e],n=t[e+1],l=t[e+2];if(typeof n!="function"){if(au(n||a)===null)continue;break}var i=cl(a);i!==null&&(t.splice(e,3),e-=3,_c(i,{pending:!0,data:l,method:a.method,action:n},n,l))}}))}function il(t){function e(c){return Oi(c,t)}Ha!==null&&Oi(Ha,t),Ga!==null&&Oi(Ga,t),qa!==null&&Oi(qa,t),ni.forEach(e),li.forEach(e);for(var a=0;a<ja.length;a++){var n=ja[a];n.blockedOn===t&&(n.blockedOn=null)}for(;0<ja.length&&(a=ja[0],a.blockedOn===null);)Fm(a),a.blockedOn===null&&ja.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var l=a[n],i=a[n+1],s=l[ge]||null;if(typeof i=="function")s||Df(a);else if(s){var r=null;if(i&&i.hasAttribute("formAction")){if(l=i,s=i[ge]||null)r=s.formAction;else if(au(l)!==null)continue}else r=s.action;typeof r=="function"?a[n+1]=r:(a.splice(n,3),n-=3),Df(a)}}}function Km(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(s){return l=s})},focusReset:"manual",scroll:"manual"})}function e(){l!==null&&(l(),l=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,l=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),l!==null&&(l(),l=null)}}}function nu(t){this._internalRoot=t}ar.prototype.render=nu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_(409));var a=e.current,n=je();Xm(a,n,t,e,null,null)};ar.prototype.unmount=nu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xm(t.current,2,null,t,null,null),$s(),e[rl]=null}};function ar(t){this._internalRoot=t}ar.prototype.unstable_scheduleHydration=function(t){if(t){var e=Td();t={blockedOn:null,target:t,priority:e};for(var a=0;a<ja.length&&e!==0&&e<ja[a].priority;a++);ja.splice(a,0,t),a===0&&Fm(t)}};var Uf=od.version;if(Uf!=="19.2.4")throw Error(_(527,Uf,"19.2.4"));St.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_(188)):(t=Object.keys(t).join(","),Error(_(268,t)));return t=F0(e),t=t!==null?hd(t):null,t=t===null?null:t.stateNode,t};var yb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:tt,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ui.isDisabled&&Ui.supportsFiber)try{ri=Ui.inject(yb),Me=Ui}catch{}}Gs.createRoot=function(t,e){if(!ud(t))throw Error(_(299));var a=!1,n="",l=Gh,i=qh,s=Vh;return e!=null&&(e.unstable_strictMode===!0&&(a=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(l=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ym(t,1,!1,null,null,a,n,null,l,i,s,Km),t[rl]=e.current,Po(t),new nu(e)};Gs.hydrateRoot=function(t,e,a){if(!ud(t))throw Error(_(299));var n=!1,l="",i=Gh,s=qh,r=Vh,c=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(s=a.onCaughtError),a.onRecoverableError!==void 0&&(r=a.onRecoverableError),a.formState!==void 0&&(c=a.formState)),e=Ym(t,1,!0,e,a??null,n,l,c,i,s,r,Km),e.context=Lm(null),a=e.current,n=je(),n=uo(n),l=Da(n),l.callback=null,Ua(a,l,n),a=n,e.current.lanes=a,oi(e,a),Je(e),t[rl]=e.current,Po(t),new ar(e)};Gs.version="19.2.4";function Jm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jm)}catch(t){console.error(t)}}Jm(),nd.exports=Gs;var vb=nd.exports;class xb{analyze(e,a){const n=[];if(e.length===0)return n;const l=e.reduce((h,g)=>h+g.diffCents,0)/e.length;Math.abs(l)>15&&n.push({category:"pitch",level:"warning",message:`${l>0?"":""}${l>0?"":""}`});const i=e.map(h=>h.guidePitch).sort((h,g)=>h-g),s=i[Math.floor(i.length*.8)],r=e.filter(h=>h.guidePitch>=s);r.length>5&&r.reduce((g,f)=>g+f.diffCents,0)/r.length<-20&&n.push({category:"pitch",level:"info",message:""});let c=0,u=0;for(let h=5;h<e.length;h++){const g=e[h-5],f=e[h],d=1200*Math.log2(f.guidePitch/g.guidePitch);Math.abs(d)>500&&(u++,Math.abs(f.diffCents)>50&&c++)}return u>0&&c/u>.4&&n.push({category:"pitch",level:"warning",message:""}),a>5&&n.push({category:"expression",level:"positive",message:""}),n}}class Sb{constructor(){q(this,"frames",[]);q(this,"vibratoBuffer",[]);q(this,"lastVibratoTime",0);q(this,"vibratoState",!1);q(this,"vibratoCount",0);q(this,"advisor",new xb);q(this,"VIBRATO_WINDOW",.5);q(this,"VIBRATO_DEPTH_MIN",10);q(this,"phraseScores",[])}reset(){this.frames=[],this.vibratoBuffer=[],this.vibratoState=!1,this.vibratoCount=0}feed(e,a,n){if(a<=0)return this.vibratoBuffer=[],this.vibratoState=!1,{isVibrato:!1};let l=0;n>0&&(l=1200*Math.log2(a/n)),this.vibratoBuffer.push({t:e,p:a});const i=e;this.vibratoBuffer=this.vibratoBuffer.filter(r=>i-r.t<=this.VIBRATO_WINDOW);let s=!1;if(this.vibratoBuffer.length>5){const r=this.vibratoBuffer[0],c=this.vibratoBuffer.map(f=>1200*Math.log2(f.p/r.p)),u=Math.min(...c),g=Math.max(...c)-u;if(g>this.VIBRATO_DEPTH_MIN&&g<200){const f=c.reduce((v,y)=>v+y,0)/c.length;let d=0;for(let v=1;v<c.length;v++)(c[v]-f)*(c[v-1]-f)<0&&d++;d>=3&&d<=12&&(s=!0)}}return s?(this.vibratoState||this.vibratoCount++,this.vibratoState=!0,this.lastVibratoTime=i):i-this.lastVibratoTime>.2&&(this.vibratoState=!1),n>0&&this.frames.push({time:e,userPitch:a,guidePitch:n,diffCents:l,hasVibrato:this.vibratoState,isStable:Math.abs(l)<40}),{isVibrato:this.vibratoState}}summarize(e=[]){if(this.calculatePhraseScores(e),this.frames.length===0)return{totalScore:0,radar:{pitch:0,stability:0,expressiveness:0,rhythm:0,technique:0},tendency:0,vibratoCount:0,vibratoSec:0,notesHit:0,notesTotal:0,comment:"",advice:[],phraseScores:[],weakNotes:[]};const n=this.frames.filter(d=>d.userPitch>0&&d.guidePitch>0),l=this.frames.filter(d=>d.guidePitch>0).length,i=this.calculatePitchScore(n),s=this.calculateStabilityScore(n),r=Math.min(100,this.vibratoCount*10),c=l>0?n.length/l*100:0,u=n.reduce((d,v)=>d+v.diffCents,0)/(n.length||1),h=Math.round(i*.4+s*.2+c*.2+r*.2),g=this.advisor.analyze(this.frames,this.vibratoCount),f=this.analyzeWeakNotes(n);return{totalScore:Math.min(100,Math.max(0,h)),radar:{pitch:Math.round(i),stability:Math.round(s),expressiveness:Math.round(r),rhythm:Math.round(c),technique:Math.round(r)},tendency:u,vibratoCount:this.vibratoCount,vibratoSec:0,notesHit:0,notesTotal:0,comment:this.getComment(h),advice:g,phraseScores:this.phraseScores,weakNotes:f}}analyzeWeakNotes(e){const a={};return e.forEach(n=>{if(n.guidePitch<=0)return;const i=(Math.round(69+12*Math.log2(n.guidePitch/440))%12+12)%12;a[i]||(a[i]={sum:0,count:0}),a[i].sum+=n.diffCents,a[i].count++}),Object.entries(a).map(([n,l])=>({noteIndex:parseInt(n),diff:l.sum/l.count,count:l.count})).filter(n=>Math.abs(n.diff)>15).sort((n,l)=>Math.abs(l.diff)-Math.abs(n.diff)).slice(0,3)}calculatePhraseScores(e){this.phraseScores=[],!(!e||e.length===0)&&e.forEach(a=>{const n=this.frames.filter(r=>r.time>=a.startTime&&r.time<=a.endTime),l=n.filter(r=>r.userPitch>0&&r.guidePitch>0);if(n.length===0)return;let i=0;l.length>0&&(i=this.calculatePitchScore(l));let s="Bad";i>=90?s="Perfect":i>=70&&(s="Good"),this.phraseScores.push({phraseId:a.id,startTime:a.startTime,score:Math.round(i),evaluation:s})})}calculatePitchScore(e){if(e.length===0)return 0;const a=e.length;return e.filter(l=>Math.abs(l.diffCents)<50).length/a*100}calculateStabilityScore(e){if(e.length===0)return 0;const a=e.filter(l=>l.isStable&&!l.hasVibrato).length,n=e.filter(l=>!l.hasVibrato).length;return n>0?a/n*100:100}getComment(e){return e>=90?"":e>=80?"":e>=70?"":""}}var Im={},nr={};function wb(t){var e=new oe(t),a=e.readChunk();if(a.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+a.id+"'";for(var n=Tb(a.data),l=[],i=0;!e.eof()&&i<n.numTracks;i++){var s=e.readChunk();if(s.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+s.id+"'";var r=Mb(s.data);l.push(r)}return{header:n,tracks:l}}function Tb(t){var e=new oe(t),a=e.readUInt16(),n=e.readUInt16(),l={format:a,numTracks:n},i=e.readUInt16();return i&32768?(l.framesPerSecond=256-(i>>8),l.ticksPerFrame=i&255):l.ticksPerBeat=i,l}function Mb(t){for(var e=new oe(t),a=[];!e.eof();){var n=i();a.push(n)}return a;var l;function i(){var s={};s.deltaTime=e.readVarInt();var r=e.readUInt8();if((r&240)===240)if(r===255){s.meta=!0;var c=e.readUInt8(),u=e.readVarInt();switch(c){case 0:if(s.type="sequenceNumber",u!==2)throw"Expected length for sequenceNumber event is 2, got "+u;return s.number=e.readUInt16(),s;case 1:return s.type="text",s.text=e.readString(u),s;case 2:return s.type="copyrightNotice",s.text=e.readString(u),s;case 3:return s.type="trackName",s.text=e.readString(u),s;case 4:return s.type="instrumentName",s.text=e.readString(u),s;case 5:return s.type="lyrics",s.text=e.readString(u),s;case 6:return s.type="marker",s.text=e.readString(u),s;case 7:return s.type="cuePoint",s.text=e.readString(u),s;case 32:if(s.type="channelPrefix",u!=1)throw"Expected length for channelPrefix event is 1, got "+u;return s.channel=e.readUInt8(),s;case 33:if(s.type="portPrefix",u!=1)throw"Expected length for portPrefix event is 1, got "+u;return s.port=e.readUInt8(),s;case 47:if(s.type="endOfTrack",u!=0)throw"Expected length for endOfTrack event is 0, got "+u;return s;case 81:if(s.type="setTempo",u!=3)throw"Expected length for setTempo event is 3, got "+u;return s.microsecondsPerBeat=e.readUInt24(),s;case 84:if(s.type="smpteOffset",u!=5)throw"Expected length for smpteOffset event is 5, got "+u;var h=e.readUInt8(),g={0:24,32:25,64:29,96:30};return s.frameRate=g[h&96],s.hour=h&31,s.min=e.readUInt8(),s.sec=e.readUInt8(),s.frame=e.readUInt8(),s.subFrame=e.readUInt8(),s;case 88:if(s.type="timeSignature",u!=2&&u!=4)throw"Expected length for timeSignature event is 4 or 2, got "+u;return s.numerator=e.readUInt8(),s.denominator=1<<e.readUInt8(),u===4?(s.metronome=e.readUInt8(),s.thirtyseconds=e.readUInt8()):(s.metronome=36,s.thirtyseconds=8),s;case 89:if(s.type="keySignature",u!=2)throw"Expected length for keySignature event is 2, got "+u;return s.key=e.readInt8(),s.scale=e.readUInt8(),s;case 127:return s.type="sequencerSpecific",s.data=e.readBytes(u),s;default:return s.type="unknownMeta",s.data=e.readBytes(u),s.metatypeByte=c,s}}else if(r==240){s.type="sysEx";var u=e.readVarInt();return s.data=e.readBytes(u),s}else if(r==247){s.type="endSysEx";var u=e.readVarInt();return s.data=e.readBytes(u),s}else throw"Unrecognised MIDI event type byte: "+r;else{var f;if(r&128)f=e.readUInt8(),l=r;else{if(l===null)throw"Running status byte encountered before status byte";f=r,r=l,s.running=!0}var d=r>>4;switch(s.channel=r&15,d){case 8:return s.type="noteOff",s.noteNumber=f,s.velocity=e.readUInt8(),s;case 9:var v=e.readUInt8();return s.type=v===0?"noteOff":"noteOn",s.noteNumber=f,s.velocity=v,v===0&&(s.byte9=!0),s;case 10:return s.type="noteAftertouch",s.noteNumber=f,s.amount=e.readUInt8(),s;case 11:return s.type="controller",s.controllerType=f,s.value=e.readUInt8(),s;case 12:return s.type="programChange",s.programNumber=f,s;case 13:return s.type="channelAftertouch",s.amount=f,s;case 14:return s.type="pitchBend",s.value=f+(e.readUInt8()<<7)-8192,s;default:throw"Unrecognised MIDI event type: "+d}}}}function oe(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}oe.prototype.eof=function(){return this.pos>=this.bufferLen};oe.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t};oe.prototype.readInt8=function(){var t=this.readUInt8();return t&128?t-256:t};oe.prototype.readUInt16=function(){var t=this.readUInt8(),e=this.readUInt8();return(t<<8)+e};oe.prototype.readInt16=function(){var t=this.readUInt16();return t&32768?t-65536:t};oe.prototype.readUInt24=function(){var t=this.readUInt8(),e=this.readUInt8(),a=this.readUInt8();return(t<<16)+(e<<8)+a};oe.prototype.readInt24=function(){var t=this.readUInt24();return t&8388608?t-16777216:t};oe.prototype.readUInt32=function(){var t=this.readUInt8(),e=this.readUInt8(),a=this.readUInt8(),n=this.readUInt8();return(t<<24)+(e<<16)+(a<<8)+n};oe.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e};oe.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)};oe.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(e&128)t+=e&127,t<<=7;else return t+e}return t};oe.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),a=this.readBytes(e);return{id:t,length:e,data:a}};var Nb=wb;function jb(t,e){if(typeof t!="object")throw"Invalid MIDI data";e=e||{};var a=t.header||{},n=t.tracks||[],l,i=n.length,s=new It;for(kb(s,a,i),l=0;l<i;l++)Ab(s,n[l],e);return s.buffer}function kb(t,e,a){var n=e.format==null?1:e.format,l=128;e.timeDivision?l=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?l=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(l=e.ticksPerBeat&32767);var i=new It;i.writeUInt16(n),i.writeUInt16(a),i.writeUInt16(l),t.writeChunk("MThd",i.buffer)}function Ab(t,e,a){var n=new It,l,i=e.length,s=null;for(l=0;l<i;l++)(a.running===!1||!a.running&&!e[l].running)&&(s=null),s=zb(n,e[l],s,a.useByte9ForNoteOff);t.writeChunk("MTrk",n.buffer)}function zb(t,e,a,n){var l=e.type,i=e.deltaTime,s=e.text||"",r=e.data||[],c=null;switch(t.writeVarInt(i),l){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(s.length),t.writeString(s);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(s.length),t.writeString(s);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(s.length),t.writeString(s);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(s.length),t.writeString(s);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(s.length),t.writeString(s);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(s.length),t.writeString(s);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(s.length),t.writeString(s);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var u={24:0,25:32,29:64,30:96},h=e.hour&31|u[e.frameRate];t.writeUInt8(h),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var g=Math.floor(Math.log(e.denominator)/Math.LN2)&255;t.writeUInt8(g),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(r.length),t.writeBytes(r);break;case"unknownMeta":e.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(r.length),t.writeBytes(r));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(r.length),t.writeBytes(r);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(r.length),t.writeBytes(r);break;case"noteOff":var f=n!==!1&&e.byte9||n&&e.velocity==0?144:128;c=f|e.channel,c!==a&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":c=144|e.channel,c!==a&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":c=160|e.channel,c!==a&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":c=176|e.channel,c!==a&&t.writeUInt8(c),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":c=192|e.channel,c!==a&&t.writeUInt8(c),t.writeUInt8(e.programNumber);break;case"channelAftertouch":c=208|e.channel,c!==a&&t.writeUInt8(c),t.writeUInt8(e.amount);break;case"pitchBend":c=224|e.channel,c!==a&&t.writeUInt8(c);var d=8192+e.value,v=d&127,y=d>>7&127;t.writeUInt8(v),t.writeUInt8(y);break;default:throw"Unrecognized event type: "+l}return c}function It(){this.buffer=[]}It.prototype.writeUInt8=function(t){this.buffer.push(t&255)};It.prototype.writeInt8=It.prototype.writeUInt8;It.prototype.writeUInt16=function(t){var e=t>>8&255,a=t&255;this.writeUInt8(e),this.writeUInt8(a)};It.prototype.writeInt16=It.prototype.writeUInt16;It.prototype.writeUInt24=function(t){var e=t>>16&255,a=t>>8&255,n=t&255;this.writeUInt8(e),this.writeUInt8(a),this.writeUInt8(n)};It.prototype.writeInt24=It.prototype.writeUInt24;It.prototype.writeUInt32=function(t){var e=t>>24&255,a=t>>16&255,n=t>>8&255,l=t&255;this.writeUInt8(e),this.writeUInt8(a),this.writeUInt8(n),this.writeUInt8(l)};It.prototype.writeInt32=It.prototype.writeUInt32;It.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))};It.prototype.writeString=function(t){var e,a=t.length,n=[];for(e=0;e<a;e++)n.push(t.codePointAt(e));this.writeBytes(n)};It.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,a=[];for(a.push(e&127),e>>=7;e;){var n=e&127|128;a.push(n),e>>=7}this.writeBytes(a.reverse())}};It.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)};var _b=jb;nr.parseMidi=Nb;nr.writeMidi=_b;var Os={},hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.insert=hn.search=void 0;function Pm(t,e,a){a===void 0&&(a="ticks");var n=0,l=t.length,i=l;if(l>0&&t[l-1][a]<=e)return l-1;for(;n<i;){var s=Math.floor(n+(i-n)/2),r=t[s],c=t[s+1];if(r[a]===e){for(var u=s;u<t.length;u++){var h=t[u];h[a]===e&&(s=u)}return s}else{if(r[a]<e&&c[a]>e)return s;r[a]>e?i=s:r[a]<e&&(n=s+1)}}return-1}hn.search=Pm;function Eb(t,e,a){if(a===void 0&&(a="ticks"),t.length){var n=Pm(t,e[a],a);t.splice(n+1,0,e)}else t.push(e)}hn.insert=Eb;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.keySignatureKeys=void 0;var e=hn,a=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var n=function(){function l(i){var s=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",a.set(this,480),i){a.set(this,i.header.ticksPerBeat),i.tracks.forEach(function(c){c.forEach(function(u){u.meta&&(u.type==="timeSignature"?s.timeSignatures.push({ticks:u.absoluteTime,timeSignature:[u.numerator,u.denominator]}):u.type==="setTempo"?s.tempos.push({bpm:6e7/u.microsecondsPerBeat,ticks:u.absoluteTime}):u.type==="keySignature"&&s.keySignatures.push({key:t.keySignatureKeys[u.key+7],scale:u.scale===0?"major":"minor",ticks:u.absoluteTime}))})});var r=0;i.tracks[0].forEach(function(c){r+=c.deltaTime,c.meta&&(c.type==="trackName"?s.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&s.meta.push({text:c.text,ticks:r,type:c.type}))}),this.update()}}return l.prototype.update=function(){var i=this,s=0,r=0;this.tempos.sort(function(c,u){return c.ticks-u.ticks}),this.tempos.forEach(function(c,u){var h=u>0?i.tempos[u-1].bpm:i.tempos[0].bpm,g=c.ticks/i.ppq-r,f=60/h*g;c.time=f+s,s=c.time,r+=g}),this.timeSignatures.sort(function(c,u){return c.ticks-u.ticks}),this.timeSignatures.forEach(function(c,u){var h=u>0?i.timeSignatures[u-1]:i.timeSignatures[0],g=(c.ticks-h.ticks)/i.ppq,f=g/h.timeSignature[0]/(h.timeSignature[1]/4);h.measures=h.measures||0,c.measures=f+h.measures})},l.prototype.ticksToSeconds=function(i){var s=(0,e.search)(this.tempos,i);if(s!==-1){var r=this.tempos[s],c=r.time,u=(i-r.ticks)/this.ppq;return c+60/r.bpm*u}else{var h=i/this.ppq;return 60/120*h}},l.prototype.ticksToMeasures=function(i){var s=(0,e.search)(this.timeSignatures,i);if(s!==-1){var r=this.timeSignatures[s],c=(i-r.ticks)/this.ppq;return r.measures+c/(r.timeSignature[0]/r.timeSignature[1])/4}else return i/this.ppq/4},Object.defineProperty(l.prototype,"ppq",{get:function(){return a.get(this)},enumerable:!1,configurable:!0}),l.prototype.secondsToTicks=function(i){var s=(0,e.search)(this.tempos,i,"time");if(s!==-1){var r=this.tempos[s],c=r.time,u=i-c,h=u/(60/r.bpm);return Math.round(r.ticks+h*this.ppq)}else{var g=i/.5;return Math.round(g*this.ppq)}},l.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(i){return{bpm:i.bpm,ticks:i.ticks}}),timeSignatures:this.timeSignatures}},l.prototype.fromJSON=function(i){this.name=i.name,this.tempos=i.tempos.map(function(s){return Object.assign({},s)}),this.timeSignatures=i.timeSignatures.map(function(s){return Object.assign({},s)}),this.keySignatures=i.keySignatures.map(function(s){return Object.assign({},s)}),this.meta=i.meta.map(function(s){return Object.assign({},s)}),a.set(this,i.ppq),this.update()},l.prototype.setTempo=function(i){this.tempos=[{bpm:i,ticks:0}],this.update()},l}();t.Header=n})(Os);var ii={},lu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(l,i){return l[t.controlChangeNames[i]]=i,l},{});var e=new WeakMap,a=new WeakMap,n=function(){function l(i,s){e.set(this,s),a.set(this,i.controllerType),this.ticks=i.absoluteTime,this.value=i.value}return Object.defineProperty(l.prototype,"number",{get:function(){return a.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"time",{get:function(){var i=e.get(this);return i.ticksToSeconds(this.ticks)},set:function(i){var s=e.get(this);this.ticks=s.secondsToTicks(i)},enumerable:!1,configurable:!0}),l.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},l}();t.ControlChange=n})(lu);var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.createControlChanges=void 0;var Ri=lu;function Cb(){return new Proxy({},{get:function(t,e){if(t[e])return t[e];if(Ri.controlChangeIds.hasOwnProperty(e))return t[Ri.controlChangeIds[e]]},set:function(t,e,a){return Ri.controlChangeIds.hasOwnProperty(e)?t[Ri.controlChangeIds[e]]=a:t[e]=a,!0}})}lr.createControlChanges=Cb;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.PitchBend=void 0;var Fr=new WeakMap,Ob=function(){function t(e,a){Fr.set(this,a),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(t.prototype,"time",{get:function(){var e=Fr.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var a=Fr.get(this);this.ticks=a.secondsToTicks(e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();ir.PitchBend=Ob;var sr={},Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.DrumKitByPatchID=Va.InstrumentFamilyByID=Va.instrumentByPatchID=void 0;Va.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];Va.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];Va.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(sr,"__esModule",{value:!0});sr.Instrument=void 0;var Bi=Va,Rf=new WeakMap,Db=function(){function t(e,a){if(this.number=0,Rf.set(this,a),this.number=0,e){var n=e.find(function(l){return l.type==="programChange"});n&&(this.number=n.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?Bi.DrumKitByPatchID[this.number]:Bi.instrumentByPatchID[this.number]},set:function(e){var a=Bi.instrumentByPatchID.indexOf(e);a!==-1&&(this.number=a)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":Bi.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){var e=Rf.get(this);return e.channel===9},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(e){this.number=e.number},t}();sr.Instrument=Db;var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.Note=void 0;function Ub(t){var e=Math.floor(t/12)-1;return Wm(t)+e.toString()}function Wm(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a=t%12;return e[a]}function Rb(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.indexOf(t)}var Bb=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(a){var n=t.exec(a),l=n[1],i=n[2],s=e[l.toLowerCase()];return s+(parseInt(i,10)+1)*12}}(),wn=new WeakMap,Hb=function(){function t(e,a,n){wn.set(this,n),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=a.velocity,this.ticks=e.ticks,this.durationTicks=a.ticks-e.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return Ub(this.midi)},set:function(e){this.midi=Bb(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var a=e-this.octave;this.midi+=a*12},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return Wm(this.midi)},set:function(e){this.midi=12*(this.octave+1)+Rb(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=wn.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var a=wn.get(this),n=a.secondsToTicks(this.time+e);this.durationTicks=n-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var e=wn.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var a=wn.get(this);this.ticks=a.secondsToTicks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){var e=wn.get(this);return e.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();rr.Note=Hb;Object.defineProperty(ii,"__esModule",{value:!0});ii.Track=void 0;var Kr=hn,Gb=lu,qb=lr,Vb=ir,Bf=sr,Yb=rr,Hi=new WeakMap,Lb=function(){function t(e,a){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,qb.createControlChanges)(),this.pitchBends=[],Hi.set(this,a),e){var l=e.find(function(f){return f.type==="trackName"});this.name=l?l.text:""}if(this.instrument=new Bf.Instrument(e,this),this.channel=0,e){for(var i=e.filter(function(f){return f.type==="noteOn"}),s=e.filter(function(f){return f.type==="noteOff"}),r=function(){var f=i.shift();c.channel=f.channel;var d=s.findIndex(function(y){return y.noteNumber===f.noteNumber&&y.absoluteTime>=f.absoluteTime});if(d!==-1){var v=s.splice(d,1)[0];c.addNote({durationTicks:v.absoluteTime-f.absoluteTime,midi:f.noteNumber,noteOffVelocity:v.velocity/127,ticks:f.absoluteTime,velocity:f.velocity/127})}},c=this;i.length;)r();var u=e.filter(function(f){return f.type==="controller"});u.forEach(function(f){n.addCC({number:f.controllerType,ticks:f.absoluteTime,value:f.value/127})});var h=e.filter(function(f){return f.type==="pitchBend"});h.forEach(function(f){n.addPitchBend({ticks:f.absoluteTime,value:f.value/Math.pow(2,13)})});var g=e.find(function(f){return f.type==="endOfTrack"});this.endOfTrackTicks=g!==void 0?g.absoluteTime:void 0}}return t.prototype.addNote=function(e){var a=Hi.get(this),n=new Yb.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},a);return Object.assign(n,e),(0,Kr.insert)(this.notes,n,"ticks"),this},t.prototype.addCC=function(e){var a=Hi.get(this),n=new Gb.ControlChange({controllerType:e.number},a);return delete e.number,Object.assign(n,e),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,Kr.insert)(this.controlChanges[n.number],n,"ticks"),this},t.prototype.addPitchBend=function(e){var a=Hi.get(this),n=new Vb.PitchBend({},a);return Object.assign(n,e),(0,Kr.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,a=0;a<this.notes.length-1;a++){var n=this.notes[a].time+this.notes[a].duration;e<n&&(e=n)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,a=0;a<this.notes.length-1;a++){var n=this.notes[a].ticks+this.notes[a].durationTicks;e<n&&(e=n)}return e},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(e){var a=this;this.name=e.name,this.channel=e.channel,this.instrument=new Bf.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(var n in e.controlChanges)e.controlChanges[n]&&e.controlChanges[n].forEach(function(l){a.addCC({number:l.number,ticks:l.ticks,value:l.value})});e.notes.forEach(function(l){a.addNote({durationTicks:l.durationTicks,midi:l.midi,ticks:l.ticks,velocity:l.velocity})})},t.prototype.toJSON=function(){for(var e={},a=0;a<127;a++)this.controlChanges.hasOwnProperty(a)&&(e[a]=this.controlChanges[a].map(function(l){return l.toJSON()}));var n={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(function(l){return l.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(l){return l.toJSON()})};return this.endOfTrackTicks!==void 0&&(n.endOfTrackTicks=this.endOfTrackTicks),n},t}();ii.Track=Lb;var cr={};function Xb(t){var e=[];return $m(t,e),e}function $m(t,e){for(var a=0;a<t.length;a++){var n=t[a];Array.isArray(n)?$m(n,e):e.push(n)}}const Qb=Object.freeze(Object.defineProperty({__proto__:null,flatten:Xb},Symbol.toStringTag,{value:"Module"})),Zb=w0(Qb);var va=zn&&zn.__spreadArray||function(t,e,a){if(a||arguments.length===2)for(var n=0,l=e.length,i;n<l;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(cr,"__esModule",{value:!0});cr.encode=void 0;var Fb=nr,Kb=Os,Jb=Zb;function Ib(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(t.velocity*127)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(t.noteOffVelocity*127)}]}function Pb(t){return(0,Jb.flatten)(t.notes.map(function(e){return Ib(e,t.channel)}))}function Wb(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(t.value*127)}}function $b(t){for(var e=[],a=0;a<127;a++)t.controlChanges.hasOwnProperty(a)&&t.controlChanges[a].forEach(function(n){e.push(Wb(n,t.channel))});return e}function ty(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}function ey(t){var e=[];return t.pitchBends.forEach(function(a){e.push(ty(a,t.channel))}),e}function ay(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}function ny(t){return{absoluteTime:0,deltaTime:0,meta:!0,text:t,type:"trackName"}}function ly(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}function iy(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function sy(t){var e=Kb.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:t.scale==="major"?0:1,type:"keySignature"}}function ry(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}function cy(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:va([va(va(va(va([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(a){return sy(a)}),!0),t.header.meta.map(function(a){return ry(a)}),!0),t.header.tempos.map(function(a){return ly(a)}),!0),t.header.timeSignatures.map(function(a){return iy(a)}),!0)],t.tracks.map(function(a){return va(va(va([ny(a.name),ay(a)],Pb(a),!0),$b(a),!0),ey(a),!0)}),!0)};return e.tracks=e.tracks.map(function(a){a=a.sort(function(l,i){return l.absoluteTime-i.absoluteTime});var n=0;return a.forEach(function(l){l.deltaTime=l.absoluteTime-n,n=l.absoluteTime,delete l.absoluteTime}),a.push({deltaTime:0,meta:!0,type:"endOfTrack"}),a}),new Uint8Array((0,Fb.writeMidi)(e))}cr.encode=cy;(function(t){var e=zn&&zn.__awaiter||function(g,f,d,v){function y(w){return w instanceof d?w:new d(function(p){p(w)})}return new(d||(d=Promise))(function(w,p){function m(T){try{S(v.next(T))}catch(j){p(j)}}function b(T){try{S(v.throw(T))}catch(j){p(j)}}function S(T){T.done?w(T.value):y(T.value).then(m,b)}S((v=v.apply(g,f||[])).next())})},a=zn&&zn.__generator||function(g,f){var d={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,y,w,p;return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(S){return function(T){return b([S,T])}}function b(S){if(v)throw new TypeError("Generator is already executing.");for(;d;)try{if(v=1,y&&(w=S[0]&2?y.return:S[0]?y.throw||((w=y.return)&&w.call(y),0):y.next)&&!(w=w.call(y,S[1])).done)return w;switch(y=0,w&&(S=[S[0]&2,w.value]),S[0]){case 0:case 1:w=S;break;case 4:return d.label++,{value:S[1],done:!1};case 5:d.label++,y=S[1],S=[0];continue;case 7:S=d.ops.pop(),d.trys.pop();continue;default:if(w=d.trys,!(w=w.length>0&&w[w.length-1])&&(S[0]===6||S[0]===2)){d=0;continue}if(S[0]===3&&(!w||S[1]>w[0]&&S[1]<w[3])){d.label=S[1];break}if(S[0]===6&&d.label<w[1]){d.label=w[1],w=S;break}if(w&&d.label<w[2]){d.label=w[2],d.ops.push(S);break}w[2]&&d.ops.pop(),d.trys.pop();continue}S=f.call(g,d)}catch(T){S=[6,T],y=0}finally{v=w=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.Track=t.Midi=void 0;var n=nr,l=Os,i=ii,s=cr,r=function(){function g(f){var d=this,v=null;if(f){var y=f instanceof ArrayBuffer?new Uint8Array(f):f;v=(0,n.parseMidi)(y),v.tracks.forEach(function(w){var p=0;w.forEach(function(m){p+=m.deltaTime,m.absoluteTime=p})}),v.tracks=h(v.tracks)}this.header=new l.Header(v),this.tracks=[],f&&(this.tracks=v.tracks.map(function(w){return new i.Track(w,d.header)}),v.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return g.fromUrl=function(f){return e(this,void 0,void 0,function(){var d,v;return a(this,function(y){switch(y.label){case 0:return[4,fetch(f)];case 1:return d=y.sent(),d.ok?[4,d.arrayBuffer()]:[3,3];case 2:return v=y.sent(),[2,new g(v)];case 3:throw new Error("Could not load '".concat(f,"'"))}})})},Object.defineProperty(g.prototype,"name",{get:function(){return this.header.name},set:function(f){this.header.name=f},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"duration",{get:function(){var f=this.tracks.map(function(d){return d.duration});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"durationTicks",{get:function(){var f=this.tracks.map(function(d){return d.durationTicks});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),g.prototype.addTrack=function(){var f=new i.Track(void 0,this.header);return this.tracks.push(f),f},g.prototype.toArray=function(){return(0,s.encode)(this)},g.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(f){return f.toJSON()})}},g.prototype.fromJSON=function(f){var d=this;this.header=new l.Header,this.header.fromJSON(f.header),this.tracks=f.tracks.map(function(v){var y=new i.Track(void 0,d.header);return y.fromJSON(v),y})},g.prototype.clone=function(){var f=new g;return f.fromJSON(this.toJSON()),f},g}();t.Midi=r;var c=ii;Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return c.Track}});var u=Os;Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return u.Header}});function h(g){for(var f=[],d=0;d<g.length;d++)for(var v=f.length,y=new Map,w=Array(16).fill(0),p=0,m=g[d];p<m.length;p++){var b=m[p],S=v,T=b.channel;if(T!==void 0){b.type==="programChange"&&(w[T]=b.programNumber);var j=w[T],M="".concat(j," ").concat(T);y.has(M)?S=y.get(M):(S=v+y.size,y.set(M,S))}f[S]||f.push([]),f[S].push(b)}return f}})(Im);const Jr="ontei_db",Ir=1,Tn="files",Gi={async init(){return new Promise((t,e)=>{const a=indexedDB.open(Jr,Ir);a.onupgradeneeded=n=>{const l=n.target.result;l.objectStoreNames.contains(Tn)||l.createObjectStore(Tn)},a.onsuccess=()=>t(),a.onerror=()=>e(a.error)})},async saveMidi(t){return this._put("lastMidi",t)},async loadMidi(){return await this._get("lastMidi")??null},async _put(t,e){return new Promise((a,n)=>{const l=indexedDB.open(Jr,Ir);l.onsuccess=()=>{const s=l.result.transaction(Tn,"readwrite");s.objectStore(Tn).put(e,t),s.oncomplete=()=>a(),s.onerror=()=>n(s.error)},l.onerror=()=>n(l.error)})},async _get(t){return new Promise((e,a)=>{const n=indexedDB.open(Jr,Ir);n.onsuccess=()=>{const r=n.result.transaction(Tn,"readonly").objectStore(Tn).get(t);r.onsuccess=()=>e(r.result),r.onerror=()=>a(r.error)},n.onerror=()=>a(n.error)})}};function be(t){if(this.size=t|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(this.size*2),a=0;a<e.length;a+=2){const c=Math.PI*a/this.size;e[a]=Math.cos(c),e[a+1]=-Math.sin(c)}this.table=e;for(var n=0,l=1;this.size>l;l<<=1)n++;this._width=n%2===0?n-1:n,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var s=0;s<this._width;s+=2){var r=this._width-s-2;this._bitrev[i]|=(i>>>s&3)<<r}}this._out=null,this._data=null,this._inv=0}var oy=be;be.prototype.fromComplexArray=function(e,a){for(var n=a||new Array(e.length>>>1),l=0;l<e.length;l+=2)n[l>>>1]=e[l];return n};be.prototype.createComplexArray=function(){const e=new Array(this._csize);for(var a=0;a<e.length;a++)e[a]=0;return e};be.prototype.toComplexArray=function(e,a){for(var n=a||this.createComplexArray(),l=0;l<n.length;l+=2)n[l]=e[l>>>1],n[l+1]=0;return n};be.prototype.completeSpectrum=function(e){for(var a=this._csize,n=a>>>1,l=2;l<n;l+=2)e[a-l]=e[l],e[a-l+1]=-e[l+1]};be.prototype.transform=function(e,a){if(e===a)throw new Error("Input and output buffers must be different");this._out=e,this._data=a,this._inv=0,this._transform4(),this._out=null,this._data=null};be.prototype.realTransform=function(e,a){if(e===a)throw new Error("Input and output buffers must be different");this._out=e,this._data=a,this._inv=0,this._realTransform4(),this._out=null,this._data=null};be.prototype.inverseTransform=function(e,a){if(e===a)throw new Error("Input and output buffers must be different");this._out=e,this._data=a,this._inv=1,this._transform4();for(var n=0;n<e.length;n++)e[n]/=this.size;this._out=null,this._data=null};be.prototype._transform4=function(){var e=this._out,a=this._csize,n=this._width,l=1<<n,i=a/l<<1,s,r,c=this._bitrev;if(i===4)for(s=0,r=0;s<a;s+=i,r++){const y=c[r];this._singleTransform2(s,y,l)}else for(s=0,r=0;s<a;s+=i,r++){const y=c[r];this._singleTransform4(s,y,l)}var u=this._inv?-1:1,h=this.table;for(l>>=2;l>=2;l>>=2){i=a/l<<1;var g=i>>>2;for(s=0;s<a;s+=i)for(var f=s+g,d=s,v=0;d<f;d+=2,v+=l){const y=d,w=y+g,p=w+g,m=p+g,b=e[y],S=e[y+1],T=e[w],j=e[w+1],M=e[p],x=e[p+1],N=e[m],C=e[m+1],O=b,P=S,rt=h[v],yt=u*h[v+1],st=T*rt-j*yt,E=T*yt+j*rt,D=h[2*v],A=u*h[2*v+1],Q=M*D-x*A,at=M*A+x*D,vt=h[3*v],K=u*h[3*v+1],R=N*vt-C*K,Y=N*K+C*vt,W=O+Q,ut=P+at,et=O-Q,it=P-at,mt=st+R,J=E+Y,bt=u*(st-R),wt=u*(E-Y),z=W+mt,U=ut+J,Z=W-mt,G=ut-J,$=et+wt,I=it-bt,gt=et-wt,B=it+bt;e[y]=z,e[y+1]=U,e[w]=$,e[w+1]=I,e[p]=Z,e[p+1]=G,e[m]=gt,e[m+1]=B}}};be.prototype._singleTransform2=function(e,a,n){const l=this._out,i=this._data,s=i[a],r=i[a+1],c=i[a+n],u=i[a+n+1],h=s+c,g=r+u,f=s-c,d=r-u;l[e]=h,l[e+1]=g,l[e+2]=f,l[e+3]=d};be.prototype._singleTransform4=function(e,a,n){const l=this._out,i=this._data,s=this._inv?-1:1,r=n*2,c=n*3,u=i[a],h=i[a+1],g=i[a+n],f=i[a+n+1],d=i[a+r],v=i[a+r+1],y=i[a+c],w=i[a+c+1],p=u+d,m=h+v,b=u-d,S=h-v,T=g+y,j=f+w,M=s*(g-y),x=s*(f-w),N=p+T,C=m+j,O=b+x,P=S-M,rt=p-T,yt=m-j,st=b-x,E=S+M;l[e]=N,l[e+1]=C,l[e+2]=O,l[e+3]=P,l[e+4]=rt,l[e+5]=yt,l[e+6]=st,l[e+7]=E};be.prototype._realTransform4=function(){var e=this._out,a=this._csize,n=this._width,l=1<<n,i=a/l<<1,s,r,c=this._bitrev;if(i===4)for(s=0,r=0;s<a;s+=i,r++){const vi=c[r];this._singleRealTransform2(s,vi>>>1,l>>>1)}else for(s=0,r=0;s<a;s+=i,r++){const vi=c[r];this._singleRealTransform4(s,vi>>>1,l>>>1)}var u=this._inv?-1:1,h=this.table;for(l>>=2;l>=2;l>>=2){i=a/l<<1;var g=i>>>1,f=g>>>1,d=f>>>1;for(s=0;s<a;s+=i)for(var v=0,y=0;v<=d;v+=2,y+=l){var w=s+v,p=w+f,m=p+f,b=m+f,S=e[w],T=e[w+1],j=e[p],M=e[p+1],x=e[m],N=e[m+1],C=e[b],O=e[b+1],P=S,rt=T,yt=h[y],st=u*h[y+1],E=j*yt-M*st,D=j*st+M*yt,A=h[2*y],Q=u*h[2*y+1],at=x*A-N*Q,vt=x*Q+N*A,K=h[3*y],R=u*h[3*y+1],Y=C*K-O*R,W=C*R+O*K,ut=P+at,et=rt+vt,it=P-at,mt=rt-vt,J=E+Y,bt=D+W,wt=u*(E-Y),z=u*(D-W),U=ut+J,Z=et+bt,G=it+z,$=mt-wt;if(e[w]=U,e[w+1]=Z,e[p]=G,e[p+1]=$,v===0){var I=ut-J,gt=et-bt;e[m]=I,e[m+1]=gt;continue}if(v!==d){var B=it,F=-mt,ct=ut,H=-et,Tt=-u*z,te=-u*wt,Bt=-u*bt,Ge=-u*J,Yt=B+Tt,Ie=F+te,ye=ct+Ge,Pe=H-Bt,yi=s+f-v,vn=s+g-v;e[yi]=Yt,e[yi+1]=Ie,e[vn]=ye,e[vn+1]=Pe}}}};be.prototype._singleRealTransform2=function(e,a,n){const l=this._out,i=this._data,s=i[a],r=i[a+n],c=s+r,u=s-r;l[e]=c,l[e+1]=0,l[e+2]=u,l[e+3]=0};be.prototype._singleRealTransform4=function(e,a,n){const l=this._out,i=this._data,s=this._inv?-1:1,r=n*2,c=n*3,u=i[a],h=i[a+n],g=i[a+r],f=i[a+c],d=u+g,v=u-g,y=h+f,w=s*(h-f),p=d+y,m=v,b=-w,S=d-y,T=v,j=w;l[e]=p,l[e+1]=0,l[e+2]=m,l[e+3]=b,l[e+4]=S,l[e+5]=0,l[e+6]=T,l[e+7]=j};const uy=S0(oy);class Ll{constructor(e,a){q(this,"_inputLength");q(this,"_fft");q(this,"_bufferSupplier");q(this,"_paddedInputBuffer");q(this,"_transformBuffer");q(this,"_inverseBuffer");if(e<1)throw new Error("Input length must be at least one");this._inputLength=e,this._fft=new uy(hy(2*e)),this._bufferSupplier=a,this._paddedInputBuffer=this._bufferSupplier(this._fft.size),this._transformBuffer=this._bufferSupplier(2*this._fft.size),this._inverseBuffer=this._bufferSupplier(2*this._fft.size)}static forFloat32Array(e){return new Ll(e,a=>new Float32Array(a))}static forFloat64Array(e){return new Ll(e,a=>new Float64Array(a))}static forNumberArray(e){return new Ll(e,a=>Array(a))}get inputLength(){return this._inputLength}autocorrelate(e,a=this._bufferSupplier(e.length)){if(e.length!==this._inputLength)throw new Error(`Input must have length ${this._inputLength} but had length ${e.length}`);for(let l=0;l<e.length;l++)this._paddedInputBuffer[l]=e[l];for(let l=e.length;l<this._paddedInputBuffer.length;l++)this._paddedInputBuffer[l]=0;this._fft.realTransform(this._transformBuffer,this._paddedInputBuffer),this._fft.completeSpectrum(this._transformBuffer);const n=this._transformBuffer;for(let l=0;l<n.length;l+=2)n[l]=n[l]*n[l]+n[l+1]*n[l+1],n[l+1]=0;this._fft.inverseTransform(this._inverseBuffer,this._transformBuffer);for(let l=0;l<e.length;l++)a[l]=this._inverseBuffer[2*l];return a}}function fy(t){const e=[];let a=!1,n=-1/0,l=-1;for(let i=1;i<t.length-1;i++)t[i-1]<=0&&t[i]>0?(a=!0,l=i,n=t[i]):t[i-1]>0&&t[i]<=0?(a=!1,l!==-1&&e.push(l)):a&&t[i]>n&&(n=t[i],l=i);return e}function dy(t,e){const[a,n,l]=[t-1,t,t+1],[i,s,r]=[e[a],e[n],e[l]],c=i/2-s+r/2,u=-(i/2)*(n+l)+s*(a+l)-r/2*(a+n),h=i*n*l/2-s*a*l+r*a*n/2,g=-u/(2*c),f=c*g*g+u*g+h;return[g,f]}class Xl{constructor(e,a){q(this,"_autocorrelator");q(this,"_nsdfBuffer");q(this,"_clarityThreshold",.9);q(this,"_minVolumeAbsolute",0);q(this,"_maxInputAmplitude",1);this._autocorrelator=new Ll(e,a),this._nsdfBuffer=a(e)}static forFloat32Array(e){return new Xl(e,a=>new Float32Array(a))}static forFloat64Array(e){return new Xl(e,a=>new Float64Array(a))}static forNumberArray(e){return new Xl(e,a=>Array(a))}get inputLength(){return this._autocorrelator.inputLength}set clarityThreshold(e){if(!Number.isFinite(e)||e<=0||e>1)throw new Error("clarityThreshold must be a number in the range (0, 1]");this._clarityThreshold=e}set minVolumeAbsolute(e){if(!Number.isFinite(e)||e<0||e>this._maxInputAmplitude)throw new Error(`minVolumeAbsolute must be a number in the range [0, ${this._maxInputAmplitude}]`);this._minVolumeAbsolute=e}set minVolumeDecibels(e){if(!Number.isFinite(e)||e>0)throw new Error("minVolumeDecibels must be a number <= 0");this._minVolumeAbsolute=this._maxInputAmplitude*10**(e/10)}set maxInputAmplitude(e){if(!Number.isFinite(e)||e<=0)throw new Error("maxInputAmplitude must be a number > 0");this._maxInputAmplitude=e}findPitch(e,a){if(this._belowMinimumVolume(e))return[0,0];this._nsdf(e);const n=fy(this._nsdfBuffer);if(n.length===0)return[0,0];const l=Math.max(...n.map(c=>this._nsdfBuffer[c])),i=n.find(c=>this._nsdfBuffer[c]>=this._clarityThreshold*l),[s,r]=dy(i,this._nsdfBuffer);return[a/s,Math.min(r,1)]}_belowMinimumVolume(e){if(this._minVolumeAbsolute===0)return!1;let a=0;for(let n=0;n<e.length;n++)a+=e[n]**2;return Math.sqrt(a/e.length)<this._minVolumeAbsolute}_nsdf(e){this._autocorrelator.autocorrelate(e,this._nsdfBuffer);let a=2*this._nsdfBuffer[0],n;for(n=0;n<this._nsdfBuffer.length&&a>0;n++)this._nsdfBuffer[n]=2*this._nsdfBuffer[n]/a,a-=e[n]**2+e[e.length-n-1]**2;for(;n<this._nsdfBuffer.length;n++)this._nsdfBuffer[n]=0}}function hy(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}class t0{constructor(){q(this,"detector",null);q(this,"inputLength",0);q(this,"lastStableFreq",0);q(this,"consecutiveSilence",0)}analyze(e,a,n={viterbi:!0}){(!this.detector||this.inputLength!==e.length)&&(this.inputLength=e.length,this.detector=Xl.forFloat32Array(this.inputLength),this.detector.minVolumeDecibels=-60);let l=0;for(let h=0;h<e.length;h++)l+=e[h]*e[h];l=Math.sqrt(l/e.length);const i=n.minRms??.01;if(l<i)return this.consecutiveSilence++,this.consecutiveSilence>5&&(this.lastStableFreq=0),{freq:0,conf:0};this.consecutiveSilence=0;const[s,r]=this.detector.findPitch(e,a);if(r<.5||s<60||s>4200)return{freq:0,conf:0};let c=s,u=r;if(n.guideFreq&&n.guideFreq>0){const h=n.guideFreq,g=12*Math.log2(c/h),f=Math.abs(g);Math.abs(f-12)<2&&u<.98&&(g>0?c/=2:c*=2,u=Math.min(1,u*1.2))}if(this.lastStableFreq>0){const h=12*Math.log2(c/this.lastStableFreq);Math.abs(h)<1?c=this.lastStableFreq*(1-.5)+c*.5:Math.abs(Math.abs(h)-12)<1&&u<.9&&(c=this.lastStableFreq)}return this.lastStableFreq=c,{freq:c,conf:u}}}function Hf(t,e="alphabet"){const a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=["","#","","#","","","#","","#","","#",""],l=Math.round(t),i=Math.floor(l/12)-1,s=(l%12+12)%12;return(e==="katakana"?n[s]:a[s])+i}function Ja(t){const e=Math.max(0,t|0);return Math.round(Math.max(60,Math.min(e-80,e*.33)))}class my{constructor(e){q(this,"canvas");q(this,"ctx");q(this,"pxPerPitch",20);q(this,"particles",[]);q(this,"lastPhraseId",null);this.canvas=e;const a=e.getContext("2d");if(!a)throw new Error("Could not get 2d context");this.ctx=a}spawnParticles(e,a,n,l){for(let i=0;i<n;i++){const s=Math.random()*Math.PI*2,r=2+Math.random()*4;this.particles.push({x:e,y:a,vx:Math.cos(s)*r,vy:Math.sin(s)*r,color:l[Math.floor(Math.random()*l.length)],life:1,maxLife:1,size:2+Math.random()*3})}}updateParticles(){for(let e=this.particles.length-1;e>=0;e--){const a=this.particles[e];a.x+=a.vx,a.y+=a.vy,a.life-=.02,a.vy+=.1,a.life<=0&&this.particles.splice(e,1)}}draw(e){if(!this.ctx)return;const{width:a,height:n}=this.canvas,l=a,i=n,s=this.ctx,r=e.verticalZoom*12;if(this.pxPerPitch=n/r,s.fillStyle="#222",s.fillRect(0,0,a,n),s.save(),this.drawGrid(e),this.drawBpmMarkers(e),this.drawLoopRegion(e),this.drawPhraseBoundaries(e),e.lastPhraseResult&&e.lastPhraseResult.phraseId!==this.lastPhraseId&&(this.lastPhraseId=e.lastPhraseResult.phraseId,e.isParticlesEnabled)){const K=e.lastPhraseResult,R=Ja(a),Y=n/2;K.evaluation==="Perfect"?this.spawnParticles(R,Y,50,["#FFD700","#FFA500","#FFFFFF","#00FFFF"]):K.evaluation==="Good"&&this.spawnParticles(R,Y,20,["#00FF00","#AAFFAA","#FFFFFF"])}this.updateParticles();const{isCalibrating:c,isPracticing:u,isPitchOnlyMode:h,playbackPosition:g,timelineOffsetSec:f,verticalOffset:d,tempoFactor:v,pxPerSec:y,guideLineWidth:w,showNoteNames:p,currentTracks:m,melodyTrackIndex:b,pitchHistory:S,midiGhostNotes:T,micRenderMode:j,toleranceCents:M}=e,x=Ja(a),N=g+f,C=36+Math.round((96-r)*(d/100)),O=this.pxPerPitch,P=2,rt=N-x/y*v-P,yt=N+(l-x)/y*v+P,E=60/(e.bpm||120)*4;s.save(),s.strokeStyle="rgba(255, 255, 255, 0.15)",s.lineWidth=1,s.beginPath();const D=rt,A=yt,Q=Math.floor(D/E),at=Math.ceil(A/E);for(let K=Q;K<=at;K++){if(K<0)continue;const R=K*E,Y=x+(R-N)*y/v;Y>=0&&Y<=l&&(s.moveTo(Y,0),s.lineTo(Y,i),s.fillStyle="rgba(255,255,255,0.3)",s.fillText(String(K+1),Y+4,10))}if(s.stroke(),s.restore(),!c&&m[b]&&!h){const K=m[b];if(K.type==="audio"&&K.pitchData&&K.pitchData.length>0){s.save(),s.beginPath(),s.strokeStyle="#FFA500",s.lineWidth=3,s.lineCap="round",s.lineJoin="round",s.shadowBlur=10,s.shadowColor="#FFA500";let R=!0;const Y=K.pitchData;for(let W=0;W<Y.length;W++){const ut=Y[W];if(ut.time>yt)break;if(ut.time<rt-.5)continue;const et=69+12*Math.log2(ut.freq/440),it=i-(et-C+1)*O,mt=x+(ut.time-N)*y/v;if(!R&&W>0){const J=Y[W-1];ut.time-J.time>.1&&(s.stroke(),s.beginPath(),R=!0)}R?(s.moveTo(mt,it),R=!1):s.lineTo(mt,it)}s.stroke(),s.restore()}else{s.lineWidth=w,s.strokeStyle="#4e8cff";const R=K.notes;for(const Y of R){if(Y.time>yt)break;if(Y.time+Y.duration<rt)continue;const W=x+(Y.time-N)*y/v;let ut=x+(Y.time+Y.duration-N)*y/v;if(ut-W>3&&(ut-=1),ut<0||W>l)continue;const et=Y.midi+e.guideOctaveOffset*12+e.transposeOffset,it=i-(et-C+1)*O;if(s.beginPath(),s.moveTo(W,it),s.lineTo(ut,it),s.stroke(),ut-W>5){s.save(),s.lineWidth=2,s.strokeStyle="#ff0000",s.globalAlpha=1;const J=O;s.beginPath(),s.moveTo(ut,it-J/2),s.lineTo(ut,it+J/2),s.stroke(),s.restore()}e.editTool!=="view"&&e.selectedNote===Y&&(s.save(),s.strokeStyle="#ffdd55",s.lineWidth=w+2,s.beginPath(),s.moveTo(W,it),s.lineTo(ut,it),s.stroke(),s.fillStyle="#ffdd55",s.beginPath(),s.arc(W,it,6,0,Math.PI*2),s.fill(),s.beginPath(),s.arc(ut,it,6,0,Math.PI*2),s.fill(),s.restore());const mt=M/100*O;if(mt>.2&&(s.save(),s.lineWidth=1,s.strokeStyle="#ffffff",s.beginPath(),s.moveTo(W,it-mt),s.lineTo(ut,it-mt),s.stroke(),s.beginPath(),s.moveTo(W,it+mt),s.lineTo(ut,it+mt),s.stroke(),s.restore()),p){s.font="10px sans-serif",s.fillStyle="#fff",s.textAlign="center",s.textBaseline="middle";const J=Hf(et);s.fillText(J,(W+ut)/2,it-8)}}}}if(Array.isArray(T)&&T.length&&(!h||u)){s.save(),s.lineWidth=Math.max(2,w),s.lineWidth=Math.max(2,w);for(let K=0;K<T.length;K++){const R=T[K];if(R.role==="resp"||R.role==="calib"?(s.strokeStyle="#4e8cff",s.setLineDash([4,4])):R.role==="call"?(s.strokeStyle="#ff5050",s.setLineDash([])):R.role==="practice"?(s.strokeStyle="#ffb300",s.lineWidth=Math.max(3,w),s.setLineDash([])):(s.strokeStyle="rgba(255,80,80,0.9)",s.setLineDash([6,4])),R.time+R.duration<rt||R.time>yt)continue;const Y=x+(R.time-N)*y/v,W=x+(R.time+R.duration-N)*y/v;if(W<0||Y>l)continue;const ut=R.midi+e.guideOctaveOffset*12+e.transposeOffset,et=i-(ut-C+1)*O;if(s.beginPath(),s.moveTo(Y,et),s.lineTo(W,et),s.stroke(),R.role==="call"){const it=T[K+1];if(it&&it.midi===R.midi&&it.time-(R.time+R.duration)<.15){s.save(),s.globalAlpha=1;const wt=Math.max(2,w)+0;s.lineWidth=3,s.strokeStyle="#000000",s.beginPath(),s.moveTo(W,et-wt/2),s.lineTo(W,et+wt/2),s.stroke(),s.lineWidth=1.5,s.strokeStyle="#ff0000",s.beginPath(),s.moveTo(W,et-wt/2),s.lineTo(W,et+wt/2),s.stroke(),s.restore()}}if(R.role==="call"||R.role==="resp"||R.role==="practice")try{const it=R.label||Hf(Math.round(ut));s.save(),s.font="12px sans-serif",s.textAlign="center",s.textBaseline="bottom";const mt=(Y+W)/2,J=et-6,bt=s.measureText(it).width;s.fillStyle="rgba(0,0,0,0.6)",s.fillRect(mt-bt/2-4,J-16,bt+8,14),R.role==="practice"?s.fillStyle="#ffca28":s.fillStyle=R.role==="call"?"#ffd27d":"#d6f0ff",s.fillText(it,mt,J-2),s.restore()}catch{}}s.restore()}if(!c&&S&&S.length){const Y=Math.round(.05*1e3)/1e3,W=g-Y,ut=440,et=36+Math.round((96-r)*(d/100)),it=et+r,mt=[];for(const J of S){const bt=J.time+(J.visOff!=null?J.visOff-.05:0);if(bt<rt||bt>yt||bt>W)continue;const wt=69+12*Math.log2(Math.max(1e-9,J.freq)/ut);wt<et||wt>it||mt.push({t:bt,midi:wt,conf:J.conf,freq:J.freq})}if(j==="dot"){s.save();for(const J of mt){const bt=i-(J.midi-et+1)*O,wt=x+(J.t-N)*y/v;wt<0||wt>l||(s.beginPath(),s.arc(wt,bt,3,0,Math.PI*2),s.fillStyle="#00FFCC",s.shadowBlur=10,s.shadowColor="#00FFCC",s.strokeStyle="#fff",s.lineWidth=1.5,s.fill(),s.stroke(),s.shadowBlur=0)}s.restore()}else if(mt.length>1){s.save(),s.beginPath(),s.strokeStyle="#39FF14",s.lineWidth=4,s.lineCap="round",s.lineJoin="round",s.shadowBlur=15,s.shadowColor="#39FF14";let J=!0;for(let bt=0;bt<mt.length;bt++){const wt=mt[bt],z=i-(wt.midi-et+1)*O,U=x+(wt.t-N)*y/v;if(!(U<-10)){if(U>l+10)break;if(bt>0){const Z=mt[bt-1];wt.t-Z.t>.12&&(s.stroke(),s.beginPath(),s.strokeStyle="#39FF14",s.lineWidth=4,s.shadowBlur=15,s.shadowColor="#39FF14",J=!0)}J?(s.moveTo(U,z),J=!1):s.lineTo(U,z)}}s.stroke(),s.restore()}}if(e.currentMicPitch&&e.currentMicConf&&e.currentMicConf>.3){const K=e.currentMicPitch,R=36+Math.round((96-r)*(d/100)),W=69+12*Math.log2(K/440);if(W>=R&&W<=R+r){const ut=i-(W-R+1)*O;s.save(),s.beginPath(),s.arc(x,ut,5,0,Math.PI*2),s.fillStyle="#00FFFF",s.shadowBlur=15,s.shadowColor="#00FFFF",s.strokeStyle="#fff",s.lineWidth=2,s.fill(),s.stroke(),s.restore()}}s.strokeStyle="#ffffff",s.beginPath(),s.moveTo(x+.5,0),s.lineTo(x+.5,i),s.stroke(),s.restore(),this.ctx.save(),this.ctx.resetTransform(),this.ctx.restore()}drawPianoKeys(e){if(!this.ctx)return;const{height:a}=this.canvas,{verticalOffset:n,verticalZoom:l}=e,i=40;this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,i,a);const s=l*12,r=36,u=r+Math.round((132-r-s)*(n/100)),h=u+s,g=this.pxPerPitch;this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.ctx.font="10px sans-serif";for(let f=Math.floor(u);f<=Math.ceil(h);f++){if(f<0||f>127)continue;const d=a-(f-u+1)*g,v=[1,3,6,8,10].includes(f%12);v||(this.ctx.fillStyle="#ccc",this.ctx.fillRect(0,d+g-1,i,1)),f%12===0&&(this.ctx.fillStyle="#333",this.ctx.fillText("C"+(f/12-1),i-4,d+g/2)),v&&(this.ctx.fillStyle="black",this.ctx.fillRect(0,d,i*.6,g),this.ctx.strokeStyle="#555",this.ctx.strokeRect(0,d,i*.6,g))}this.ctx.fillStyle="#555",this.ctx.fillRect(i-1,0,1,a)}drawPhraseBoundaries(e){if(!e.phrases||e.phrases.length===0)return;const a=this.ctx,{width:n,height:l}=this.canvas,i=Ja(n),{playbackPosition:s,timelineOffsetSec:r,pxPerSec:c,tempoFactor:u}=e,h=s+r;a.save(),a.strokeStyle="rgba(255, 255, 255, 0.1)",a.lineWidth=2,a.setLineDash([5,5]),e.phrases.forEach(g=>{const f=g.endTime,d=i+(f-h)*c/u;d>=0&&d<=n&&(a.beginPath(),a.moveTo(d,0),a.lineTo(d,l),a.stroke())}),a.restore()}drawGrid(e){if(!this.ctx)return;const{width:a,height:n}=this.canvas,{timelineOffsetSec:l,verticalOffset:i,bpm:s,pxPerSec:r,verticalZoom:c}=e;this.ctx.font="10px sans-serif",this.ctx.fillStyle="#ffffff",this.ctx.textAlign="left",this.ctx.textBaseline="bottom";const u=c*12,h=36,f=h+Math.round((132-h-u)*(i/100)),d=f+u,v=this.pxPerPitch;for(let j=Math.floor(f);j<=Math.ceil(d);j++){const M=n-(j-f+1)*v,x=[1,3,6,8,10].includes(j%12),N=j%12===0;this.ctx.beginPath(),N?(this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2):x?(this.ctx.strokeStyle="rgba(255, 255, 255, 0.08)",this.ctx.lineWidth=1):(this.ctx.strokeStyle="rgba(255, 255, 255, 0.5)",this.ctx.lineWidth=1),this.ctx.moveTo(0,M),this.ctx.lineTo(a,M),this.ctx.stroke(),N&&(this.ctx.fillStyle="rgba(255, 255, 255, 0.6)",this.ctx.fillText("C"+(j/12-1),2,M-2))}const y=60/s,w=Ja(a),p=e.playbackPosition+l,m=p+(0-w)*e.tempoFactor/r,b=p+(a-w)*e.tempoFactor/r,S=Math.floor(m/y),T=Math.ceil(b/y);for(let j=S;j<=T;j++){const M=j*y,x=w+(M-p)*r/e.tempoFactor;j%4===0?this.ctx.strokeStyle="rgba(255, 255, 255, 0.3)":this.ctx.strokeStyle="rgba(255, 255, 255, 0.1)",this.ctx.beginPath(),this.ctx.moveTo(x,0),this.ctx.lineTo(x,n),this.ctx.stroke()}}getQuantizedTimeMidi(e,a,n){const l=this.canvas.width,i=this.canvas.height,{verticalZoom:s,verticalOffset:r,playbackPosition:c,timelineOffsetSec:u,pxPerSec:h,tempoFactor:g}=n,f=s*12,d=36,y=d+Math.round((132-d-f)*(r/100)),w=i/f,p=y-1+(i-a)/w,m=Math.round(p),b=Ja(l),T=c+u+(e-b)*g/h,j=.125;return{time:Math.round(T/j)*j,midi:m,exactTime:T,exactMidi:p}}drawBpmMarkers(e){if(!this.ctx||!e.tempoMap||e.tempoMap.length===0)return;const{width:a,height:n}=this.canvas,{timelineOffsetSec:l,playbackPosition:i,pxPerSec:s,tempoFactor:r}=e,c=Ja(a),u=i+l;this.ctx.save(),this.ctx.font="bold 12px sans-serif",this.ctx.textBaseline="top";for(const h of e.tempoMap){const g=c+(h.time-u)*s/r;g<-50||g>a+50||(this.ctx.beginPath(),this.ctx.strokeStyle="rgba(255, 215, 0, 0.7)",this.ctx.lineWidth=1,this.ctx.setLineDash([5,5]),this.ctx.moveTo(g,0),this.ctx.lineTo(g,n),this.ctx.stroke(),this.ctx.fillStyle="rgba(255, 215, 0, 1)",this.ctx.fillText(`BPM ${Math.round(h.bpm)}`,g+4,25))}this.ctx.restore()}drawLoopRegion(e){if(!e.loopEnabled||!this.ctx)return;const{width:a,height:n}=this.canvas,{timelineOffsetSec:l,playbackPosition:i,pxPerSec:s,tempoFactor:r}=e,c=Ja(a),u=i+l,h=e.loopEnd>e.loopStart,g=!h;if(h){const f=c+(e.loopStart-u)*s/r,d=c+(e.loopEnd-u)*s/r,v=Math.max(0,f),y=Math.min(a,d);y>v&&(this.ctx.save(),this.ctx.fillStyle="rgba(0, 200, 100, 0.15)",this.ctx.fillRect(v,0,y-v,n),this.ctx.strokeStyle="rgba(0, 200, 100, 0.7)",this.ctx.lineWidth=2,f>=0&&f<=a&&(this.ctx.beginPath(),this.ctx.moveTo(f,0),this.ctx.lineTo(f,n),this.ctx.stroke()),d>=0&&d<=a&&(this.ctx.beginPath(),this.ctx.moveTo(d,0),this.ctx.lineTo(d,n),this.ctx.stroke()),this.ctx.font="bold 10px sans-serif",this.ctx.fillStyle="rgba(0, 200, 100, 0.9)",this.ctx.fillText("LOOP",v+5,12),this.ctx.restore())}else if(g){const f=c+(e.loopStart-u)*s/r,v=c-l*s/r;if(v>f){const y=Math.max(0,f),w=Math.min(a,v);if(w>y){this.ctx.save();const p=.1+.05*Math.sin(Date.now()/200);this.ctx.fillStyle=`rgba(234, 179, 8, ${p})`,this.ctx.fillRect(y,0,w-y,n),this.ctx.strokeStyle="rgba(234, 179, 8, 0.9)",this.ctx.lineWidth=3,f>=0&&f<=a&&(this.ctx.beginPath(),this.ctx.moveTo(f,0),this.ctx.lineTo(f,n),this.ctx.stroke()),v>=0&&v<=a&&(this.ctx.setLineDash([8,8]),this.ctx.strokeStyle="rgba(234, 179, 8, 0.6)",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(v,0),this.ctx.lineTo(v,n),this.ctx.stroke(),this.ctx.setLineDash([])),y+100<a&&(this.ctx.font="bold 11px sans-serif",this.ctx.fillStyle="rgba(234, 179, 8, 1)",this.ctx.fillText(" ",y+8,14)),this.ctx.restore()}}}}}async function gy(t,e=20,a=440,n=!1,l=null,i=s=>{}){const s=t.sampleRate,r=t.getChannelData(0),c=t.numberOfChannels>1?t.getChannelData(1):null,u=new Float32Array(r.length);for(let z=0;z<u.length;z++)u[z]=r[z]*(c?.5:1)+(c?c[z]*.5:0);function h(z,U,Z){if(!(Z>0)||Z>=U*.5)return 0;const G=2*Math.PI*Z/U,I=2*Math.cos(G);let gt=0,B=0,F=0;for(let H=0;H<z.length;H++)gt=z[H]+I*B-F,F=B,B=gt;const ct=B*B+F*F-I*B*F;return Math.max(0,ct)}function g(z,U,Z,G){if(!(Z>0))return 0;const $=Math.max(1,G|0);let I=0,gt=0;for(let B=1;B<=$;B++){const F=Z*B;if(F>=U*.5)break;const ct=h(z,U,F);I+=(ct>0?Math.sqrt(ct):0)*(1/B),gt++}return gt?I/gt:0}try{let U=0;for(let Z=0;Z<u.length;Z++){const G=u[Z];u[Z]=G-.97*U,U=G}}catch{}i(10);const d=Math.max(1,Math.floor(s/44100)),v=s/d,y=Math.floor(u.length/d),w=new Float32Array(y);for(let z=0,U=0;z<y;z++,U+=d){let Z=0,G=0;for(let $=0;$<d&&U+$<u.length;$++)Z+=u[U+$],G++;w[z]=Z/Math.max(1,G)}i(20);const p=Math.max(28,Math.min(60,(e||20)+25)),b=Math.floor(v*.09),T=Math.max(1024,Math.min(2048,(z=>1<<Math.round(Math.log2(Math.max(1,z))))(b))),j=Math.max(1,Math.floor(v/Math.max(28,p))),M=new Float32Array(T);for(let z=0;z<T;z++)M[z]=.5*(1-Math.cos(2*Math.PI*z/(T-1)));const x=new Float32Array(Math.ceil(w.length/j)),N=new Float32Array(Math.ceil(w.length/j)),C=new t0;let O=0;for(;O*j+T<w.length;){const z=O*j,U=w.subarray(z,z+T),Z=C.analyze(U,v,{viterbi:!0,minRms:.002});if(x[O]=Z.freq,N[O]=Z.conf,O++,O%200===0){const G=20+O/(w.length/j)*70;i(Math.min(90,G)),await new Promise($=>setTimeout($,0))}}i(95);const P=[],rt=z=>z*j/v,yt=.07,st=2,E=.045;let D=null,A=0,Q=0,at=null;for(let z=0;z<x.length;z++){const U=x[z],Z=rt(z);if(U<=0){if(D!=null){const I=Z-A;I>0&&P.push({midi:D,time:Math.max(0,A-E),duration:I}),D=null}Q=0,at=null;continue}let G=69+12*Math.log2(U/a);if(D!=null){for(;G-D>6;)G-=12;for(;D-G>6;)G+=12}const $=Math.round(G);if(D==null)D=$,A=Z,Q=0,at=$;else if($!==D){if(at===$?Q++:(Q=1,at=$),Q>=st){const I=Z-A;I>0&&P.push({midi:D,time:Math.max(0,A-E),duration:I}),D=$,A=Z,Q=0}}else Q=0,at=$}if(D!=null){const U=rt(x.length)-A;U>0&&P.push({midi:D,time:Math.max(0,A-E),duration:U})}const vt=[];for(const z of P){if(!vt.length){vt.push(z);continue}const U=vt[vt.length-1];z.midi===U.midi&&z.time-(U.time+U.duration)<.02||z.duration<yt&&Math.abs(z.midi-U.midi)<=1&&z.time-(U.time+U.duration)<.03?U.duration=z.time+z.duration-U.time:vt.push(z)}const K=[];for(let z=0;z<vt.length;z++){if(z>0&&z<vt.length-1){const U=vt[z-1],Z=vt[z],G=vt[z+1],$=Z.time-(U.time+U.duration),I=G.time-(Z.time+Z.duration);if(Z.duration<Math.min(.06,yt)&&U.midi===G.midi&&Math.abs(Z.midi-U.midi)<=1&&$<.03&&I<.03){U.duration=G.time+G.duration-U.time,z++;continue}}K.push(vt[z])}const R=36,Y=127,W=z=>Math.max(0,Math.min(x.length-1,Math.round(z*v/j))),ut=z=>Math.max(R,Math.min(Y,z)),et=z=>{const U=z.slice().sort((G,$)=>G-$),Z=U.length;return Z?Z%2?U[Z-1>>1]:.5*(U[Z/2-1]+U[Z/2]):0},it=[],mt=[];for(const z of K){const U=W(z.time),Z=W(z.time+z.duration),G=[];for(let I=U;I<=Z;I++){const gt=x[I];gt>0&&isFinite(gt)&&G.push(gt)}const $=G.length?et(G):a*Math.pow(2,(z.midi-69)/12);it.push($),mt.push(69+12*Math.log2($/a))}(function(){const z=new Float32Array(T),U=G=>{const $=G*j;if($+T>w.length)return null;let I=0;for(let B=0;B<T;B++)I+=w[$+B];I/=T;let gt=0;for(let B=0;B<T;B++){const F=(w[$+B]-I)*M[B];z[B]=F,gt+=F*F}return Math.sqrt(gt/T)},Z=(G,$)=>{if(!($>0)&&isFinite($))return 0;const I=U(G);return!I||I<1e-5?0:g(z,v,$,8)};for(let G=0;G<K.length;G++){const $=mt[G],I=it[G];if(!(I>0)&&isFinite(I))continue;const gt=W(K[G].time),B=W(K[G].time+K[G].duration);let F=0,ct=0,H=0;const Tt=Math.max(1,Math.floor((B-gt+1)/24));for(let Bt=gt;Bt<=B;Bt+=Tt)ct+=Z(Bt,I),F+=Z(Bt,I*.5),H+=Z(Bt,I*2);const te=F>=ct&&F>=H?-12:H>=ct&&H>=F?12:0;te!==0&&(mt[G]=$+te)}})();const J=[];for(let z=0;z<K.length;z++)J.push(Math.round(mt[z]));if(n&&J.length>=2){let z=function(H,Tt){const te=Z[Tt];let Bt=0;return te!==0&&(Bt+=.12),Bt},U=function(H,Tt,te){const Bt=Z[Tt],Ge=Z[te],Yt=J[H-1]+Bt,Ie=J[H]+Ge,ye=Math.abs(Ie-Yt),Pe=B[H],yi=Pe>1.8||Pe<.55;let vn=.1*ye;return Math.min(Math.abs(ye-12),Math.abs(ye-24))<.6&&(vn+=yi?.05:1.1),ye<=6&&(vn-=.03),vn};const Z=[-24,-12,0,12,24],G=J.length,$=Z.length,I=new Array(G),gt=new Array(G);for(let H=0;H<G;H++)I[H]=new Array($).fill(1/0),gt[H]=new Array($).fill(-1);const B=new Array(G).fill(1);for(let H=1;H<G;H++){const Tt=it[H-1]>0&&it[H]>0?it[H]/it[H-1]:1;B[H]=Tt}for(let H=0;H<$;H++)I[0][H]=z(0,H),gt[0][H]=-1;for(let H=1;H<G;H++)for(let Tt=0;Tt<$;Tt++){let te=1/0,Bt=-1;const Ge=z(H,Tt);for(let Yt=0;Yt<$;Yt++){const Ie=U(H,Yt,Tt),ye=I[H-1][Yt]+Ge+Ie;ye<te&&(te=ye,Bt=Yt)}I[H][Tt]=te,gt[H][Tt]=Bt}let F=0;{let H=1/0;for(let Tt=0;Tt<$;Tt++)I[G-1][Tt]<H&&(H=I[G-1][Tt],F=Tt)}const ct=new Array(G).fill(0);for(let H=G-1;H>=0;H--)ct[H]=Z[F],F=gt[H][F]>=0?gt[H][F]:0;for(let H=0;H<G;H++)J[H]=ut(J[H]+ct[H])}else for(let z=1;z<J.length;z++)Math.abs(J[z]-J[z-1]);(function(){if(K.length<=1)return;const z=.26,U=[];let Z=0;for(let F=1;F<K.length;F++){const ct=K[F-1];K[F].time-(ct.time+ct.duration)>=z&&(U.push({s:Z,e:F-1}),Z=F)}if(U.push({s:Z,e:K.length-1}),U.length<=1)return;const G=F=>{const ct=F.slice().sort((Tt,te)=>Tt-te),H=ct.length;return H?ct[H-1>>1]:0},$=[-24,-12,0,12,24],I=U[0];let gt=G(J.slice(I.s,I.e+1)),B=J[I.e];for(let F=1;F<U.length;F++){const ct=U[F],H=J.slice(ct.s,ct.e+1);if(!H.length)continue;const Tt=H[0],te=G(H);let Bt=0,Ge=1e9;for(const Yt of $){const Ie=Math.abs(Tt+Yt-B),ye=Math.abs(te+Yt-gt),Pe=1.2*Ie+1*ye;Pe<Ge&&(Ge=Pe,Bt=Yt)}if(Bt!==0)for(let Yt=ct.s;Yt<=ct.e;Yt++)J[Yt]=ut(J[Yt]+Bt);gt=G(J.slice(ct.s,ct.e+1)),B=J[ct.e]}})();for(let z=0;z<K.length;z++)K[z].midi=J[z];const bt=[];for(const z of K){if(!bt.length){bt.push(z);continue}const U=bt[bt.length-1];z.midi===U.midi&&z.time<=U.time+U.duration+.03?U.duration=Math.max(U.duration,z.time+z.duration-U.time):bt.push(z)}const wt=[];if(x.length>0){const z=new Float32Array(x.length);for(let B=0;B<x.length;B++)N[B]>=.4&&x[B]>0?z[B]=x[B]:z[B]=0;const U=[];for(let B=0;B<z.length;B++)if(z[B]>0){const F=69+12*Math.log2(z[B]/a);U.push(F)}let Z=0;if(U.length>0){U.sort((B,F)=>B-F),Z=U[Math.floor(U.length/2)];for(let B=0;B<z.length;B++)if(z[B]>0){const F=69+12*Math.log2(z[B]/a);Math.abs(F-Z)>36&&(z[B]=0)}}const G=new Float32Array(z.length),$=2;for(let B=0;B<z.length;B++){const F=[];for(let ct=-$;ct<=$;ct++)if(B+ct>=0&&B+ct<z.length){const H=z[B+ct];H>0&&F.push(H)}F.length===0?G[B]=0:(F.sort((ct,H)=>ct-H),G[B]=F[Math.floor(F.length/2)])}const I=new Float32Array(G.length);I.set(G);let gt=-1;for(let B=0;B<I.length;B++){const F=I[B];if(F<=0)continue;const ct=69+12*Math.log2(F/a);if(gt>0){const H=ct-gt,Tt=Math.abs(H);if(Math.abs(Tt-12)<2.5||Math.abs(Tt-24)<2.5){const Bt=H>0?-12:12,Ge=H>0?-24:24,Yt=ct+Bt,Ie=ct+Ge,ye=Math.abs(Yt-gt),Pe=Math.abs(Ie-gt);ye<4?I[B]=F*Math.pow(2,Bt/12):Pe<4&&(I[B]=F*Math.pow(2,Ge/12))}}gt=69+12*Math.log2(I[B]/a)}for(let B=0;B<I.length;B++){const F=I[B];F>0&&wt.push({time:rt(B),freq:F})}}return{notes:bt,pitchData:wt}}const Gf=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Pc{static getMidiFromNoteName(e,a=4){const n=Gf.indexOf(e);return n===-1?60:12*(a+1)+n}static getNoteName(e){const a=Math.round(e)%12;return Gf[a]}static generateScale(e,a,n=120,l=0,i="AscDesc"){const s=this.SCALES[a],c=60/n/2,u=[];if((i==="Ascending"||i==="AscDesc")&&u.push(...s.map(f=>e+f)),i==="Descending")u.push(...[...s].reverse().map(f=>e+f));else if(i==="AscDesc"){const f=[...s].reverse().slice(1).map(d=>e+d);u.push(...f)}const h=u.map((f,d)=>({midi:f,time:l+d*c,duration:c*.9,role:"practice",label:this.getNoteName(f)})),g=h.length*c;return{notes:h,duration:g}}static generateArpeggio(e,a,n=120,l=0,i="AscDesc"){const s=this.ARPEGGIOS[a],c=60/n/2,u=[];if((i==="Ascending"||i==="AscDesc")&&u.push(...s.map(f=>e+f)),i==="Descending")u.push(...[...s].reverse().map(f=>e+f));else if(i==="AscDesc"){const f=[...s].reverse().slice(1).map(d=>e+d);u.push(...f)}const h=u.map((f,d)=>({midi:f,time:l+d*c,duration:c*.95,role:"practice",label:this.getNoteName(f)})),g=h.length*c;return{notes:h,duration:g}}static generateExercise(e,a,n=120,l=0){const i=60/n,s=[];if(a==="LongTone")s.push({midi:e,dur:i*4});else if(a==="FiveNote"){const u=i/2;[0,2,4,5,7,5,4,2,0].forEach(g=>s.push({midi:e+g,dur:u}))}else if(a==="Triad"){const u=i;[0,4,7,4,0].forEach(g=>s.push({midi:e+g,dur:u}))}else if(a==="Thirds"){const u=i,h=[0,2,4,5,7,9,11,12];[[0,2],[1,3],[2,4]].forEach(f=>{s.push({midi:e+h[f[0]],dur:u}),s.push({midi:e+h[f[1]],dur:u})}),s.push({midi:e,dur:u*2})}else a==="Octave"&&(s.push({midi:e,dur:i*2}),s.push({midi:e+12,dur:i*2}),s.push({midi:e,dur:i*4}));const r=[];let c=l;return s.forEach(u=>{r.push({midi:u.midi,time:c,duration:u.dur*.95,role:"practice",label:this.getNoteName(u.midi)}),c+=u.dur}),{notes:r,duration:c-l}}static generateRandomBatch(e,a=60,n=120,l={mode:"Mix"}){const i=[];let s=e,r=a;const c=72,u=l.maxPitch??103,h=(g,f=20)=>{var y,w,p;for(let m=0;m<f;m++){let b=!1,S=!1;if(l.mode==="Scale")b=!0;else if(l.mode==="Arpeggio")b=!1;else if(l.mode==="Exercise")S=!0;else{const O=Math.random();O<.4?b=!0:O<.7?S=!0:b=!1}const M=Math.max(c,u-15)-c,x=c+Math.floor(Math.random()*(M+1));let N;if(S){const O=(y=l.allowedExercises)!=null&&y.length?l.allowedExercises:["LongTone","FiveNote","Triad"],P=O[Math.floor(Math.random()*O.length)];N=this.generateExercise(x,P,n,g)}else if(b){const O=(w=l.allowedScales)!=null&&w.length?l.allowedScales:["Major","NaturalMinor","MajorPentatonic"],P=O[Math.floor(Math.random()*O.length)];N=this.generateScale(x,P,n,g,"AscDesc")}else{const O=(p=l.allowedArpeggios)!=null&&p.length?l.allowedArpeggios:["Major","Minor"],P=O[Math.floor(Math.random()*O.length)];N=this.generateArpeggio(x,P,n,g,"AscDesc")}if(Math.max(...N.notes.map(O=>O.midi))<=u)return N}return console.warn(`[Generator] Failed to generate pattern within limit ${u} after ${f} tries. Using fallback.`),this.generateScale(60,"Major",n,g,"AscDesc")};for(;r>0;){const f=60/n*4,d=h(s);if(!d){s+=f,r-=f;continue}const v=d.notes.map(T=>({...T,role:"call"}));i.push(...v);const y=d.duration,p=Math.ceil(y/f)*f,m=s+p,b=d.notes.map(T=>({...T,time:T.time-s+m,role:"resp"}));i.push(...b);const S=p*2;s+=S,r=e+a-s}return{notes:i,nextStartTime:s}}}q(Pc,"SCALES",{Major:[0,2,4,5,7,9,11,12],NaturalMinor:[0,2,3,5,7,8,10,12],HarmonicMinor:[0,2,3,5,7,8,11,12],MelodicMinor:[0,2,3,5,7,9,11,12],MajorPentatonic:[0,2,4,7,9,12],MinorPentatonic:[0,3,5,7,10,12],Chromatic:[0,1,2,3,4,5,6,7,8,9,10,11,12]}),q(Pc,"ARPEGGIOS",{Major:[0,4,7,12],Minor:[0,3,7,12],Major7:[0,4,7,11,12],Minor7:[0,3,7,10,12],Dominant7:[0,4,7,10,12]});class py{constructor(){q(this,"state");q(this,"visualizer",null);q(this,"pitchAnalyzer");q(this,"scoreAnalyzer");q(this,"audioCtx",null);q(this,"micStream",null);q(this,"micSource",null);q(this,"micAnalyser",null);q(this,"micData",null);q(this,"masterGain",null);q(this,"melodyGain",null);q(this,"accompGain",null);q(this,"analysisTimer",null);q(this,"playbackStartTime",0);q(this,"playbackStartPerf",0);q(this,"reqFrameId",null);q(this,"analysisRate",20);q(this,"listeners",[]);q(this,"history",[]);q(this,"redoStack",[]);q(this,"loadedMidi",null);q(this,"processedPhrases",new Set);q(this,"backingBuffer",null);q(this,"backingSource",null);q(this,"nextGuideNoteIndex",0);q(this,"originalGhostNotes",null);q(this,"nextPracticeTime",0);q(this,"nextMetronomeTime",0);q(this,"practiceQueue",[]);q(this,"nextNoteIndexToSchedule",0);q(this,"_isSeeking",!1);q(this,"mediaRecorder",null);q(this,"recordedChunks",[]);q(this,"isRecording",!1);this.pitchAnalyzer=new t0,this.scoreAnalyzer=new Sb,this.state={isPlaying:!1,isPracticing:!1,isCalibrating:!1,isPitchOnlyMode:!1,playbackPosition:0,timelineOffsetSec:-.05,verticalZoom:3,verticalOffset:60,tempoFactor:1,pxPerSec:100,guideLineWidth:4,showNoteNames:!0,toleranceCents:40,currentTracks:[],melodyTrackIndex:-1,pitchHistory:[],midiGhostNotes:[],phrases:[],practiceExpectedNotes:null,micRenderMode:"graph",practiceMode:"free",editTool:"view",gateThreshold:-50,guideVolume:.8,accompVolume:.8,selectedNote:null,bpm:120,isMonophonic:!0,guideOctaveOffset:1,scoreResult:null,loadingProgress:null,isGuideSoundEnabled:!0,isBackingSoundEnabled:!0,tempoMap:[],loopEnabled:!1,loopStart:0,loopEnd:0,transposeOffset:0,isParticlesEnabled:!0,noteNotation:"alphabet",metronomeMode:"off"},this.loadSettings()}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(a=>a!==e)}}notify(){this.listeners.forEach(e=>e())}pushHistory(){const e=JSON.parse(JSON.stringify(this.state.currentTracks));this.history.push(e),this.history.length>50&&this.history.shift(),this.redoStack=[]}undo(){if(this.history.length===0)return;const e=JSON.parse(JSON.stringify(this.state.currentTracks));this.redoStack.push(e);const a=this.history.pop();a&&(this.state.currentTracks=a,this.draw(),this.notify())}redo(){if(this.redoStack.length===0)return;const e=JSON.parse(JSON.stringify(this.state.currentTracks));this.history.push(e);const a=this.redoStack.pop();a&&(this.state.currentTracks=a,this.draw(),this.notify())}setCanvas(e){this.visualizer=new my(e),this.draw()}setTool(e){this.state.editTool=e,e!=="view"&&(!this.state.currentTracks.length||this.state.melodyTrackIndex===-1)&&(this.state.currentTracks=[{name:"Guide Track",notes:[]}],this.state.melodyTrackIndex=0),this.draw(),this.notify()}async ensureAudio(){var e;if(!this.audioCtx){const a=window.AudioContext||window.webkitAudioContext;if(!a)throw new Error("AudioContext not supported");this.audioCtx=new a({latencyHint:"interactive"})}!this.masterGain&&this.audioCtx&&(this.masterGain=this.audioCtx.createGain(),this.masterGain.connect(this.audioCtx.destination),this.melodyGain=this.audioCtx.createGain(),this.melodyGain.connect(this.masterGain)),((e=this.audioCtx)==null?void 0:e.state)==="suspended"&&await this.audioCtx.resume()}async initMic(e){if(await this.ensureAudio(),!this.audioCtx)return!1;try{this.micStream&&this.micStream.getTracks().forEach(n=>n.stop());const a={audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,deviceId:e?{exact:e}:void 0}};return this.micStream=await navigator.mediaDevices.getUserMedia(a),this.micSource=this.audioCtx.createMediaStreamSource(this.micStream),this.micAnalyser=this.audioCtx.createAnalyser(),this.micAnalyser.fftSize=2048,this.micData=new Float32Array(this.micAnalyser.fftSize),this.micSource.connect(this.micAnalyser),this.startAnalysis(),!0}catch(a){return console.error("initMic failed",a),!1}}startAnalysis(){this.analysisTimer&&clearInterval(this.analysisTimer),this.analysisTimer=window.setInterval(()=>this.analyze(),1e3/this.analysisRate)}analyze(){if(!this.micAnalyser||!this.micData||!this.audioCtx)return;this.micAnalyser.getFloatTimeDomainData(this.micData);let e=0;const a=this.state.playbackPosition+this.state.timelineOffsetSec;if(Array.isArray(this.state.midiGhostNotes)){const s=this.state.midiGhostNotes.find(r=>a>=r.time&&a<=r.time+r.duration);if(s){const r=this.state.guideOctaveOffset*12;e=440*Math.pow(2,(s.midi+r-69)/12)}}const n=this.pitchAnalyzer.analyze(this.micData,this.audioCtx.sampleRate,{viterbi:!0,guideFreq:e}),{freq:l,conf:i}=n;if(this.state.currentMicPitch=l,this.state.currentMicConf=i,this.state.isPlaying){const s=this.state.playbackPosition;this.scoreAnalyzer.feed(s,l,e)}if(l>0&&this.state.isPlaying){const s=this.state.playbackPosition,r=.05;this.isRecording&&(this.state.pitchHistory=this.state.pitchHistory.filter(u=>u.time<s-.1||u.time>s+.1)),this.state.pitchHistory.push({time:s-r,visOff:r,freq:l,conf:i}),this.state.pitchHistory.length>2e3&&this.state.pitchHistory.shift()}this.state.isPlaying||this.draw()}async startPractice(e={mode:"Mix"}){var a;if(await this.ensureAudio(),this.state.isPracticing?!this.originalGhostNotes&&this.state.midiGhostNotes.length>0&&((a=this.state.practiceConfig)==null?void 0:a.mode)==="Midi"&&(console.log("[Practice] Switching from MIDI practice, backing up notes."),this.originalGhostNotes=[...this.state.midiGhostNotes]):this.state.midiGhostNotes.length>0?(console.log("[Practice] Initial Backup: Saved",this.state.midiGhostNotes.length,"guide notes."),this.originalGhostNotes=[...this.state.midiGhostNotes]):this.originalGhostNotes=null,this.stopPractice(),this.state.isPracticing=!0,this.state.isPitchOnlyMode=!0,this.state.practiceConfig=e,!this.audioCtx){console.error("Failed to initialize AudioContext");return}if(this.audioCtx.state==="suspended"&&await this.audioCtx.resume(),this.state.playbackPosition=0,this.playbackStartTime=this.audioCtx.currentTime,console.log(`[Practice] Started (${e.mode}).`),this.state.isPlaying=!0,this.state.scoreResult=null,this.nextPracticeTime=0,this.nextMetronomeTime=this.audioCtx.currentTime,this.nextNoteIndexToSchedule=0,e.mode==="Midi")if(this.state.midiGhostNotes.length===0&&this.state.melodyTrackIndex!==-1&&this.state.currentTracks[this.state.melodyTrackIndex]&&(this.state.midiGhostNotes=this.state.currentTracks[this.state.melodyTrackIndex].notes.map(n=>({...n,role:"call"}))),this.state.midiGhostNotes.length>0){const n=this.state.midiGhostNotes[this.state.midiGhostNotes.length-1];this.nextPracticeTime=n.time+n.duration}else{console.warn("[Practice] MIDI mode selected but no melody track is set."),this.stopPractice();return}else this.state.midiGhostNotes=[],this.updatePracticeQueue();this.reqFrameId||this.loop(),this.notify()}stopPractice(){var e;this.stopPlayback(),this.state.isPracticing&&(this.state.isPracticing=!1,this.state.isPitchOnlyMode=!1,((e=this.state.practiceConfig)==null?void 0:e.mode)!=="Midi"&&(this.originalGhostNotes?(console.log("[Practice] Restoring",this.originalGhostNotes.length,"original guide notes."),this.state.midiGhostNotes=[...this.originalGhostNotes],this.originalGhostNotes=null):(console.log("[Practice] No backup notes to restore. Clearing."),this.state.midiGhostNotes=[]),this.state.scoreResult=null)),this.practiceQueue=[],this.nextNoteIndexToSchedule=0,this.notify()}updatePracticeQueue(){var n;if(!this.state.isPracticing||((n=this.state.practiceConfig)==null?void 0:n.mode)==="Midi")return;const e=10,a=this.state.playbackPosition;if(this.nextPracticeTime<a+e)try{const l=Math.max(a,this.nextPracticeTime),i=Pc.generateRandomBatch(l,15,this.state.bpm||120,this.state.practiceConfig);i.notes.length>0?(this.state.midiGhostNotes.push(...i.notes),this.nextPracticeTime=i.nextStartTime,this.generatePhrases(),this.notify()):(console.warn("[Practice] No notes generated. Skipping forward."),this.nextPracticeTime+=5)}catch(l){console.error("[Practice] Error generating patterns:",l),this.nextPracticeTime+=5}}async startPlayback(){this.state.isPlaying||this.audioCtx&&(this.ensureAudio(),this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.state.isPlaying=!0,this.state.scoreResult=null,this.scoreAnalyzer.reset(),this.playbackStartTime=this.audioCtx.currentTime-this.state.playbackPosition,this.playbackStartPerf=performance.now(),this.onSeek(this.state.playbackPosition),this.loop(),this.notify())}stopPlayback(){if(this.state.isPlaying=!1,this.reqFrameId&&cancelAnimationFrame(this.reqFrameId),this.reqFrameId=null,this.backingSource){try{this.backingSource.stop()}catch{}this.backingSource=null}if(this.scoreAnalyzer){const e=this.scoreAnalyzer.summarize(this.state.phrases);this.updateState({scoreResult:e})}this.checkPhraseCompletion(),this.draw(),this.notify()}checkPhraseCompletion(){if(!this.state.isPlaying||!this.scoreAnalyzer||this.state.phrases.length===0)return;const e=this.state.playbackPosition,a=.1;for(const n of this.state.phrases)if(!this.processedPhrases.has(n.id)&&e>n.endTime+a){this.processedPhrases.add(n.id);const l=this.scoreAnalyzer.summarize([n]);if(l.phraseScores.length>0){const i=l.phraseScores[0];console.log(`Phrase finished: ${i.evaluation} (${i.score})`),this.updateState({lastPhraseResult:i})}}}syncBackingTrack(){if(this.backingSource){try{this.backingSource.stop()}catch{}this.backingSource=null}if(!this.state.isPlaying||!this.audioCtx||!this.backingBuffer||!this.state.isBackingSoundEnabled)return;const e=this.state.playbackPosition;e<this.backingBuffer.duration&&(this.backingSource=this.audioCtx.createBufferSource(),this.backingSource.buffer=this.backingBuffer,this.backingSource.connect(this.masterGain),this.backingSource.start(0,e))}onSeek(e){if(this.audioCtx&&(this.playbackStartTime=this.audioCtx.currentTime-e,this.nextMetronomeTime=0),this.state.isPlaying&&!this._isSeeking&&this.syncBackingTrack(),this.state.melodyTrackIndex!==-1&&this.state.currentTracks[this.state.melodyTrackIndex]){const a=this.state.currentTracks[this.state.melodyTrackIndex].notes;let n=0;for(;n<a.length&&a[n].time+a[n].duration<e;)n++;this.nextGuideNoteIndex=n}}startSeek(){var e;this._isSeeking||(this._isSeeking=!0,this.masterGain&&this.masterGain.gain.setValueAtTime(0,((e=this.audioCtx)==null?void 0:e.currentTime)||0))}endSeek(){var e;this._isSeeking&&(this._isSeeking=!1,this.masterGain&&this.masterGain.gain.setValueAtTime(1,((e=this.audioCtx)==null?void 0:e.currentTime)||0),this.state.isPlaying&&this.syncBackingTrack())}loadSettings(){try{const e=localStorage.getItem("ontei-settings");if(e){const a=JSON.parse(e),n=["verticalZoom","pxPerSec","noteNotation","tempoFactor","guideOctaveOffset","transposeOffset","guideVolume","accompVolume","gateThreshold","toleranceCents","isParticlesEnabled"],l={};n.forEach(i=>{a[i]!==void 0&&(l[i]=a[i])}),this.state={...this.state,...l},console.log("[AudioEngine] Settings loaded",l)}}catch(e){console.error("Failed to load settings",e)}}saveSettings(){try{const a=["verticalZoom","pxPerSec","noteNotation","tempoFactor","guideOctaveOffset","transposeOffset","guideVolume","accompVolume","gateThreshold","toleranceCents","isParticlesEnabled"].reduce((n,l)=>(n[l]=this.state[l],n),{});localStorage.setItem("ontei-settings",JSON.stringify(a))}catch(e){console.error("Failed to save settings",e)}}updateState(e){this.state={...this.state,...e},e.playbackPosition!==void 0&&this.onSeek(e.playbackPosition),e.isBackingSoundEnabled!==void 0&&this.syncBackingTrack();const a=["verticalZoom","pxPerSec","noteNotation","tempoFactor","guideOctaveOffset","transposeOffset","guideVolume","accompVolume","gateThreshold","toleranceCents","isParticlesEnabled"];Object.keys(e).some(n=>a.includes(n))&&this.saveSettings(),this.draw(),this.notify()}loop(){if(!this.state.isPlaying)return;this.audioCtx&&(this.state.playbackPosition=this.audioCtx.currentTime-this.playbackStartTime),this.state.loopEnabled&&this.state.loopEnd>this.state.loopStart&&this.state.playbackPosition>=this.state.loopEnd&&(this.state.playbackPosition=this.state.loopStart,this.playbackStartTime=this.audioCtx.currentTime-this.state.loopStart,this.onSeek(this.state.loopStart),this.syncBackingTrack());const e=1;let a=0;if(this.backingBuffer&&(a=Math.max(a,this.backingBuffer.duration)),this.state.melodyTrackIndex!==-1&&this.state.currentTracks[this.state.melodyTrackIndex]){const n=this.state.currentTracks[this.state.melodyTrackIndex].notes;if(n.length>0){const l=n[n.length-1];a=Math.max(a,l.time+l.duration)}}if(this.state.midiGhostNotes.length>0){const n=this.state.midiGhostNotes[this.state.midiGhostNotes.length-1];a=Math.max(a,n.time+n.duration)}if(a>0&&this.state.playbackPosition>a+e){console.log("Auto-stopping at end of track"),this.stopPlayback();return}this.state.isPracticing&&(this.schedulePracticeNotes(),this.updatePracticeQueue()),this.state.isGuideSoundEnabled&&(this.state.melodyTrackIndex!==-1||this.state.midiGhostNotes.length>0)&&this.scheduleGuideNotes(),this.scheduleMetronome(),this.draw(),this.reqFrameId=requestAnimationFrame(()=>this.loop())}scheduleMetronome(){if(this.state.metronomeMode==="off"||!this.audioCtx)return;this.nextMetronomeTime<this.audioCtx.currentTime-.2&&(this.nextMetronomeTime=this.audioCtx.currentTime+.1);const e=60/(this.state.bpm||120),a=.5;for(;this.nextMetronomeTime<this.audioCtx.currentTime+a;){const n=this.nextMetronomeTime-this.playbackStartTime,i=Math.round(n/e)%4===0;let s=!1;this.state.metronomeMode==="measure"?i&&(s=!0):this.state.metronomeMode==="beat"&&(s=!0),s&&this.playClick(this.nextMetronomeTime,i),this.nextMetronomeTime+=e}}playClick(e,a){if(!this.audioCtx||!this.masterGain)return;const n=this.audioCtx.createOscillator(),l=this.audioCtx.createGain();n.connect(l),l.connect(this.masterGain),n.type="triangle",n.frequency.value=a?1e3:800,l.gain.setValueAtTime(.3,e),l.gain.exponentialRampToValueAtTime(.001,e+.05),n.start(e),n.stop(e+.05)}scheduleGuideNotes(){if(!this.audioCtx)return;const e=.1,a=this.state.playbackPosition;let n=[],l=!1;const i=this.state.melodyTrackIndex!==-1?this.state.currentTracks[this.state.melodyTrackIndex]:null;if(i&&i.type!=="audio")n=i.notes;else if(this.state.midiGhostNotes.length>0)n=this.state.midiGhostNotes,l=!0;else return;for(;this.nextGuideNoteIndex<n.length;){const s=n[this.nextGuideNoteIndex];if(l&&s.role==="resp"){this.nextGuideNoteIndex++;continue}if(s.time+s.duration<a-.05){this.nextGuideNoteIndex++;continue}if(s.time>a+e)break;const r=Math.max(0,a-s.time);if(s.duration-r>.05){const u=Math.max(this.audioCtx.currentTime,this.playbackStartTime+s.time),g=this.playbackStartTime+s.time+s.duration-u;if(g>.03){const f=this.state.guideOctaveOffset*12+this.state.transposeOffset;this.scheduleNote(s.midi+f,u,g,r>0)}}this.nextGuideNoteIndex++}}schedulePracticeNotes(){if(!this.audioCtx)return;const e=.1,a=this.state.playbackPosition,n=this.state.midiGhostNotes;for(;this.nextNoteIndexToSchedule<n.length;){const l=n[this.nextNoteIndexToSchedule];if(l.time>a+e)break;if(l.role==="call"){const i=this.playbackStartTime+l.time;if(i>=this.audioCtx.currentTime-.05){const s=this.state.guideOctaveOffset*12;this.scheduleNote(l.midi+s,i,l.duration)}}this.nextNoteIndexToSchedule++}}scheduleNote(e,a,n,l=!1){if(!this.audioCtx||!this.masterGain)return;const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="triangle";const r=440*Math.pow(2,(e-69)/12);i.frequency.value=r,l?(s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(.4*this.state.guideVolume,a+.05)):(s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(.4*this.state.guideVolume,a+.01)),s.gain.exponentialRampToValueAtTime(.01,a+n-.01),s.gain.setValueAtTime(0,a+n),i.connect(s),s.connect(this.masterGain),i.start(a),i.stop(a+n+.1),setTimeout(()=>{i.disconnect(),s.disconnect()},(a-this.audioCtx.currentTime+n+.2)*1e3)}draw(){this.visualizer&&this.visualizer.draw(this.state)}async loadAudioFile(e){if(this.state.midiGhostNotes.length>0&&(this.state.midiGhostNotes=[],this.state.scoreResult=null),this.updateState({loadingProgress:0}),await this.ensureAudio(),!this.audioCtx){this.updateState({loadingProgress:null});return}try{const a=await e.arrayBuffer();this.updateState({loadingProgress:10});const n=await this.audioCtx.decodeAudioData(a);this.updateState({loadingProgress:15}),this.backingBuffer=n;const l=await gy(n,20,440,!0,null,i=>this.updateState({loadingProgress:i}));this.state.currentTracks=[{name:e.name,notes:l.notes,pitchData:l.pitchData,type:"audio"}],this.state.melodyTrackIndex=0,this.state.playbackPosition=0,this.state.midiGhostNotes=[],this.state.scoreResult=null}catch(a){console.error("Load Audio Failed",a),alert("")}finally{this.updateState({loadingProgress:null}),this.draw()}}addNote(e){if(this.state.melodyTrackIndex===-1)return;this.pushHistory();const a=this.state.currentTracks[this.state.melodyTrackIndex];a.notes.push(e),a.notes.sort((n,l)=>n.time-l.time),this.draw(),this.notify()}removeNote(e){if(this.state.melodyTrackIndex===-1)return;this.pushHistory();const a=this.state.currentTracks[this.state.melodyTrackIndex];a.notes=a.notes.filter(n=>n!==e),this.draw(),this.notify()}async previewNote(e){if(this.audioCtx||await this.ensureAudio(),!this.audioCtx)return;const a=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();a.type="triangle";const l=440*Math.pow(2,(e-69)/12);a.frequency.setValueAtTime(l,this.audioCtx.currentTime);const i=this.audioCtx.currentTime;n.gain.setValueAtTime(0,i),n.gain.linearRampToValueAtTime(.5,i+.02),n.gain.exponentialRampToValueAtTime(.01,i+.5),a.connect(n),n.connect(this.masterGain),a.start(i),a.stop(i+.6),setTimeout(()=>{a.disconnect(),n.disconnect()},600)}async loadMidiFile(e){const a=await e.arrayBuffer();try{await Gi.saveMidi(a),console.log("[AudioEngine] MIDI saved to storage")}catch(n){console.warn("[AudioEngine] Failed to save MIDI to storage",n)}return this.loadMidiFromBuffer(a)}loadMidiFromBuffer(e){const a=new Im.Midi(e);this.loadedMidi=a;const n=a.tracks.map((i,s)=>({id:s,name:i.name,instrument:i.instrument.name,noteCount:i.notes.length,channel:i.channel})),l=n.filter(i=>i.noteCount>0);return this.updateState({scoreResult:null}),n.length===1?(this.importMidiTrack(n[0].id),n):l.length===1?(this.importMidiTrack(l[0].id),n):(this.updateState({midiTrackCandidates:n}),n)}async startRecording(){if(this.micStream||await this.initMic(),!this.micStream){console.error("No mic stream available for recording");return}this.recordedChunks=[],this.mediaRecorder=new MediaRecorder(this.micStream),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.recordedChunks.push(e.data)},this.mediaRecorder.start(),this.isRecording=!0,this.notify()}async stopRecording(){return new Promise(e=>{if(!this.mediaRecorder||this.mediaRecorder.state==="inactive"){e(null);return}this.mediaRecorder.onstop=()=>{const a=new Blob(this.recordedChunks,{type:"audio/webm"});this.recordedChunks=[],this.isRecording=!1,this.notify(),e(a)},this.mediaRecorder.stop()})}generatePhrases(){const e=this.state.midiGhostNotes.sort((s,r)=>s.time-r.time);if(e.length===0)return;const a=[];let n=[],l=e[0].time;const i=1.5;for(let s=0;s<e.length;s++){const r=e[s];n.push(r);const c=e[s+1];if(!c||c.time-(r.time+r.duration)>i){const h=r.time+r.duration;a.push({id:crypto.randomUUID(),startTime:l,endTime:h,notes:[...n]}),n=[],c&&(l=c.time)}}console.log(`Generated ${a.length} phrases`),this.updateState({phrases:a})}importMidiTrack(e){if(!this.loadedMidi)return;this.state.midiGhostNotes.length>0&&(this.state.midiGhostNotes=[],this.state.scoreResult=null);const a=this.loadedMidi.tracks[e];if(!a)return;const n=this.loadedMidi.header.tempos.map(i=>({time:i.time||0,bpm:i.bpm}));n.length>0&&(this.state.bpm=Math.round(n[0].bpm)),this.state.tempoMap=n;const l=a.notes.map(i=>({midi:i.midi,time:i.time,duration:i.duration,role:"call"}));this.state.midiGhostNotes=l,this.state.playbackPosition=0,this.notify()}exportSession(){const e={version:1,timestamp:new Date().toISOString(),bpm:this.state.bpm,tempoMap:this.state.tempoMap,practiceConfig:this.state.practiceConfig,ghostNotes:this.state.midiGhostNotes};return JSON.stringify(e,null,2)}async importSession(e){this.state.midiGhostNotes.length>0;const a=await e.text();try{const n=JSON.parse(a);return n.bpm&&(this.state.bpm=n.bpm),n.tempoMap&&(this.state.tempoMap=n.tempoMap),n.practiceConfig&&(this.state.practiceConfig=n.practiceConfig),n.ghostNotes&&(this.state.midiGhostNotes=n.ghostNotes,this.state.isPracticing=!0),this.notify(),!0}catch(n){return console.error("Failed to import session",n),!1}}triggerSessionDownload(){const e=this.exportSession(),a=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download=`practice_session_${new Date().toISOString().slice(0,19).replace(/[:T]/g,"-")}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}async importBackingFile(e){if(this.audioCtx||await this.ensureAudio(),!!this.audioCtx)try{const a=await e.arrayBuffer(),n=await this.audioCtx.decodeAudioData(a);this.backingBuffer=n,this.state.isBackingSoundEnabled=!0,console.log(`[AudioEngine] Loaded Backing Track: ${e.name} (${n.duration.toFixed(2)}s)`),this.notify()}catch(a){console.error("Failed to load backing file:",a)}}async initFromStorage(){try{await Gi.init();const e=await Gi.loadMidi();if(e){console.log("[AudioEngine] Restoring MIDI from storage...");const a=this.loadMidiFromBuffer(e);if(a&&a.length>0){const n=a.filter(l=>l.noteCount>0);n.length===1&&this.importMidiTrack(n[0].id)}}}catch(e){console.warn("[AudioEngine] Failed to restore from storage",e)}}resetSession(e){this.stopPlayback(),this.stopPractice(),e==="all"?(this.state.currentTracks=[],this.state.melodyTrackIndex=-1,this.state.midiGhostNotes=[],this.state.pitchHistory=[],this.state.phrases=[],this.state.scoreResult=null,this.state.playbackPosition=0,this.backingBuffer=null,this.loadedMidi=null,this.originalGhostNotes=null,Gi.saveMidi(new ArrayBuffer(0)).catch(()=>{}),console.log("[AudioEngine] Session fully reset")):(this.state.pitchHistory=[],this.state.scoreResult=null,console.log("[AudioEngine] Pitch history cleared")),this.draw(),this.notify()}}const k=new py;window.audioEngine=k;function qf(t){const e=Math.max(0,t|0);return Math.round(Math.max(60,Math.min(e-80,e*.33)))}function by(){const t=V.useRef(null),e=V.useRef(null),[a,n]=V.useState("default"),l=V.useRef("idle"),i=V.useRef({x:0,y:0}),s=V.useRef({vOffset:0,tOffset:0,noteTime:0,noteMidi:0,noteDur:0,noteStartTime:0,noteStartMidi:0,clickTimeOffset:0,clickMidiOffset:0,playbackPosition:0}),r=V.useRef(null),c=V.useRef(null);V.useEffect(()=>{if(t.current&&e.current){const f=()=>{if(e.current&&t.current){const d=e.current.clientWidth,v=e.current.clientHeight;(Math.abs(t.current.width-d)>1||Math.abs(t.current.height-v)>1)&&(t.current.width=d,t.current.height=v,k.draw())}};return f(),window.addEventListener("resize",f),k.setCanvas(t.current),()=>window.removeEventListener("resize",f)}},[]),V.useEffect(()=>{const f=t.current;if(!f)return;let d=0,v=0,y=!1;const w=T=>{if(T.length<2)return 0;const j=T[0].clientX-T[1].clientX,M=T[0].clientY-T[1].clientY;return Math.sqrt(j*j+M*M)},p=T=>{var j;return T.length<2?((j=T[0])==null?void 0:j.clientX)||0:(T[0].clientX+T[1].clientX)/2},m=T=>{T.touches.length===2&&(T.preventDefault(),y=!0,d=w(T.touches),v=p(T.touches),k.startSeek())},b=T=>{if(!y||T.touches.length<2)return;T.preventDefault();const j=w(T.touches),M=p(T.touches);if(d>0){const N=j/d;if(Math.abs(N-1)>.01){const C=Math.max(20,Math.min(800,k.state.pxPerSec*N));k.updateState({pxPerSec:C})}}const x=M-v;if(Math.abs(x)>2){const N=-x/k.state.pxPerSec,C=Math.max(0,k.state.playbackPosition+N);k.updateState({playbackPosition:C})}d=j,v=M},S=T=>{y&&T.touches.length<2&&(y=!1,k.endSeek())};return f.addEventListener("touchstart",m,{passive:!1}),f.addEventListener("touchmove",b,{passive:!1}),f.addEventListener("touchend",S),f.addEventListener("touchcancel",S),()=>{f.removeEventListener("touchstart",m),f.removeEventListener("touchmove",b),f.removeEventListener("touchend",S),f.removeEventListener("touchcancel",S)}},[]);const u=f=>{var st;k.audioCtx||k.ensureAudio();const d=t.current;if(!d)return;const v=d.getBoundingClientRect(),y=f.clientX-v.left,w=f.clientY-v.top;d.setPointerCapture(f.pointerId),i.current={x:y,y:w};const{editTool:p,timelineOffsetSec:m,verticalOffset:b,selectedNote:S,playbackPosition:T,pxPerSec:j,tempoFactor:M,guideOctaveOffset:x}=k.state,N=x*12;if(w<30){const E=qf(d.width),D=j/M,A=T+m+(y-E)/D,Q=Math.max(0,A-m);if(f.altKey){l.current="set_loop",k.updateState({loopEnabled:!0,loopStart:Q,loopEnd:Q}),s.current.playbackPosition=Q,n("col-resize");return}l.current="scrub",k.updateState({playbackPosition:Q}),s.current.playbackPosition=Q,k.startSeek(),n("ew-resize");return}if(p==="view"){l.current="pan",s.current.playbackPosition=T,s.current.vOffset=b,k.startSeek(),n("grabbing");return}const C=(st=k.visualizer)==null?void 0:st.getQuantizedTimeMidi(y,w,k.state);let O=null,P=!1,rt=!1;if(C){const{exactTime:E,exactMidi:D}=C;if(console.log("[Debug] PointerDown",JSON.stringify({x:y,y:w,exactTime:E,exactMidi:D,offset:N})),S){const A=S.time,Q=S.time+S.duration,at=S.midi+N;Math.abs(E-A)<.2&&Math.abs(D-at)<1?(O=S,rt=!0):Math.abs(E-Q)<.2&&Math.abs(D-at)<1&&(O=S,P=!0)}if(!O){const A=k.state.currentTracks[k.state.melodyTrackIndex];O=(A==null?void 0:A.notes.find(Q=>{const at=Math.abs(Q.midi+N-D),vt=E>=Q.time&&E<=Q.time+Q.duration&&at<.8;return console.log("[Debug] Check Note",JSON.stringify({noteTime:Q.time,noteMidi:Q.midi,visMidi:Q.midi+N,exactTime:E,exactMidi:D,diffMidi:at,match:vt})),vt}))||null}O&&(s.current.noteStartTime=O.time,s.current.noteStartMidi=O.midi,s.current.noteDur=O.duration,s.current.clickTimeOffset=E-O.time,s.current.clickMidiOffset=D-(O.midi+N))}if(p==="eraser"){O&&(k.removeNote(O),S===O&&k.updateState({selectedNote:null}));return}if(p==="select"||p==="pencil"&&O){if(O){c.current=JSON.parse(JSON.stringify(k.state.currentTracks)),r.current=O,rt?(l.current="resize_note_left",n("ew-resize")):P?(l.current="resize_note_right",n("ew-resize")):(k.previewNote(O.midi+N),l.current="move_note",n("move")),k.updateState({selectedNote:O});return}p==="select"&&k.updateState({selectedNote:null})}if(p==="pencil"&&C&&!O){let E=.25;const D=k.state.currentTracks[k.state.melodyTrackIndex];if(D){if(D.notes.find(R=>C.time>=R.time&&C.time<R.time+R.duration-.001&&Math.abs(R.midi+N-C.midi)<.5)||k.state.isMonophonic&&D.notes.find(Y=>C.time>=Y.time&&C.time<Y.time+Y.duration-.001))return;const vt=k.state.isMonophonic,K=D.notes.filter(R=>R.time<=C.time+.001?!1:vt?!0:Math.abs(R.midi+N-C.midi)<.5).sort((R,Y)=>R.time-Y.time)[0];if(K&&(E=Math.min(.25,K.time-C.time),E<=0))return}const A={time:C.time,midi:C.midi-N,duration:E};k.addNote(A),k.updateState({selectedNote:A}),k.previewNote(C.midi),s.current.noteStartTime=C.time,s.current.noteStartMidi=C.midi,l.current="creating_note",r.current=A,n("crosshair"),c.current=null}},h=f=>{var M;if(l.current==="idle")return;const d=t.current;if(!d)return;const v=d.getBoundingClientRect(),y=f.clientX-v.left,w=f.clientY-v.top,p=y-i.current.x,m=w-i.current.y,{pxPerSec:b,tempoFactor:S}=k.state;if(l.current==="scrub"){const x=b/S,N=p/x,C=Math.max(0,s.current.playbackPosition+N);k.updateState({playbackPosition:C});return}if(l.current==="set_loop"){const x=b/S,N=qf(d.width),O=k.state.playbackPosition+k.state.timelineOffsetSec+(y-N)/x,P=s.current.playbackPosition,rt=Math.max(P+.5,O);k.updateState({loopEnd:rt});return}if(l.current==="pan"){const x=b/S,N=-p/x,C=Math.max(0,s.current.playbackPosition+N);k.updateState({playbackPosition:C,timelineOffsetSec:0,verticalOffset:s.current.vOffset+m/5});return}const T=(M=k.visualizer)==null?void 0:M.getQuantizedTimeMidi(y,w,k.state);if(!T||!r.current)return;const j=r.current;if(l.current==="move_note"){const x=T.exactTime-s.current.clickTimeOffset,N=T.exactMidi-s.current.clickMidiOffset,C=Math.max(0,Math.round(x*20)/20),O=k.state.guideOctaveOffset*12,rt=Math.max(0,Math.min(127,Math.round(N)))-O,yt=k.state.currentTracks[k.state.melodyTrackIndex];if(yt){const st=k.state.isMonophonic,E=C+j.duration;if(yt.notes.some(A=>{if(A===j)return!1;const Q=A.time+A.duration;return C<Q-.01&&E>A.time+.01?st?!0:Math.abs(A.midi-rt)<.5:!1}))return}j.time=C,j.midi=rt,k.draw()}else if(l.current==="resize_note_right"||l.current==="resize_note"){let x=Math.max(j.time+.05,T.time);const N=k.state.currentTracks[k.state.melodyTrackIndex];if(N){const C=k.state.isMonophonic,O=N.notes.filter(P=>P===j||P.time<j.time?!1:C?!0:Math.abs(P.midi-j.midi)<.5).sort((P,rt)=>P.time-rt.time)[0];O&&(x=Math.min(x,O.time))}j.duration=Math.max(.05,Math.round((x-j.time)*20)/20),k.draw()}else if(l.current==="resize_note_left"){const x=s.current.noteStartTime+s.current.noteDur;let N=T.time;N=Math.min(x-.05,N),N=Math.max(0,N);const C=k.state.currentTracks[k.state.melodyTrackIndex];if(C){const rt=k.state.isMonophonic,yt=C.notes.filter(st=>st===j||st.time>=x?!1:rt?!0:Math.abs(st.midi-j.midi)<.5).filter(st=>st.time<j.time).sort((st,E)=>E.time-st.time)[0];yt&&(N=Math.max(N,yt.time+yt.duration))}const O=Math.max(.05,Math.round((x-N)*20)/20),P=x-O;j.time=P,j.duration=O,k.draw()}else if(l.current==="creating_note"){let x=Math.max(s.current.noteStartTime+.05,T.time);const N=k.state.currentTracks[k.state.melodyTrackIndex],C=k.state.isMonophonic,O=k.state.guideOctaveOffset*12,P=T.midi,rt=P-O;if(N){const yt=N.notes.filter(st=>st===j||st.time<j.time?!1:C?!0:Math.abs(st.midi-rt)<.5).sort((st,E)=>st.time-E.time)[0];yt&&(x=Math.min(x,yt.time))}j.duration=Math.max(.05,Math.round((x-j.time)*20)/20),j.midi!==rt&&(j.midi=rt,k.previewNote(P)),k.draw()}},g=f=>{const d=t.current;if(d&&d.releasePointerCapture(f.pointerId),(l.current==="resize_note_right"||l.current==="resize_note_left")&&r.current&&k.previewNote(r.current.midi+k.state.guideOctaveOffset*12),c.current){const v=JSON.stringify(k.state.currentTracks),y=JSON.stringify(c.current);v!==y&&(k.history.push(c.current),k.history.length>50&&k.history.shift(),k.redoStack=[])}if((l.current==="scrub"||l.current==="pan")&&k.endSeek(),c.current=null,l.current="idle",n("default"),r.current=null,k.state.editTool==="pencil"||k.state.editTool==="select"){const v=k.state.currentTracks[k.state.melodyTrackIndex];v&&v.notes.sort((y,w)=>y.time-w.time),k.notify()}};return o.jsx("div",{ref:e,className:"w-full h-full relative overflow-hidden bg-[#222]",children:o.jsx("canvas",{ref:t,className:"absolute inset-0 block touch-none w-full h-full",style:{cursor:a},onPointerDown:u,onPointerMove:h,onPointerUp:g,onPointerCancel:g,onWheel:f=>{f.preventDefault(),f.ctrlKey;const{deltaX:d,deltaY:v,ctrlKey:y,shiftKey:w,altKey:p,metaKey:m}=f,b=y||m,S=p,T=w;if(b){const x=v>0?.9:1.1,N=Math.max(10,Math.min(1e3,k.state.pxPerSec*x));k.updateState({pxPerSec:N});return}if(S){const x=v>0?1.1:.9,N=Math.max(1,Math.min(10,k.state.verticalZoom*x));k.updateState({verticalZoom:N});return}if(T||Math.abs(d)>Math.abs(v)){const N=(d!==0?d:v)/k.state.pxPerSec,C=Math.max(0,k.state.playbackPosition+N);k.updateState({playbackPosition:C});return}const j=v/500*10,M=Math.max(0,Math.min(100,k.state.verticalOffset-j));k.updateState({verticalOffset:M})}})})}/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e0=(...t)=>t.filter((e,a,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===a).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=V.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:l="",children:i,iconNode:s,...r},c)=>V.createElement("svg",{ref:c,...vy,width:e,height:e,stroke:t,strokeWidth:n?Number(a)*24/Number(e):a,className:e0("lucide",l),...r},[...s.map(([u,h])=>V.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(t,e)=>{const a=V.forwardRef(({className:n,...l},i)=>V.createElement(xy,{ref:i,iconNode:e,className:e0(`lucide-${yy(t)}`,n),...l}));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ds=jt("Activity",Sy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ty=jt("Calendar",wy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pr=jt("Check",My);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jy=jt("CircleAlert",Ny);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ay=jt("CircleCheckBig",ky);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_y=jt("CircleHelp",zy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Cy=jt("CircleX",Ey);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],a0=jt("Clock",Oy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Uy=jt("Download",Dy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],n0=jt("Eraser",Ry);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]],Hy=jt("FileX",By);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],qy=jt("Hand",Gy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Yy=jt("Info",Vy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Wc=jt("Mic",Ly);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],Qy=jt("MousePointer2",Xy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Us=jt("Music",Zy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Ky=jt("Pause",Fy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Iy=jt("PenLine",Jy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Wy=jt("Pencil",Py);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],iu=jt("Play",$y);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],ev=jt("Repeat",tv);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],nv=jt("Settings2",av);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l0=jt("Settings",lv);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],i0=jt("Square",iv);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Vf=jt("Target",sv);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],or=jt("Trash2",rv);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Rs=jt("Trophy",cv);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fe=jt("X",ov);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fv=jt("Zap",uv);function dv({tracks:t,onSelect:e,onCancel:a,open:n}){return n?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-xl w-full max-w-lg max-h-[80vh] flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[o.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[o.jsx(Us,{className:"w-5 h-5 text-emerald-400"}),"Select MIDI Track to Practice"]}),o.jsx("button",{onClick:a,className:"p-1 hover:bg-white/10 rounded-full transition-colors text-white/50 hover:text-white",children:o.jsx(Fe,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"overflow-y-auto p-2 flex-1 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",children:t.length===0?o.jsxs("div",{className:"p-12 text-center text-white/50 flex flex-col items-center gap-2",children:[o.jsx(Us,{className:"w-12 h-12 opacity-20"}),o.jsx("p",{children:"No playable tracks found in this MIDI file."})]}):o.jsx("div",{className:"grid gap-2",children:t.map(l=>o.jsxs("button",{onClick:()=>e(l.id),className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-all group text-left border border-white/5 hover:border-emerald-500/30",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-400 font-mono text-sm shrink-0",children:l.id+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-white font-medium truncate text-lg",children:l.name||`Track ${l.id+1}`}),o.jsxs("div",{className:"text-white/50 text-sm flex items-center gap-3",children:[o.jsx("span",{className:"flex items-center gap-1",children:l.instrument}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),o.jsxs("span",{children:[l.noteCount," notes"]})]})]}),o.jsx("div",{className:"text-emerald-400 opacity-0 group-hover:opacity-100 transition-opacity text-sm font-semibold whitespace-nowrap px-2",children:"Select"})]},l.id))})}),o.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-800/30 text-xs text-center text-white/40",children:"Importing a track will set it as the Guide (Call) for practice."})]})}):null}function s0(t){var e,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(a=s0(t[e]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function hv(){for(var t,e,a=0,n="",l=arguments.length;a<l;a++)(t=arguments[a])&&(e=s0(t))&&(n&&(n+=" "),n+=e);return n}const mv=(t,e)=>{const a=new Array(t.length+e.length);for(let n=0;n<t.length;n++)a[n]=t[n];for(let n=0;n<e.length;n++)a[t.length+n]=e[n];return a},gv=(t,e)=>({classGroupId:t,validator:e}),r0=(t=new Map,e=null,a)=>({nextPart:t,validators:e,classGroupId:a}),Bs="-",Yf=[],pv="arbitrary..",bv=t=>{const e=vv(t),{conflictingClassGroups:a,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:s=>{if(s.startsWith("[")&&s.endsWith("]"))return yv(s);const r=s.split(Bs),c=r[0]===""&&r.length>1?1:0;return c0(r,c,e)},getConflictingClassGroupIds:(s,r)=>{if(r){const c=n[s],u=a[s];return c?u?mv(u,c):c:u||Yf}return a[s]||Yf}}},c0=(t,e,a)=>{if(t.length-e===0)return a.classGroupId;const l=t[e],i=a.nextPart.get(l);if(i){const u=c0(t,e+1,i);if(u)return u}const s=a.validators;if(s===null)return;const r=e===0?t.join(Bs):t.slice(e).join(Bs),c=s.length;for(let u=0;u<c;u++){const h=s[u];if(h.validator(r))return h.classGroupId}},yv=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),a=e.indexOf(":"),n=e.slice(0,a);return n?pv+n:void 0})(),vv=t=>{const{theme:e,classGroups:a}=t;return xv(a,e)},xv=(t,e)=>{const a=r0();for(const n in t){const l=t[n];su(l,a,n,e)}return a},su=(t,e,a,n)=>{const l=t.length;for(let i=0;i<l;i++){const s=t[i];Sv(s,e,a,n)}},Sv=(t,e,a,n)=>{if(typeof t=="string"){wv(t,e,a);return}if(typeof t=="function"){Tv(t,e,a,n);return}Mv(t,e,a,n)},wv=(t,e,a)=>{const n=t===""?e:o0(e,t);n.classGroupId=a},Tv=(t,e,a,n)=>{if(Nv(t)){su(t(n),e,a,n);return}e.validators===null&&(e.validators=[]),e.validators.push(gv(a,t))},Mv=(t,e,a,n)=>{const l=Object.entries(t),i=l.length;for(let s=0;s<i;s++){const[r,c]=l[s];su(c,o0(e,r),a,n)}},o0=(t,e)=>{let a=t;const n=e.split(Bs),l=n.length;for(let i=0;i<l;i++){const s=n[i];let r=a.nextPart.get(s);r||(r=r0(),a.nextPart.set(s,r)),a=r}return a},Nv=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,jv=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,a=Object.create(null),n=Object.create(null);const l=(i,s)=>{a[i]=s,e++,e>t&&(e=0,n=a,a=Object.create(null))};return{get(i){let s=a[i];if(s!==void 0)return s;if((s=n[i])!==void 0)return l(i,s),s},set(i,s){i in a?a[i]=s:l(i,s)}}},$c="!",Lf=":",kv=[],Xf=(t,e,a,n,l)=>({modifiers:t,hasImportantModifier:e,baseClassName:a,maybePostfixModifierPosition:n,isExternal:l}),Av=t=>{const{prefix:e,experimentalParseClassName:a}=t;let n=l=>{const i=[];let s=0,r=0,c=0,u;const h=l.length;for(let y=0;y<h;y++){const w=l[y];if(s===0&&r===0){if(w===Lf){i.push(l.slice(c,y)),c=y+1;continue}if(w==="/"){u=y;continue}}w==="["?s++:w==="]"?s--:w==="("?r++:w===")"&&r--}const g=i.length===0?l:l.slice(c);let f=g,d=!1;g.endsWith($c)?(f=g.slice(0,-1),d=!0):g.startsWith($c)&&(f=g.slice(1),d=!0);const v=u&&u>c?u-c:void 0;return Xf(i,d,f,v)};if(e){const l=e+Lf,i=n;n=s=>s.startsWith(l)?i(s.slice(l.length)):Xf(kv,!1,s,void 0,!0)}if(a){const l=n;n=i=>a({className:i,parseClassName:l})}return n},zv=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((a,n)=>{e.set(a,1e6+n)}),a=>{const n=[];let l=[];for(let i=0;i<a.length;i++){const s=a[i],r=s[0]==="[",c=e.has(s);r||c?(l.length>0&&(l.sort(),n.push(...l),l=[]),n.push(s)):l.push(s)}return l.length>0&&(l.sort(),n.push(...l)),n}},_v=t=>({cache:jv(t.cacheSize),parseClassName:Av(t),sortModifiers:zv(t),...bv(t)}),Ev=/\s+/,Cv=(t,e)=>{const{parseClassName:a,getClassGroupId:n,getConflictingClassGroupIds:l,sortModifiers:i}=e,s=[],r=t.trim().split(Ev);let c="";for(let u=r.length-1;u>=0;u-=1){const h=r[u],{isExternal:g,modifiers:f,hasImportantModifier:d,baseClassName:v,maybePostfixModifierPosition:y}=a(h);if(g){c=h+(c.length>0?" "+c:c);continue}let w=!!y,p=n(w?v.substring(0,y):v);if(!p){if(!w){c=h+(c.length>0?" "+c:c);continue}if(p=n(v),!p){c=h+(c.length>0?" "+c:c);continue}w=!1}const m=f.length===0?"":f.length===1?f[0]:i(f).join(":"),b=d?m+$c:m,S=b+p;if(s.indexOf(S)>-1)continue;s.push(S);const T=l(p,w);for(let j=0;j<T.length;++j){const M=T[j];s.push(b+M)}c=h+(c.length>0?" "+c:c)}return c},Ov=(...t)=>{let e=0,a,n,l="";for(;e<t.length;)(a=t[e++])&&(n=u0(a))&&(l&&(l+=" "),l+=n);return l},u0=t=>{if(typeof t=="string")return t;let e,a="";for(let n=0;n<t.length;n++)t[n]&&(e=u0(t[n]))&&(a&&(a+=" "),a+=e);return a},Dv=(t,...e)=>{let a,n,l,i;const s=c=>{const u=e.reduce((h,g)=>g(h),t());return a=_v(u),n=a.cache.get,l=a.cache.set,i=r,r(c)},r=c=>{const u=n(c);if(u)return u;const h=Cv(c,a);return l(c,h),h};return i=s,(...c)=>i(Ov(...c))},Uv=[],Ft=t=>{const e=a=>a[t]||Uv;return e.isThemeGetter=!0,e},f0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,d0=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Rv=/^\d+\/\d+$/,Bv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Hv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,qv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mn=t=>Rv.test(t),ot=t=>!!t&&!Number.isNaN(Number(t)),xa=t=>!!t&&Number.isInteger(Number(t)),Wr=t=>t.endsWith("%")&&ot(t.slice(0,-1)),aa=t=>Bv.test(t),Yv=()=>!0,Lv=t=>Hv.test(t)&&!Gv.test(t),h0=()=>!1,Xv=t=>qv.test(t),Qv=t=>Vv.test(t),Zv=t=>!L(t)&&!X(t),Fv=t=>ml(t,p0,h0),L=t=>f0.test(t),Ia=t=>ml(t,b0,Lv),$r=t=>ml(t,Wv,ot),Qf=t=>ml(t,m0,h0),Kv=t=>ml(t,g0,Qv),qi=t=>ml(t,y0,Xv),X=t=>d0.test(t),Tl=t=>gl(t,b0),Jv=t=>gl(t,$v),Zf=t=>gl(t,m0),Iv=t=>gl(t,p0),Pv=t=>gl(t,g0),Vi=t=>gl(t,y0,!0),ml=(t,e,a)=>{const n=f0.exec(t);return n?n[1]?e(n[1]):a(n[2]):!1},gl=(t,e,a=!1)=>{const n=d0.exec(t);return n?n[1]?e(n[1]):a:!1},m0=t=>t==="position"||t==="percentage",g0=t=>t==="image"||t==="url",p0=t=>t==="length"||t==="size"||t==="bg-size",b0=t=>t==="length",Wv=t=>t==="number",$v=t=>t==="family-name",y0=t=>t==="shadow",tx=()=>{const t=Ft("color"),e=Ft("font"),a=Ft("text"),n=Ft("font-weight"),l=Ft("tracking"),i=Ft("leading"),s=Ft("breakpoint"),r=Ft("container"),c=Ft("spacing"),u=Ft("radius"),h=Ft("shadow"),g=Ft("inset-shadow"),f=Ft("text-shadow"),d=Ft("drop-shadow"),v=Ft("blur"),y=Ft("perspective"),w=Ft("aspect"),p=Ft("ease"),m=Ft("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...S(),X,L],j=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],x=()=>[X,L,c],N=()=>[Mn,"full","auto",...x()],C=()=>[xa,"none","subgrid",X,L],O=()=>["auto",{span:["full",xa,X,L]},xa,X,L],P=()=>[xa,"auto",X,L],rt=()=>["auto","min","max","fr",X,L],yt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],st=()=>["start","end","center","stretch","center-safe","end-safe"],E=()=>["auto",...x()],D=()=>[Mn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],A=()=>[t,X,L],Q=()=>[...S(),Zf,Qf,{position:[X,L]}],at=()=>["no-repeat",{repeat:["","x","y","space","round"]}],vt=()=>["auto","cover","contain",Iv,Fv,{size:[X,L]}],K=()=>[Wr,Tl,Ia],R=()=>["","none","full",u,X,L],Y=()=>["",ot,Tl,Ia],W=()=>["solid","dashed","dotted","double"],ut=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],et=()=>[ot,Wr,Zf,Qf],it=()=>["","none",v,X,L],mt=()=>["none",ot,X,L],J=()=>["none",ot,X,L],bt=()=>[ot,X,L],wt=()=>[Mn,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[aa],breakpoint:[aa],color:[Yv],container:[aa],"drop-shadow":[aa],ease:["in","out","in-out"],font:[Zv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[aa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[aa],shadow:[aa],spacing:["px",ot],text:[aa],"text-shadow":[aa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Mn,L,X,w]}],container:["container"],columns:[{columns:[ot,L,X,r]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[xa,"auto",X,L]}],basis:[{basis:[Mn,"full","auto",r,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,Mn,"auto","initial","none",L]}],grow:[{grow:["",ot,X,L]}],shrink:[{shrink:["",ot,X,L]}],order:[{order:[xa,"first","last","none",X,L]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":rt()}],"auto-rows":[{"auto-rows":rt()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...yt(),"normal"]}],"justify-items":[{"justify-items":[...st(),"normal"]}],"justify-self":[{"justify-self":["auto",...st()]}],"align-content":[{content:["normal",...yt()]}],"align-items":[{items:[...st(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...st(),{baseline:["","last"]}]}],"place-content":[{"place-content":yt()}],"place-items":[{"place-items":[...st(),"baseline"]}],"place-self":[{"place-self":["auto",...st()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:E()}],mx:[{mx:E()}],my:[{my:E()}],ms:[{ms:E()}],me:[{me:E()}],mt:[{mt:E()}],mr:[{mr:E()}],mb:[{mb:E()}],ml:[{ml:E()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[r,"screen",...D()]}],"min-w":[{"min-w":[r,"screen","none",...D()]}],"max-w":[{"max-w":[r,"screen","none","prose",{screen:[s]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",a,Tl,Ia]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,X,$r]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Wr,L]}],"font-family":[{font:[Jv,L,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,X,L]}],"line-clamp":[{"line-clamp":[ot,"none",X,$r]}],leading:[{leading:[i,...x()]}],"list-image":[{"list-image":["none",X,L]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",X,L]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:A()}],"text-color":[{text:A()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",X,Ia]}],"text-decoration-color":[{decoration:A()}],"underline-offset":[{"underline-offset":[ot,"auto",X,L]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",X,L]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",X,L]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Q()}],"bg-repeat":[{bg:at()}],"bg-size":[{bg:vt()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xa,X,L],radial:["",X,L],conic:[xa,X,L]},Pv,Kv]}],"bg-color":[{bg:A()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:A()}],"gradient-via":[{via:A()}],"gradient-to":[{to:A()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...W(),"hidden","none"]}],"divide-style":[{divide:[...W(),"hidden","none"]}],"border-color":[{border:A()}],"border-color-x":[{"border-x":A()}],"border-color-y":[{"border-y":A()}],"border-color-s":[{"border-s":A()}],"border-color-e":[{"border-e":A()}],"border-color-t":[{"border-t":A()}],"border-color-r":[{"border-r":A()}],"border-color-b":[{"border-b":A()}],"border-color-l":[{"border-l":A()}],"divide-color":[{divide:A()}],"outline-style":[{outline:[...W(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,X,L]}],"outline-w":[{outline:["",ot,Tl,Ia]}],"outline-color":[{outline:A()}],shadow:[{shadow:["","none",h,Vi,qi]}],"shadow-color":[{shadow:A()}],"inset-shadow":[{"inset-shadow":["none",g,Vi,qi]}],"inset-shadow-color":[{"inset-shadow":A()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:A()}],"ring-offset-w":[{"ring-offset":[ot,Ia]}],"ring-offset-color":[{"ring-offset":A()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":A()}],"text-shadow":[{"text-shadow":["none",f,Vi,qi]}],"text-shadow-color":[{"text-shadow":A()}],opacity:[{opacity:[ot,X,L]}],"mix-blend":[{"mix-blend":[...ut(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ut()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":et()}],"mask-image-linear-to-pos":[{"mask-linear-to":et()}],"mask-image-linear-from-color":[{"mask-linear-from":A()}],"mask-image-linear-to-color":[{"mask-linear-to":A()}],"mask-image-t-from-pos":[{"mask-t-from":et()}],"mask-image-t-to-pos":[{"mask-t-to":et()}],"mask-image-t-from-color":[{"mask-t-from":A()}],"mask-image-t-to-color":[{"mask-t-to":A()}],"mask-image-r-from-pos":[{"mask-r-from":et()}],"mask-image-r-to-pos":[{"mask-r-to":et()}],"mask-image-r-from-color":[{"mask-r-from":A()}],"mask-image-r-to-color":[{"mask-r-to":A()}],"mask-image-b-from-pos":[{"mask-b-from":et()}],"mask-image-b-to-pos":[{"mask-b-to":et()}],"mask-image-b-from-color":[{"mask-b-from":A()}],"mask-image-b-to-color":[{"mask-b-to":A()}],"mask-image-l-from-pos":[{"mask-l-from":et()}],"mask-image-l-to-pos":[{"mask-l-to":et()}],"mask-image-l-from-color":[{"mask-l-from":A()}],"mask-image-l-to-color":[{"mask-l-to":A()}],"mask-image-x-from-pos":[{"mask-x-from":et()}],"mask-image-x-to-pos":[{"mask-x-to":et()}],"mask-image-x-from-color":[{"mask-x-from":A()}],"mask-image-x-to-color":[{"mask-x-to":A()}],"mask-image-y-from-pos":[{"mask-y-from":et()}],"mask-image-y-to-pos":[{"mask-y-to":et()}],"mask-image-y-from-color":[{"mask-y-from":A()}],"mask-image-y-to-color":[{"mask-y-to":A()}],"mask-image-radial":[{"mask-radial":[X,L]}],"mask-image-radial-from-pos":[{"mask-radial-from":et()}],"mask-image-radial-to-pos":[{"mask-radial-to":et()}],"mask-image-radial-from-color":[{"mask-radial-from":A()}],"mask-image-radial-to-color":[{"mask-radial-to":A()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":et()}],"mask-image-conic-to-pos":[{"mask-conic-to":et()}],"mask-image-conic-from-color":[{"mask-conic-from":A()}],"mask-image-conic-to-color":[{"mask-conic-to":A()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Q()}],"mask-repeat":[{mask:at()}],"mask-size":[{mask:vt()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",X,L]}],filter:[{filter:["","none",X,L]}],blur:[{blur:it()}],brightness:[{brightness:[ot,X,L]}],contrast:[{contrast:[ot,X,L]}],"drop-shadow":[{"drop-shadow":["","none",d,Vi,qi]}],"drop-shadow-color":[{"drop-shadow":A()}],grayscale:[{grayscale:["",ot,X,L]}],"hue-rotate":[{"hue-rotate":[ot,X,L]}],invert:[{invert:["",ot,X,L]}],saturate:[{saturate:[ot,X,L]}],sepia:[{sepia:["",ot,X,L]}],"backdrop-filter":[{"backdrop-filter":["","none",X,L]}],"backdrop-blur":[{"backdrop-blur":it()}],"backdrop-brightness":[{"backdrop-brightness":[ot,X,L]}],"backdrop-contrast":[{"backdrop-contrast":[ot,X,L]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,X,L]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,X,L]}],"backdrop-invert":[{"backdrop-invert":["",ot,X,L]}],"backdrop-opacity":[{"backdrop-opacity":[ot,X,L]}],"backdrop-saturate":[{"backdrop-saturate":[ot,X,L]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,X,L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",X,L]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",X,L]}],ease:[{ease:["linear","initial",p,X,L]}],delay:[{delay:[ot,X,L]}],animate:[{animate:["none",m,X,L]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,X,L]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:mt()}],"rotate-x":[{"rotate-x":mt()}],"rotate-y":[{"rotate-y":mt()}],"rotate-z":[{"rotate-z":mt()}],scale:[{scale:J()}],"scale-x":[{"scale-x":J()}],"scale-y":[{"scale-y":J()}],"scale-z":[{"scale-z":J()}],"scale-3d":["scale-3d"],skew:[{skew:bt()}],"skew-x":[{"skew-x":bt()}],"skew-y":[{"skew-y":bt()}],transform:[{transform:[X,L,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:wt()}],"translate-x":[{"translate-x":wt()}],"translate-y":[{"translate-y":wt()}],"translate-z":[{"translate-z":wt()}],"translate-none":["translate-none"],accent:[{accent:A()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:A()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",X,L]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",X,L]}],fill:[{fill:["none",...A()]}],"stroke-w":[{stroke:[ot,Tl,Ia,$r]}],stroke:[{stroke:["none",...A()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ex=Dv(tx);function zt(...t){return ex(hv(t))}function ax({onOpenSettings:t,onOpenPractice:e,onOpenHistory:a,onRecordingComplete:n}){const[l,i]=V.useState(k.state.isPlaying),[s,r]=V.useState(!!k.micStream),[c,u]=V.useState(k.isRecording),[h,g]=V.useState(k.state.editTool),[f,d]=V.useState(k.state.loopEnabled),[v,y]=V.useState([]),[w,p]=V.useState(!1);V.useEffect(()=>{const M=k.subscribe(()=>{i(k.state.isPlaying),r(!!k.micStream),u(k.isRecording),g(k.state.editTool),d(k.state.loopEnabled);const N=k.state.midiTrackCandidates;N&&N.length>0&&(y(N),p(!0),k.updateState({midiTrackCandidates:void 0}))}),x=setInterval(()=>{},100);return()=>{M(),clearInterval(x)}},[]);const[,m]=V.useState(0);V.useEffect(()=>k.subscribe(()=>m(M=>M+1)),[]);const b=async()=>{k.state.isPlaying?k.stopPlayback():(await k.ensureAudio(),k.startPlayback())},S=async()=>{s?k.micStream&&(k.micStream.getTracks().forEach(M=>M.stop()),k.micStream=null,k.notify()):await k.initMic()},T=M=>{k.importMidiTrack(M),k.startPractice({mode:"Midi"}),p(!1)},j=async()=>{if(c){const M=await k.stopRecording();M&&n&&n(M)}else await k.startRecording()};return o.jsxs("div",{id:"bottom-controls-panel",className:"fixed bottom-0 left-0 right-0 bg-neutral-900 border-t border-white/10 p-4 z-50 shadow-2xl",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4 overflow-x-auto no-scrollbar",children:[o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsx("button",{onClick:b,className:zt("w-12 h-12 rounded-full flex items-center justify-center transition-all",l?"bg-red-500/20 text-red-500 hover:bg-red-500/30":"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-500/20"),title:l?"Stop (Space)":"Play (Space)",children:l?o.jsx(i0,{className:"w-5 h-5 fill-current"}):o.jsx(iu,{className:"w-5 h-5 fill-current translate-x-0.5"})}),o.jsx("button",{onClick:S,className:zt("w-10 h-10 rounded-full flex items-center justify-center transition-all border",s?"bg-red-500 text-white border-red-500 shadow-red-500/20 animate-pulse":"bg-white/5 border-white/10 text-white/70 hover:text-white hover:bg-white/10"),title:"Toggle Microphone",children:o.jsx(Wc,{className:"w-5 h-5"})}),o.jsx("button",{onClick:j,className:zt("w-10 h-10 rounded-full flex items-center justify-center transition-all border",c?"bg-red-600 text-white border-red-600 shadow-lg shadow-red-600/30":"bg-white/5 border-white/10 text-white/70 hover:text-white hover:bg-white/10"),title:c?"Stop Recording":"Start Recording",children:o.jsx("div",{className:zt("w-4 h-4 rounded-full transition-all",c?"bg-white rounded-sm":"bg-red-500")})})]}),o.jsx("div",{className:"w-px h-8 bg-white/10 shrink-0 hidden sm:block"}),o.jsx("button",{onClick:()=>{const M=!k.state.loopEnabled;if(M&&k.state.loopEnd<=k.state.loopStart){const x=k.state.playbackPosition;k.updateState({loopEnabled:!0,loopStart:x,loopEnd:x+10})}else k.updateState({loopEnabled:M})},className:zt("p-2.5 rounded-lg border transition-all shrink-0",f?"bg-orange-500/20 border-orange-500/40 text-orange-400":"bg-white/5 border-white/10 text-white/50 hover:text-white hover:bg-white/10"),title:f?"OFF":"ON",children:o.jsx(ev,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex items-center bg-white/5 rounded-full p-1 gap-1 shrink-0",children:[{id:"select",icon:Qy,label:"Select"},{id:"view",icon:qy,label:"Pan"},{id:"pencil",icon:Wy,label:"Draw"},{id:"eraser",icon:n0,label:"Erase"}].map(M=>o.jsx("button",{onClick:()=>k.setTool(M.id),className:zt("p-2 rounded-full transition-all relative group",h===M.id?"bg-blue-600 text-white shadow-md":"text-white/50 hover:text-white hover:bg-white/10"),title:M.label,children:o.jsx(M.icon,{className:"w-5 h-5"})},M.id))}),o.jsx("div",{className:"w-px h-8 bg-white/10 shrink-0 hidden sm:block"}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-auto",children:[e&&o.jsx("button",{onClick:e,className:"p-2.5 rounded-lg border border-white/10 bg-white/5 text-white/70 hover:text-white hover:bg-white/10 transition-all",title:"Practice Tools",children:o.jsx(Ds,{className:"w-5 h-5"})}),a&&o.jsx("button",{onClick:a,className:"p-2.5 rounded-lg border border-white/10 bg-white/5 text-white/70 hover:text-white hover:bg-white/10 transition-all",title:"History & Analytics",children:o.jsx(a0,{className:"w-5 h-5"})}),o.jsx("button",{onClick:t,className:"p-2.5 rounded-lg border border-white/10 bg-white/5 text-white/70 hover:text-white hover:bg-white/10 transition-all",title:"Settings",children:o.jsx(l0,{className:"w-5 h-5"})})]})]}),w&&o.jsx(dv,{tracks:v,onSelect:T,onCancel:()=>p(!1),open:w})]})}function nx({onClose:t}){const[e,a]=V.useState("basic");return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"w-full max-w-2xl bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[o.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between bg-white/5",children:[o.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 text-white",children:[o.jsx("span",{className:"w-8 h-8 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center",children:"?"}),""]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/70 hover:text-white",children:o.jsx(Fe,{size:20})})]}),o.jsxs("div",{className:"flex border-b border-white/10 bg-black/20 overflow-x-auto",children:[o.jsx("button",{onClick:()=>a("basic"),className:zt("px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap",e==="basic"?"text-blue-400 border-b-2 border-blue-400 bg-blue-500/5":"text-white/50 hover:text-white hover:bg-white/5"),children:""}),o.jsx("button",{onClick:()=>a("tools"),className:zt("px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap",e==="tools"?"text-blue-400 border-b-2 border-blue-400 bg-blue-500/5":"text-white/50 hover:text-white hover:bg-white/5"),children:""}),o.jsx("button",{onClick:()=>a("settings"),className:zt("px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap",e==="settings"?"text-blue-400 border-b-2 border-blue-400 bg-blue-500/5":"text-white/50 hover:text-white hover:bg-white/5"),children:""})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 text-white/80 space-y-8",children:[e==="basic"&&o.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300",children:[o.jsxs("section",{children:[o.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[o.jsx(Us,{className:"w-5 h-5 text-blue-400"}),""]}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm ml-2",children:[o.jsxs("li",{children:[" ",o.jsx("span",{className:"text-blue-300",children:" "})," MIDI"]}),o.jsxs("li",{children:[o.jsx("span",{className:"text-purple-300",children:" "})," "]})]})]}),o.jsxs("section",{children:[o.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[o.jsx(Wc,{className:"w-5 h-5 text-red-400"}),""]}),o.jsxs("div",{className:"space-y-2 text-sm ml-2",children:[o.jsxs("p",{children:[" ",o.jsx("span",{className:"inline-block p-1 bg-red-500/20 rounded border border-red-500/50",children:o.jsx(Wc,{className:"w-3 h-3 inline"})})," "]}),o.jsx("p",{children:""}),o.jsxs("p",{children:["",o.jsx("span",{className:"text-green-400 font-bold",children:""}),""]})]})]})]}),e==="tools"&&o.jsx("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300",children:o.jsxs("section",{children:[o.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[o.jsx(Iy,{className:"w-5 h-5 text-yellow-400"}),""]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[o.jsx("div",{className:"font-bold text-white mb-1",children:"  (Pan)"}),o.jsx("div",{className:"text-xs text-white/60",children:""})]}),o.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[o.jsx("div",{className:"font-bold text-white mb-1",children:"  (Select)"}),o.jsx("div",{className:"text-xs text-white/60",children:""})]}),o.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[o.jsx("div",{className:"font-bold text-white mb-1",children:"  (Pencil)"}),o.jsx("div",{className:"text-xs text-white/60",children:""})]}),o.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[o.jsx("div",{className:"font-bold text-white mb-1",children:"  (Eraser)"}),o.jsx("div",{className:"text-xs text-white/60",children:""})]})]})]})}),e==="settings"&&o.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300",children:[o.jsxs("section",{children:[o.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[o.jsx(l0,{className:"w-5 h-5 text-gray-400"}),""]}),o.jsx("p",{className:"text-sm",children:" "})]}),o.jsxs("section",{children:[o.jsx("h3",{className:"text-white font-bold text-lg mb-3 text-red-400",children:""}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm ml-2",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-bold text-white",children:":"})," "]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-bold text-white",children:":"})," "]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-bold text-white",children:":"})," "]})]})]})]})]}),o.jsx("div",{className:"p-4 border-t border-white/10 bg-white/5 flex justify-end",children:o.jsx("button",{onClick:t,className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-colors",children:""})})]})})}function lx({onClose:t}){const[e,a]=V.useState(k.state),[n,l]=V.useState(!1);V.useEffect(()=>k.subscribe(()=>a(k.state)),[]);const i=(s,r)=>{k.updateState({[s]:r})};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"absolute top-14 right-2 md:right-4 z-50 w-[95vw] md:w-80 max-w-[95vw] md:max-w-none bg-black/90 backdrop-blur-md rounded-2xl border border-white/10 shadow-2xl overflow-hidden text-white/90 animate-in fade-in slide-in-from-right-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-white/5",children:[o.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-6 bg-blue-500 rounded-full"}),""]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>l(!0),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-blue-300 hover:text-blue-200",title:"",children:o.jsx(_y,{size:20})}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors","aria-label":"",children:o.jsx(Fe,{size:20})})]})]}),o.jsxs("div",{className:"p-5 space-y-6 max-h-[75vh] overflow-y-auto overscroll-contain",children:[o.jsxs("div",{className:"bg-white/5 rounded-lg overflow-hidden border border-white/5",children:[o.jsx("div",{className:"px-4 py-2 bg-white/10 text-xs font-bold uppercase tracking-wider text-white/70",children:""}),o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:""}),o.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>i("noteNotation","alphabet"),className:`px-3 py-1 rounded-md text-xs transition-all ${e.noteNotation==="alphabet"?"bg-blue-500 text-white shadow-sm":"text-white/50 hover:text-white/80"}`,children:"CDE"}),o.jsx("button",{onClick:()=>i("noteNotation","katakana"),className:`px-3 py-1 rounded-md text-xs transition-all ${e.noteNotation==="katakana"?"bg-blue-500 text-white shadow-sm":"text-white/50 hover:text-white/80"}`,children:""})]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:" ()"}),o.jsxs("span",{className:"font-mono text-blue-400 bg-blue-400/10 px-2 py-0.5 rounded",children:[e.verticalZoom.toFixed(1)," Octave"]})]}),o.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:e.verticalZoom,onChange:s=>i("verticalZoom",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:""}),o.jsxs("span",{className:"font-mono text-blue-400 bg-blue-400/10 px-2 py-0.5 rounded",children:[e.pxPerSec," px/s"]})]}),o.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:e.pxPerSec,onChange:s=>i("pxPerSec",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-white/5",children:[o.jsx("span",{children:""}),o.jsx("button",{onClick:()=>i("isParticlesEnabled",!e.isParticlesEnabled),className:`w-10 h-5 rounded-full transition-colors relative ${e.isParticlesEnabled?"bg-blue-500":"bg-white/10"}`,children:o.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-transform duration-200 ${e.isParticlesEnabled?"left-5.5":"left-0.5"}`})})]})]})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg overflow-hidden border border-white/5",children:[o.jsx("div",{className:"px-4 py-2 bg-white/10 text-xs font-bold uppercase tracking-wider text-white/70",children:""}),o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:" ()"}),o.jsxs("span",{className:"font-mono text-orange-400 bg-orange-400/10 px-2 py-0.5 rounded",children:["x",e.tempoFactor.toFixed(2)]})]}),o.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.05",value:e.tempoFactor,onChange:s=>i("tempoFactor",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-orange-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:""}),o.jsxs("span",{className:"font-mono text-yellow-400 bg-yellow-400/10 px-2 py-0.5 rounded",children:[e.guideOctaveOffset>0?"+":"",e.guideOctaveOffset," Oct"]})]}),o.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1 gap-1",children:[o.jsx("button",{onClick:()=>i("guideOctaveOffset",e.guideOctaveOffset-1),className:"flex-1 py-1 hover:bg-white/10 rounded-md transition-colors text-white/80",children:"-1"}),o.jsx("button",{onClick:()=>i("guideOctaveOffset",0),className:"flex-1 py-1 hover:bg-white/10 rounded-md transition-colors text-xs text-white/40",children:"Reset"}),o.jsx("button",{onClick:()=>i("guideOctaveOffset",e.guideOctaveOffset+1),className:"flex-1 py-1 hover:bg-white/10 rounded-md transition-colors text-white/80",children:"+1"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:""}),o.jsxs("span",{className:"font-mono text-cyan-400 bg-cyan-400/10 px-2 py-0.5 rounded",children:[e.transposeOffset>0?"+":"",e.transposeOffset," "]})]}),o.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:e.transposeOffset,onChange:s=>i("transposeOffset",parseInt(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-cyan-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"}),o.jsxs("div",{className:"flex justify-between text-[10px] text-white/30 px-1",children:[o.jsx("span",{children:"-1"}),o.jsx("button",{onClick:()=>i("transposeOffset",0),className:"text-white/50 hover:text-white",children:"Reset"}),o.jsx("span",{children:"+1"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:""}),o.jsxs("span",{className:"font-mono text-blue-400 bg-blue-400/10 px-2 py-0.5 rounded",children:[(e.guideVolume*100).toFixed(0),"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:e.guideVolume,onChange:s=>i("guideVolume",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-blue-400 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:""}),o.jsxs("span",{className:"font-mono text-purple-400 bg-purple-400/10 px-2 py-0.5 rounded",children:[(e.accompVolume*100).toFixed(0),"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:e.accompVolume,onChange:s=>i("accompVolume",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-purple-400 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]})]})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg overflow-hidden border border-white/5",children:[o.jsx("div",{className:"px-4 py-2 bg-white/10 text-xs font-bold uppercase tracking-wider text-white/70",children:""}),o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:" (Gate)"}),o.jsxs("span",{className:"font-mono text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:[e.gateThreshold," dB"]})]}),o.jsx("input",{type:"range",min:"-80",max:"0",step:"1",value:e.gateThreshold,onChange:s=>i("gateThreshold",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-red-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm items-center",children:[o.jsx("span",{children:""}),o.jsxs("span",{className:"font-mono text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded",children:["",e.toleranceCents," cent"]})]}),o.jsx("input",{type:"range",min:"10",max:"100",step:"5",value:e.toleranceCents,onChange:s=>i("toleranceCents",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-emerald-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]})]})]})]}),o.jsx("div",{className:"pt-4 pb-4 text-center",children:o.jsx("p",{className:"text-[10px] text-white/20",children:"Ontei Web - Refactor"})})]}),n&&o.jsx(nx,{onClose:()=>l(!1)})]})}const ix=["Major","NaturalMinor","HarmonicMinor","MelodicMinor","MajorPentatonic","MinorPentatonic","Chromatic"],sx=["Major","Minor","Major7","Minor7","Dominant7"],rx=["LongTone","FiveNote","Triad","Thirds","Octave"],cx=({audioEngine:t,isPracticing:e,onClose:a})=>{var S,T,j,M;const[n,l]=V.useState("Exercise"),[i,s]=V.useState(["Major","NaturalMinor"]),[r,c]=V.useState(["Major","Minor"]),[u,h]=V.useState(["LongTone","FiveNote","Triad"]),[g,f]=V.useState(103),[d,v]=V.useState(!0),y=()=>{const x={mode:n,allowedScales:i,allowedArpeggios:r,allowedExercises:u,maxPitch:g};t.startPractice(x),v(!1)},w=()=>{t.stopPractice()},p=x=>{i.includes(x)?s(i.filter(N=>N!==x)):s([...i,x])},m=x=>{r.includes(x)?c(r.filter(N=>N!==x)):c([...r,x])},b=x=>{u.includes(x)?h(u.filter(N=>N!==x)):h([...u,x])};return o.jsxs("div",{className:"absolute top-20 right-4 z-40 w-80 bg-black/90 backdrop-blur-md rounded-2xl border border-white/10 shadow-2xl overflow-hidden text-white/90 animate-in fade-in slide-in-from-right-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-white/5",children:[o.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[o.jsx("span",{className:"p-1 rounded bg-green-500/20 text-green-400",children:o.jsx(Ds,{size:16})}),""]}),o.jsxs("div",{className:"flex items-center gap-1",children:[!e&&o.jsx("button",{onClick:()=>v(!d),className:zt("p-2 rounded-full transition-colors",d?"bg-white/20 text-white":"hover:bg-white/10 text-white/60"),title:"",children:o.jsx(nv,{size:18})}),o.jsx("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-full transition-colors","aria-label":"",children:o.jsx(Fe,{size:18})})]})]}),o.jsxs("div",{className:"p-5 space-y-6 max-h-[70vh] overflow-y-auto",children:[o.jsx("div",{className:"space-y-2",children:o.jsx("p",{className:"text-sm text-white/60 leading-relaxed",children:""})}),d&&!e&&o.jsxs("div",{className:"space-y-4 bg-white/5 p-4 rounded-xl border border-white/5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),o.jsx("div",{className:"flex bg-black/40 p-1 rounded-lg",children:["Exercise","Mix","Scale","Arpeggio"].map(x=>o.jsx("button",{onClick:()=>l(x),className:zt("flex-1 py-1.5 text-xs font-medium rounded-md transition-all",n===x?"bg-white/20 text-white shadow-sm":"text-white/40 hover:text-white/60"),children:x==="Mix"?"":x==="Scale"?"":x==="Arpeggio"?"":""},x))})]}),(n==="Scale"||n==="Mix")&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:ix.map(x=>o.jsxs("button",{onClick:()=>p(x),className:zt("px-2 py-1.5 text-[10px] text-left rounded border transition-all flex items-center justify-between",i.includes(x)?"bg-green-500/20 border-green-500/30 text-green-300":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"),children:[o.jsx("span",{className:"truncate",children:x==="Major"?" ()":x==="NaturalMinor"?"":x==="HarmonicMinor"?"":x==="MelodicMinor"?"":x==="MajorPentatonic"?"":x==="MinorPentatonic"?"":" ()"}),i.includes(x)&&o.jsx(Pr,{size:10})]},x))})]}),(n==="Arpeggio"||n==="Mix")&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:sx.map(x=>o.jsxs("button",{onClick:()=>m(x),className:zt("px-2 py-1.5 text-[10px] text-left rounded border transition-all flex items-center justify-between",r.includes(x)?"bg-blue-500/20 border-blue-500/30 text-blue-300":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"),children:[o.jsx("span",{className:"truncate",children:x==="Major"?"":x==="Minor"?"":x==="Major7"?"7th":x==="Minor7"?"7th":"7th"}),r.includes(x)&&o.jsx(Pr,{size:10})]},x))})]}),(n==="Exercise"||n==="Mix")&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:rx.map(x=>o.jsxs("button",{onClick:()=>b(x),className:zt("px-2 py-1.5 text-[10px] text-left rounded border transition-all flex items-center justify-between",u.includes(x)?"bg-purple-500/20 border-purple-500/30 text-purple-300":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"),children:[o.jsx("span",{className:"truncate",children:x==="LongTone"?"":x==="FiveNote"?"5":x==="Triad"?" (3)":x==="Thirds"?"3":""}),u.includes(x)&&o.jsx(Pr,{size:10})]},x))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),o.jsx("div",{className:"flex bg-black/40 p-1 rounded-lg",children:[{label:"G6 ()",val:91},{label:"C7 ()",val:96},{label:"G7 ()",val:103},{label:"C8 ()",val:108}].map(x=>o.jsx("button",{onClick:()=>f(x.val),className:zt("flex-1 py-1.5 text-[10px] font-medium rounded-md transition-all",g===x.val?"bg-white/20 text-white shadow-sm":"text-white/40 hover:text-white/60"),children:x.label},x.val))})]})]}),e?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-xl space-y-2 animate-pulse",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-ping"}),o.jsx("span",{className:"text-green-400 font-medium text-sm",children:"..."})]}),o.jsxs("div",{className:"text-[10px] text-green-300/60 pl-5",children:["Mode: ",((S=t.state.practiceConfig)==null?void 0:S.mode)==="Mix"?"":((T=t.state.practiceConfig)==null?void 0:T.mode)==="Scale"?"":((j=t.state.practiceConfig)==null?void 0:j.mode)==="Arpeggio"?"":((M=t.state.practiceConfig)==null?void 0:M.mode)==="Exercise"?"":""]})]}),o.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/10",children:[o.jsx("span",{className:"text-xs text-white/60",children:""}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>{t.updateState({guideOctaveOffset:t.state.guideOctaveOffset-1})},className:"p-1 hover:bg-white/10 rounded",children:"-"}),o.jsxs("span",{className:"text-sm font-bold w-4 text-center",children:[t.state.guideOctaveOffset>0?"+":"",t.state.guideOctaveOffset]}),o.jsx("button",{onClick:()=>{t.updateState({guideOctaveOffset:t.state.guideOctaveOffset+1})},className:"p-1 hover:bg-white/10 rounded",children:"+"})]})]}),o.jsxs("button",{onClick:w,className:"w-full py-3 bg-red-500/20 hover:bg-red-500/30 text-red-400 hover:text-red-300 font-bold rounded-xl flex items-center justify-center gap-2 transition-all border border-red-500/20 active:scale-95",children:[o.jsx(i0,{size:18,className:"fill-current"}),""]})]}):o.jsxs("button",{onClick:y,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-green-500/20 active:scale-95",children:[o.jsx(iu,{size:18,className:"fill-white"}),""]}),o.jsx("div",{className:"pt-2 text-[10px] text-center text-white/20 border-t border-white/5",children:"Continuous Practice Generator v1.1"})]})]})},tc="ontei-practice-history",en=class en{constructor(){}static getInstance(){return en.instance||(en.instance=new en),en.instance}getRecords(){try{const e=localStorage.getItem(tc);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load history:",e),[]}}saveRecord(e){const a={...e,id:crypto.randomUUID(),date:new Date().toISOString()},n=this.getRecords();n.unshift(a),n.length>100&&(n.length=100);try{localStorage.setItem(tc,JSON.stringify(n))}catch(l){console.error("Failed to save history:",l)}return a}clearHistory(){localStorage.removeItem(tc)}getStats(){const e=this.getRecords();if(e.length===0)return{totalDuration:0,averageScore:0,bestScore:0,totalSessions:0};const a=e.reduce((i,s)=>i+s.duration,0),n=e.reduce((i,s)=>i+s.score,0)/e.length,l=Math.max(...e.map(i=>i.score));return{totalDuration:a,averageScore:n,bestScore:l,totalSessions:e.length}}};q(en,"instance");let to=en;const An=to.getInstance(),ox=t=>{const e=Math.floor(t/60),a=Math.floor(t%60);return`${e}:${a.toString().padStart(2,"0")}`},Ff=({result:t,onClose:e})=>{const a=V.useRef(!1);V.useEffect(()=>{a.current||(An.saveRecord({score:t.totalScore,accuracy:t.radar.pitch,songName:"Unknown Song",duration:0}),a.current=!0)},[t]);const n=[{label:"",val:t.radar.pitch,full:100},{label:"",val:t.radar.stability,full:100},{label:"",val:t.radar.expressiveness,full:100},{label:"",val:t.radar.rhythm,full:100},{label:"",val:t.radar.technique,full:100}],l=80,i=100,s=n.map((c,u)=>{const h=Math.PI*2*u/5-Math.PI/2,g=c.val/100*l,f=i+g*Math.cos(h),d=i+g*Math.sin(h);return`${f},${d}`}).join(" "),r=n.map((c,u)=>{const h=Math.PI*2*u/5-Math.PI/2,g=i+l*Math.cos(h),f=i+l*Math.sin(h);return`${g},${f}`}).join(" ");return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-300 p-4",children:o.jsxs("div",{className:"w-full max-w-4xl bg-[#1a1a1e] rounded-3xl border border-white/10 shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:[o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-purple-900/50 p-6 flex items-center justify-between border-b border-white/10",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 text-white",children:[o.jsx(Rs,{className:"text-yellow-400 fill-yellow-400"}),""]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/60 hover:text-white",children:o.jsx(Fe,{})})]}),o.jsxs("div",{className:"p-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6 text-center md:text-left",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:"text-sm font-bold tracking-widest text-white/40 uppercase",children:"Total Score"}),o.jsxs("div",{className:"text-8xl font-black text-transparent bg-clip-text bg-gradient-to-br from-white to-white/50 shadow-glow",children:[t.totalScore,o.jsx("span",{className:"text-2xl text-white/30 font-normal ml-2",children:"pts"})]})]}),o.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/5",children:[o.jsx("h3",{className:"text-sm font-bold text-blue-300 mb-1",children:""}),o.jsx("p",{className:"text-white/80 leading-relaxed text-sm",children:t.comment})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-xs text-white/40 uppercase font-bold",children:[o.jsx("span",{children:"Flat ()"}),o.jsx("span",{children:"Perfect"}),o.jsx("span",{children:"Sharp ()"})]}),o.jsxs("div",{className:"h-4 bg-black/50 rounded-full relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white/30 left-1/2 -ml-[0.5px]"}),o.jsx("div",{className:zt("absolute top-1 bottom-1 rounded-full transition-all",t.tendency>0?"bg-red-500 left-1/2":"bg-blue-500 right-1/2"),style:{[(t.tendency>0,"width")]:`${Math.min(50,Math.abs(t.tendency))}%`}})]}),o.jsxs("div",{className:"text-center text-xs text-white/30 font-mono",children:[": ",Math.abs(t.tendency).toFixed(1)," cent ",t.tendency>0?"":t.tendency<0?"":""]})]}),t.advice&&t.advice.length>0&&o.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[o.jsxs("h3",{className:"text-sm font-bold text-white/50 uppercase tracking-widest flex items-center gap-2",children:[o.jsx(fv,{size:14,className:"text-yellow-400"}),"Expert Analysis"]}),o.jsx("div",{className:"space-y-2 max-h-[150px] overflow-y-auto pr-2 custom-scrollbar",children:t.advice.map((c,u)=>o.jsxs("div",{className:zt("flex items-start gap-3 p-3 rounded-lg border text-sm",c.level==="warning"?"bg-red-500/10 border-red-500/30 text-red-200":c.level==="positive"?"bg-green-500/10 border-green-500/30 text-green-200":"bg-blue-500/10 border-blue-500/30 text-blue-200"),children:[o.jsx("div",{className:"mt-0.5 shrink-0",children:c.level==="warning"?o.jsx(Fe,{size:16}):c.level==="positive"?o.jsx(Rs,{size:16}):o.jsx(Us,{size:16})}),o.jsx("span",{className:"leading-snug",children:c.message})]},u))})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"aspect-square w-full max-w-[280px] mx-auto relative",children:o.jsxs("svg",{viewBox:"-30 -30 260 260",className:"w-full h-full drop-shadow-2xl",children:[o.jsx("polygon",{points:r,fill:"#ffffff05",stroke:"#ffffff20",strokeWidth:"1"}),[.8,.6,.4,.2].map(c=>o.jsx("polygon",{points:n.map((u,h)=>{const g=Math.PI*2*h/5-Math.PI/2,f=c*l;return`${i+f*Math.cos(g)},${i+f*Math.sin(g)}`}).join(" "),fill:"none",stroke:"#ffffff10",strokeWidth:"1"},c)),o.jsx("polygon",{points:s,fill:"rgba(99, 102, 241, 0.4)",stroke:"#818cf8",strokeWidth:"2"}),n.map((c,u)=>{const h=Math.PI*2*u/5-Math.PI/2,g=l+20,f=i+g*Math.cos(h),d=i+g*Math.sin(h);return o.jsx("text",{x:f,y:d,fill:"white",fontSize:"10",textAnchor:"middle",dominantBaseline:"middle",children:c.label},u)})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[o.jsxs("div",{className:"bg-white/5 p-3 rounded-xl flex items-center gap-3 border border-white/5",children:[o.jsx("div",{className:"p-2 bg-pink-500/20 rounded-lg text-pink-400",children:o.jsx(Ds,{size:16})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-white/40 uppercase",children:"Vibrato"}),o.jsxs("div",{className:"font-bold text-white",children:[t.vibratoCount," ",o.jsxs("span",{className:"text-xs font-normal text-white/40",children:["(",t.vibratoSec.toFixed(1),"s)"]})]})]})]}),o.jsxs("div",{className:"bg-white/5 p-3 rounded-xl flex items-center gap-3 border border-white/5",children:[o.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:o.jsx(Vf,{size:16})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-white/40 uppercase",children:"Accuracy"}),o.jsxs("div",{className:"font-bold text-white",children:[t.radar.pitch,o.jsx("span",{className:"text-xs",children:"%"})]})]})]})]}),t.weakNotes&&t.weakNotes.length>0&&o.jsxs("div",{className:"mt-4 bg-white/5 p-4 rounded-xl border border-white/5",children:[o.jsxs("h3",{className:"text-sm font-bold text-white/50 uppercase tracking-widest mb-3 flex items-center gap-2",children:[o.jsx(Vf,{size:14,className:"text-red-400"}),"Weak Point Analysis"]}),o.jsx("div",{className:"space-y-2",children:t.weakNotes.map((c,u)=>{const h=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],g=["","#","","#","","","#","","#","","#",""],d=(k.state.noteNotation||"alphabet")==="katakana"?g[c.noteIndex]:h[c.noteIndex];return o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold w-12 h-6 flex items-center justify-center bg-white/10 rounded text-white/80 text-xs",children:d}),o.jsx("span",{className:"text-white/60",children:""}),o.jsx("span",{className:zt("font-bold",c.diff>0?"text-red-400":"text-blue-400"),children:c.diff>0?"":""}),o.jsx("span",{className:"text-white/60",children:""})]}),o.jsxs("div",{className:"font-mono text-xs opacity-50",children:[c.diff>0?"+":"",c.diff.toFixed(1)," cent"]})]},u)})})]}),t.phraseScores&&t.phraseScores.length>0&&o.jsxs("div",{className:"mt-6 space-y-3",children:[o.jsxs("h3",{className:"text-sm font-bold text-white/50 uppercase tracking-widest flex items-center gap-2",children:[o.jsx(Ds,{size:14,className:"text-blue-400"}),"Phrase Analysis"]}),o.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto custom-scrollbar pr-2",children:t.phraseScores.map(c=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/5 hover:bg-white/10 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-xs font-mono text-white/50",children:[ox(c.startTime),o.jsx("span",{className:"mx-1",children:"~"})]}),o.jsx("span",{className:zt("text-xs font-bold px-2 py-0.5 rounded-full border",c.evaluation==="Perfect"?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30":c.evaluation==="Good"?"bg-green-500/20 text-green-300 border-green-500/30":"bg-white/10 text-white/40 border-white/10"),children:c.evaluation})]}),o.jsxs("div",{className:"font-bold text-white",children:[c.score," ",o.jsx("span",{className:"text-xs font-normal text-white/30",children:"pts"})]})]},c.phraseId))})]})]})]})]})})};function ux({records:t}){const e=V.useRef(null);return V.useEffect(()=>{const a=e.current;if(!a)return;const n=a.getContext("2d");if(!n)return;const l=window.devicePixelRatio||1,i=a.getBoundingClientRect();a.width=i.width*l,a.height=i.height*l,n.scale(l,l);const s=i.width,r=i.height;if(n.clearRect(0,0,s,r),t.length<2){n.fillStyle="rgba(255, 255, 255, 0.3)",n.font="14px sans-serif",n.textAlign="center",n.fillText("",s/2,r/2);return}const c=[...t].reverse().slice(-20),u={top:20,right:20,bottom:30,left:40},h=s-u.left-u.right,g=r-u.top-u.bottom,f=y=>u.left+y/(c.length-1)*h,d=y=>u.top+g-y/100*g;n.strokeStyle="rgba(255, 255, 255, 0.1)",n.lineWidth=1,n.beginPath();for(let y=0;y<=4;y++){const w=u.top+y/4*g;n.moveTo(u.left,w),n.lineTo(s-u.right,w),n.fillStyle="rgba(255, 255, 255, 0.3)",n.font="10px sans-serif",n.textAlign="right",n.fillText(`${100-y*25}`,u.left-5,w+4)}n.stroke(),n.strokeStyle="#3b82f6",n.lineWidth=3,n.beginPath(),c.forEach((y,w)=>{const p=f(w),m=d(y.score);w===0?n.moveTo(p,m):n.lineTo(p,m)}),n.stroke();const v=n.createLinearGradient(0,u.top,0,r-u.bottom);if(v.addColorStop(0,"rgba(59, 130, 246, 0.3)"),v.addColorStop(1,"rgba(59, 130, 246, 0)"),n.fillStyle=v,n.lineTo(f(c.length-1),r-u.bottom),n.lineTo(f(0),r-u.bottom),n.fill(),c.forEach((y,w)=>{const p=f(w),m=d(y.score);n.fillStyle="#1a1a1a",n.beginPath(),n.arc(p,m,4,0,Math.PI*2),n.fill(),n.strokeStyle="#60a5fa",n.lineWidth=2,n.beginPath(),n.arc(p,m,4,0,Math.PI*2),n.stroke()}),n.fillStyle="rgba(255, 255, 255, 0.3)",n.textAlign="center",c.length>0){const y=new Date(c[0].date).toLocaleDateString(void 0,{month:"numeric",day:"numeric"});n.fillText(y,u.left,r-10);const w=new Date(c[c.length-1].date).toLocaleDateString(void 0,{month:"numeric",day:"numeric"});n.fillText(w,s-u.right,r-10)}},[t]),o.jsx("canvas",{ref:e,className:"w-full h-48 bg-white/5 rounded-xl border border-white/10"})}function fx({onClose:t}){const[e,a]=V.useState(()=>An.getRecords()),[n,l]=V.useState(()=>An.getStats()),i=()=>{a(An.getRecords()),l(An.getStats())},s=()=>{confirm("")&&(An.clearHistory(),i())};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"w-full max-w-2xl bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-white/5",children:[o.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-white",children:[o.jsx(a0,{className:"text-blue-400"}),""]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/60 hover:text-white",children:o.jsx(Fe,{size:20})})]}),o.jsxs("div",{className:"overflow-y-auto p-6 space-y-8 custom-scrollbar",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[o.jsx("div",{className:"text-white/40 text-xs font-bold uppercase mb-1",children:""}),o.jsxs("div",{className:"text-2xl font-bold text-white",children:[n.totalSessions," ",o.jsx("span",{className:"text-sm font-normal text-white/40",children:""})]})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[o.jsx("div",{className:"text-white/40 text-xs font-bold uppercase mb-1",children:""}),o.jsxs("div",{className:"text-2xl font-bold text-white",children:[(n.totalDuration/60).toFixed(1)," ",o.jsx("span",{className:"text-sm font-normal text-white/40",children:""})]})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[o.jsx("div",{className:"text-white/40 text-xs font-bold uppercase mb-1",children:""}),o.jsx("div",{className:zt("text-2xl font-bold",n.averageScore>=80?"text-green-400":"text-yellow-400"),children:n.averageScore.toFixed(1)})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[o.jsx("div",{className:"text-white/40 text-xs font-bold uppercase mb-1",children:""}),o.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center gap-1",children:[n.bestScore>0&&o.jsx(Rs,{size:16}),n.bestScore.toFixed(1)]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-white/70 font-bold mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"w-1 h-4 bg-blue-500 rounded-full"}),""]}),o.jsx(ux,{records:e})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"text-white/70 font-bold flex items-center gap-2",children:[o.jsx("span",{className:"w-1 h-4 bg-purple-500 rounded-full"}),""]}),e.length>0&&o.jsxs("button",{onClick:s,className:"text-xs text-red-400 hover:text-red-300 flex items-center gap-1 px-2 py-1 hover:bg-red-500/10 rounded transition-colors",children:[o.jsx(or,{size:12}),""]})]}),o.jsx("div",{className:"space-y-2",children:e.length===0?o.jsxs("div",{className:"text-center py-8 text-white/30 border border-dashed border-white/10 rounded-xl",children:["",o.jsx("br",{}),""]}):e.map(r=>o.jsxs("div",{className:"bg-white/5 hover:bg-white/10 transition-colors p-3 rounded-xl border border-white/5 flex items-center justify-between group",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:zt("w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",r.score>=90?"bg-purple-500/20 text-purple-300 border border-purple-500/40":r.score>=80?"bg-green-500/20 text-green-300 border border-green-500/40":"bg-yellow-500/20 text-yellow-300 border border-yellow-500/40"),children:Math.round(r.score)}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-bold text-white/90",children:r.songName}),o.jsxs("div",{className:"text-xs text-white/50 flex items-center gap-2",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ty,{size:10})," ",new Date(r.date).toLocaleString()]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[Math.floor(r.duration/60)," ",Math.floor(r.duration%60),""]})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-white/40 mb-0.5",children:""}),o.jsxs("div",{className:"text-sm font-mono text-white/80",children:[r.accuracy.toFixed(1),"%"]})]})]},r.id))})]})]})]})})}function dx({audioBlob:t,onClose:e}){const a=V.useRef(null),[n,l]=V.useState(!1),[i,s]=V.useState(0),[r,c]=V.useState(0),u=V.useRef(null),[h,g]=V.useState(new Array(30).fill(20));V.useEffect(()=>{if(!n)return;const m=setInterval(()=>{g(Array.from({length:30},()=>Math.random()*80+10))},50);return()=>clearInterval(m)},[n]),V.useEffect(()=>{const m=URL.createObjectURL(t);return u.current=m,a.current&&(a.current.src=m),()=>{URL.revokeObjectURL(m),u.current=null}},[t]);const f=()=>{a.current&&(n?a.current.pause():a.current.play(),l(!n))},d=()=>{a.current&&s(a.current.currentTime)},v=()=>{a.current&&c(a.current.duration)},y=m=>{const b=parseFloat(m.target.value);a.current&&(a.current.currentTime=b,s(b))},w=()=>{if(!u.current)return;const m=document.createElement("a");m.href=u.current,m.download=`ontei-recording-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.webm`,m.click()},p=m=>{if(!isFinite(m))return"0:00";const b=Math.floor(m/60),S=Math.floor(m%60);return`${b}:${S.toString().padStart(2,"0")}`};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"w-full max-w-md bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl p-6 flex flex-col gap-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-6 bg-red-500 rounded-full animate-pulse"}),""]}),o.jsx("button",{onClick:e,className:"text-white/40 hover:text-white transition-colors",children:o.jsx(Fe,{size:20})})]}),o.jsx("audio",{ref:a,onTimeUpdate:d,onLoadedMetadata:v,onEnded:()=>l(!1)}),o.jsx("div",{className:"h-24 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center relative overflow-hidden group",children:o.jsx("div",{className:"flex items-center gap-1 h-full w-full justify-center px-4",children:Array.from({length:30}).map((m,b)=>o.jsx("div",{className:zt("w-1 bg-white/20 rounded-full transition-all duration-100",n?"animate-pulse":""),style:{height:`${n?h[b]:20}%`,transition:"height 0.05s ease"}},b))})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-xs text-white/50 font-mono",children:[o.jsx("span",{children:p(i)}),o.jsx("span",{children:p(r)})]}),o.jsx("input",{type:"range",min:"0",max:r||100,value:i,onChange:y,className:"w-full h-1 bg-white/10 rounded-full appearance-none cursor-pointer outline-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-red-500"})]}),o.jsxs("div",{className:"flex items-center justify-center gap-6",children:[o.jsx("button",{onClick:e,className:"p-3 rounded-full bg-white/5 text-white/40 hover:bg-red-500/10 hover:text-red-400 transition-all border border-transparent hover:border-red-500/20",title:"",children:o.jsx(or,{size:20})}),o.jsx("button",{onClick:f,className:"w-16 h-16 rounded-full bg-red-500 flex items-center justify-center text-white shadow-lg shadow-red-500/20 hover:scale-105 hover:bg-red-400 transition-all",children:n?o.jsx(Ky,{size:28,fill:"currentColor"}):o.jsx(iu,{size:28,fill:"currentColor",className:"ml-1"})}),o.jsx("button",{onClick:w,className:"p-3 rounded-full bg-white/5 text-blue-300 hover:bg-blue-500/10 transition-all border border-blue-500/20",title:"",children:o.jsx(Uy,{size:20})})]})]})})}function hx({open:t,onClose:e,onResetAll:a,onResetPitchOnly:n}){return t?o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[o.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[o.jsx(or,{className:"w-5 h-5 text-red-400"}),""]}),o.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors text-white/50 hover:text-white",children:o.jsx(Fe,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("p",{className:"text-white/60 text-sm mb-4",children:""}),o.jsx("button",{onClick:()=>{a(),e()},className:zt("w-full p-4 rounded-xl text-left transition-all","bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 hover:border-red-500/40","group"),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center",children:o.jsx(Hy,{className:"w-5 h-5 text-red-400"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:""}),o.jsx("div",{className:"text-white/50 text-sm",children:""})]})]})}),o.jsx("button",{onClick:()=>{n(),e()},className:zt("w-full p-4 rounded-xl text-left transition-all","bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 hover:border-emerald-500/40","group"),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center",children:o.jsx(n0,{className:"w-5 h-5 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:""}),o.jsx("div",{className:"text-white/50 text-sm",children:""})]})]})})]}),o.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-800/30",children:o.jsx("button",{onClick:e,className:"w-full py-2.5 rounded-lg bg-white/5 hover:bg-white/10 text-white/70 hover:text-white transition-all text-sm font-medium",children:""})})]})}):null}let ns=[],eo=[];const mx=()=>{ns.forEach(t=>t([...eo]))},gx={success:Ay,error:Cy,warning:jy,info:Yy},px={success:"bg-emerald-500/20 border-emerald-500/40 text-emerald-300",error:"bg-red-500/20 border-red-500/40 text-red-300",warning:"bg-yellow-500/20 border-yellow-500/40 text-yellow-300",info:"bg-blue-500/20 border-blue-500/40 text-blue-300"};function bx(){const[t,e]=V.useState([]);V.useEffect(()=>{const n=l=>e(l);return ns.push(n),()=>{ns=ns.filter(l=>l!==n)}},[]);const a=V.useCallback(n=>{eo=eo.filter(l=>l.id!==n),mx()},[]);return t.length===0?null:o.jsx("div",{className:"fixed top-16 right-4 z-[300] flex flex-col gap-2 max-w-sm",children:t.map(n=>{const l=gx[n.type];return o.jsxs("div",{className:zt("flex items-center gap-3 px-4 py-3 rounded-xl border backdrop-blur-md shadow-lg","animate-in slide-in-from-right duration-300",px[n.type]),children:[o.jsx(l,{className:"w-5 h-5 shrink-0"}),o.jsx("span",{className:"text-sm font-medium flex-1",children:n.message}),o.jsx("button",{onClick:()=>a(n.id),className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:o.jsx(Fe,{className:"w-4 h-4"})})]},n.id)})})}function yx(){const[t,e]=V.useState({currentPitch:0,targetPitch:0,cents:0,isActive:!1});if(V.useEffect(()=>{const c=setInterval(()=>{const u=k.state,h=u.currentMicPitch||0,g=u.currentMicConf||0;let f=0;const d=u.playbackPosition+u.timelineOffsetSec,v=u.midiGhostNotes.find(w=>d>=w.time&&d<=w.time+w.duration);if(v){const w=u.guideOctaveOffset*12;f=440*Math.pow(2,(v.midi+w-69)/12)}let y=0;h>0&&f>0&&(y=Math.round(1200*Math.log2(h/f))),e({currentPitch:h,targetPitch:f,cents:y,isActive:u.isPlaying&&g>.5&&h>0})},50);return()=>clearInterval(c)},[]),!t.isActive||t.targetPitch===0)return null;const a=Math.abs(t.cents),n=a<=20,l=a<=50,s=50+Math.max(-100,Math.min(100,t.cents))/100*50;return o.jsx("div",{className:"absolute top-16 left-1/2 -translate-x-1/2 z-50 pointer-events-none",children:o.jsxs("div",{className:"bg-black/70 backdrop-blur-md rounded-2xl px-6 py-3 border border-white/10 shadow-2xl",children:[o.jsxs("div",{className:"w-48 h-3 bg-white/10 rounded-full relative overflow-hidden mb-2",children:[o.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-white/30 -translate-x-1/2"}),o.jsx("div",{className:"absolute left-[40%] right-[40%] top-0 bottom-0 bg-emerald-500/20"}),o.jsx("div",{className:zt("absolute top-0 bottom-0 w-2 rounded-full transition-all duration-75 -translate-x-1/2",n?"bg-emerald-400 shadow-lg shadow-emerald-400/50":l?"bg-yellow-400 shadow-lg shadow-yellow-400/50":"bg-red-400 shadow-lg shadow-red-400/50"),style:{left:`${s}%`}})]}),o.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[o.jsx("span",{children:""}),o.jsxs("span",{className:zt("font-mono font-bold text-sm",n?"text-emerald-400":l?"text-yellow-400":"text-red-400"),children:[t.cents>0?"+":"",t.cents,""]}),o.jsx("span",{children:""})]}),o.jsx("div",{className:zt("text-center text-xs font-medium mt-1",n?"text-emerald-400":l?"text-yellow-400":"text-red-400"),children:n?" Perfect!":l?t.cents>0?"":"":t.cents>0?"":""})]})})}function vx(){const[t]=V.useState(()=>k),[e,a]=V.useState(!1),[n,l]=V.useState(!1),[i,s]=V.useState(!1),[r,c]=V.useState(!1),[u,h]=V.useState(!1),[g,f]=V.useState(null),[d,v]=V.useState(k.state);return V.useEffect(()=>{k.initFromStorage()},[]),V.useEffect(()=>t.subscribe(()=>{v({...t.state})}),[t]),o.jsxs("div",{className:"w-screen h-[100dvh] bg-[#1a1a1a] text-white overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"h-12 border-b border-white/10 flex items-center px-2 md:px-4 bg-white/5 backdrop-blur-sm z-10 overflow-x-auto no-scrollbar gap-2",children:[o.jsxs("h1",{className:"font-bold text-base md:text-lg tracking-tight bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent truncate max-w-[120px] md:max-w-none",children:["Ontei ",o.jsx("span",{className:"hidden md:inline text-xs text-white/40 font-normal ml-2",children:"Legacy Refactor"})]}),o.jsxs("div",{id:"top-bar-import-controls",className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>{var y;return(y=document.getElementById("hidden-import-guide"))==null?void 0:y.click()},className:"h-8 w-24 rounded-full bg-blue-500/20 text-blue-300 text-xs hover:bg-blue-500/30 transition-all border border-blue-500/30 flex items-center justify-center gap-1.5",title:"(MIDI/)",children:[o.jsx("span",{className:"text-lg md:text-base",children:""})," ",o.jsx("span",{className:"hidden md:inline",children:""})]}),o.jsx("input",{type:"file",accept:".mid,.midi,.mp3,.wav,.ogg,.m4a",onChange:y=>{var p;const w=(p=y.target.files)==null?void 0:p[0];w&&(w.name.endsWith(".mid")||w.name.endsWith(".midi")?t.loadMidiFile(w):t.loadAudioFile(w))},className:"hidden",id:"hidden-import-guide"}),o.jsxs("button",{onClick:()=>{var y;return(y=document.getElementById("hidden-import-audio"))==null?void 0:y.click()},className:"h-8 w-24 rounded-full bg-purple-500/20 text-purple-300 text-xs hover:bg-purple-500/30 transition-all border border-purple-500/30 flex items-center justify-center gap-1.5",title:"(MP3/WAV)",children:[o.jsx("span",{className:"text-lg md:text-base",children:""})," ",o.jsx("span",{className:"hidden md:inline",children:""})]}),o.jsx("input",{type:"file",accept:".mp3,.wav,.ogg,.m4a",onChange:y=>{var w;return((w=y.target.files)==null?void 0:w[0])&&t.importBackingFile(y.target.files[0])},className:"hidden",id:"hidden-import-audio"}),o.jsxs("button",{onClick:()=>{const y=k.exportSession(),w=new Blob([y],{type:"application/json"}),p=URL.createObjectURL(w),m=document.createElement("a");m.href=p,m.download=`ontei-session-${new Date().toISOString().slice(0,10)}.json`,m.click(),URL.revokeObjectURL(p)},className:"h-8 w-24 rounded-full bg-green-500/20 text-green-300 text-xs hover:bg-green-500/30 transition-all border border-green-500/30 flex items-center justify-center gap-1.5 ml-2",title:"",children:[o.jsx("span",{className:"hidden md:inline",children:" SAVE"}),o.jsx("span",{className:"md:hidden",children:""})]}),o.jsxs("button",{onClick:()=>{var y;return(y=document.getElementById("hidden-import-json"))==null?void 0:y.click()},className:"h-8 w-24 rounded-full bg-white/5 text-white/70 text-xs hover:bg-white/10 transition-all border border-white/10 flex items-center justify-center gap-1.5 ml-2",title:"",children:[o.jsx("span",{className:"text-lg md:text-base",children:""})," ",o.jsx("span",{className:"hidden md:inline",children:"LOAD"})]}),o.jsx("input",{type:"file",accept:".json",onChange:y=>{var w;return((w=y.target.files)==null?void 0:w[0])&&t.importSession(y.target.files[0])},className:"hidden",id:"hidden-import-json"}),o.jsxs("button",{onClick:()=>d.scoreResult&&d.scoreResult.totalScore>0&&s(!0),disabled:!d.scoreResult||d.scoreResult.totalScore<=0,className:`h-8 w-28 rounded-full text-xs transition-all border flex items-center justify-center gap-1.5 ml-4 ${d.scoreResult&&d.scoreResult.totalScore>0?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30 hover:bg-yellow-500/30 cursor-pointer":"bg-gray-800/50 text-gray-500 border-gray-700/50 cursor-not-allowed opacity-70"}`,title:d.scoreResult&&d.scoreResult.totalScore>0?"":"",children:[o.jsx(Rs,{className:`w-3 h-3 ${d.scoreResult&&d.scoreResult.totalScore>0?"text-yellow-300":"text-gray-500"}`}),o.jsx("span",{className:"hidden md:inline",children:""})]})]}),o.jsx("div",{className:"flex items-center gap-2 bg-black/20 rounded-full px-3 py-1 border border-white/10 shrink-0",children:o.jsxs("span",{className:"text-xs text-white/60 font-medium",children:["BPM: ",d.bpm]})}),o.jsx("button",{onClick:()=>h(!0),className:"h-8 w-8 rounded-full bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all border border-red-500/20 flex items-center justify-center shrink-0 ml-auto",title:"",children:o.jsx(or,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex-1 relative min-h-0",children:[o.jsx(by,{}),o.jsx(yx,{}),e&&o.jsx(lx,{onClose:()=>a(!1)}),n&&o.jsx(cx,{audioEngine:t,isPracticing:d.isPracticing,onClose:()=>{t.stopPractice(),l(!1)}}),r&&o.jsx(fx,{onClose:()=>c(!1)}),u&&o.jsx(hx,{open:u,onClose:()=>h(!1),onResetAll:()=>t.resetSession("all"),onResetPitchOnly:()=>t.resetSession("pitchOnly")}),g&&o.jsx(dx,{audioBlob:g,onClose:()=>f(null)}),i&&o.jsx(Ff,{result:d.scoreResult,onClose:()=>{s(!1)}}),d.loadingProgress!==null&&o.jsxs("div",{className:"absolute inset-0 z-[200] bg-black/80 backdrop-blur-md flex flex-col items-center justify-center gap-4 animate-in fade-in duration-300",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-blue-500 rounded-full animate-spin"}),o.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:"Analyzing Audio..."}),o.jsxs("div",{className:"text-white/60 font-mono text-sm",children:[Math.round(d.loadingProgress),"%"]}),o.jsx("div",{className:"w-64 h-1.5 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500 transition-all duration-100 ease-out",style:{width:`${d.loadingProgress}%`}})})]}),i&&d.scoreResult&&o.jsx(Ff,{result:d.scoreResult,onClose:()=>s(!1)}),o.jsx(ax,{onOpenSettings:()=>a(!0),onOpenPractice:()=>{n||d.isPracticing?(t.stopPractice(),l(!1)):l(!0)},onOpenHistory:()=>c(!0),onRecordingComplete:y=>f(y)})]}),o.jsx(bx,{})]})}vb.createRoot(document.getElementById("root")).render(o.jsx(V.StrictMode,{children:o.jsx(vx,{})}));window.addEventListener("error",t=>{const e=document.getElementById("root");e&&e.innerHTML===""&&(e.innerHTML=`<div style="padding: 20px; color: #f87171; background: #222; height: 100vh;">
            <h1>Startup Error</h1>
            <pre>${t.message}</pre>
            <p>Check console for more details.</p>
        </div>`)});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});
