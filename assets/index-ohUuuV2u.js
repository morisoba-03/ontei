var M0=Object.defineProperty;var j0=(t,e,a)=>e in t?M0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var V=(t,e,a)=>j0(t,typeof e!="symbol"?e+"":e,a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=a(l);fetch(l.href,i)}})();var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function A0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var a=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var l=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(a,n,l.get?l:{enumerable:!0,get:function(){return t[n]}})}),a}var Wf={exports:{}},Vs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0=Symbol.for("react.transitional.element"),_0=Symbol.for("react.fragment");function $f(t,e,a){var n=null;if(a!==void 0&&(n=""+a),e.key!==void 0&&(n=""+e.key),"key"in e){a={};for(var l in e)l!=="key"&&(a[l]=e[l])}else a=e;return e=a.ref,{$$typeof:z0,type:t,key:n,ref:e!==void 0?e:null,props:a}}Vs.Fragment=_0;Vs.jsx=$f;Vs.jsxs=$f;Wf.exports=Vs;var c=Wf.exports,td={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=Symbol.for("react.transitional.element"),C0=Symbol.for("react.portal"),E0=Symbol.for("react.fragment"),O0=Symbol.for("react.strict_mode"),D0=Symbol.for("react.profiler"),U0=Symbol.for("react.consumer"),R0=Symbol.for("react.context"),B0=Symbol.for("react.forward_ref"),H0=Symbol.for("react.suspense"),G0=Symbol.for("react.memo"),ed=Symbol.for("react.lazy"),q0=Symbol.for("react.activity"),du=Symbol.iterator;function V0(t){return t===null||typeof t!="object"?null:(t=du&&t[du]||t["@@iterator"],typeof t=="function"?t:null)}var ad={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nd=Object.assign,ld={};function sl(t,e,a){this.props=t,this.context=e,this.refs=ld,this.updater=a||ad}sl.prototype.isReactComponent={};sl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function id(){}id.prototype=sl.prototype;function ro(t,e,a){this.props=t,this.context=e,this.refs=ld,this.updater=a||ad}var co=ro.prototype=new id;co.constructor=ro;nd(co,sl.prototype);co.isPureReactComponent=!0;var hu=Array.isArray;function ic(){}var Dt={H:null,A:null,T:null,S:null},sd=Object.prototype.hasOwnProperty;function oo(t,e,a){var n=a.ref;return{$$typeof:so,type:t,key:e,ref:n!==void 0?n:null,props:a}}function Y0(t,e){return oo(t.type,e,t.props)}function uo(t){return typeof t=="object"&&t!==null&&t.$$typeof===so}function X0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return e[a]})}var mu=/\/+/g;function hr(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X0(""+t.key):e.toString(36)}function L0(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(ic,ic):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Mn(t,e,a,n,l){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case so:case C0:s=!0;break;case ed:return s=t._init,Mn(s(t._payload),e,a,n,l)}}if(s)return l=l(t),s=n===""?"."+hr(t,0):n,hu(l)?(a="",s!=null&&(a=s.replace(mu,"$&/")+"/"),Mn(l,e,a,"",function(u){return u})):l!=null&&(uo(l)&&(l=Y0(l,a+(l.key==null||t&&t.key===l.key?"":(""+l.key).replace(mu,"$&/")+"/")+s)),e.push(l)),1;s=0;var r=n===""?".":n+":";if(hu(t))for(var o=0;o<t.length;o++)n=t[o],i=r+hr(n,o),s+=Mn(n,e,a,i,l);else if(o=V0(t),typeof o=="function")for(t=o.call(t),o=0;!(n=t.next()).done;)n=n.value,i=r+hr(n,o++),s+=Mn(n,e,a,i,l);else if(i==="object"){if(typeof t.then=="function")return Mn(L0(t),e,a,n,l);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function vi(t,e,a){if(t==null)return t;var n=[],l=0;return Mn(t,n,"","",function(i){return e.call(a,i,l++)}),n}function Q0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Z0={map:vi,forEach:function(t,e,a){vi(t,function(){e.apply(this,arguments)},a)},count:function(t){var e=0;return vi(t,function(){e++}),e},toArray:function(t){return vi(t,function(e){return e})||[]},only:function(t){if(!uo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Activity=q0;it.Children=Z0;it.Component=sl;it.Fragment=E0;it.Profiler=D0;it.PureComponent=ro;it.StrictMode=O0;it.Suspense=H0;it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dt;it.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Dt.H.useMemoCache(t)}};it.cache=function(t){return function(){return t.apply(null,arguments)}};it.cacheSignal=function(){return null};it.cloneElement=function(t,e,a){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var n=nd({},t.props),l=t.key;if(e!=null)for(i in e.key!==void 0&&(l=""+e.key),e)!sd.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(n[i]=e[i]);var i=arguments.length-2;if(i===1)n.children=a;else if(1<i){for(var s=Array(i),r=0;r<i;r++)s[r]=arguments[r+2];n.children=s}return oo(t.type,l,n)};it.createContext=function(t){return t={$$typeof:R0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:U0,_context:t},t};it.createElement=function(t,e,a){var n,l={},i=null;if(e!=null)for(n in e.key!==void 0&&(i=""+e.key),e)sd.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(l[n]=e[n]);var s=arguments.length-2;if(s===1)l.children=a;else if(1<s){for(var r=Array(s),o=0;o<s;o++)r[o]=arguments[o+2];l.children=r}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)l[n]===void 0&&(l[n]=s[n]);return oo(t,i,l)};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:B0,render:t}};it.isValidElement=uo;it.lazy=function(t){return{$$typeof:ed,_payload:{_status:-1,_result:t},_init:Q0}};it.memo=function(t,e){return{$$typeof:G0,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=Dt.T,a={};Dt.T=a;try{var n=t(),l=Dt.S;l!==null&&l(a,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(ic,gu)}catch(i){gu(i)}finally{e!==null&&a.types!==null&&(e.types=a.types),Dt.T=e}};it.unstable_useCacheRefresh=function(){return Dt.H.useCacheRefresh()};it.use=function(t){return Dt.H.use(t)};it.useActionState=function(t,e,a){return Dt.H.useActionState(t,e,a)};it.useCallback=function(t,e){return Dt.H.useCallback(t,e)};it.useContext=function(t){return Dt.H.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t,e){return Dt.H.useDeferredValue(t,e)};it.useEffect=function(t,e){return Dt.H.useEffect(t,e)};it.useEffectEvent=function(t){return Dt.H.useEffectEvent(t)};it.useId=function(){return Dt.H.useId()};it.useImperativeHandle=function(t,e,a){return Dt.H.useImperativeHandle(t,e,a)};it.useInsertionEffect=function(t,e){return Dt.H.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return Dt.H.useLayoutEffect(t,e)};it.useMemo=function(t,e){return Dt.H.useMemo(t,e)};it.useOptimistic=function(t,e){return Dt.H.useOptimistic(t,e)};it.useReducer=function(t,e,a){return Dt.H.useReducer(t,e,a)};it.useRef=function(t){return Dt.H.useRef(t)};it.useState=function(t){return Dt.H.useState(t)};it.useSyncExternalStore=function(t,e,a){return Dt.H.useSyncExternalStore(t,e,a)};it.useTransition=function(){return Dt.H.useTransition()};it.version="19.2.4";td.exports=it;var G=td.exports,rd={exports:{}},Ys={},cd={exports:{}},od={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,D){var A=_.length;_.push(D);t:for(;0<A;){var Q=A-1>>>1,lt=_[Q];if(0<l(lt,D))_[Q]=D,_[A]=lt,A=Q;else break t}}function a(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var D=_[0],A=_.pop();if(A!==D){_[0]=A;t:for(var Q=0,lt=_.length,vt=lt>>>1;Q<vt;){var K=2*(Q+1)-1,R=_[K],Y=K+1,W=_[Y];if(0>l(R,A))Y<lt&&0>l(W,R)?(_[Q]=W,_[Y]=A,Q=Y):(_[Q]=R,_[K]=A,Q=K);else if(Y<lt&&0>l(W,A))_[Q]=W,_[Y]=A,Q=Y;else break t}}return D}function l(_,D){var A=_.sortIndex-D.sortIndex;return A!==0?A:_.id-D.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,r=s.now();t.unstable_now=function(){return s.now()-r}}var o=[],u=[],g=1,h=null,f=3,d=!1,y=!1,x=!1,w=!1,p=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function S(_){for(var D=a(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=_)n(u),D.sortIndex=D.expirationTime,e(o,D);else break;D=a(u)}}function T(_){if(x=!1,S(_),!y)if(a(o)!==null)y=!0,N||(N=!0,J());else{var D=a(u);D!==null&&et(T,D.startTime-_)}}var N=!1,M=-1,v=5,k=-1;function E(){return w?!0:!(t.unstable_now()-k<v)}function O(){if(w=!1,N){var _=t.unstable_now();k=_;var D=!0;try{t:{y=!1,x&&(x=!1,m(M),M=-1),d=!0;var A=f;try{e:{for(S(_),h=a(o);h!==null&&!(h.expirationTime>_&&E());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var lt=Q(h.expirationTime<=_);if(_=t.unstable_now(),typeof lt=="function"){h.callback=lt,S(_),D=!0;break e}h===a(o)&&n(o),S(_)}else n(o);h=a(o)}if(h!==null)D=!0;else{var vt=a(u);vt!==null&&et(T,vt.startTime-_),D=!1}}break t}finally{h=null,f=A,d=!1}D=void 0}}finally{D?J():N=!1}}}var J;if(typeof b=="function")J=function(){b(O)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,ft=at.port2;at.port1.onmessage=O,J=function(){ft.postMessage(null)}}else J=function(){p(O,0)};function et(_,D){M=p(function(){_(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(_){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var A=f;f=D;try{return _()}finally{f=A}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(_,D){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var A=f;f=_;try{return D()}finally{f=A}},t.unstable_scheduleCallback=function(_,D,A){var Q=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?Q+A:Q):A=Q,_){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=A+lt,_={id:g++,callback:D,priorityLevel:_,startTime:A,expirationTime:lt,sortIndex:-1},A>Q?(_.sortIndex=A,e(u,_),a(o)===null&&_===a(u)&&(x?(m(M),M=-1):x=!0,et(T,A-Q))):(_.sortIndex=lt,e(o,_),y||d||(y=!0,N||(N=!0,J()))),_},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(_){var D=f;return function(){var A=f;f=D;try{return _.apply(this,arguments)}finally{f=A}}}})(od);cd.exports=od;var F0=cd.exports,ud={exports:{}},ce={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=G;function fd(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ya(){}var re={d:{f:ya,r:function(){throw Error(fd(522))},D:ya,C:ya,L:ya,m:ya,X:ya,S:ya,M:ya},p:0,findDOMNode:null},J0=Symbol.for("react.portal");function I0(t,e,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J0,key:n==null?null:""+n,children:t,containerInfo:e,implementation:a}}var zl=K0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Xs(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}ce.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re;ce.createPortal=function(t,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(fd(299));return I0(t,e,null,a)};ce.flushSync=function(t){var e=zl.T,a=re.p;try{if(zl.T=null,re.p=2,t)return t()}finally{zl.T=e,re.p=a,re.d.f()}};ce.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,re.d.C(t,e))};ce.prefetchDNS=function(t){typeof t=="string"&&re.d.D(t)};ce.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var a=e.as,n=Xs(a,e.crossOrigin),l=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;a==="style"?re.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:n,integrity:l,fetchPriority:i}):a==="script"&&re.d.X(t,{crossOrigin:n,integrity:l,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};ce.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var a=Xs(e.as,e.crossOrigin);re.d.M(t,{crossOrigin:a,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&re.d.M(t)};ce.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var a=e.as,n=Xs(a,e.crossOrigin);re.d.L(t,a,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};ce.preloadModule=function(t,e){if(typeof t=="string")if(e){var a=Xs(e.as,e.crossOrigin);re.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:a,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else re.d.m(t)};ce.requestFormReset=function(t){re.d.r(t)};ce.unstable_batchedUpdates=function(t,e){return t(e)};ce.useFormState=function(t,e,a){return zl.H.useFormState(t,e,a)};ce.useFormStatus=function(){return zl.H.useHostTransitionStatus()};ce.version="19.2.4";function dd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dd)}catch(t){console.error(t)}}dd(),ud.exports=ce;var P0=ud.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=F0,hd=G,W0=P0;function C(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function md(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function si(t){var e=t,a=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(a=e.return),t=e.return;while(t)}return e.tag===3?a:null}function gd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pd(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pu(t){if(si(t)!==t)throw Error(C(188))}function $0(t){var e=t.alternate;if(!e){if(e=si(t),e===null)throw Error(C(188));return e!==t?null:t}for(var a=t,n=e;;){var l=a.return;if(l===null)break;var i=l.alternate;if(i===null){if(n=l.return,n!==null){a=n;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===a)return pu(l),t;if(i===n)return pu(l),e;i=i.sibling}throw Error(C(188))}if(a.return!==n.return)a=l,n=i;else{for(var s=!1,r=l.child;r;){if(r===a){s=!0,a=l,n=i;break}if(r===n){s=!0,n=l,a=i;break}r=r.sibling}if(!s){for(r=i.child;r;){if(r===a){s=!0,a=i,n=l;break}if(r===n){s=!0,n=i,a=l;break}r=r.sibling}if(!s)throw Error(C(189))}}if(a.alternate!==n)throw Error(C(190))}if(a.tag!==3)throw Error(C(188));return a.stateNode.current===a?t:e}function bd(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=bd(t),e!==null)return e;t=t.sibling}return null}var Ut=Object.assign,tg=Symbol.for("react.element"),Si=Symbol.for("react.transitional.element"),Nl=Symbol.for("react.portal"),_n=Symbol.for("react.fragment"),yd=Symbol.for("react.strict_mode"),sc=Symbol.for("react.profiler"),xd=Symbol.for("react.consumer"),sa=Symbol.for("react.context"),fo=Symbol.for("react.forward_ref"),rc=Symbol.for("react.suspense"),cc=Symbol.for("react.suspense_list"),ho=Symbol.for("react.memo"),Sa=Symbol.for("react.lazy"),oc=Symbol.for("react.activity"),eg=Symbol.for("react.memo_cache_sentinel"),bu=Symbol.iterator;function pl(t){return t===null||typeof t!="object"?null:(t=bu&&t[bu]||t["@@iterator"],typeof t=="function"?t:null)}var ag=Symbol.for("react.client.reference");function uc(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ag?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _n:return"Fragment";case sc:return"Profiler";case yd:return"StrictMode";case rc:return"Suspense";case cc:return"SuspenseList";case oc:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Nl:return"Portal";case sa:return t.displayName||"Context";case xd:return(t._context.displayName||"Context")+".Consumer";case fo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ho:return e=t.displayName||null,e!==null?e:uc(t.type)||"Memo";case Sa:e=t._payload,t=t._init;try{return uc(t(e))}catch{}}return null}var Ml=Array.isArray,tt=hd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt=W0.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,an={pending:!1,data:null,method:null,action:null},fc=[],Cn=-1;function Ke(t){return{current:t}}function $t(t){0>Cn||(t.current=fc[Cn],fc[Cn]=null,Cn--)}function Ct(t,e){Cn++,fc[Cn]=t.current,t.current=e}var Fe=Ke(null),Ql=Ke(null),Ea=Ke(null),ss=Ke(null);function rs(t,e){switch(Ct(Ea,e),Ct(Ql,t),Ct(Fe,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Nf(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Nf(e),t=Gm(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$t(Fe),Ct(Fe,t)}function Jn(){$t(Fe),$t(Ql),$t(Ea)}function dc(t){t.memoizedState!==null&&Ct(ss,t);var e=Fe.current,a=Gm(e,t.type);e!==a&&(Ct(Ql,t),Ct(Fe,a))}function cs(t){Ql.current===t&&($t(Fe),$t(Ql)),ss.current===t&&($t(ss),ai._currentValue=an)}var mr,yu;function Pa(t){if(mr===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);mr=e&&e[1]||"",yu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mr+t+yu}var gr=!1;function pr(t,e){if(!t||gr)return"";gr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(d){var f=d}Reflect.construct(t,[],h)}else{try{h.call()}catch(d){f=d}t.call(h.prototype)}}else{try{throw Error()}catch(d){f=d}(h=t())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(d){if(d&&f&&typeof d.stack=="string")return[d.stack,f.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),s=i[0],r=i[1];if(s&&r){var o=s.split(`
`),u=r.split(`
`);for(l=n=0;n<o.length&&!o[n].includes("DetermineComponentFrameRoot");)n++;for(;l<u.length&&!u[l].includes("DetermineComponentFrameRoot");)l++;if(n===o.length||l===u.length)for(n=o.length-1,l=u.length-1;1<=n&&0<=l&&o[n]!==u[l];)l--;for(;1<=n&&0<=l;n--,l--)if(o[n]!==u[l]){if(n!==1||l!==1)do if(n--,l--,0>l||o[n]!==u[l]){var g=`
`+o[n].replace(" at new "," at ");return t.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",t.displayName)),g}while(1<=n&&0<=l);break}}}finally{gr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Pa(a):""}function ng(t,e){switch(t.tag){case 26:case 27:case 5:return Pa(t.type);case 16:return Pa("Lazy");case 13:return t.child!==e&&e!==null?Pa("Suspense Fallback"):Pa("Suspense");case 19:return Pa("SuspenseList");case 0:case 15:return pr(t.type,!1);case 11:return pr(t.type.render,!1);case 1:return pr(t.type,!0);case 31:return Pa("Activity");default:return""}}function xu(t){try{var e="",a=null;do e+=ng(t,a),a=t,t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var hc=Object.prototype.hasOwnProperty,mo=Jt.unstable_scheduleCallback,br=Jt.unstable_cancelCallback,lg=Jt.unstable_shouldYield,ig=Jt.unstable_requestPaint,Te=Jt.unstable_now,sg=Jt.unstable_getCurrentPriorityLevel,vd=Jt.unstable_ImmediatePriority,Sd=Jt.unstable_UserBlockingPriority,os=Jt.unstable_NormalPriority,rg=Jt.unstable_LowPriority,wd=Jt.unstable_IdlePriority,cg=Jt.log,og=Jt.unstable_setDisableYieldValue,ri=null,Ne=null;function ka(t){if(typeof cg=="function"&&og(t),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(ri,t)}catch{}}var Me=Math.clz32?Math.clz32:dg,ug=Math.log,fg=Math.LN2;function dg(t){return t>>>=0,t===0?32:31-(ug(t)/fg|0)|0}var wi=256,Ti=262144,Ni=4194304;function Wa(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ls(t,e,a){var n=t.pendingLanes;if(n===0)return 0;var l=0,i=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var r=n&134217727;return r!==0?(n=r&~i,n!==0?l=Wa(n):(s&=r,s!==0?l=Wa(s):a||(a=r&~t,a!==0&&(l=Wa(a))))):(r=n&~i,r!==0?l=Wa(r):s!==0?l=Wa(s):a||(a=n&~t,a!==0&&(l=Wa(a)))),l===0?0:e!==0&&e!==l&&!(e&i)&&(i=l&-l,a=e&-e,i>=a||i===32&&(a&4194048)!==0)?e:l}function ci(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function hg(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Td(){var t=Ni;return Ni<<=1,!(Ni&62914560)&&(Ni=4194304),t}function yr(t){for(var e=[],a=0;31>a;a++)e.push(t);return e}function oi(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function mg(t,e,a,n,l,i){var s=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var r=t.entanglements,o=t.expirationTimes,u=t.hiddenUpdates;for(a=s&~a;0<a;){var g=31-Me(a),h=1<<g;r[g]=0,o[g]=-1;var f=u[g];if(f!==null)for(u[g]=null,g=0;g<f.length;g++){var d=f[g];d!==null&&(d.lane&=-536870913)}a&=~h}n!==0&&Nd(t,n,0),i!==0&&l===0&&t.tag!==0&&(t.suspendedLanes|=i&~(s&~e))}function Nd(t,e,a){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-Me(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|a&261930}function Md(t,e){var a=t.entangledLanes|=e;for(t=t.entanglements;a;){var n=31-Me(a),l=1<<n;l&e|t[n]&e&&(t[n]|=e),a&=~l}}function jd(t,e){var a=e&-e;return a=a&42?1:go(a),a&(t.suspendedLanes|e)?0:a}function go(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function po(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function kd(){var t=Tt.p;return t!==0?t:(t=window.event,t===void 0?32:Im(t.type))}function vu(t,e){var a=Tt.p;try{return Tt.p=t,e()}finally{Tt.p=a}}var Za=Math.random().toString(36).slice(2),ae="__reactFiber$"+Za,ge="__reactProps$"+Za,rl="__reactContainer$"+Za,mc="__reactEvents$"+Za,gg="__reactListeners$"+Za,pg="__reactHandles$"+Za,Su="__reactResources$"+Za,ui="__reactMarker$"+Za;function bo(t){delete t[ae],delete t[ge],delete t[mc],delete t[gg],delete t[pg]}function En(t){var e=t[ae];if(e)return e;for(var a=t.parentNode;a;){if(e=a[rl]||a[ae]){if(a=e.alternate,e.child!==null||a!==null&&a.child!==null)for(t=zf(t);t!==null;){if(a=t[ae])return a;t=zf(t)}return e}t=a,a=t.parentNode}return null}function cl(t){if(t=t[ae]||t[rl]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function jl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(C(33))}function Yn(t){var e=t[Su];return e||(e=t[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Wt(t){t[ui]=!0}var Ad=new Set,zd={};function mn(t,e){In(t,e),In(t+"Capture",e)}function In(t,e){for(zd[t]=e,t=0;t<e.length;t++)Ad.add(e[t])}var bg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wu={},Tu={};function yg(t){return hc.call(Tu,t)?!0:hc.call(wu,t)?!1:bg.test(t)?Tu[t]=!0:(wu[t]=!0,!1)}function Li(t,e,a){if(yg(e))if(a===null)t.removeAttribute(e);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+a)}}function Mi(t,e,a){if(a===null)t.removeAttribute(e);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+a)}}function We(t,e,a,n){if(n===null)t.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(e,a,""+n)}}function _e(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _d(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xg(t,e,a){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(s){a=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(s){a=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gc(t){if(!t._valueTracker){var e=_d(t)?"checked":"value";t._valueTracker=xg(t,e,""+t[e])}}function Cd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var a=e.getValue(),n="";return t&&(n=_d(t)?t.checked?"true":"false":t.value),t=n,t!==a?(e.setValue(t),!0):!1}function us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var vg=/[\n"\\]/g;function Oe(t){return t.replace(vg,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function pc(t,e,a,n,l,i,s,r){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+_e(e)):t.value!==""+_e(e)&&(t.value=""+_e(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?bc(t,s,_e(e)):a!=null?bc(t,s,_e(a)):n!=null&&t.removeAttribute("value"),l==null&&i!=null&&(t.defaultChecked=!!i),l!=null&&(t.checked=l&&typeof l!="function"&&typeof l!="symbol"),r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.name=""+_e(r):t.removeAttribute("name")}function Ed(t,e,a,n,l,i,s,r){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||a!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){gc(t);return}a=a!=null?""+_e(a):"",e=e!=null?""+_e(e):a,r||e===t.value||(t.value=e),t.defaultValue=e}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,t.checked=r?t.checked:!!n,t.defaultChecked=!!n,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s),gc(t)}function bc(t,e,a){e==="number"&&us(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Xn(t,e,a,n){if(t=t.options,e){e={};for(var l=0;l<a.length;l++)e["$"+a[l]]=!0;for(a=0;a<t.length;a++)l=e.hasOwnProperty("$"+t[a].value),t[a].selected!==l&&(t[a].selected=l),l&&n&&(t[a].defaultSelected=!0)}else{for(a=""+_e(a),e=null,l=0;l<t.length;l++){if(t[l].value===a){t[l].selected=!0,n&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function Od(t,e,a){if(e!=null&&(e=""+_e(e),e!==t.value&&(t.value=e),a==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=a!=null?""+_e(a):""}function Dd(t,e,a,n){if(e==null){if(n!=null){if(a!=null)throw Error(C(92));if(Ml(n)){if(1<n.length)throw Error(C(93));n=n[0]}a=n}a==null&&(a=""),e=a}a=_e(e),t.defaultValue=a,n=t.textContent,n===a&&n!==""&&n!==null&&(t.value=n),gc(t)}function Pn(t,e){if(e){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=e;return}}t.textContent=e}var Sg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nu(t,e,a){var n=e.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":n?t.setProperty(e,a):typeof a!="number"||a===0||Sg.has(e)?e==="float"?t.cssFloat=a:t[e]=(""+a).trim():t[e]=a+"px"}function Ud(t,e,a){if(e!=null&&typeof e!="object")throw Error(C(62));if(t=t.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="");for(var l in e)n=e[l],e.hasOwnProperty(l)&&a[l]!==n&&Nu(t,l,n)}else for(var i in e)e.hasOwnProperty(i)&&Nu(t,i,e[i])}function yo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qi(t){return Tg.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ra(){}var yc=null;function xo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var On=null,Ln=null;function Mu(t){var e=cl(t);if(e&&(t=e.stateNode)){var a=t[ge]||null;t:switch(t=e.stateNode,e.type){case"input":if(pc(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),e=a.name,a.type==="radio"&&e!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Oe(""+e)+'"][type="radio"]'),e=0;e<a.length;e++){var n=a[e];if(n!==t&&n.form===t.form){var l=n[ge]||null;if(!l)throw Error(C(90));pc(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(e=0;e<a.length;e++)n=a[e],n.form===t.form&&Cd(n)}break t;case"textarea":Od(t,a.value,a.defaultValue);break t;case"select":e=a.value,e!=null&&Xn(t,!!a.multiple,e,!1)}}}var xr=!1;function Rd(t,e,a){if(xr)return t(e,a);xr=!0;try{var n=t(e);return n}finally{if(xr=!1,(On!==null||Ln!==null)&&(ar(),On&&(e=On,t=Ln,Ln=On=null,Mu(e),t)))for(e=0;e<t.length;e++)Mu(t[e])}}function Zl(t,e){var a=t.stateNode;if(a===null)return null;var n=a[ge]||null;if(n===null)return null;a=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break t;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(C(231,e,typeof a));return a}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xc=!1;if(da)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){xc=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{xc=!1}var Aa=null,vo=null,Zi=null;function Bd(){if(Zi)return Zi;var t,e=vo,a=e.length,n,l="value"in Aa?Aa.value:Aa.textContent,i=l.length;for(t=0;t<a&&e[t]===l[t];t++);var s=a-t;for(n=1;n<=s&&e[a-n]===l[i-n];n++);return Zi=l.slice(t,1<n?1-n:void 0)}function Fi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ji(){return!0}function ju(){return!1}function pe(t){function e(a,n,l,i,s){this._reactName=a,this._targetInst=l,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var r in t)t.hasOwnProperty(r)&&(a=t[r],this[r]=a?a(i):i[r]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ji:ju,this.isPropagationStopped=ju,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),e}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=pe(gn),fi=Ut({},gn,{view:0,detail:0}),Ng=pe(fi),vr,Sr,yl,Zs=Ut({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:So,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(vr=t.screenX-yl.screenX,Sr=t.screenY-yl.screenY):Sr=vr=0,yl=t),vr)},movementY:function(t){return"movementY"in t?t.movementY:Sr}}),ku=pe(Zs),Mg=Ut({},Zs,{dataTransfer:0}),jg=pe(Mg),kg=Ut({},fi,{relatedTarget:0}),wr=pe(kg),Ag=Ut({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),zg=pe(Ag),_g=Ut({},gn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cg=pe(_g),Eg=Ut({},gn,{data:0}),Au=pe(Eg),Og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ug={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ug[t])?!!e[t]:!1}function So(){return Rg}var Bg=Ut({},fi,{key:function(t){if(t.key){var e=Og[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:So,charCode:function(t){return t.type==="keypress"?Fi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hg=pe(Bg),Gg=Ut({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=pe(Gg),qg=Ut({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:So}),Vg=pe(qg),Yg=Ut({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xg=pe(Yg),Lg=Ut({},Zs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qg=pe(Lg),Zg=Ut({},gn,{newState:0,oldState:0}),Fg=pe(Zg),Kg=[9,13,27,32],wo=da&&"CompositionEvent"in window,_l=null;da&&"documentMode"in document&&(_l=document.documentMode);var Jg=da&&"TextEvent"in window&&!_l,Hd=da&&(!wo||_l&&8<_l&&11>=_l),_u=" ",Cu=!1;function Gd(t,e){switch(t){case"keyup":return Kg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dn=!1;function Ig(t,e){switch(t){case"compositionend":return qd(e);case"keypress":return e.which!==32?null:(Cu=!0,_u);case"textInput":return t=e.data,t===_u&&Cu?null:t;default:return null}}function Pg(t,e){if(Dn)return t==="compositionend"||!wo&&Gd(t,e)?(t=Bd(),Zi=vo=Aa=null,Dn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hd&&e.locale!=="ko"?null:e.data;default:return null}}var Wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wg[t.type]:e==="textarea"}function Vd(t,e,a,n){On?Ln?Ln.push(n):Ln=[n]:On=n,e=As(e,"onChange"),0<e.length&&(a=new Qs("onChange","change",null,a,n),t.push({event:a,listeners:e}))}var Cl=null,Fl=null;function $g(t){Rm(t,0)}function Fs(t){var e=jl(t);if(Cd(e))return t}function Ou(t,e){if(t==="change")return e}var Yd=!1;if(da){var Tr;if(da){var Nr="oninput"in document;if(!Nr){var Du=document.createElement("div");Du.setAttribute("oninput","return;"),Nr=typeof Du.oninput=="function"}Tr=Nr}else Tr=!1;Yd=Tr&&(!document.documentMode||9<document.documentMode)}function Uu(){Cl&&(Cl.detachEvent("onpropertychange",Xd),Fl=Cl=null)}function Xd(t){if(t.propertyName==="value"&&Fs(Fl)){var e=[];Vd(e,Fl,t,xo(t)),Rd($g,e)}}function tp(t,e,a){t==="focusin"?(Uu(),Cl=e,Fl=a,Cl.attachEvent("onpropertychange",Xd)):t==="focusout"&&Uu()}function ep(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fs(Fl)}function ap(t,e){if(t==="click")return Fs(e)}function np(t,e){if(t==="input"||t==="change")return Fs(e)}function lp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ke=typeof Object.is=="function"?Object.is:lp;function Kl(t,e){if(ke(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var a=Object.keys(t),n=Object.keys(e);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var l=a[n];if(!hc.call(e,l)||!ke(t[l],e[l]))return!1}return!0}function Ru(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bu(t,e){var a=Ru(t);t=0;for(var n;a;){if(a.nodeType===3){if(n=t+a.textContent.length,t<=e&&n>=e)return{node:a,offset:e-t};t=n}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ru(a)}}function Ld(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ld(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=us(t.document);e instanceof t.HTMLIFrameElement;){try{var a=typeof e.contentWindow.location.href=="string"}catch{a=!1}if(a)t=e.contentWindow;else break;e=us(t.document)}return e}function To(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var ip=da&&"documentMode"in document&&11>=document.documentMode,Un=null,vc=null,El=null,Sc=!1;function Hu(t,e,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sc||Un==null||Un!==us(n)||(n=Un,"selectionStart"in n&&To(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),El&&Kl(El,n)||(El=n,n=As(vc,"onSelect"),0<n.length&&(e=new Qs("onSelect","select",null,e,a),t.push({event:e,listeners:n}),e.target=Un)))}function Ka(t,e){var a={};return a[t.toLowerCase()]=e.toLowerCase(),a["Webkit"+t]="webkit"+e,a["Moz"+t]="moz"+e,a}var Rn={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},Mr={},Zd={};da&&(Zd=document.createElement("div").style,"AnimationEvent"in window||(delete Rn.animationend.animation,delete Rn.animationiteration.animation,delete Rn.animationstart.animation),"TransitionEvent"in window||delete Rn.transitionend.transition);function pn(t){if(Mr[t])return Mr[t];if(!Rn[t])return t;var e=Rn[t],a;for(a in e)if(e.hasOwnProperty(a)&&a in Zd)return Mr[t]=e[a];return t}var Fd=pn("animationend"),Kd=pn("animationiteration"),Jd=pn("animationstart"),sp=pn("transitionrun"),rp=pn("transitionstart"),cp=pn("transitioncancel"),Id=pn("transitionend"),Pd=new Map,wc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wc.push("scrollEnd");function Xe(t,e){Pd.set(t,e),mn(e,[t])}var fs=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ze=[],Bn=0,No=0;function Ks(){for(var t=Bn,e=No=Bn=0;e<t;){var a=ze[e];ze[e++]=null;var n=ze[e];ze[e++]=null;var l=ze[e];ze[e++]=null;var i=ze[e];if(ze[e++]=null,n!==null&&l!==null){var s=n.pending;s===null?l.next=l:(l.next=s.next,s.next=l),n.pending=l}i!==0&&Wd(a,l,i)}}function Js(t,e,a,n){ze[Bn++]=t,ze[Bn++]=e,ze[Bn++]=a,ze[Bn++]=n,No|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function Mo(t,e,a,n){return Js(t,e,a,n),ds(t)}function bn(t,e){return Js(t,null,null,e),ds(t)}function Wd(t,e,a){t.lanes|=a;var n=t.alternate;n!==null&&(n.lanes|=a);for(var l=!1,i=t.return;i!==null;)i.childLanes|=a,n=i.alternate,n!==null&&(n.childLanes|=a),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(l=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,l&&e!==null&&(l=31-Me(a),t=i.hiddenUpdates,n=t[l],n===null?t[l]=[e]:n.push(e),e.lane=a|536870912),i):null}function ds(t){if(50<Vl)throw Vl=0,Xc=null,Error(C(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Hn={};function op(t,e,a,n){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Se(t,e,a,n){return new op(t,e,a,n)}function jo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oa(t,e){var a=t.alternate;return a===null?(a=Se(t.tag,e,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=e,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,e=t.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function $d(t,e){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,e=a.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Ki(t,e,a,n,l,i){var s=0;if(n=t,typeof t=="function")jo(t)&&(s=1);else if(typeof t=="string")s=mb(t,a,Fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case oc:return t=Se(31,a,e,l),t.elementType=oc,t.lanes=i,t;case _n:return nn(a.children,l,i,e);case yd:s=8,l|=24;break;case sc:return t=Se(12,a,e,l|2),t.elementType=sc,t.lanes=i,t;case rc:return t=Se(13,a,e,l),t.elementType=rc,t.lanes=i,t;case cc:return t=Se(19,a,e,l),t.elementType=cc,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sa:s=10;break t;case xd:s=9;break t;case fo:s=11;break t;case ho:s=14;break t;case Sa:s=16,n=null;break t}s=29,a=Error(C(130,t===null?"null":typeof t,"")),n=null}return e=Se(s,a,e,l),e.elementType=t,e.type=n,e.lanes=i,e}function nn(t,e,a,n){return t=Se(7,t,n,e),t.lanes=a,t}function jr(t,e,a){return t=Se(6,t,null,e),t.lanes=a,t}function th(t){var e=Se(18,null,null,0);return e.stateNode=t,e}function kr(t,e,a){return e=Se(4,t.children!==null?t.children:[],t.key,e),e.lanes=a,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Gu=new WeakMap;function De(t,e){if(typeof t=="object"&&t!==null){var a=Gu.get(t);return a!==void 0?a:(e={value:t,source:e,stack:xu(e)},Gu.set(t,e),e)}return{value:t,source:e,stack:xu(e)}}var Gn=[],qn=0,hs=null,Jl=0,Ce=[],Ee=0,Ya=null,Le=1,Qe="";function la(t,e){Gn[qn++]=Jl,Gn[qn++]=hs,hs=t,Jl=e}function eh(t,e,a){Ce[Ee++]=Le,Ce[Ee++]=Qe,Ce[Ee++]=Ya,Ya=t;var n=Le;t=Qe;var l=32-Me(n)-1;n&=~(1<<l),a+=1;var i=32-Me(e)+l;if(30<i){var s=l-l%5;i=(n&(1<<s)-1).toString(32),n>>=s,l-=s,Le=1<<32-Me(e)+l|a<<l|n,Qe=i+t}else Le=1<<i|a<<l|n,Qe=t}function ko(t){t.return!==null&&(la(t,1),eh(t,1,0))}function Ao(t){for(;t===hs;)hs=Gn[--qn],Gn[qn]=null,Jl=Gn[--qn],Gn[qn]=null;for(;t===Ya;)Ya=Ce[--Ee],Ce[Ee]=null,Qe=Ce[--Ee],Ce[Ee]=null,Le=Ce[--Ee],Ce[Ee]=null}function ah(t,e){Ce[Ee++]=Le,Ce[Ee++]=Qe,Ce[Ee++]=Ya,Le=e.id,Qe=e.overflow,Ya=t}var ne=null,Ot=null,bt=!1,Oa=null,Ue=!1,Tc=Error(C(519));function Xa(t){var e=Error(C(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(De(e,t)),Tc}function qu(t){var e=t.stateNode,a=t.type,n=t.memoizedProps;switch(e[ae]=t,e[ge]=n,a){case"dialog":dt("cancel",e),dt("close",e);break;case"iframe":case"object":case"embed":dt("load",e);break;case"video":case"audio":for(a=0;a<ti.length;a++)dt(ti[a],e);break;case"source":dt("error",e);break;case"img":case"image":case"link":dt("error",e),dt("load",e);break;case"details":dt("toggle",e);break;case"input":dt("invalid",e),Ed(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":dt("invalid",e);break;case"textarea":dt("invalid",e),Dd(e,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||e.textContent===""+a||n.suppressHydrationWarning===!0||Hm(e.textContent,a)?(n.popover!=null&&(dt("beforetoggle",e),dt("toggle",e)),n.onScroll!=null&&dt("scroll",e),n.onScrollEnd!=null&&dt("scrollend",e),n.onClick!=null&&(e.onclick=ra),e=!0):e=!1,e||Xa(t,!0)}function Vu(t){for(ne=t.return;ne;)switch(ne.tag){case 5:case 31:case 13:Ue=!1;return;case 27:case 3:Ue=!0;return;default:ne=ne.return}}function vn(t){if(t!==ne)return!1;if(!bt)return Vu(t),bt=!0,!1;var e=t.tag,a;if((a=e!==3&&e!==27)&&((a=e===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Kc(t.type,t.memoizedProps)),a=!a),a&&Ot&&Xa(t),Vu(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));Ot=Af(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));Ot=Af(t)}else e===27?(e=Ot,Fa(t.type)?(t=Wc,Wc=null,Ot=t):Ot=e):Ot=ne?Be(t.stateNode.nextSibling):null;return!0}function cn(){Ot=ne=null,bt=!1}function Ar(){var t=Oa;return t!==null&&(he===null?he=t:he.push.apply(he,t),Oa=null),t}function Il(t){Oa===null?Oa=[t]:Oa.push(t)}var Nc=Ke(null),yn=null,ca=null;function Ta(t,e,a){Ct(Nc,e._currentValue),e._currentValue=a}function ua(t){t._currentValue=Nc.current,$t(Nc)}function Mc(t,e,a){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===a)break;t=t.return}}function jc(t,e,a,n){var l=t.child;for(l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){var s=l.child;i=i.firstContext;t:for(;i!==null;){var r=i;i=l;for(var o=0;o<e.length;o++)if(r.context===e[o]){i.lanes|=a,r=i.alternate,r!==null&&(r.lanes|=a),Mc(i.return,a,t),n||(s=null);break t}i=r.next}}else if(l.tag===18){if(s=l.return,s===null)throw Error(C(341));s.lanes|=a,i=s.alternate,i!==null&&(i.lanes|=a),Mc(s,a,t),s=null}else s=l.child;if(s!==null)s.return=l;else for(s=l;s!==null;){if(s===t){s=null;break}if(l=s.sibling,l!==null){l.return=s.return,s=l;break}s=s.return}l=s}}function ol(t,e,a,n){t=null;for(var l=e,i=!1;l!==null;){if(!i){if(l.flags&524288)i=!0;else if(l.flags&262144)break}if(l.tag===10){var s=l.alternate;if(s===null)throw Error(C(387));if(s=s.memoizedProps,s!==null){var r=l.type;ke(l.pendingProps.value,s.value)||(t!==null?t.push(r):t=[r])}}else if(l===ss.current){if(s=l.alternate,s===null)throw Error(C(387));s.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(t!==null?t.push(ai):t=[ai])}l=l.return}t!==null&&jc(e,t,a,n),e.flags|=262144}function ms(t){for(t=t.firstContext;t!==null;){if(!ke(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function on(t){yn=t,ca=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function le(t){return nh(yn,t)}function ki(t,e){return yn===null&&on(t),nh(t,e)}function nh(t,e){var a=e._currentValue;if(e={context:e,memoizedValue:a,next:null},ca===null){if(t===null)throw Error(C(308));ca=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ca=ca.next=e;return a}var up=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(a,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(a){return a()})}},fp=Jt.unstable_scheduleCallback,dp=Jt.unstable_NormalPriority,Qt={$$typeof:sa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zo(){return{controller:new up,data:new Map,refCount:0}}function di(t){t.refCount--,t.refCount===0&&fp(dp,function(){t.controller.abort()})}var Ol=null,kc=0,Wn=0,Qn=null;function hp(t,e){if(Ol===null){var a=Ol=[];kc=0,Wn=tu(),Qn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return kc++,e.then(Yu,Yu),e}function Yu(){if(--kc===0&&Ol!==null){Qn!==null&&(Qn.status="fulfilled");var t=Ol;Ol=null,Wn=0,Qn=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function mp(t,e){var a=[],n={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var l=0;l<a.length;l++)(0,a[l])(e)},function(l){for(n.status="rejected",n.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),n}var Xu=tt.S;tt.S=function(t,e){bm=Te(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&hp(t,e),Xu!==null&&Xu(t,e)};var ln=Ke(null);function _o(){var t=ln.current;return t!==null?t:_t.pooledCache}function Ji(t,e){e===null?Ct(ln,ln.current):Ct(ln,e.pool)}function lh(){var t=_o();return t===null?null:{parent:Qt._currentValue,pool:t}}var ul=Error(C(460)),Co=Error(C(474)),Is=Error(C(542)),gs={then:function(){}};function Lu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ih(t,e,a){switch(a=t[a],a===void 0?t.push(e):a!==e&&(e.then(ra,ra),e=a),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Zu(t),t;default:if(typeof e.status=="string")e.then(ra,ra);else{if(t=_t,t!==null&&100<t.shellSuspendCounter)throw Error(C(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var l=e;l.status="fulfilled",l.value=n}},function(n){if(e.status==="pending"){var l=e;l.status="rejected",l.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Zu(t),t}throw sn=e,ul}}function $a(t){try{var e=t._init;return e(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(sn=a,ul):a}}var sn=null;function Qu(){if(sn===null)throw Error(C(459));var t=sn;return sn=null,t}function Zu(t){if(t===ul||t===Is)throw Error(C(483))}var Zn=null,Pl=0;function Ai(t){var e=Pl;return Pl+=1,Zn===null&&(Zn=[]),ih(Zn,t,e)}function xl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function zi(t,e){throw e.$$typeof===tg?Error(C(525)):(t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function sh(t){function e(p,m){if(t){var b=p.deletions;b===null?(p.deletions=[m],p.flags|=16):b.push(m)}}function a(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function n(p){for(var m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function l(p,m){return p=oa(p,m),p.index=0,p.sibling=null,p}function i(p,m,b){return p.index=b,t?(b=p.alternate,b!==null?(b=b.index,b<m?(p.flags|=67108866,m):b):(p.flags|=67108866,m)):(p.flags|=1048576,m)}function s(p){return t&&p.alternate===null&&(p.flags|=67108866),p}function r(p,m,b,S){return m===null||m.tag!==6?(m=jr(b,p.mode,S),m.return=p,m):(m=l(m,b),m.return=p,m)}function o(p,m,b,S){var T=b.type;return T===_n?g(p,m,b.props.children,S,b.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Sa&&$a(T)===m.type)?(m=l(m,b.props),xl(m,b),m.return=p,m):(m=Ki(b.type,b.key,b.props,null,p.mode,S),xl(m,b),m.return=p,m)}function u(p,m,b,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=kr(b,p.mode,S),m.return=p,m):(m=l(m,b.children||[]),m.return=p,m)}function g(p,m,b,S,T){return m===null||m.tag!==7?(m=nn(b,p.mode,S,T),m.return=p,m):(m=l(m,b),m.return=p,m)}function h(p,m,b){if(typeof m=="string"&&m!==""||typeof m=="number"||typeof m=="bigint")return m=jr(""+m,p.mode,b),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Si:return b=Ki(m.type,m.key,m.props,null,p.mode,b),xl(b,m),b.return=p,b;case Nl:return m=kr(m,p.mode,b),m.return=p,m;case Sa:return m=$a(m),h(p,m,b)}if(Ml(m)||pl(m))return m=nn(m,p.mode,b,null),m.return=p,m;if(typeof m.then=="function")return h(p,Ai(m),b);if(m.$$typeof===sa)return h(p,ki(p,m),b);zi(p,m)}return null}function f(p,m,b,S){var T=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return T!==null?null:r(p,m,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Si:return b.key===T?o(p,m,b,S):null;case Nl:return b.key===T?u(p,m,b,S):null;case Sa:return b=$a(b),f(p,m,b,S)}if(Ml(b)||pl(b))return T!==null?null:g(p,m,b,S,null);if(typeof b.then=="function")return f(p,m,Ai(b),S);if(b.$$typeof===sa)return f(p,m,ki(p,b),S);zi(p,b)}return null}function d(p,m,b,S,T){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return p=p.get(b)||null,r(m,p,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Si:return p=p.get(S.key===null?b:S.key)||null,o(m,p,S,T);case Nl:return p=p.get(S.key===null?b:S.key)||null,u(m,p,S,T);case Sa:return S=$a(S),d(p,m,b,S,T)}if(Ml(S)||pl(S))return p=p.get(b)||null,g(m,p,S,T,null);if(typeof S.then=="function")return d(p,m,b,Ai(S),T);if(S.$$typeof===sa)return d(p,m,b,ki(m,S),T);zi(m,S)}return null}function y(p,m,b,S){for(var T=null,N=null,M=m,v=m=0,k=null;M!==null&&v<b.length;v++){M.index>v?(k=M,M=null):k=M.sibling;var E=f(p,M,b[v],S);if(E===null){M===null&&(M=k);break}t&&M&&E.alternate===null&&e(p,M),m=i(E,m,v),N===null?T=E:N.sibling=E,N=E,M=k}if(v===b.length)return a(p,M),bt&&la(p,v),T;if(M===null){for(;v<b.length;v++)M=h(p,b[v],S),M!==null&&(m=i(M,m,v),N===null?T=M:N.sibling=M,N=M);return bt&&la(p,v),T}for(M=n(M);v<b.length;v++)k=d(M,p,v,b[v],S),k!==null&&(t&&k.alternate!==null&&M.delete(k.key===null?v:k.key),m=i(k,m,v),N===null?T=k:N.sibling=k,N=k);return t&&M.forEach(function(O){return e(p,O)}),bt&&la(p,v),T}function x(p,m,b,S){if(b==null)throw Error(C(151));for(var T=null,N=null,M=m,v=m=0,k=null,E=b.next();M!==null&&!E.done;v++,E=b.next()){M.index>v?(k=M,M=null):k=M.sibling;var O=f(p,M,E.value,S);if(O===null){M===null&&(M=k);break}t&&M&&O.alternate===null&&e(p,M),m=i(O,m,v),N===null?T=O:N.sibling=O,N=O,M=k}if(E.done)return a(p,M),bt&&la(p,v),T;if(M===null){for(;!E.done;v++,E=b.next())E=h(p,E.value,S),E!==null&&(m=i(E,m,v),N===null?T=E:N.sibling=E,N=E);return bt&&la(p,v),T}for(M=n(M);!E.done;v++,E=b.next())E=d(M,p,v,E.value,S),E!==null&&(t&&E.alternate!==null&&M.delete(E.key===null?v:E.key),m=i(E,m,v),N===null?T=E:N.sibling=E,N=E);return t&&M.forEach(function(J){return e(p,J)}),bt&&la(p,v),T}function w(p,m,b,S){if(typeof b=="object"&&b!==null&&b.type===_n&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Si:t:{for(var T=b.key;m!==null;){if(m.key===T){if(T=b.type,T===_n){if(m.tag===7){a(p,m.sibling),S=l(m,b.props.children),S.return=p,p=S;break t}}else if(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Sa&&$a(T)===m.type){a(p,m.sibling),S=l(m,b.props),xl(S,b),S.return=p,p=S;break t}a(p,m);break}else e(p,m);m=m.sibling}b.type===_n?(S=nn(b.props.children,p.mode,S,b.key),S.return=p,p=S):(S=Ki(b.type,b.key,b.props,null,p.mode,S),xl(S,b),S.return=p,p=S)}return s(p);case Nl:t:{for(T=b.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){a(p,m.sibling),S=l(m,b.children||[]),S.return=p,p=S;break t}else{a(p,m);break}else e(p,m);m=m.sibling}S=kr(b,p.mode,S),S.return=p,p=S}return s(p);case Sa:return b=$a(b),w(p,m,b,S)}if(Ml(b))return y(p,m,b,S);if(pl(b)){if(T=pl(b),typeof T!="function")throw Error(C(150));return b=T.call(b),x(p,m,b,S)}if(typeof b.then=="function")return w(p,m,Ai(b),S);if(b.$$typeof===sa)return w(p,m,ki(p,b),S);zi(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,m!==null&&m.tag===6?(a(p,m.sibling),S=l(m,b),S.return=p,p=S):(a(p,m),S=jr(b,p.mode,S),S.return=p,p=S),s(p)):a(p,m)}return function(p,m,b,S){try{Pl=0;var T=w(p,m,b,S);return Zn=null,T}catch(M){if(M===ul||M===Is)throw M;var N=Se(29,M,null,p.mode);return N.lanes=S,N.return=p,N}finally{}}}var un=sh(!0),rh=sh(!1),wa=!1;function Eo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ac(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Da(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(t,e,a){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,wt&2){var l=n.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),n.pending=e,e=ds(t),Wd(t,null,a),e}return Js(t,n,e,a),ds(t)}function Dl(t,e,a){if(e=e.updateQueue,e!==null&&(e=e.shared,(a&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,a|=n,e.lanes=a,Md(t,a)}}function zr(t,e){var a=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var l=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var s={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};i===null?l=i=s:i=i.next=s,a=a.next}while(a!==null);i===null?l=i=e:i=i.next=e}else l=i=e;a={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=e:t.next=e,a.lastBaseUpdate=e}var zc=!1;function Ul(){if(zc){var t=Qn;if(t!==null)throw t}}function Rl(t,e,a,n){zc=!1;var l=t.updateQueue;wa=!1;var i=l.firstBaseUpdate,s=l.lastBaseUpdate,r=l.shared.pending;if(r!==null){l.shared.pending=null;var o=r,u=o.next;o.next=null,s===null?i=u:s.next=u,s=o;var g=t.alternate;g!==null&&(g=g.updateQueue,r=g.lastBaseUpdate,r!==s&&(r===null?g.firstBaseUpdate=u:r.next=u,g.lastBaseUpdate=o))}if(i!==null){var h=l.baseState;s=0,g=u=o=null,r=i;do{var f=r.lane&-536870913,d=f!==r.lane;if(d?(mt&f)===f:(n&f)===f){f!==0&&f===Wn&&(zc=!0),g!==null&&(g=g.next={lane:0,tag:r.tag,payload:r.payload,callback:null,next:null});t:{var y=t,x=r;f=e;var w=a;switch(x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(w,h,f);break t}h=y;break t;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(w,h,f):y,f==null)break t;h=Ut({},h,f);break t;case 2:wa=!0}}f=r.callback,f!==null&&(t.flags|=64,d&&(t.flags|=8192),d=l.callbacks,d===null?l.callbacks=[f]:d.push(f))}else d={lane:f,tag:r.tag,payload:r.payload,callback:r.callback,next:null},g===null?(u=g=d,o=h):g=g.next=d,s|=f;if(r=r.next,r===null){if(r=l.shared.pending,r===null)break;d=r,r=d.next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}while(!0);g===null&&(o=h),l.baseState=o,l.firstBaseUpdate=u,l.lastBaseUpdate=g,i===null&&(l.shared.lanes=0),Qa|=s,t.lanes=s,t.memoizedState=h}}function ch(t,e){if(typeof t!="function")throw Error(C(191,t));t.call(e)}function oh(t,e){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ch(a[t],e)}var $n=Ke(null),ps=Ke(0);function Fu(t,e){t=pa,Ct(ps,t),Ct($n,e),pa=t|e.baseLanes}function _c(){Ct(ps,pa),Ct($n,$n.current)}function Oo(){pa=ps.current,$t($n),$t(ps)}var Ae=Ke(null),Re=null;function Na(t){var e=t.alternate;Ct(qt,qt.current&1),Ct(Ae,t),Re===null&&(e===null||$n.current!==null||e.memoizedState!==null)&&(Re=t)}function Cc(t){Ct(qt,qt.current),Ct(Ae,t),Re===null&&(Re=t)}function uh(t){t.tag===22?(Ct(qt,qt.current),Ct(Ae,t),Re===null&&(Re=t)):Ma()}function Ma(){Ct(qt,qt.current),Ct(Ae,Ae.current)}function ve(t){$t(Ae),Re===t&&(Re=null),$t(qt)}var qt=Ke(0);function bs(t){for(var e=t;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ic(a)||Pc(a)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ha=0,st=null,zt=null,Xt=null,ys=!1,Fn=!1,fn=!1,xs=0,Wl=0,Kn=null,gp=0;function Ht(){throw Error(C(321))}function Do(t,e){if(e===null)return!1;for(var a=0;a<e.length&&a<t.length;a++)if(!ke(t[a],e[a]))return!1;return!0}function Uo(t,e,a,n,l,i){return ha=i,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tt.H=t===null||t.memoizedState===null?Vh:Zo,fn=!1,i=a(n,l),fn=!1,Fn&&(i=dh(e,a,n,l)),fh(t),i}function fh(t){tt.H=$l;var e=zt!==null&&zt.next!==null;if(ha=0,Xt=zt=st=null,ys=!1,Wl=0,Kn=null,e)throw Error(C(300));t===null||Zt||(t=t.dependencies,t!==null&&ms(t)&&(Zt=!0))}function dh(t,e,a,n){st=t;var l=0;do{if(Fn&&(Kn=null),Wl=0,Fn=!1,25<=l)throw Error(C(301));if(l+=1,Xt=zt=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}tt.H=Yh,i=e(a,n)}while(Fn);return i}function pp(){var t=tt.H,e=t.useState()[0];return e=typeof e.then=="function"?hi(e):e,t=t.useState()[0],(zt!==null?zt.memoizedState:null)!==t&&(st.flags|=1024),e}function Ro(){var t=xs!==0;return xs=0,t}function Bo(t,e,a){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a}function Ho(t){if(ys){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}ys=!1}ha=0,Xt=zt=st=null,Fn=!1,Wl=xs=0,Kn=null}function se(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?st.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function Vt(){if(zt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var e=Xt===null?st.memoizedState:Xt.next;if(e!==null)Xt=e,zt=t;else{if(t===null)throw st.alternate===null?Error(C(467)):Error(C(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Xt===null?st.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function Ps(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hi(t){var e=Wl;return Wl+=1,Kn===null&&(Kn=[]),t=ih(Kn,t,e),e=st,(Xt===null?e.memoizedState:Xt.next)===null&&(e=e.alternate,tt.H=e===null||e.memoizedState===null?Vh:Zo),t}function Ws(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hi(t);if(t.$$typeof===sa)return le(t)}throw Error(C(438,String(t)))}function Go(t){var e=null,a=st.updateQueue;if(a!==null&&(e=a.memoCache),e==null){var n=st.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(l){return l.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),a===null&&(a=Ps(),st.updateQueue=a),a.memoCache=e,a=e.data[e.index],a===void 0)for(a=e.data[e.index]=Array(t),n=0;n<t;n++)a[n]=eg;return e.index++,a}function ma(t,e){return typeof e=="function"?e(t):e}function Ii(t){var e=Vt();return qo(e,zt,t)}function qo(t,e,a){var n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=a;var l=t.baseQueue,i=n.pending;if(i!==null){if(l!==null){var s=l.next;l.next=i.next,i.next=s}e.baseQueue=l=i,n.pending=null}if(i=t.baseState,l===null)t.memoizedState=i;else{e=l.next;var r=s=null,o=null,u=e,g=!1;do{var h=u.lane&-536870913;if(h!==u.lane?(mt&h)===h:(ha&h)===h){var f=u.revertLane;if(f===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Wn&&(g=!0);else if((ha&f)===f){u=u.next,f===Wn&&(g=!0);continue}else h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(r=o=h,s=i):o=o.next=h,st.lanes|=f,Qa|=f;h=u.action,fn&&a(i,h),i=u.hasEagerState?u.eagerState:a(i,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(r=o=f,s=i):o=o.next=f,st.lanes|=h,Qa|=h;u=u.next}while(u!==null&&u!==e);if(o===null?s=i:o.next=r,!ke(i,t.memoizedState)&&(Zt=!0,g&&(a=Qn,a!==null)))throw a;t.memoizedState=i,t.baseState=s,t.baseQueue=o,n.lastRenderedState=i}return l===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function _r(t){var e=Vt(),a=e.queue;if(a===null)throw Error(C(311));a.lastRenderedReducer=t;var n=a.dispatch,l=a.pending,i=e.memoizedState;if(l!==null){a.pending=null;var s=l=l.next;do i=t(i,s.action),s=s.next;while(s!==l);ke(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),a.lastRenderedState=i}return[i,n]}function hh(t,e,a){var n=st,l=Vt(),i=bt;if(i){if(a===void 0)throw Error(C(407));a=a()}else a=e();var s=!ke((zt||l).memoizedState,a);if(s&&(l.memoizedState=a,Zt=!0),l=l.queue,Vo(ph.bind(null,n,l,t),[t]),l.getSnapshot!==e||s||Xt!==null&&Xt.memoizedState.tag&1){if(n.flags|=2048,tl(9,{destroy:void 0},gh.bind(null,n,l,a,e),null),_t===null)throw Error(C(349));i||ha&127||mh(n,e,a)}return a}function mh(t,e,a){t.flags|=16384,t={getSnapshot:e,value:a},e=st.updateQueue,e===null?(e=Ps(),st.updateQueue=e,e.stores=[t]):(a=e.stores,a===null?e.stores=[t]:a.push(t))}function gh(t,e,a,n){e.value=a,e.getSnapshot=n,bh(e)&&yh(t)}function ph(t,e,a){return a(function(){bh(e)&&yh(t)})}function bh(t){var e=t.getSnapshot;t=t.value;try{var a=e();return!ke(t,a)}catch{return!0}}function yh(t){var e=bn(t,2);e!==null&&me(e,t,2)}function Ec(t){var e=se();if(typeof t=="function"){var a=t;if(t=a(),fn){ka(!0);try{a()}finally{ka(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},e}function xh(t,e,a,n){return t.baseState=a,qo(t,zt,typeof n=="function"?n:ma)}function bp(t,e,a,n,l){if(tr(t))throw Error(C(485));if(t=e.action,t!==null){var i={payload:l,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){i.listeners.push(s)}};tt.T!==null?a(!0):i.isTransition=!1,n(i),a=e.pending,a===null?(i.next=e.pending=i,vh(e,i)):(i.next=a.next,e.pending=a.next=i)}}function vh(t,e){var a=e.action,n=e.payload,l=t.state;if(e.isTransition){var i=tt.T,s={};tt.T=s;try{var r=a(l,n),o=tt.S;o!==null&&o(s,r),Ku(t,e,r)}catch(u){Oc(t,e,u)}finally{i!==null&&s.types!==null&&(i.types=s.types),tt.T=i}}else try{i=a(l,n),Ku(t,e,i)}catch(u){Oc(t,e,u)}}function Ku(t,e,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Ju(t,e,n)},function(n){return Oc(t,e,n)}):Ju(t,e,a)}function Ju(t,e,a){e.status="fulfilled",e.value=a,Sh(e),t.state=a,e=t.pending,e!==null&&(a=e.next,a===e?t.pending=null:(a=a.next,e.next=a,vh(t,a)))}function Oc(t,e,a){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=a,Sh(e),e=e.next;while(e!==n)}t.action=null}function Sh(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function wh(t,e){return e}function Iu(t,e){if(bt){var a=_t.formState;if(a!==null){t:{var n=st;if(bt){if(Ot){e:{for(var l=Ot,i=Ue;l.nodeType!==8;){if(!i){l=null;break e}if(l=Be(l.nextSibling),l===null){l=null;break e}}i=l.data,l=i==="F!"||i==="F"?l:null}if(l){Ot=Be(l.nextSibling),n=l.data==="F!";break t}}Xa(n)}n=!1}n&&(e=a[0])}}return a=se(),a.memoizedState=a.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wh,lastRenderedState:e},a.queue=n,a=Hh.bind(null,st,n),n.dispatch=a,n=Ec(!1),i=Qo.bind(null,st,!1,n.queue),n=se(),l={state:e,dispatch:null,action:t,pending:null},n.queue=l,a=bp.bind(null,st,l,i,a),l.dispatch=a,n.memoizedState=t,[e,a,!1]}function Pu(t){var e=Vt();return Th(e,zt,t)}function Th(t,e,a){if(e=qo(t,e,wh)[0],t=Ii(ma)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=hi(e)}catch(s){throw s===ul?Is:s}else n=e;e=Vt();var l=e.queue,i=l.dispatch;return a!==e.memoizedState&&(st.flags|=2048,tl(9,{destroy:void 0},yp.bind(null,l,a),null)),[n,i,t]}function yp(t,e){t.action=e}function Wu(t){var e=Vt(),a=zt;if(a!==null)return Th(e,a,t);Vt(),e=e.memoizedState,a=Vt();var n=a.queue.dispatch;return a.memoizedState=t,[e,n,!1]}function tl(t,e,a,n){return t={tag:t,create:a,deps:n,inst:e,next:null},e=st.updateQueue,e===null&&(e=Ps(),st.updateQueue=e),a=e.lastEffect,a===null?e.lastEffect=t.next=t:(n=a.next,a.next=t,t.next=n,e.lastEffect=t),t}function Nh(){return Vt().memoizedState}function Pi(t,e,a,n){var l=se();st.flags|=t,l.memoizedState=tl(1|e,{destroy:void 0},a,n===void 0?null:n)}function $s(t,e,a,n){var l=Vt();n=n===void 0?null:n;var i=l.memoizedState.inst;zt!==null&&n!==null&&Do(n,zt.memoizedState.deps)?l.memoizedState=tl(e,i,a,n):(st.flags|=t,l.memoizedState=tl(1|e,i,a,n))}function $u(t,e){Pi(8390656,8,t,e)}function Vo(t,e){$s(2048,8,t,e)}function xp(t){st.flags|=4;var e=st.updateQueue;if(e===null)e=Ps(),st.updateQueue=e,e.events=[t];else{var a=e.events;a===null?e.events=[t]:a.push(t)}}function Mh(t){var e=Vt().memoizedState;return xp({ref:e,nextImpl:t}),function(){if(wt&2)throw Error(C(440));return e.impl.apply(void 0,arguments)}}function jh(t,e){return $s(4,2,t,e)}function kh(t,e){return $s(4,4,t,e)}function Ah(t,e){if(typeof e=="function"){t=t();var a=e(t);return function(){typeof a=="function"?a():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zh(t,e,a){a=a!=null?a.concat([t]):null,$s(4,4,Ah.bind(null,e,t),a)}function Yo(){}function _h(t,e){var a=Vt();e=e===void 0?null:e;var n=a.memoizedState;return e!==null&&Do(e,n[1])?n[0]:(a.memoizedState=[t,e],t)}function Ch(t,e){var a=Vt();e=e===void 0?null:e;var n=a.memoizedState;if(e!==null&&Do(e,n[1]))return n[0];if(n=t(),fn){ka(!0);try{t()}finally{ka(!1)}}return a.memoizedState=[n,e],n}function Xo(t,e,a){return a===void 0||ha&1073741824&&!(mt&261930)?t.memoizedState=e:(t.memoizedState=a,t=xm(),st.lanes|=t,Qa|=t,a)}function Eh(t,e,a,n){return ke(a,e)?a:$n.current!==null?(t=Xo(t,a,n),ke(t,e)||(Zt=!0),t):!(ha&42)||ha&1073741824&&!(mt&261930)?(Zt=!0,t.memoizedState=a):(t=xm(),st.lanes|=t,Qa|=t,e)}function Oh(t,e,a,n,l){var i=Tt.p;Tt.p=i!==0&&8>i?i:8;var s=tt.T,r={};tt.T=r,Qo(t,!1,e,a);try{var o=l(),u=tt.S;if(u!==null&&u(r,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var g=mp(o,n);Bl(t,e,g,je(t))}else Bl(t,e,n,je(t))}catch(h){Bl(t,e,{then:function(){},status:"rejected",reason:h},je())}finally{Tt.p=i,s!==null&&r.types!==null&&(s.types=r.types),tt.T=s}}function vp(){}function Dc(t,e,a,n){if(t.tag!==5)throw Error(C(476));var l=Dh(t).queue;Oh(t,l,e,an,a===null?vp:function(){return Uh(t),a(n)})}function Dh(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:an,baseState:an,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:an},next:null};var a={};return e.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:a},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Uh(t){var e=Dh(t);e.next===null&&(e=t.alternate.memoizedState),Bl(t,e.next.queue,{},je())}function Lo(){return le(ai)}function Rh(){return Vt().memoizedState}function Bh(){return Vt().memoizedState}function Sp(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var a=je();t=Da(a);var n=Ua(e,t,a);n!==null&&(me(n,e,a),Dl(n,e,a)),e={cache:zo()},t.payload=e;return}e=e.return}}function wp(t,e,a){var n=je();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},tr(t)?Gh(e,a):(a=Mo(t,e,a,n),a!==null&&(me(a,t,n),qh(a,e,n)))}function Hh(t,e,a){var n=je();Bl(t,e,a,n)}function Bl(t,e,a,n){var l={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(tr(t))Gh(e,l);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,r=i(s,a);if(l.hasEagerState=!0,l.eagerState=r,ke(r,s))return Js(t,e,l,0),_t===null&&Ks(),!1}catch{}finally{}if(a=Mo(t,e,l,n),a!==null)return me(a,t,n),qh(a,e,n),!0}return!1}function Qo(t,e,a,n){if(n={lane:2,revertLane:tu(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},tr(t)){if(e)throw Error(C(479))}else e=Mo(t,a,n,2),e!==null&&me(e,t,2)}function tr(t){var e=t.alternate;return t===st||e!==null&&e===st}function Gh(t,e){Fn=ys=!0;var a=t.pending;a===null?e.next=e:(e.next=a.next,a.next=e),t.pending=e}function qh(t,e,a){if(a&4194048){var n=e.lanes;n&=t.pendingLanes,a|=n,e.lanes=a,Md(t,a)}}var $l={readContext:le,use:Ws,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};$l.useEffectEvent=Ht;var Vh={readContext:le,use:Ws,useCallback:function(t,e){return se().memoizedState=[t,e===void 0?null:e],t},useContext:le,useEffect:$u,useImperativeHandle:function(t,e,a){a=a!=null?a.concat([t]):null,Pi(4194308,4,Ah.bind(null,e,t),a)},useLayoutEffect:function(t,e){return Pi(4194308,4,t,e)},useInsertionEffect:function(t,e){Pi(4,2,t,e)},useMemo:function(t,e){var a=se();e=e===void 0?null:e;var n=t();if(fn){ka(!0);try{t()}finally{ka(!1)}}return a.memoizedState=[n,e],n},useReducer:function(t,e,a){var n=se();if(a!==void 0){var l=a(e);if(fn){ka(!0);try{a(e)}finally{ka(!1)}}}else l=e;return n.memoizedState=n.baseState=l,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:l},n.queue=t,t=t.dispatch=wp.bind(null,st,t),[n.memoizedState,t]},useRef:function(t){var e=se();return t={current:t},e.memoizedState=t},useState:function(t){t=Ec(t);var e=t.queue,a=Hh.bind(null,st,e);return e.dispatch=a,[t.memoizedState,a]},useDebugValue:Yo,useDeferredValue:function(t,e){var a=se();return Xo(a,t,e)},useTransition:function(){var t=Ec(!1);return t=Oh.bind(null,st,t.queue,!0,!1),se().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,a){var n=st,l=se();if(bt){if(a===void 0)throw Error(C(407));a=a()}else{if(a=e(),_t===null)throw Error(C(349));mt&127||mh(n,e,a)}l.memoizedState=a;var i={value:a,getSnapshot:e};return l.queue=i,$u(ph.bind(null,n,i,t),[t]),n.flags|=2048,tl(9,{destroy:void 0},gh.bind(null,n,i,a,e),null),a},useId:function(){var t=se(),e=_t.identifierPrefix;if(bt){var a=Qe,n=Le;a=(n&~(1<<32-Me(n)-1)).toString(32)+a,e="_"+e+"R_"+a,a=xs++,0<a&&(e+="H"+a.toString(32)),e+="_"}else a=gp++,e="_"+e+"r_"+a.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Lo,useFormState:Iu,useActionState:Iu,useOptimistic:function(t){var e=se();e.memoizedState=e.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=a,e=Qo.bind(null,st,!0,a),a.dispatch=e,[t,e]},useMemoCache:Go,useCacheRefresh:function(){return se().memoizedState=Sp.bind(null,st)},useEffectEvent:function(t){var e=se(),a={impl:t};return e.memoizedState=a,function(){if(wt&2)throw Error(C(440));return a.impl.apply(void 0,arguments)}}},Zo={readContext:le,use:Ws,useCallback:_h,useContext:le,useEffect:Vo,useImperativeHandle:zh,useInsertionEffect:jh,useLayoutEffect:kh,useMemo:Ch,useReducer:Ii,useRef:Nh,useState:function(){return Ii(ma)},useDebugValue:Yo,useDeferredValue:function(t,e){var a=Vt();return Eh(a,zt.memoizedState,t,e)},useTransition:function(){var t=Ii(ma)[0],e=Vt().memoizedState;return[typeof t=="boolean"?t:hi(t),e]},useSyncExternalStore:hh,useId:Rh,useHostTransitionStatus:Lo,useFormState:Pu,useActionState:Pu,useOptimistic:function(t,e){var a=Vt();return xh(a,zt,t,e)},useMemoCache:Go,useCacheRefresh:Bh};Zo.useEffectEvent=Mh;var Yh={readContext:le,use:Ws,useCallback:_h,useContext:le,useEffect:Vo,useImperativeHandle:zh,useInsertionEffect:jh,useLayoutEffect:kh,useMemo:Ch,useReducer:_r,useRef:Nh,useState:function(){return _r(ma)},useDebugValue:Yo,useDeferredValue:function(t,e){var a=Vt();return zt===null?Xo(a,t,e):Eh(a,zt.memoizedState,t,e)},useTransition:function(){var t=_r(ma)[0],e=Vt().memoizedState;return[typeof t=="boolean"?t:hi(t),e]},useSyncExternalStore:hh,useId:Rh,useHostTransitionStatus:Lo,useFormState:Wu,useActionState:Wu,useOptimistic:function(t,e){var a=Vt();return zt!==null?xh(a,zt,t,e):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Go,useCacheRefresh:Bh};Yh.useEffectEvent=Mh;function Cr(t,e,a,n){e=t.memoizedState,a=a(n,e),a=a==null?e:Ut({},e,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Uc={enqueueSetState:function(t,e,a){t=t._reactInternals;var n=je(),l=Da(n);l.payload=e,a!=null&&(l.callback=a),e=Ua(t,l,n),e!==null&&(me(e,t,n),Dl(e,t,n))},enqueueReplaceState:function(t,e,a){t=t._reactInternals;var n=je(),l=Da(n);l.tag=1,l.payload=e,a!=null&&(l.callback=a),e=Ua(t,l,n),e!==null&&(me(e,t,n),Dl(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var a=je(),n=Da(a);n.tag=2,e!=null&&(n.callback=e),e=Ua(t,n,a),e!==null&&(me(e,t,a),Dl(e,t,a))}};function tf(t,e,a,n,l,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!Kl(a,n)||!Kl(l,i):!0}function ef(t,e,a,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,n),e.state!==t&&Uc.enqueueReplaceState(e,e.state,null)}function dn(t,e){var a=e;if("ref"in e){a={};for(var n in e)n!=="ref"&&(a[n]=e[n])}if(t=t.defaultProps){a===e&&(a=Ut({},a));for(var l in t)a[l]===void 0&&(a[l]=t[l])}return a}function Xh(t){fs(t)}function Lh(t){console.error(t)}function Qh(t){fs(t)}function vs(t,e){try{var a=t.onUncaughtError;a(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function af(t,e,a){try{var n=t.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Rc(t,e,a){return a=Da(a),a.tag=3,a.payload={element:null},a.callback=function(){vs(t,e)},a}function Zh(t){return t=Da(t),t.tag=3,t}function Fh(t,e,a,n){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var i=n.value;t.payload=function(){return l(i)},t.callback=function(){af(e,a,n)}}var s=a.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){af(e,a,n),typeof l!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var r=n.stack;this.componentDidCatch(n.value,{componentStack:r!==null?r:""})})}function Tp(t,e,a,n,l){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=a.alternate,e!==null&&ol(e,a,l,!0),a=Ae.current,a!==null){switch(a.tag){case 31:case 13:return Re===null?Ms():a.alternate===null&&Gt===0&&(Gt=3),a.flags&=-257,a.flags|=65536,a.lanes=l,n===gs?a.flags|=16384:(e=a.updateQueue,e===null?a.updateQueue=new Set([n]):e.add(n),Yr(t,n,l)),!1;case 22:return a.flags|=65536,n===gs?a.flags|=16384:(e=a.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=e):(a=e.retryQueue,a===null?e.retryQueue=new Set([n]):a.add(n)),Yr(t,n,l)),!1}throw Error(C(435,a.tag))}return Yr(t,n,l),Ms(),!1}if(bt)return e=Ae.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=l,n!==Tc&&(t=Error(C(422),{cause:n}),Il(De(t,a)))):(n!==Tc&&(e=Error(C(423),{cause:n}),Il(De(e,a))),t=t.current.alternate,t.flags|=65536,l&=-l,t.lanes|=l,n=De(n,a),l=Rc(t.stateNode,n,l),zr(t,l),Gt!==4&&(Gt=2)),!1;var i=Error(C(520),{cause:n});if(i=De(i,a),ql===null?ql=[i]:ql.push(i),Gt!==4&&(Gt=2),e===null)return!0;n=De(n,a),a=e;do{switch(a.tag){case 3:return a.flags|=65536,t=l&-l,a.lanes|=t,t=Rc(a.stateNode,n,t),zr(a,t),!1;case 1:if(e=a.type,i=a.stateNode,(a.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Ra===null||!Ra.has(i))))return a.flags|=65536,l&=-l,a.lanes|=l,l=Zh(l),Fh(l,t,a,n),zr(a,l),!1}a=a.return}while(a!==null);return!1}var Fo=Error(C(461)),Zt=!1;function ee(t,e,a,n){e.child=t===null?rh(e,null,a,n):un(e,t.child,a,n)}function nf(t,e,a,n,l){a=a.render;var i=e.ref;if("ref"in n){var s={};for(var r in n)r!=="ref"&&(s[r]=n[r])}else s=n;return on(e),n=Uo(t,e,a,s,i,l),r=Ro(),t!==null&&!Zt?(Bo(t,e,l),ga(t,e,l)):(bt&&r&&ko(e),e.flags|=1,ee(t,e,n,l),e.child)}function lf(t,e,a,n,l){if(t===null){var i=a.type;return typeof i=="function"&&!jo(i)&&i.defaultProps===void 0&&a.compare===null?(e.tag=15,e.type=i,Kh(t,e,i,n,l)):(t=Ki(a.type,null,n,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!Ko(t,l)){var s=i.memoizedProps;if(a=a.compare,a=a!==null?a:Kl,a(s,n)&&t.ref===e.ref)return ga(t,e,l)}return e.flags|=1,t=oa(i,n),t.ref=e.ref,t.return=e,e.child=t}function Kh(t,e,a,n,l){if(t!==null){var i=t.memoizedProps;if(Kl(i,n)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=n=i,Ko(t,l))t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,ga(t,e,l)}return Bc(t,e,a,n,l)}function Jh(t,e,a,n){var l=n.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|a:a,t!==null){for(n=e.child=t.child,l=0;n!==null;)l=l|n.lanes|n.childLanes,n=n.sibling;n=l&~i}else n=0,e.child=null;return sf(t,e,i,a,n)}if(a&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ji(e,i!==null?i.cachePool:null),i!==null?Fu(e,i):_c(),uh(e);else return n=e.lanes=536870912,sf(t,e,i!==null?i.baseLanes|a:a,a,n)}else i!==null?(Ji(e,i.cachePool),Fu(e,i),Ma(),e.memoizedState=null):(t!==null&&Ji(e,null),_c(),Ma());return ee(t,e,l,a),e.child}function kl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function sf(t,e,a,n,l){var i=_o();return i=i===null?null:{parent:Qt._currentValue,pool:i},e.memoizedState={baseLanes:a,cachePool:i},t!==null&&Ji(e,null),_c(),uh(e),t!==null&&ol(t,e,n,!0),e.childLanes=l,null}function Wi(t,e){return e=Ss({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function rf(t,e,a){return un(e,t.child,null,a),t=Wi(e,e.pendingProps),t.flags|=2,ve(e),e.memoizedState=null,t}function Np(t,e,a){var n=e.pendingProps,l=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(bt){if(n.mode==="hidden")return t=Wi(e,n),e.lanes=536870912,kl(null,t);if(Cc(e),(t=Ot)?(t=Vm(t,Ue),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ya!==null?{id:Le,overflow:Qe}:null,retryLane:536870912,hydrationErrors:null},a=th(t),a.return=e,e.child=a,ne=e,Ot=null)):t=null,t===null)throw Xa(e);return e.lanes=536870912,null}return Wi(e,n)}var i=t.memoizedState;if(i!==null){var s=i.dehydrated;if(Cc(e),l)if(e.flags&256)e.flags&=-257,e=rf(t,e,a);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(C(558));else if(Zt||ol(t,e,a,!1),l=(a&t.childLanes)!==0,Zt||l){if(n=_t,n!==null&&(s=jd(n,a),s!==0&&s!==i.retryLane))throw i.retryLane=s,bn(t,s),me(n,t,s),Fo;Ms(),e=rf(t,e,a)}else t=i.treeContext,Ot=Be(s.nextSibling),ne=e,bt=!0,Oa=null,Ue=!1,t!==null&&ah(e,t),e=Wi(e,n),e.flags|=4096;return e}return t=oa(t.child,{mode:n.mode,children:n.children}),t.ref=e.ref,e.child=t,t.return=e,t}function $i(t,e){var a=e.ref;if(a===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(C(284));(t===null||t.ref!==a)&&(e.flags|=4194816)}}function Bc(t,e,a,n,l){return on(e),a=Uo(t,e,a,n,void 0,l),n=Ro(),t!==null&&!Zt?(Bo(t,e,l),ga(t,e,l)):(bt&&n&&ko(e),e.flags|=1,ee(t,e,a,l),e.child)}function cf(t,e,a,n,l,i){return on(e),e.updateQueue=null,a=dh(e,n,a,l),fh(t),n=Ro(),t!==null&&!Zt?(Bo(t,e,i),ga(t,e,i)):(bt&&n&&ko(e),e.flags|=1,ee(t,e,a,i),e.child)}function of(t,e,a,n,l){if(on(e),e.stateNode===null){var i=Hn,s=a.contextType;typeof s=="object"&&s!==null&&(i=le(s)),i=new a(n,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Uc,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=n,i.state=e.memoizedState,i.refs={},Eo(e),s=a.contextType,i.context=typeof s=="object"&&s!==null?le(s):Hn,i.state=e.memoizedState,s=a.getDerivedStateFromProps,typeof s=="function"&&(Cr(e,a,s,n),i.state=e.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(s=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),s!==i.state&&Uc.enqueueReplaceState(i,i.state,null),Rl(e,n,i,l),Ul(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){i=e.stateNode;var r=e.memoizedProps,o=dn(a,r);i.props=o;var u=i.context,g=a.contextType;s=Hn,typeof g=="object"&&g!==null&&(s=le(g));var h=a.getDerivedStateFromProps;g=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function",r=e.pendingProps!==r,g||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r||u!==s)&&ef(e,i,n,s),wa=!1;var f=e.memoizedState;i.state=f,Rl(e,n,i,l),Ul(),u=e.memoizedState,r||f!==u||wa?(typeof h=="function"&&(Cr(e,a,h,n),u=e.memoizedState),(o=wa||tf(e,a,o,n,f,u,s))?(g||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),i.props=n,i.state=u,i.context=s,n=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Ac(t,e),s=e.memoizedProps,g=dn(a,s),i.props=g,h=e.pendingProps,f=i.context,u=a.contextType,o=Hn,typeof u=="object"&&u!==null&&(o=le(u)),r=a.getDerivedStateFromProps,(u=typeof r=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==h||f!==o)&&ef(e,i,n,o),wa=!1,f=e.memoizedState,i.state=f,Rl(e,n,i,l),Ul();var d=e.memoizedState;s!==h||f!==d||wa||t!==null&&t.dependencies!==null&&ms(t.dependencies)?(typeof r=="function"&&(Cr(e,a,r,n),d=e.memoizedState),(g=wa||tf(e,a,g,n,f,d,o)||t!==null&&t.dependencies!==null&&ms(t.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,d,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,d,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=d),i.props=n,i.state=d,i.context=o,n=g):(typeof i.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return i=n,$i(t,e),n=(e.flags&128)!==0,i||n?(i=e.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&n?(e.child=un(e,t.child,null,l),e.child=un(e,null,a,l)):ee(t,e,a,l),e.memoizedState=i.state,t=e.child):t=ga(t,e,l),t}function uf(t,e,a,n){return cn(),e.flags|=256,ee(t,e,a,n),e.child}var Er={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Or(t){return{baseLanes:t,cachePool:lh()}}function Dr(t,e,a){return t=t!==null?t.childLanes&~a:0,e&&(t|=we),t}function Ih(t,e,a){var n=e.pendingProps,l=!1,i=(e.flags&128)!==0,s;if((s=i)||(s=t!==null&&t.memoizedState===null?!1:(qt.current&2)!==0),s&&(l=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(bt){if(l?Na(e):Ma(),(t=Ot)?(t=Vm(t,Ue),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ya!==null?{id:Le,overflow:Qe}:null,retryLane:536870912,hydrationErrors:null},a=th(t),a.return=e,e.child=a,ne=e,Ot=null)):t=null,t===null)throw Xa(e);return Pc(t)?e.lanes=32:e.lanes=536870912,null}var r=n.children;return n=n.fallback,l?(Ma(),l=e.mode,r=Ss({mode:"hidden",children:r},l),n=nn(n,l,a,null),r.return=e,n.return=e,r.sibling=n,e.child=r,n=e.child,n.memoizedState=Or(a),n.childLanes=Dr(t,s,a),e.memoizedState=Er,kl(null,n)):(Na(e),Hc(e,r))}var o=t.memoizedState;if(o!==null&&(r=o.dehydrated,r!==null)){if(i)e.flags&256?(Na(e),e.flags&=-257,e=Ur(t,e,a)):e.memoizedState!==null?(Ma(),e.child=t.child,e.flags|=128,e=null):(Ma(),r=n.fallback,l=e.mode,n=Ss({mode:"visible",children:n.children},l),r=nn(r,l,a,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,un(e,t.child,null,a),n=e.child,n.memoizedState=Or(a),n.childLanes=Dr(t,s,a),e.memoizedState=Er,e=kl(null,n));else if(Na(e),Pc(r)){if(s=r.nextSibling&&r.nextSibling.dataset,s)var u=s.dgst;s=u,n=Error(C(419)),n.stack="",n.digest=s,Il({value:n,source:null,stack:null}),e=Ur(t,e,a)}else if(Zt||ol(t,e,a,!1),s=(a&t.childLanes)!==0,Zt||s){if(s=_t,s!==null&&(n=jd(s,a),n!==0&&n!==o.retryLane))throw o.retryLane=n,bn(t,n),me(s,t,n),Fo;Ic(r)||Ms(),e=Ur(t,e,a)}else Ic(r)?(e.flags|=192,e.child=t.child,e=null):(t=o.treeContext,Ot=Be(r.nextSibling),ne=e,bt=!0,Oa=null,Ue=!1,t!==null&&ah(e,t),e=Hc(e,n.children),e.flags|=4096);return e}return l?(Ma(),r=n.fallback,l=e.mode,o=t.child,u=o.sibling,n=oa(o,{mode:"hidden",children:n.children}),n.subtreeFlags=o.subtreeFlags&65011712,u!==null?r=oa(u,r):(r=nn(r,l,a,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,kl(null,n),n=e.child,r=t.child.memoizedState,r===null?r=Or(a):(l=r.cachePool,l!==null?(o=Qt._currentValue,l=l.parent!==o?{parent:o,pool:o}:l):l=lh(),r={baseLanes:r.baseLanes|a,cachePool:l}),n.memoizedState=r,n.childLanes=Dr(t,s,a),e.memoizedState=Er,kl(t.child,n)):(Na(e),a=t.child,t=a.sibling,a=oa(a,{mode:"visible",children:n.children}),a.return=e,a.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=a,e.memoizedState=null,a)}function Hc(t,e){return e=Ss({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Ss(t,e){return t=Se(22,t,null,e),t.lanes=0,t}function Ur(t,e,a){return un(e,t.child,null,a),t=Hc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ff(t,e,a){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Mc(t.return,e,a)}function Rr(t,e,a,n,l,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:l,treeForkCount:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=a,s.tailMode=l,s.treeForkCount=i)}function Ph(t,e,a){var n=e.pendingProps,l=n.revealOrder,i=n.tail;n=n.children;var s=qt.current,r=(s&2)!==0;if(r?(s=s&1|2,e.flags|=128):s&=1,Ct(qt,s),ee(t,e,n,a),n=bt?Jl:0,!r&&t!==null&&t.flags&128)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ff(t,a,e);else if(t.tag===19)ff(t,a,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(l){case"forwards":for(a=e.child,l=null;a!==null;)t=a.alternate,t!==null&&bs(t)===null&&(l=a),a=a.sibling;a=l,a===null?(l=e.child,e.child=null):(l=a.sibling,a.sibling=null),Rr(e,!1,l,a,i,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&bs(t)===null){e.child=l;break}t=l.sibling,l.sibling=a,a=l,l=t}Rr(e,!0,a,null,i,n);break;case"together":Rr(e,!1,null,null,void 0,n);break;default:e.memoizedState=null}return e.child}function ga(t,e,a){if(t!==null&&(e.dependencies=t.dependencies),Qa|=e.lanes,!(a&e.childLanes))if(t!==null){if(ol(t,e,a,!1),(a&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,a=oa(t,t.pendingProps),e.child=a,a.return=e;t.sibling!==null;)t=t.sibling,a=a.sibling=oa(t,t.pendingProps),a.return=e;a.sibling=null}return e.child}function Ko(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&ms(t)))}function Mp(t,e,a){switch(e.tag){case 3:rs(e,e.stateNode.containerInfo),Ta(e,Qt,t.memoizedState.cache),cn();break;case 27:case 5:dc(e);break;case 4:rs(e,e.stateNode.containerInfo);break;case 10:Ta(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Cc(e),null;break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(Na(e),e.flags|=128,null):a&e.child.childLanes?Ih(t,e,a):(Na(e),t=ga(t,e,a),t!==null?t.sibling:null);Na(e);break;case 19:var l=(t.flags&128)!==0;if(n=(a&e.childLanes)!==0,n||(ol(t,e,a,!1),n=(a&e.childLanes)!==0),l){if(n)return Ph(t,e,a);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ct(qt,qt.current),n)break;return null;case 22:return e.lanes=0,Jh(t,e,a,e.pendingProps);case 24:Ta(e,Qt,t.memoizedState.cache)}return ga(t,e,a)}function Wh(t,e,a){if(t!==null)if(t.memoizedProps!==e.pendingProps)Zt=!0;else{if(!Ko(t,a)&&!(e.flags&128))return Zt=!1,Mp(t,e,a);Zt=!!(t.flags&131072)}else Zt=!1,bt&&e.flags&1048576&&eh(e,Jl,e.index);switch(e.lanes=0,e.tag){case 16:t:{var n=e.pendingProps;if(t=$a(e.elementType),e.type=t,typeof t=="function")jo(t)?(n=dn(t,n),e.tag=1,e=of(null,e,t,n,a)):(e.tag=0,e=Bc(null,e,t,n,a));else{if(t!=null){var l=t.$$typeof;if(l===fo){e.tag=11,e=nf(null,e,t,n,a);break t}else if(l===ho){e.tag=14,e=lf(null,e,t,n,a);break t}}throw e=uc(t)||t,Error(C(306,e,""))}}return e;case 0:return Bc(t,e,e.type,e.pendingProps,a);case 1:return n=e.type,l=dn(n,e.pendingProps),of(t,e,n,l,a);case 3:t:{if(rs(e,e.stateNode.containerInfo),t===null)throw Error(C(387));n=e.pendingProps;var i=e.memoizedState;l=i.element,Ac(t,e),Rl(e,n,null,a);var s=e.memoizedState;if(n=s.cache,Ta(e,Qt,n),n!==i.cache&&jc(e,[Qt],a,!0),Ul(),n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=uf(t,e,n,a);break t}else if(n!==l){l=De(Error(C(424)),e),Il(l),e=uf(t,e,n,a);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ot=Be(t.firstChild),ne=e,bt=!0,Oa=null,Ue=!0,a=rh(e,null,n,a),e.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cn(),n===l){e=ga(t,e,a);break t}ee(t,e,n,a)}e=e.child}return e;case 26:return $i(t,e),t===null?(a=Cf(e.type,null,e.pendingProps,null))?e.memoizedState=a:bt||(a=e.type,t=e.pendingProps,n=zs(Ea.current).createElement(a),n[ae]=e,n[ge]=t,ie(n,a,t),Wt(n),e.stateNode=n):e.memoizedState=Cf(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return dc(e),t===null&&bt&&(n=e.stateNode=Ym(e.type,e.pendingProps,Ea.current),ne=e,Ue=!0,l=Ot,Fa(e.type)?(Wc=l,Ot=Be(n.firstChild)):Ot=l),ee(t,e,e.pendingProps.children,a),$i(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&bt&&((l=n=Ot)&&(n=eb(n,e.type,e.pendingProps,Ue),n!==null?(e.stateNode=n,ne=e,Ot=Be(n.firstChild),Ue=!1,l=!0):l=!1),l||Xa(e)),dc(e),l=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,n=i.children,Kc(l,i)?n=null:s!==null&&Kc(l,s)&&(e.flags|=32),e.memoizedState!==null&&(l=Uo(t,e,pp,null,null,a),ai._currentValue=l),$i(t,e),ee(t,e,n,a),e.child;case 6:return t===null&&bt&&((t=a=Ot)&&(a=ab(a,e.pendingProps,Ue),a!==null?(e.stateNode=a,ne=e,Ot=null,t=!0):t=!1),t||Xa(e)),null;case 13:return Ih(t,e,a);case 4:return rs(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=un(e,null,n,a):ee(t,e,n,a),e.child;case 11:return nf(t,e,e.type,e.pendingProps,a);case 7:return ee(t,e,e.pendingProps,a),e.child;case 8:return ee(t,e,e.pendingProps.children,a),e.child;case 12:return ee(t,e,e.pendingProps.children,a),e.child;case 10:return n=e.pendingProps,Ta(e,e.type,n.value),ee(t,e,n.children,a),e.child;case 9:return l=e.type._context,n=e.pendingProps.children,on(e),l=le(l),n=n(l),e.flags|=1,ee(t,e,n,a),e.child;case 14:return lf(t,e,e.type,e.pendingProps,a);case 15:return Kh(t,e,e.type,e.pendingProps,a);case 19:return Ph(t,e,a);case 31:return Np(t,e,a);case 22:return Jh(t,e,a,e.pendingProps);case 24:return on(e),n=le(Qt),t===null?(l=_o(),l===null&&(l=_t,i=zo(),l.pooledCache=i,i.refCount++,i!==null&&(l.pooledCacheLanes|=a),l=i),e.memoizedState={parent:n,cache:l},Eo(e),Ta(e,Qt,l)):(t.lanes&a&&(Ac(t,e),Rl(e,null,null,a),Ul()),l=t.memoizedState,i=e.memoizedState,l.parent!==n?(l={parent:n,cache:n},e.memoizedState=l,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=l),Ta(e,Qt,n)):(n=i.cache,Ta(e,Qt,n),n!==l.cache&&jc(e,[Qt],a,!0))),ee(t,e,e.pendingProps.children,a),e.child;case 29:throw e.pendingProps}throw Error(C(156,e.tag))}function $e(t){t.flags|=4}function Br(t,e,a,n,l){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(l&335544128)===l)if(t.stateNode.complete)t.flags|=8192;else if(wm())t.flags|=8192;else throw sn=gs,Co}else t.flags&=-16777217}function df(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Qm(e))if(wm())t.flags|=8192;else throw sn=gs,Co}function _i(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Td():536870912,t.lanes|=e,el|=e)}function vl(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,a=0,n=0;if(e)for(var l=t.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=n,t.childLanes=a,e}function jp(t,e,a){var n=e.pendingProps;switch(Ao(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Et(e),null;case 3:return a=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ua(Qt),Jn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(vn(e)?$e(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ar())),Et(e),null;case 26:var l=e.type,i=e.memoizedState;return t===null?($e(e),i!==null?(Et(e),df(e,i)):(Et(e),Br(e,l,null,n,a))):i?i!==t.memoizedState?($e(e),Et(e),df(e,i)):(Et(e),e.flags&=-16777217):(t=t.memoizedProps,t!==n&&$e(e),Et(e),Br(e,l,t,n,a)),null;case 27:if(cs(e),a=Ea.current,l=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&$e(e);else{if(!n){if(e.stateNode===null)throw Error(C(166));return Et(e),null}t=Fe.current,vn(e)?qu(e):(t=Ym(l,n,a),e.stateNode=t,$e(e))}return Et(e),null;case 5:if(cs(e),l=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&$e(e);else{if(!n){if(e.stateNode===null)throw Error(C(166));return Et(e),null}if(i=Fe.current,vn(e))qu(e);else{var s=zs(Ea.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?i.multiple=!0:n.size&&(i.size=n.size);break;default:i=typeof n.is=="string"?s.createElement(l,{is:n.is}):s.createElement(l)}}i[ae]=e,i[ge]=n;t:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=i;t:switch(ie(i,l,n),l){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&$e(e)}}return Et(e),Br(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,a),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==n&&$e(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(C(166));if(t=Ea.current,vn(e)){if(t=e.stateNode,a=e.memoizedProps,n=null,l=ne,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}t[ae]=e,t=!!(t.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Hm(t.nodeValue,a)),t||Xa(e,!0)}else t=zs(t).createTextNode(n),t[ae]=e,e.stateNode=t}return Et(e),null;case 31:if(a=e.memoizedState,t===null||t.memoizedState!==null){if(n=vn(e),a!==null){if(t===null){if(!n)throw Error(C(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(557));t[ae]=e}else cn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),t=!1}else a=Ar(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return e.flags&256?(ve(e),e):(ve(e),null);if(e.flags&128)throw Error(C(558))}return Et(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(l=vn(e),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error(C(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(C(317));l[ae]=e}else cn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),l=!1}else l=Ar(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),l=!0;if(!l)return e.flags&256?(ve(e),e):(ve(e),null)}return ve(e),e.flags&128?(e.lanes=a,e):(a=n!==null,t=t!==null&&t.memoizedState!==null,a&&(n=e.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==l&&(n.flags|=2048)),a!==t&&a&&(e.child.flags|=8192),_i(e,e.updateQueue),Et(e),null);case 4:return Jn(),t===null&&eu(e.stateNode.containerInfo),Et(e),null;case 10:return ua(e.type),Et(e),null;case 19:if($t(qt),n=e.memoizedState,n===null)return Et(e),null;if(l=(e.flags&128)!==0,i=n.rendering,i===null)if(l)vl(n,!1);else{if(Gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=bs(t),i!==null){for(e.flags|=128,vl(n,!1),t=i.updateQueue,e.updateQueue=t,_i(e,t),e.subtreeFlags=0,t=a,a=e.child;a!==null;)$d(a,t),a=a.sibling;return Ct(qt,qt.current&1|2),bt&&la(e,n.treeForkCount),e.child}t=t.sibling}n.tail!==null&&Te()>Ts&&(e.flags|=128,l=!0,vl(n,!1),e.lanes=4194304)}else{if(!l)if(t=bs(i),t!==null){if(e.flags|=128,l=!0,t=t.updateQueue,e.updateQueue=t,_i(e,t),vl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!i.alternate&&!bt)return Et(e),null}else 2*Te()-n.renderingStartTime>Ts&&a!==536870912&&(e.flags|=128,l=!0,vl(n,!1),e.lanes=4194304);n.isBackwards?(i.sibling=e.child,e.child=i):(t=n.last,t!==null?t.sibling=i:e.child=i,n.last=i)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Te(),t.sibling=null,a=qt.current,Ct(qt,l?a&1|2:a&1),bt&&la(e,n.treeForkCount),t):(Et(e),null);case 22:case 23:return ve(e),Oo(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?a&536870912&&!(e.flags&128)&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),a=e.updateQueue,a!==null&&_i(e,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==a&&(e.flags|=2048),t!==null&&$t(ln),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),ua(Qt),Et(e),null;case 25:return null;case 30:return null}throw Error(C(156,e.tag))}function kp(t,e){switch(Ao(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ua(Qt),Jn(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return cs(e),null;case 31:if(e.memoizedState!==null){if(ve(e),e.alternate===null)throw Error(C(340));cn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(ve(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));cn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(qt),null;case 4:return Jn(),null;case 10:return ua(e.type),null;case 22:case 23:return ve(e),Oo(),t!==null&&$t(ln),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ua(Qt),null;case 25:return null;default:return null}}function $h(t,e){switch(Ao(e),e.tag){case 3:ua(Qt),Jn();break;case 26:case 27:case 5:cs(e);break;case 4:Jn();break;case 31:e.memoizedState!==null&&ve(e);break;case 13:ve(e);break;case 19:$t(qt);break;case 10:ua(e.type);break;case 22:case 23:ve(e),Oo(),t!==null&&$t(ln);break;case 24:ua(Qt)}}function mi(t,e){try{var a=e.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var l=n.next;a=l;do{if((a.tag&t)===t){n=void 0;var i=a.create,s=a.inst;n=i(),s.destroy=n}a=a.next}while(a!==l)}}catch(r){kt(e,e.return,r)}}function La(t,e,a){try{var n=e.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var i=l.next;n=i;do{if((n.tag&t)===t){var s=n.inst,r=s.destroy;if(r!==void 0){s.destroy=void 0,l=e;var o=a,u=r;try{u()}catch(g){kt(l,o,g)}}}n=n.next}while(n!==i)}}catch(g){kt(e,e.return,g)}}function tm(t){var e=t.updateQueue;if(e!==null){var a=t.stateNode;try{oh(e,a)}catch(n){kt(t,t.return,n)}}}function em(t,e,a){a.props=dn(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(n){kt(t,e,n)}}function Hl(t,e){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof a=="function"?t.refCleanup=a(n):a.current=n}}catch(l){kt(t,e,l)}}function Ze(t,e){var a=t.ref,n=t.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(l){kt(t,e,l)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){kt(t,e,l)}else a.current=null}function am(t){var e=t.type,a=t.memoizedProps,n=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break t;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(l){kt(t,t.return,l)}}function Hr(t,e,a){try{var n=t.stateNode;Jp(n,t.type,a,e),n[ge]=e}catch(l){kt(t,t.return,l)}}function nm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fa(t.type)||t.tag===4}function Gr(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||nm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fa(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gc(t,e,a){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,e):(e=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,e.appendChild(t),a=a._reactRootContainer,a!=null||e.onclick!==null||(e.onclick=ra));else if(n!==4&&(n===27&&Fa(t.type)&&(a=t.stateNode,e=null),t=t.child,t!==null))for(Gc(t,e,a),t=t.sibling;t!==null;)Gc(t,e,a),t=t.sibling}function ws(t,e,a){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?a.insertBefore(t,e):a.appendChild(t);else if(n!==4&&(n===27&&Fa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ws(t,e,a),t=t.sibling;t!==null;)ws(t,e,a),t=t.sibling}function lm(t){var e=t.stateNode,a=t.memoizedProps;try{for(var n=t.type,l=e.attributes;l.length;)e.removeAttributeNode(l[0]);ie(e,n,a),e[ae]=t,e[ge]=a}catch(i){kt(t,t.return,i)}}var ia=!1,Lt=!1,qr=!1,hf=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function Ap(t,e){if(t=t.containerInfo,Zc=Os,t=Qd(t),To(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else t:{a=(a=t.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var l=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break t}var s=0,r=-1,o=-1,u=0,g=0,h=t,f=null;e:for(;;){for(var d;h!==a||l!==0&&h.nodeType!==3||(r=s+l),h!==i||n!==0&&h.nodeType!==3||(o=s+n),h.nodeType===3&&(s+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break e;if(f===a&&++u===l&&(r=s),f===i&&++g===n&&(o=s),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}a=r===-1||o===-1?null:{start:r,end:o}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fc={focusedElem:t,selectionRange:a},Os=!1,Pt=e;Pt!==null;)if(e=Pt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pt=t;else for(;Pt!==null;){switch(e=Pt,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)l=t[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,a=e,l=i.memoizedProps,i=i.memoizedState,n=a.stateNode;try{var y=dn(a.type,l);t=n.getSnapshotBeforeUpdate(y,i),n.__reactInternalSnapshotBeforeUpdate=t}catch(x){kt(a,a.return,x)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,a=t.nodeType,a===9)Jc(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Jc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(C(163))}if(t=e.sibling,t!==null){t.return=e.return,Pt=t;break}Pt=e.return}}function im(t,e,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:ea(t,a),n&4&&mi(5,a);break;case 1:if(ea(t,a),n&4)if(t=a.stateNode,e===null)try{t.componentDidMount()}catch(s){kt(a,a.return,s)}else{var l=dn(a.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(l,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){kt(a,a.return,s)}}n&64&&tm(a),n&512&&Hl(a,a.return);break;case 3:if(ea(t,a),n&64&&(t=a.updateQueue,t!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=a.child.stateNode;break;case 1:e=a.child.stateNode}try{oh(t,e)}catch(s){kt(a,a.return,s)}}break;case 27:e===null&&n&4&&lm(a);case 26:case 5:ea(t,a),e===null&&n&4&&am(a),n&512&&Hl(a,a.return);break;case 12:ea(t,a);break;case 31:ea(t,a),n&4&&cm(t,a);break;case 13:ea(t,a),n&4&&om(t,a),n&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Bp.bind(null,a),nb(t,a))));break;case 22:if(n=a.memoizedState!==null||ia,!n){e=e!==null&&e.memoizedState!==null||Lt,l=ia;var i=Lt;ia=n,(Lt=e)&&!i?na(t,a,(a.subtreeFlags&8772)!==0):ea(t,a),ia=l,Lt=i}break;case 30:break;default:ea(t,a)}}function sm(t){var e=t.alternate;e!==null&&(t.alternate=null,sm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&bo(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rt=null,de=!1;function ta(t,e,a){for(a=a.child;a!==null;)rm(t,e,a),a=a.sibling}function rm(t,e,a){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(ri,a)}catch{}switch(a.tag){case 26:Lt||Ze(a,e),ta(t,e,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Lt||Ze(a,e);var n=Rt,l=de;Fa(a.type)&&(Rt=a.stateNode,de=!1),ta(t,e,a),Yl(a.stateNode),Rt=n,de=l;break;case 5:Lt||Ze(a,e);case 6:if(n=Rt,l=de,Rt=null,ta(t,e,a),Rt=n,de=l,Rt!==null)if(de)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(a.stateNode)}catch(i){kt(a,e,i)}else try{Rt.removeChild(a.stateNode)}catch(i){kt(a,e,i)}break;case 18:Rt!==null&&(de?(t=Rt,jf(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),il(t)):jf(Rt,a.stateNode));break;case 4:n=Rt,l=de,Rt=a.stateNode.containerInfo,de=!0,ta(t,e,a),Rt=n,de=l;break;case 0:case 11:case 14:case 15:La(2,a,e),Lt||La(4,a,e),ta(t,e,a);break;case 1:Lt||(Ze(a,e),n=a.stateNode,typeof n.componentWillUnmount=="function"&&em(a,e,n)),ta(t,e,a);break;case 21:ta(t,e,a);break;case 22:Lt=(n=Lt)||a.memoizedState!==null,ta(t,e,a),Lt=n;break;default:ta(t,e,a)}}function cm(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{il(t)}catch(a){kt(e,e.return,a)}}}function om(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{il(t)}catch(a){kt(e,e.return,a)}}function zp(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new hf),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new hf),e;default:throw Error(C(435,t.tag))}}function Ci(t,e){var a=zp(t);e.forEach(function(n){if(!a.has(n)){a.add(n);var l=Hp.bind(null,t,n);n.then(l,l)}})}function ue(t,e){var a=e.deletions;if(a!==null)for(var n=0;n<a.length;n++){var l=a[n],i=t,s=e,r=s;t:for(;r!==null;){switch(r.tag){case 27:if(Fa(r.type)){Rt=r.stateNode,de=!1;break t}break;case 5:Rt=r.stateNode,de=!1;break t;case 3:case 4:Rt=r.stateNode.containerInfo,de=!0;break t}r=r.return}if(Rt===null)throw Error(C(160));rm(i,s,l),Rt=null,de=!1,i=l.alternate,i!==null&&(i.return=null),l.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)um(e,t),e=e.sibling}var Ve=null;function um(t,e){var a=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ue(e,t),fe(t),n&4&&(La(3,t,t.return),mi(3,t),La(5,t,t.return));break;case 1:ue(e,t),fe(t),n&512&&(Lt||a===null||Ze(a,a.return)),n&64&&ia&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var l=Ve;if(ue(e,t),fe(t),n&512&&(Lt||a===null||Ze(a,a.return)),n&4){var i=a!==null?a.memoizedState:null;if(n=t.memoizedState,a===null)if(n===null)if(t.stateNode===null){t:{n=t.type,a=t.memoizedProps,l=l.ownerDocument||l;e:switch(n){case"title":i=l.getElementsByTagName("title")[0],(!i||i[ui]||i[ae]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=l.createElement(n),l.head.insertBefore(i,l.querySelector("head > title"))),ie(i,n,a),i[ae]=t,Wt(i),n=i;break t;case"link":var s=Of("link","href",l).get(n+(a.href||""));if(s){for(var r=0;r<s.length;r++)if(i=s[r],i.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&i.getAttribute("rel")===(a.rel==null?null:a.rel)&&i.getAttribute("title")===(a.title==null?null:a.title)&&i.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){s.splice(r,1);break e}}i=l.createElement(n),ie(i,n,a),l.head.appendChild(i);break;case"meta":if(s=Of("meta","content",l).get(n+(a.content||""))){for(r=0;r<s.length;r++)if(i=s[r],i.getAttribute("content")===(a.content==null?null:""+a.content)&&i.getAttribute("name")===(a.name==null?null:a.name)&&i.getAttribute("property")===(a.property==null?null:a.property)&&i.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&i.getAttribute("charset")===(a.charSet==null?null:a.charSet)){s.splice(r,1);break e}}i=l.createElement(n),ie(i,n,a),l.head.appendChild(i);break;default:throw Error(C(468,n))}i[ae]=t,Wt(i),n=i}t.stateNode=n}else Df(l,t.type,t.stateNode);else t.stateNode=Ef(l,n,t.memoizedProps);else i!==n?(i===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):i.count--,n===null?Df(l,t.type,t.stateNode):Ef(l,n,t.memoizedProps)):n===null&&t.stateNode!==null&&Hr(t,t.memoizedProps,a.memoizedProps)}break;case 27:ue(e,t),fe(t),n&512&&(Lt||a===null||Ze(a,a.return)),a!==null&&n&4&&Hr(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ue(e,t),fe(t),n&512&&(Lt||a===null||Ze(a,a.return)),t.flags&32){l=t.stateNode;try{Pn(l,"")}catch(y){kt(t,t.return,y)}}n&4&&t.stateNode!=null&&(l=t.memoizedProps,Hr(t,l,a!==null?a.memoizedProps:l)),n&1024&&(qr=!0);break;case 6:if(ue(e,t),fe(t),n&4){if(t.stateNode===null)throw Error(C(162));n=t.memoizedProps,a=t.stateNode;try{a.nodeValue=n}catch(y){kt(t,t.return,y)}}break;case 3:if(as=null,l=Ve,Ve=_s(e.containerInfo),ue(e,t),Ve=l,fe(t),n&4&&a!==null&&a.memoizedState.isDehydrated)try{il(e.containerInfo)}catch(y){kt(t,t.return,y)}qr&&(qr=!1,fm(t));break;case 4:n=Ve,Ve=_s(t.stateNode.containerInfo),ue(e,t),fe(t),Ve=n;break;case 12:ue(e,t),fe(t);break;case 31:ue(e,t),fe(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ci(t,n)));break;case 13:ue(e,t),fe(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(er=Te()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ci(t,n)));break;case 22:l=t.memoizedState!==null;var o=a!==null&&a.memoizedState!==null,u=ia,g=Lt;if(ia=u||l,Lt=g||o,ue(e,t),Lt=g,ia=u,fe(t),n&8192)t:for(e=t.stateNode,e._visibility=l?e._visibility&-2:e._visibility|1,l&&(a===null||o||ia||Lt||tn(t)),a=null,e=t;;){if(e.tag===5||e.tag===26){if(a===null){o=a=e;try{if(i=o.stateNode,l)s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{r=o.stateNode;var h=o.memoizedProps.style,f=h!=null&&h.hasOwnProperty("display")?h.display:null;r.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(y){kt(o,o.return,y)}}}else if(e.tag===6){if(a===null){o=e;try{o.stateNode.nodeValue=l?"":o.memoizedProps}catch(y){kt(o,o.return,y)}}}else if(e.tag===18){if(a===null){o=e;try{var d=o.stateNode;l?kf(d,!0):kf(o.stateNode,!1)}catch(y){kt(o,o.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;a===e&&(a=null),e=e.return}a===e&&(a=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=t.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Ci(t,a))));break;case 19:ue(e,t),fe(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ci(t,n)));break;case 30:break;case 21:break;default:ue(e,t),fe(t)}}function fe(t){var e=t.flags;if(e&2){try{for(var a,n=t.return;n!==null;){if(nm(n)){a=n;break}n=n.return}if(a==null)throw Error(C(160));switch(a.tag){case 27:var l=a.stateNode,i=Gr(t);ws(t,i,l);break;case 5:var s=a.stateNode;a.flags&32&&(Pn(s,""),a.flags&=-33);var r=Gr(t);ws(t,r,s);break;case 3:case 4:var o=a.stateNode.containerInfo,u=Gr(t);Gc(t,u,o);break;default:throw Error(C(161))}}catch(g){kt(t,t.return,g)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;fm(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ea(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)im(t,e.alternate,e),e=e.sibling}function tn(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:La(4,e,e.return),tn(e);break;case 1:Ze(e,e.return);var a=e.stateNode;typeof a.componentWillUnmount=="function"&&em(e,e.return,a),tn(e);break;case 27:Yl(e.stateNode);case 26:case 5:Ze(e,e.return),tn(e);break;case 22:e.memoizedState===null&&tn(e);break;case 30:tn(e);break;default:tn(e)}t=t.sibling}}function na(t,e,a){for(a=a&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,l=t,i=e,s=i.flags;switch(i.tag){case 0:case 11:case 15:na(l,i,a),mi(4,i);break;case 1:if(na(l,i,a),n=i,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(u){kt(n,n.return,u)}if(n=i,l=n.updateQueue,l!==null){var r=n.stateNode;try{var o=l.shared.hiddenCallbacks;if(o!==null)for(l.shared.hiddenCallbacks=null,l=0;l<o.length;l++)ch(o[l],r)}catch(u){kt(n,n.return,u)}}a&&s&64&&tm(i),Hl(i,i.return);break;case 27:lm(i);case 26:case 5:na(l,i,a),a&&n===null&&s&4&&am(i),Hl(i,i.return);break;case 12:na(l,i,a);break;case 31:na(l,i,a),a&&s&4&&cm(l,i);break;case 13:na(l,i,a),a&&s&4&&om(l,i);break;case 22:i.memoizedState===null&&na(l,i,a),Hl(i,i.return);break;case 30:break;default:na(l,i,a)}e=e.sibling}}function Jo(t,e){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&di(a))}function Io(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&di(t))}function qe(t,e,a,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)dm(t,e,a,n),e=e.sibling}function dm(t,e,a,n){var l=e.flags;switch(e.tag){case 0:case 11:case 15:qe(t,e,a,n),l&2048&&mi(9,e);break;case 1:qe(t,e,a,n);break;case 3:qe(t,e,a,n),l&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&di(t)));break;case 12:if(l&2048){qe(t,e,a,n),t=e.stateNode;try{var i=e.memoizedProps,s=i.id,r=i.onPostCommit;typeof r=="function"&&r(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(o){kt(e,e.return,o)}}else qe(t,e,a,n);break;case 31:qe(t,e,a,n);break;case 13:qe(t,e,a,n);break;case 23:break;case 22:i=e.stateNode,s=e.alternate,e.memoizedState!==null?i._visibility&2?qe(t,e,a,n):Gl(t,e):i._visibility&2?qe(t,e,a,n):(i._visibility|=2,jn(t,e,a,n,(e.subtreeFlags&10256)!==0||!1)),l&2048&&Jo(s,e);break;case 24:qe(t,e,a,n),l&2048&&Io(e.alternate,e);break;default:qe(t,e,a,n)}}function jn(t,e,a,n,l){for(l=l&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,s=e,r=a,o=n,u=s.flags;switch(s.tag){case 0:case 11:case 15:jn(i,s,r,o,l),mi(8,s);break;case 23:break;case 22:var g=s.stateNode;s.memoizedState!==null?g._visibility&2?jn(i,s,r,o,l):Gl(i,s):(g._visibility|=2,jn(i,s,r,o,l)),l&&u&2048&&Jo(s.alternate,s);break;case 24:jn(i,s,r,o,l),l&&u&2048&&Io(s.alternate,s);break;default:jn(i,s,r,o,l)}e=e.sibling}}function Gl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var a=t,n=e,l=n.flags;switch(n.tag){case 22:Gl(a,n),l&2048&&Jo(n.alternate,n);break;case 24:Gl(a,n),l&2048&&Io(n.alternate,n);break;default:Gl(a,n)}e=e.sibling}}var Al=8192;function Sn(t,e,a){if(t.subtreeFlags&Al)for(t=t.child;t!==null;)hm(t,e,a),t=t.sibling}function hm(t,e,a){switch(t.tag){case 26:Sn(t,e,a),t.flags&Al&&t.memoizedState!==null&&gb(a,Ve,t.memoizedState,t.memoizedProps);break;case 5:Sn(t,e,a);break;case 3:case 4:var n=Ve;Ve=_s(t.stateNode.containerInfo),Sn(t,e,a),Ve=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Al,Al=16777216,Sn(t,e,a),Al=n):Sn(t,e,a));break;default:Sn(t,e,a)}}function mm(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Sl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var a=0;a<e.length;a++){var n=e[a];Pt=n,pm(n,t)}mm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gm(t),t=t.sibling}function gm(t){switch(t.tag){case 0:case 11:case 15:Sl(t),t.flags&2048&&La(9,t,t.return);break;case 3:Sl(t);break;case 12:Sl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,ts(t)):Sl(t);break;default:Sl(t)}}function ts(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var a=0;a<e.length;a++){var n=e[a];Pt=n,pm(n,t)}mm(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:La(8,e,e.return),ts(e);break;case 22:a=e.stateNode,a._visibility&2&&(a._visibility&=-3,ts(e));break;default:ts(e)}t=t.sibling}}function pm(t,e){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:La(8,a,e);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:di(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Pt=n;else t:for(a=t;Pt!==null;){n=Pt;var l=n.sibling,i=n.return;if(sm(n),n===a){Pt=null;break t}if(l!==null){l.return=i,Pt=l;break t}Pt=i}}}var _p={getCacheForType:function(t){var e=le(Qt),a=e.data.get(t);return a===void 0&&(a=t(),e.data.set(t,a)),a},cacheSignal:function(){return le(Qt).controller.signal}},Cp=typeof WeakMap=="function"?WeakMap:Map,wt=0,_t=null,ht=null,mt=0,jt=0,xe=null,za=!1,fl=!1,Po=!1,pa=0,Gt=0,Qa=0,rn=0,Wo=0,we=0,el=0,ql=null,he=null,qc=!1,er=0,bm=0,Ts=1/0,Ns=null,Ra=null,Kt=0,Ba=null,al=null,fa=0,Vc=0,Yc=null,ym=null,Vl=0,Xc=null;function je(){return wt&2&&mt!==0?mt&-mt:tt.T!==null?tu():kd()}function xm(){if(we===0)if(!(mt&536870912)||bt){var t=Ti;Ti<<=1,!(Ti&3932160)&&(Ti=262144),we=t}else we=536870912;return t=Ae.current,t!==null&&(t.flags|=32),we}function me(t,e,a){(t===_t&&(jt===2||jt===9)||t.cancelPendingCommit!==null)&&(nl(t,0),_a(t,mt,we,!1)),oi(t,a),(!(wt&2)||t!==_t)&&(t===_t&&(!(wt&2)&&(rn|=a),Gt===4&&_a(t,mt,we,!1)),Je(t))}function vm(t,e,a){if(wt&6)throw Error(C(327));var n=!a&&(e&127)===0&&(e&t.expiredLanes)===0||ci(t,e),l=n?Dp(t,e):Vr(t,e,!0),i=n;do{if(l===0){fl&&!n&&_a(t,e,0,!1);break}else{if(a=t.current.alternate,i&&!Ep(a)){l=Vr(t,e,!1),i=!1;continue}if(l===2){if(i=e,t.errorRecoveryDisabledLanes&i)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;t:{var r=t;l=ql;var o=r.current.memoizedState.isDehydrated;if(o&&(nl(r,s).flags|=256),s=Vr(r,s,!1),s!==2){if(Po&&!o){r.errorRecoveryDisabledLanes|=i,rn|=i,l=4;break t}i=he,he=l,i!==null&&(he===null?he=i:he.push.apply(he,i))}l=s}if(i=!1,l!==2)continue}}if(l===1){nl(t,0),_a(t,e,0,!0);break}t:{switch(n=t,i=l,i){case 0:case 1:throw Error(C(345));case 4:if((e&4194048)!==e)break;case 6:_a(n,e,we,!za);break t;case 2:he=null;break;case 3:case 5:break;default:throw Error(C(329))}if((e&62914560)===e&&(l=er+300-Te(),10<l)){if(_a(n,e,we,!za),Ls(n,0,!0)!==0)break t;fa=e,n.timeoutHandle=qm(mf.bind(null,n,a,he,Ns,qc,e,we,rn,el,za,i,"Throttled",-0,0),l);break t}mf(n,a,he,Ns,qc,e,we,rn,el,za,i,null,-0,0)}}break}while(!0);Je(t)}function mf(t,e,a,n,l,i,s,r,o,u,g,h,f,d){if(t.timeoutHandle=-1,h=e.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ra},hm(e,i,h);var y=(i&62914560)===i?er-Te():(i&4194048)===i?bm-Te():0;if(y=pb(h,y),y!==null){fa=i,t.cancelPendingCommit=y(pf.bind(null,t,e,i,a,n,l,s,r,o,g,h,null,f,d)),_a(t,i,s,!u);return}}pf(t,e,i,a,n,l,s,r,o)}function Ep(t){for(var e=t;;){var a=e.tag;if((a===0||a===11||a===15)&&e.flags&16384&&(a=e.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var l=a[n],i=l.getSnapshot;l=l.value;try{if(!ke(i(),l))return!1}catch{return!1}}if(a=e.child,e.subtreeFlags&16384&&a!==null)a.return=e,e=a;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _a(t,e,a,n){e&=~Wo,e&=~rn,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var l=e;0<l;){var i=31-Me(l),s=1<<i;n[i]=-1,l&=~s}a!==0&&Nd(t,a,e)}function ar(){return wt&6?!0:(gi(0),!1)}function $o(){if(ht!==null){if(jt===0)var t=ht.return;else t=ht,ca=yn=null,Ho(t),Zn=null,Pl=0,t=ht;for(;t!==null;)$h(t.alternate,t),t=t.return;ht=null}}function nl(t,e){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Wp(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fa=0,$o(),_t=t,ht=a=oa(t.current,null),mt=e,jt=0,xe=null,za=!1,fl=ci(t,e),Po=!1,el=we=Wo=rn=Qa=Gt=0,he=ql=null,qc=!1,e&8&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var l=31-Me(n),i=1<<l;e|=t[l],n&=~i}return pa=e,Ks(),a}function Sm(t,e){st=null,tt.H=$l,e===ul||e===Is?(e=Qu(),jt=3):e===Co?(e=Qu(),jt=4):jt=e===Fo?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,xe=e,ht===null&&(Gt=1,vs(t,De(e,t.current)))}function wm(){var t=Ae.current;return t===null?!0:(mt&4194048)===mt?Re===null:(mt&62914560)===mt||mt&536870912?t===Re:!1}function Tm(){var t=tt.H;return tt.H=$l,t===null?$l:t}function Nm(){var t=tt.A;return tt.A=_p,t}function Ms(){Gt=4,za||(mt&4194048)!==mt&&Ae.current!==null||(fl=!0),!(Qa&134217727)&&!(rn&134217727)||_t===null||_a(_t,mt,we,!1)}function Vr(t,e,a){var n=wt;wt|=2;var l=Tm(),i=Nm();(_t!==t||mt!==e)&&(Ns=null,nl(t,e)),e=!1;var s=Gt;t:do try{if(jt!==0&&ht!==null){var r=ht,o=xe;switch(jt){case 8:$o(),s=6;break t;case 3:case 2:case 9:case 6:Ae.current===null&&(e=!0);var u=jt;if(jt=0,xe=null,Vn(t,r,o,u),a&&fl){s=0;break t}break;default:u=jt,jt=0,xe=null,Vn(t,r,o,u)}}Op(),s=Gt;break}catch(g){Sm(t,g)}while(!0);return e&&t.shellSuspendCounter++,ca=yn=null,wt=n,tt.H=l,tt.A=i,ht===null&&(_t=null,mt=0,Ks()),s}function Op(){for(;ht!==null;)Mm(ht)}function Dp(t,e){var a=wt;wt|=2;var n=Tm(),l=Nm();_t!==t||mt!==e?(Ns=null,Ts=Te()+500,nl(t,e)):fl=ci(t,e);t:do try{if(jt!==0&&ht!==null){e=ht;var i=xe;e:switch(jt){case 1:jt=0,xe=null,Vn(t,e,i,1);break;case 2:case 9:if(Lu(i)){jt=0,xe=null,gf(e);break}e=function(){jt!==2&&jt!==9||_t!==t||(jt=7),Je(t)},i.then(e,e);break t;case 3:jt=7;break t;case 4:jt=5;break t;case 7:Lu(i)?(jt=0,xe=null,gf(e)):(jt=0,xe=null,Vn(t,e,i,7));break;case 5:var s=null;switch(ht.tag){case 26:s=ht.memoizedState;case 5:case 27:var r=ht;if(s?Qm(s):r.stateNode.complete){jt=0,xe=null;var o=r.sibling;if(o!==null)ht=o;else{var u=r.return;u!==null?(ht=u,nr(u)):ht=null}break e}}jt=0,xe=null,Vn(t,e,i,5);break;case 6:jt=0,xe=null,Vn(t,e,i,6);break;case 8:$o(),Gt=6;break t;default:throw Error(C(462))}}Up();break}catch(g){Sm(t,g)}while(!0);return ca=yn=null,tt.H=n,tt.A=l,wt=a,ht!==null?0:(_t=null,mt=0,Ks(),Gt)}function Up(){for(;ht!==null&&!lg();)Mm(ht)}function Mm(t){var e=Wh(t.alternate,t,pa);t.memoizedProps=t.pendingProps,e===null?nr(t):ht=e}function gf(t){var e=t,a=e.alternate;switch(e.tag){case 15:case 0:e=cf(a,e,e.pendingProps,e.type,void 0,mt);break;case 11:e=cf(a,e,e.pendingProps,e.type.render,e.ref,mt);break;case 5:Ho(e);default:$h(a,e),e=ht=$d(e,pa),e=Wh(a,e,pa)}t.memoizedProps=t.pendingProps,e===null?nr(t):ht=e}function Vn(t,e,a,n){ca=yn=null,Ho(e),Zn=null,Pl=0;var l=e.return;try{if(Tp(t,l,e,a,mt)){Gt=1,vs(t,De(a,t.current)),ht=null;return}}catch(i){if(l!==null)throw ht=l,i;Gt=1,vs(t,De(a,t.current)),ht=null;return}e.flags&32768?(bt||n===1?t=!0:fl||mt&536870912?t=!1:(za=t=!0,(n===2||n===9||n===3||n===6)&&(n=Ae.current,n!==null&&n.tag===13&&(n.flags|=16384))),jm(e,t)):nr(e)}function nr(t){var e=t;do{if(e.flags&32768){jm(e,za);return}t=e.return;var a=jp(e.alternate,e,pa);if(a!==null){ht=a;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);Gt===0&&(Gt=5)}function jm(t,e){do{var a=kp(t.alternate,t);if(a!==null){a.flags&=32767,ht=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!e&&(t=t.sibling,t!==null)){ht=t;return}ht=t=a}while(t!==null);Gt=6,ht=null}function pf(t,e,a,n,l,i,s,r,o){t.cancelPendingCommit=null;do lr();while(Kt!==0);if(wt&6)throw Error(C(327));if(e!==null){if(e===t.current)throw Error(C(177));if(i=e.lanes|e.childLanes,i|=No,mg(t,a,i,s,r,o),t===_t&&(ht=_t=null,mt=0),al=e,Ba=t,fa=a,Vc=i,Yc=l,ym=n,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Gp(os,function(){return Cm(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,e.subtreeFlags&13878||n){n=tt.T,tt.T=null,l=Tt.p,Tt.p=2,s=wt,wt|=4;try{Ap(t,e,a)}finally{wt=s,Tt.p=l,tt.T=n}}Kt=1,km(),Am(),zm()}}function km(){if(Kt===1){Kt=0;var t=Ba,e=al,a=(e.flags&13878)!==0;if(e.subtreeFlags&13878||a){a=tt.T,tt.T=null;var n=Tt.p;Tt.p=2;var l=wt;wt|=4;try{um(e,t);var i=Fc,s=Qd(t.containerInfo),r=i.focusedElem,o=i.selectionRange;if(s!==r&&r&&r.ownerDocument&&Ld(r.ownerDocument.documentElement,r)){if(o!==null&&To(r)){var u=o.start,g=o.end;if(g===void 0&&(g=u),"selectionStart"in r)r.selectionStart=u,r.selectionEnd=Math.min(g,r.value.length);else{var h=r.ownerDocument||document,f=h&&h.defaultView||window;if(f.getSelection){var d=f.getSelection(),y=r.textContent.length,x=Math.min(o.start,y),w=o.end===void 0?x:Math.min(o.end,y);!d.extend&&x>w&&(s=w,w=x,x=s);var p=Bu(r,x),m=Bu(r,w);if(p&&m&&(d.rangeCount!==1||d.anchorNode!==p.node||d.anchorOffset!==p.offset||d.focusNode!==m.node||d.focusOffset!==m.offset)){var b=h.createRange();b.setStart(p.node,p.offset),d.removeAllRanges(),x>w?(d.addRange(b),d.extend(m.node,m.offset)):(b.setEnd(m.node,m.offset),d.addRange(b))}}}}for(h=[],d=r;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<h.length;r++){var S=h[r];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}Os=!!Zc,Fc=Zc=null}finally{wt=l,Tt.p=n,tt.T=a}}t.current=e,Kt=2}}function Am(){if(Kt===2){Kt=0;var t=Ba,e=al,a=(e.flags&8772)!==0;if(e.subtreeFlags&8772||a){a=tt.T,tt.T=null;var n=Tt.p;Tt.p=2;var l=wt;wt|=4;try{im(t,e.alternate,e)}finally{wt=l,Tt.p=n,tt.T=a}}Kt=3}}function zm(){if(Kt===4||Kt===3){Kt=0,ig();var t=Ba,e=al,a=fa,n=ym;e.subtreeFlags&10256||e.flags&10256?Kt=5:(Kt=0,al=Ba=null,_m(t,t.pendingLanes));var l=t.pendingLanes;if(l===0&&(Ra=null),po(a),e=e.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(ri,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=tt.T,l=Tt.p,Tt.p=2,tt.T=null;try{for(var i=t.onRecoverableError,s=0;s<n.length;s++){var r=n[s];i(r.value,{componentStack:r.stack})}}finally{tt.T=e,Tt.p=l}}fa&3&&lr(),Je(t),l=t.pendingLanes,a&261930&&l&42?t===Xc?Vl++:(Vl=0,Xc=t):Vl=0,gi(0)}}function _m(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,di(e)))}function lr(){return km(),Am(),zm(),Cm()}function Cm(){if(Kt!==5)return!1;var t=Ba,e=Vc;Vc=0;var a=po(fa),n=tt.T,l=Tt.p;try{Tt.p=32>a?32:a,tt.T=null,a=Yc,Yc=null;var i=Ba,s=fa;if(Kt=0,al=Ba=null,fa=0,wt&6)throw Error(C(331));var r=wt;if(wt|=4,gm(i.current),dm(i,i.current,s,a),wt=r,gi(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(ri,i)}catch{}return!0}finally{Tt.p=l,tt.T=n,_m(t,e)}}function bf(t,e,a){e=De(a,e),e=Rc(t.stateNode,e,2),t=Ua(t,e,2),t!==null&&(oi(t,2),Je(t))}function kt(t,e,a){if(t.tag===3)bf(t,t,a);else for(;e!==null;){if(e.tag===3){bf(e,t,a);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ra===null||!Ra.has(n))){t=De(a,t),a=Zh(2),n=Ua(e,a,2),n!==null&&(Fh(a,n,e,t),oi(n,2),Je(n));break}}e=e.return}}function Yr(t,e,a){var n=t.pingCache;if(n===null){n=t.pingCache=new Cp;var l=new Set;n.set(e,l)}else l=n.get(e),l===void 0&&(l=new Set,n.set(e,l));l.has(a)||(Po=!0,l.add(a),t=Rp.bind(null,t,e,a),e.then(t,t))}function Rp(t,e,a){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,_t===t&&(mt&a)===a&&(Gt===4||Gt===3&&(mt&62914560)===mt&&300>Te()-er?!(wt&2)&&nl(t,0):Wo|=a,el===mt&&(el=0)),Je(t)}function Em(t,e){e===0&&(e=Td()),t=bn(t,e),t!==null&&(oi(t,e),Je(t))}function Bp(t){var e=t.memoizedState,a=0;e!==null&&(a=e.retryLane),Em(t,a)}function Hp(t,e){var a=0;switch(t.tag){case 31:case 13:var n=t.stateNode,l=t.memoizedState;l!==null&&(a=l.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(C(314))}n!==null&&n.delete(e),Em(t,a)}function Gp(t,e){return mo(t,e)}var js=null,kn=null,Lc=!1,ks=!1,Xr=!1,Ca=0;function Je(t){t!==kn&&t.next===null&&(kn===null?js=kn=t:kn=kn.next=t),ks=!0,Lc||(Lc=!0,Vp())}function gi(t,e){if(!Xr&&ks){Xr=!0;do for(var a=!1,n=js;n!==null;){if(t!==0){var l=n.pendingLanes;if(l===0)var i=0;else{var s=n.suspendedLanes,r=n.pingedLanes;i=(1<<31-Me(42|t)+1)-1,i&=l&~(s&~r),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(a=!0,yf(n,i))}else i=mt,i=Ls(n,n===_t?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(i&3)||ci(n,i)||(a=!0,yf(n,i));n=n.next}while(a);Xr=!1}}function qp(){Om()}function Om(){ks=Lc=!1;var t=0;Ca!==0&&Pp()&&(t=Ca);for(var e=Te(),a=null,n=js;n!==null;){var l=n.next,i=Dm(n,e);i===0?(n.next=null,a===null?js=l:a.next=l,l===null&&(kn=a)):(a=n,(t!==0||i&3)&&(ks=!0)),n=l}Kt!==0&&Kt!==5||gi(t),Ca!==0&&(Ca=0)}function Dm(t,e){for(var a=t.suspendedLanes,n=t.pingedLanes,l=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var s=31-Me(i),r=1<<s,o=l[s];o===-1?(!(r&a)||r&n)&&(l[s]=hg(r,e)):o<=e&&(t.expiredLanes|=r),i&=~r}if(e=_t,a=mt,a=Ls(t,t===e?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,a===0||t===e&&(jt===2||jt===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&br(n),t.callbackNode=null,t.callbackPriority=0;if(!(a&3)||ci(t,a)){if(e=a&-a,e===t.callbackPriority)return e;switch(n!==null&&br(n),po(a)){case 2:case 8:a=Sd;break;case 32:a=os;break;case 268435456:a=wd;break;default:a=os}return n=Um.bind(null,t),a=mo(a,n),t.callbackPriority=e,t.callbackNode=a,e}return n!==null&&n!==null&&br(n),t.callbackPriority=2,t.callbackNode=null,2}function Um(t,e){if(Kt!==0&&Kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(lr()&&t.callbackNode!==a)return null;var n=mt;return n=Ls(t,t===_t?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(vm(t,n,e),Dm(t,Te()),t.callbackNode!=null&&t.callbackNode===a?Um.bind(null,t):null)}function yf(t,e){if(lr())return null;vm(t,e,!0)}function Vp(){$p(function(){wt&6?mo(vd,qp):Om()})}function tu(){if(Ca===0){var t=Wn;t===0&&(t=wi,wi<<=1,!(wi&261888)&&(wi=256)),Ca=t}return Ca}function xf(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Qi(""+t)}function vf(t,e){var a=e.ownerDocument.createElement("input");return a.name=e.name,a.value=e.value,t.id&&a.setAttribute("form",t.id),e.parentNode.insertBefore(a,e),t=new FormData(t),a.parentNode.removeChild(a),t}function Yp(t,e,a,n,l){if(e==="submit"&&a&&a.stateNode===l){var i=xf((l[ge]||null).action),s=n.submitter;s&&(e=(e=s[ge]||null)?xf(e.formAction):s.getAttribute("formAction"),e!==null&&(i=e,s=null));var r=new Qs("action","action",null,n,l);t.push({event:r,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ca!==0){var o=s?vf(l,s):new FormData(l);Dc(a,{pending:!0,data:o,method:l.method,action:i},null,o)}}else typeof i=="function"&&(r.preventDefault(),o=s?vf(l,s):new FormData(l),Dc(a,{pending:!0,data:o,method:l.method,action:i},i,o))},currentTarget:l}]})}}for(var Lr=0;Lr<wc.length;Lr++){var Qr=wc[Lr],Xp=Qr.toLowerCase(),Lp=Qr[0].toUpperCase()+Qr.slice(1);Xe(Xp,"on"+Lp)}Xe(Fd,"onAnimationEnd");Xe(Kd,"onAnimationIteration");Xe(Jd,"onAnimationStart");Xe("dblclick","onDoubleClick");Xe("focusin","onFocus");Xe("focusout","onBlur");Xe(sp,"onTransitionRun");Xe(rp,"onTransitionStart");Xe(cp,"onTransitionCancel");Xe(Id,"onTransitionEnd");In("onMouseEnter",["mouseout","mouseover"]);In("onMouseLeave",["mouseout","mouseover"]);In("onPointerEnter",["pointerout","pointerover"]);In("onPointerLeave",["pointerout","pointerover"]);mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ti));function Rm(t,e){e=(e&4)!==0;for(var a=0;a<t.length;a++){var n=t[a],l=n.event;n=n.listeners;t:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var r=n[s],o=r.instance,u=r.currentTarget;if(r=r.listener,o!==i&&l.isPropagationStopped())break t;i=r,l.currentTarget=u;try{i(l)}catch(g){fs(g)}l.currentTarget=null,i=o}else for(s=0;s<n.length;s++){if(r=n[s],o=r.instance,u=r.currentTarget,r=r.listener,o!==i&&l.isPropagationStopped())break t;i=r,l.currentTarget=u;try{i(l)}catch(g){fs(g)}l.currentTarget=null,i=o}}}}function dt(t,e){var a=e[mc];a===void 0&&(a=e[mc]=new Set);var n=t+"__bubble";a.has(n)||(Bm(e,t,2,!1),a.add(n))}function Zr(t,e,a){var n=0;e&&(n|=4),Bm(a,t,n,e)}var Ei="_reactListening"+Math.random().toString(36).slice(2);function eu(t){if(!t[Ei]){t[Ei]=!0,Ad.forEach(function(a){a!=="selectionchange"&&(Qp.has(a)||Zr(a,!1,t),Zr(a,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ei]||(e[Ei]=!0,Zr("selectionchange",!1,e))}}function Bm(t,e,a,n){switch(Im(e)){case 2:var l=xb;break;case 8:l=vb;break;default:l=iu}a=l.bind(null,e,a,t),l=void 0,!xc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),n?l!==void 0?t.addEventListener(e,a,{capture:!0,passive:l}):t.addEventListener(e,a,!0):l!==void 0?t.addEventListener(e,a,{passive:l}):t.addEventListener(e,a,!1)}function Fr(t,e,a,n,l){var i=n;if(!(e&1)&&!(e&2)&&n!==null)t:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var r=n.stateNode.containerInfo;if(r===l)break;if(s===4)for(s=n.return;s!==null;){var o=s.tag;if((o===3||o===4)&&s.stateNode.containerInfo===l)return;s=s.return}for(;r!==null;){if(s=En(r),s===null)return;if(o=s.tag,o===5||o===6||o===26||o===27){n=i=s;continue t}r=r.parentNode}}n=n.return}Rd(function(){var u=i,g=xo(a),h=[];t:{var f=Pd.get(t);if(f!==void 0){var d=Qs,y=t;switch(t){case"keypress":if(Fi(a)===0)break t;case"keydown":case"keyup":d=Hg;break;case"focusin":y="focus",d=wr;break;case"focusout":y="blur",d=wr;break;case"beforeblur":case"afterblur":d=wr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=jg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Vg;break;case Fd:case Kd:case Jd:d=zg;break;case Id:d=Xg;break;case"scroll":case"scrollend":d=Ng;break;case"wheel":d=Qg;break;case"copy":case"cut":case"paste":d=Cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=zu;break;case"toggle":case"beforetoggle":d=Fg}var x=(e&4)!==0,w=!x&&(t==="scroll"||t==="scrollend"),p=x?f!==null?f+"Capture":null:f;x=[];for(var m=u,b;m!==null;){var S=m;if(b=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||b===null||p===null||(S=Zl(m,p),S!=null&&x.push(ei(m,S,b))),w)break;m=m.return}0<x.length&&(f=new d(f,y,null,a,g),h.push({event:f,listeners:x}))}}if(!(e&7)){t:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&a!==yc&&(y=a.relatedTarget||a.fromElement)&&(En(y)||y[rl]))break t;if((d||f)&&(f=g.window===g?g:(f=g.ownerDocument)?f.defaultView||f.parentWindow:window,d?(y=a.relatedTarget||a.toElement,d=u,y=y?En(y):null,y!==null&&(w=si(y),x=y.tag,y!==w||x!==5&&x!==27&&x!==6)&&(y=null)):(d=null,y=u),d!==y)){if(x=ku,S="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=zu,S="onPointerLeave",p="onPointerEnter",m="pointer"),w=d==null?f:jl(d),b=y==null?f:jl(y),f=new x(S,m+"leave",d,a,g),f.target=w,f.relatedTarget=b,S=null,En(g)===u&&(x=new x(p,m+"enter",y,a,g),x.target=b,x.relatedTarget=w,S=x),w=S,d&&y)e:{for(x=Zp,p=d,m=y,b=0,S=p;S;S=x(S))b++;S=0;for(var T=m;T;T=x(T))S++;for(;0<b-S;)p=x(p),b--;for(;0<S-b;)m=x(m),S--;for(;b--;){if(p===m||m!==null&&p===m.alternate){x=p;break e}p=x(p),m=x(m)}x=null}else x=null;d!==null&&Sf(h,f,d,x,!1),y!==null&&w!==null&&Sf(h,w,y,x,!0)}}t:{if(f=u?jl(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var N=Ou;else if(Eu(f))if(Yd)N=np;else{N=ep;var M=tp}else d=f.nodeName,!d||d.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?u&&yo(u.elementType)&&(N=Ou):N=ap;if(N&&(N=N(t,u))){Vd(h,N,a,g);break t}M&&M(t,f,u),t==="focusout"&&u&&f.type==="number"&&u.memoizedProps.value!=null&&bc(f,"number",f.value)}switch(M=u?jl(u):window,t){case"focusin":(Eu(M)||M.contentEditable==="true")&&(Un=M,vc=u,El=null);break;case"focusout":El=vc=Un=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,Hu(h,a,g);break;case"selectionchange":if(ip)break;case"keydown":case"keyup":Hu(h,a,g)}var v;if(wo)t:{switch(t){case"compositionstart":var k="onCompositionStart";break t;case"compositionend":k="onCompositionEnd";break t;case"compositionupdate":k="onCompositionUpdate";break t}k=void 0}else Dn?Gd(t,a)&&(k="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(k="onCompositionStart");k&&(Hd&&a.locale!=="ko"&&(Dn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Dn&&(v=Bd()):(Aa=g,vo="value"in Aa?Aa.value:Aa.textContent,Dn=!0)),M=As(u,k),0<M.length&&(k=new Au(k,t,null,a,g),h.push({event:k,listeners:M}),v?k.data=v:(v=qd(a),v!==null&&(k.data=v)))),(v=Jg?Ig(t,a):Pg(t,a))&&(k=As(u,"onBeforeInput"),0<k.length&&(M=new Au("onBeforeInput","beforeinput",null,a,g),h.push({event:M,listeners:k}),M.data=v)),Yp(h,t,u,a,g)}Rm(h,e)})}function ei(t,e,a){return{instance:t,listener:e,currentTarget:a}}function As(t,e){for(var a=e+"Capture",n=[];t!==null;){var l=t,i=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||i===null||(l=Zl(t,a),l!=null&&n.unshift(ei(t,l,i)),l=Zl(t,e),l!=null&&n.push(ei(t,l,i))),t.tag===3)return n;t=t.return}return[]}function Zp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sf(t,e,a,n,l){for(var i=e._reactName,s=[];a!==null&&a!==n;){var r=a,o=r.alternate,u=r.stateNode;if(r=r.tag,o!==null&&o===n)break;r!==5&&r!==26&&r!==27||u===null||(o=u,l?(u=Zl(a,i),u!=null&&s.unshift(ei(a,u,o))):l||(u=Zl(a,i),u!=null&&s.push(ei(a,u,o)))),a=a.return}s.length!==0&&t.push({event:e,listeners:s})}var Fp=/\r\n?/g,Kp=/\u0000|\uFFFD/g;function wf(t){return(typeof t=="string"?t:""+t).replace(Fp,`
`).replace(Kp,"")}function Hm(t,e){return e=wf(e),wf(t)===e}function At(t,e,a,n,l,i){switch(a){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||Pn(t,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&Pn(t,""+n);break;case"className":Mi(t,"class",n);break;case"tabIndex":Mi(t,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Mi(t,a,n);break;case"style":Ud(t,n,i);break;case"data":if(e!=="object"){Mi(t,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||a!=="href")){t.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(a);break}n=Qi(""+n),t.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(a==="formAction"?(e!=="input"&&At(t,e,"name",l.name,l,null),At(t,e,"formEncType",l.formEncType,l,null),At(t,e,"formMethod",l.formMethod,l,null),At(t,e,"formTarget",l.formTarget,l,null)):(At(t,e,"encType",l.encType,l,null),At(t,e,"method",l.method,l,null),At(t,e,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(a);break}n=Qi(""+n),t.setAttribute(a,n);break;case"onClick":n!=null&&(t.onclick=ra);break;case"onScroll":n!=null&&dt("scroll",t);break;case"onScrollEnd":n!=null&&dt("scrollend",t);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(C(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(C(60));t.innerHTML=a}}break;case"multiple":t.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":t.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){t.removeAttribute("xlink:href");break}a=Qi(""+n),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(a,""+n):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":n===!0?t.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(a,n):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?t.setAttribute(a,n):t.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?t.removeAttribute(a):t.setAttribute(a,n);break;case"popover":dt("beforetoggle",t),dt("toggle",t),Li(t,"popover",n);break;case"xlinkActuate":We(t,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":We(t,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":We(t,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":We(t,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":We(t,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":We(t,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":We(t,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":We(t,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":We(t,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Li(t,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wg.get(a)||a,Li(t,a,n))}}function Qc(t,e,a,n,l,i){switch(a){case"style":Ud(t,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(C(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(C(60));t.innerHTML=a}}break;case"children":typeof n=="string"?Pn(t,n):(typeof n=="number"||typeof n=="bigint")&&Pn(t,""+n);break;case"onScroll":n!=null&&dt("scroll",t);break;case"onScrollEnd":n!=null&&dt("scrollend",t);break;case"onClick":n!=null&&(t.onclick=ra);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zd.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),e=a.slice(2,l?a.length-7:void 0),i=t[ge]||null,i=i!=null?i[a]:null,typeof i=="function"&&t.removeEventListener(e,i,l),typeof n=="function")){typeof i!="function"&&i!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(e,n,l);break t}a in t?t[a]=n:n===!0?t.setAttribute(a,""):Li(t,a,n)}}}function ie(t,e,a){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",t),dt("load",t);var n=!1,l=!1,i;for(i in a)if(a.hasOwnProperty(i)){var s=a[i];if(s!=null)switch(i){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(C(137,e));default:At(t,e,i,s,a,null)}}l&&At(t,e,"srcSet",a.srcSet,a,null),n&&At(t,e,"src",a.src,a,null);return;case"input":dt("invalid",t);var r=i=s=l=null,o=null,u=null;for(n in a)if(a.hasOwnProperty(n)){var g=a[n];if(g!=null)switch(n){case"name":l=g;break;case"type":s=g;break;case"checked":o=g;break;case"defaultChecked":u=g;break;case"value":i=g;break;case"defaultValue":r=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(C(137,e));break;default:At(t,e,n,g,a,null)}}Ed(t,i,r,o,u,s,l,!1);return;case"select":dt("invalid",t),n=s=i=null;for(l in a)if(a.hasOwnProperty(l)&&(r=a[l],r!=null))switch(l){case"value":i=r;break;case"defaultValue":s=r;break;case"multiple":n=r;default:At(t,e,l,r,a,null)}e=i,a=s,t.multiple=!!n,e!=null?Xn(t,!!n,e,!1):a!=null&&Xn(t,!!n,a,!0);return;case"textarea":dt("invalid",t),i=l=n=null;for(s in a)if(a.hasOwnProperty(s)&&(r=a[s],r!=null))switch(s){case"value":n=r;break;case"defaultValue":l=r;break;case"children":i=r;break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(C(91));break;default:At(t,e,s,r,a,null)}Dd(t,n,l,i);return;case"option":for(o in a)if(a.hasOwnProperty(o)&&(n=a[o],n!=null))switch(o){case"selected":t.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:At(t,e,o,n,a,null)}return;case"dialog":dt("beforetoggle",t),dt("toggle",t),dt("cancel",t),dt("close",t);break;case"iframe":case"object":dt("load",t);break;case"video":case"audio":for(n=0;n<ti.length;n++)dt(ti[n],t);break;case"image":dt("error",t),dt("load",t);break;case"details":dt("toggle",t);break;case"embed":case"source":case"link":dt("error",t),dt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in a)if(a.hasOwnProperty(u)&&(n=a[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(C(137,e));default:At(t,e,u,n,a,null)}return;default:if(yo(e)){for(g in a)a.hasOwnProperty(g)&&(n=a[g],n!==void 0&&Qc(t,e,g,n,a,void 0));return}}for(r in a)a.hasOwnProperty(r)&&(n=a[r],n!=null&&At(t,e,r,n,a,null))}function Jp(t,e,a,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,i=null,s=null,r=null,o=null,u=null,g=null;for(d in a){var h=a[d];if(a.hasOwnProperty(d)&&h!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":o=h;default:n.hasOwnProperty(d)||At(t,e,d,null,n,h)}}for(var f in n){var d=n[f];if(h=a[f],n.hasOwnProperty(f)&&(d!=null||h!=null))switch(f){case"type":i=d;break;case"name":l=d;break;case"checked":u=d;break;case"defaultChecked":g=d;break;case"value":s=d;break;case"defaultValue":r=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(C(137,e));break;default:d!==h&&At(t,e,f,d,n,h)}}pc(t,s,r,o,u,g,i,l);return;case"select":d=s=r=f=null;for(i in a)if(o=a[i],a.hasOwnProperty(i)&&o!=null)switch(i){case"value":break;case"multiple":d=o;default:n.hasOwnProperty(i)||At(t,e,i,null,n,o)}for(l in n)if(i=n[l],o=a[l],n.hasOwnProperty(l)&&(i!=null||o!=null))switch(l){case"value":f=i;break;case"defaultValue":r=i;break;case"multiple":s=i;default:i!==o&&At(t,e,l,i,n,o)}e=r,a=s,n=d,f!=null?Xn(t,!!a,f,!1):!!n!=!!a&&(e!=null?Xn(t,!!a,e,!0):Xn(t,!!a,a?[]:"",!1));return;case"textarea":d=f=null;for(r in a)if(l=a[r],a.hasOwnProperty(r)&&l!=null&&!n.hasOwnProperty(r))switch(r){case"value":break;case"children":break;default:At(t,e,r,null,n,l)}for(s in n)if(l=n[s],i=a[s],n.hasOwnProperty(s)&&(l!=null||i!=null))switch(s){case"value":f=l;break;case"defaultValue":d=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(C(91));break;default:l!==i&&At(t,e,s,l,n,i)}Od(t,f,d);return;case"option":for(var y in a)if(f=a[y],a.hasOwnProperty(y)&&f!=null&&!n.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:At(t,e,y,null,n,f)}for(o in n)if(f=n[o],d=a[o],n.hasOwnProperty(o)&&f!==d&&(f!=null||d!=null))switch(o){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:At(t,e,o,f,n,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in a)f=a[x],a.hasOwnProperty(x)&&f!=null&&!n.hasOwnProperty(x)&&At(t,e,x,null,n,f);for(u in n)if(f=n[u],d=a[u],n.hasOwnProperty(u)&&f!==d&&(f!=null||d!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(C(137,e));break;default:At(t,e,u,f,n,d)}return;default:if(yo(e)){for(var w in a)f=a[w],a.hasOwnProperty(w)&&f!==void 0&&!n.hasOwnProperty(w)&&Qc(t,e,w,void 0,n,f);for(g in n)f=n[g],d=a[g],!n.hasOwnProperty(g)||f===d||f===void 0&&d===void 0||Qc(t,e,g,f,n,d);return}}for(var p in a)f=a[p],a.hasOwnProperty(p)&&f!=null&&!n.hasOwnProperty(p)&&At(t,e,p,null,n,f);for(h in n)f=n[h],d=a[h],!n.hasOwnProperty(h)||f===d||f==null&&d==null||At(t,e,h,f,n,d)}function Tf(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ip(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var l=a[n],i=l.transferSize,s=l.initiatorType,r=l.duration;if(i&&r&&Tf(s)){for(s=0,r=l.responseEnd,n+=1;n<a.length;n++){var o=a[n],u=o.startTime;if(u>r)break;var g=o.transferSize,h=o.initiatorType;g&&Tf(h)&&(o=o.responseEnd,s+=g*(o<r?1:(r-u)/(o-u)))}if(--n,e+=8*(i+s)/(l.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Zc=null,Fc=null;function zs(t){return t.nodeType===9?t:t.ownerDocument}function Nf(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gm(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Kc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kr=null;function Pp(){var t=window.event;return t&&t.type==="popstate"?t===Kr?!1:(Kr=t,!0):(Kr=null,!1)}var qm=typeof setTimeout=="function"?setTimeout:void 0,Wp=typeof clearTimeout=="function"?clearTimeout:void 0,Mf=typeof Promise=="function"?Promise:void 0,$p=typeof queueMicrotask=="function"?queueMicrotask:typeof Mf<"u"?function(t){return Mf.resolve(null).then(t).catch(tb)}:qm;function tb(t){setTimeout(function(){throw t})}function Fa(t){return t==="head"}function jf(t,e){var a=e,n=0;do{var l=a.nextSibling;if(t.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(n===0){t.removeChild(l),il(e);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Yl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Yl(a);for(var i=a.firstChild;i;){var s=i.nextSibling,r=i.nodeName;i[ui]||r==="SCRIPT"||r==="STYLE"||r==="LINK"&&i.rel.toLowerCase()==="stylesheet"||a.removeChild(i),i=s}}else a==="body"&&Yl(t.ownerDocument.body);a=l}while(a);il(e)}function kf(t,e){var a=t;t=0;do{var n=a.nextSibling;if(a.nodeType===1?e?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(e?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=n}while(a)}function Jc(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var a=e;switch(e=e.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jc(a),bo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function eb(t,e,a,n){for(;t.nodeType===1;){var l=a;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(n){if(!t[ui])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==l.rel||t.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||t.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||t.getAttribute("title")!==(l.title==null?null:l.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(l.src==null?null:l.src)||t.getAttribute("type")!==(l.type==null?null:l.type)||t.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=l.name==null?null:""+l.name;if(l.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=Be(t.nextSibling),t===null)break}return null}function ab(t,e,a){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Be(t.nextSibling),t===null))return null;return t}function Vm(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Be(t.nextSibling),t===null))return null;return t}function Ic(t){return t.data==="$?"||t.data==="$~"}function Pc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function nb(t,e){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||a.readyState!=="loading")e();else{var n=function(){e(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),t._reactRetry=n}}function Be(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Wc=null;function Af(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(e===0)return Be(t.nextSibling);e--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||e++}t=t.nextSibling}return null}function zf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(e===0)return t;e--}else a!=="/$"&&a!=="/&"||e++}t=t.previousSibling}return null}function Ym(t,e,a){switch(e=zs(a),t){case"html":if(t=e.documentElement,!t)throw Error(C(452));return t;case"head":if(t=e.head,!t)throw Error(C(453));return t;case"body":if(t=e.body,!t)throw Error(C(454));return t;default:throw Error(C(451))}}function Yl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);bo(t)}var He=new Map,_f=new Set;function _s(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ba=Tt.d;Tt.d={f:lb,r:ib,D:sb,C:rb,L:cb,m:ob,X:fb,S:ub,M:db};function lb(){var t=ba.f(),e=ar();return t||e}function ib(t){var e=cl(t);e!==null&&e.tag===5&&e.type==="form"?Uh(e):ba.r(t)}var dl=typeof document>"u"?null:document;function Xm(t,e,a){var n=dl;if(n&&typeof e=="string"&&e){var l=Oe(e);l='link[rel="'+t+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),_f.has(l)||(_f.add(l),t={rel:t,crossOrigin:a,href:e},n.querySelector(l)===null&&(e=n.createElement("link"),ie(e,"link",t),Wt(e),n.head.appendChild(e)))}}function sb(t){ba.D(t),Xm("dns-prefetch",t,null)}function rb(t,e){ba.C(t,e),Xm("preconnect",t,e)}function cb(t,e,a){ba.L(t,e,a);var n=dl;if(n&&t&&e){var l='link[rel="preload"][as="'+Oe(e)+'"]';e==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Oe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Oe(a.imageSizes)+'"]')):l+='[href="'+Oe(t)+'"]';var i=l;switch(e){case"style":i=ll(t);break;case"script":i=hl(t)}He.has(i)||(t=Ut({rel:"preload",href:e==="image"&&a&&a.imageSrcSet?void 0:t,as:e},a),He.set(i,t),n.querySelector(l)!==null||e==="style"&&n.querySelector(pi(i))||e==="script"&&n.querySelector(bi(i))||(e=n.createElement("link"),ie(e,"link",t),Wt(e),n.head.appendChild(e)))}}function ob(t,e){ba.m(t,e);var a=dl;if(a&&t){var n=e&&typeof e.as=="string"?e.as:"script",l='link[rel="modulepreload"][as="'+Oe(n)+'"][href="'+Oe(t)+'"]',i=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=hl(t)}if(!He.has(i)&&(t=Ut({rel:"modulepreload",href:t},e),He.set(i,t),a.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bi(i)))return}n=a.createElement("link"),ie(n,"link",t),Wt(n),a.head.appendChild(n)}}}function ub(t,e,a){ba.S(t,e,a);var n=dl;if(n&&t){var l=Yn(n).hoistableStyles,i=ll(t);e=e||"default";var s=l.get(i);if(!s){var r={loading:0,preload:null};if(s=n.querySelector(pi(i)))r.loading=5;else{t=Ut({rel:"stylesheet",href:t,"data-precedence":e},a),(a=He.get(i))&&au(t,a);var o=s=n.createElement("link");Wt(o),ie(o,"link",t),o._p=new Promise(function(u,g){o.onload=u,o.onerror=g}),o.addEventListener("load",function(){r.loading|=1}),o.addEventListener("error",function(){r.loading|=2}),r.loading|=4,es(s,e,n)}s={type:"stylesheet",instance:s,count:1,state:r},l.set(i,s)}}}function fb(t,e){ba.X(t,e);var a=dl;if(a&&t){var n=Yn(a).hoistableScripts,l=hl(t),i=n.get(l);i||(i=a.querySelector(bi(l)),i||(t=Ut({src:t,async:!0},e),(e=He.get(l))&&nu(t,e),i=a.createElement("script"),Wt(i),ie(i,"link",t),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function db(t,e){ba.M(t,e);var a=dl;if(a&&t){var n=Yn(a).hoistableScripts,l=hl(t),i=n.get(l);i||(i=a.querySelector(bi(l)),i||(t=Ut({src:t,async:!0,type:"module"},e),(e=He.get(l))&&nu(t,e),i=a.createElement("script"),Wt(i),ie(i,"link",t),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function Cf(t,e,a,n){var l=(l=Ea.current)?_s(l):null;if(!l)throw Error(C(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(e=ll(a.href),a=Yn(l).hoistableStyles,n=a.get(e),n||(n={type:"style",instance:null,count:0,state:null},a.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ll(a.href);var i=Yn(l).hoistableStyles,s=i.get(t);if(s||(l=l.ownerDocument||l,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,s),(i=l.querySelector(pi(t)))&&!i._p&&(s.instance=i,s.state.loading=5),He.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},He.set(t,a),i||hb(l,t,a,s.state))),e&&n===null)throw Error(C(528,""));return s}if(e&&n!==null)throw Error(C(529,""));return null;case"script":return e=a.async,a=a.src,typeof a=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=hl(a),a=Yn(l).hoistableScripts,n=a.get(e),n||(n={type:"script",instance:null,count:0,state:null},a.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(C(444,t))}}function ll(t){return'href="'+Oe(t)+'"'}function pi(t){return'link[rel="stylesheet"]['+t+"]"}function Lm(t){return Ut({},t,{"data-precedence":t.precedence,precedence:null})}function hb(t,e,a,n){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=t.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),ie(e,"link",a),Wt(e),t.head.appendChild(e))}function hl(t){return'[src="'+Oe(t)+'"]'}function bi(t){return"script[async]"+t}function Ef(t,e,a){if(e.count++,e.instance===null)switch(e.type){case"style":var n=t.querySelector('style[data-href~="'+Oe(a.href)+'"]');if(n)return e.instance=n,Wt(n),n;var l=Ut({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement("style"),Wt(n),ie(n,"style",l),es(n,a.precedence,t),e.instance=n;case"stylesheet":l=ll(a.href);var i=t.querySelector(pi(l));if(i)return e.state.loading|=4,e.instance=i,Wt(i),i;n=Lm(a),(l=He.get(l))&&au(n,l),i=(t.ownerDocument||t).createElement("link"),Wt(i);var s=i;return s._p=new Promise(function(r,o){s.onload=r,s.onerror=o}),ie(i,"link",n),e.state.loading|=4,es(i,a.precedence,t),e.instance=i;case"script":return i=hl(a.src),(l=t.querySelector(bi(i)))?(e.instance=l,Wt(l),l):(n=a,(l=He.get(i))&&(n=Ut({},a),nu(n,l)),t=t.ownerDocument||t,l=t.createElement("script"),Wt(l),ie(l,"link",n),t.head.appendChild(l),e.instance=l);case"void":return null;default:throw Error(C(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(n=e.instance,e.state.loading|=4,es(n,a.precedence,t));return e.instance}function es(t,e,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,i=l,s=0;s<n.length;s++){var r=n[s];if(r.dataset.precedence===e)i=r;else if(i!==l)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=a.nodeType===9?a.head:a,e.insertBefore(t,e.firstChild))}function au(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function nu(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var as=null;function Of(t,e,a){if(as===null){var n=new Map,l=as=new Map;l.set(a,n)}else l=as,n=l.get(a),n||(n=new Map,l.set(a,n));if(n.has(t))return n;for(n.set(t,null),a=a.getElementsByTagName(t),l=0;l<a.length;l++){var i=a[l];if(!(i[ui]||i[ae]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var s=i.getAttribute(e)||"";s=t+s;var r=n.get(s);r?r.push(i):n.set(s,[i])}}return n}function Df(t,e,a){t=t.ownerDocument||t,t.head.insertBefore(a,e==="title"?t.querySelector("head > title"):null)}function mb(t,e,a){if(a===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Qm(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function gb(t,e,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(a.state.loading&4)){if(a.instance===null){var l=ll(n.href),i=e.querySelector(pi(l));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Cs.bind(t),e.then(t,t)),a.state.loading|=4,a.instance=i,Wt(i);return}i=e.ownerDocument||e,n=Lm(n),(l=He.get(l))&&au(n,l),i=i.createElement("link"),Wt(i);var s=i;s._p=new Promise(function(r,o){s.onload=r,s.onerror=o}),ie(i,"link",n),a.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,e),(e=a.state.preload)&&!(a.state.loading&3)&&(t.count++,a=Cs.bind(t),e.addEventListener("load",a),e.addEventListener("error",a))}}var Jr=0;function pb(t,e){return t.stylesheets&&t.count===0&&ns(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var n=setTimeout(function(){if(t.stylesheets&&ns(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&Jr===0&&(Jr=62500*Ip());var l=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ns(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>Jr?50:800)+e);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(n),clearTimeout(l)}}:null}function Cs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ns(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Es=null;function ns(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Es=new Map,e.forEach(bb,t),Es=null,Cs.call(t))}function bb(t,e){if(!(e.state.loading&4)){var a=Es.get(t);if(a)var n=a.get(null);else{a=new Map,Es.set(t,a);for(var l=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<l.length;i++){var s=l[i];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(a.set(s.dataset.precedence,s),n=s)}n&&a.set(null,n)}l=e.instance,s=l.getAttribute("data-precedence"),i=a.get(s)||n,i===n&&a.set(null,l),a.set(s,l),this.count++,n=Cs.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),i?i.parentNode.insertBefore(l,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(l,t.firstChild)),e.state.loading|=4}}var ai={$$typeof:sa,Provider:null,Consumer:null,_currentValue:an,_currentValue2:an,_threadCount:0};function yb(t,e,a,n,l,i,s,r,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yr(0),this.hiddenUpdates=yr(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Zm(t,e,a,n,l,i,s,r,o,u,g,h){return t=new yb(t,e,a,s,o,u,g,h,r),e=1,i===!0&&(e|=24),i=Se(3,null,null,e),t.current=i,i.stateNode=t,e=zo(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:n,isDehydrated:a,cache:e},Eo(i),t}function Fm(t){return t?(t=Hn,t):Hn}function Km(t,e,a,n,l,i){l=Fm(l),n.context===null?n.context=l:n.pendingContext=l,n=Da(e),n.payload={element:a},i=i===void 0?null:i,i!==null&&(n.callback=i),a=Ua(t,n,e),a!==null&&(me(a,t,e),Dl(a,t,e))}function Uf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<e?a:e}}function lu(t,e){Uf(t,e),(t=t.alternate)&&Uf(t,e)}function Jm(t){if(t.tag===13||t.tag===31){var e=bn(t,67108864);e!==null&&me(e,t,67108864),lu(t,67108864)}}function Rf(t){if(t.tag===13||t.tag===31){var e=je();e=go(e);var a=bn(t,e);a!==null&&me(a,t,e),lu(t,e)}}var Os=!0;function xb(t,e,a,n){var l=tt.T;tt.T=null;var i=Tt.p;try{Tt.p=2,iu(t,e,a,n)}finally{Tt.p=i,tt.T=l}}function vb(t,e,a,n){var l=tt.T;tt.T=null;var i=Tt.p;try{Tt.p=8,iu(t,e,a,n)}finally{Tt.p=i,tt.T=l}}function iu(t,e,a,n){if(Os){var l=$c(n);if(l===null)Fr(t,e,n,Ds,a),Bf(t,n);else if(wb(l,t,e,a,n))n.stopPropagation();else if(Bf(t,n),e&4&&-1<Sb.indexOf(t)){for(;l!==null;){var i=cl(l);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var s=Wa(i.pendingLanes);if(s!==0){var r=i;for(r.pendingLanes|=2,r.entangledLanes|=2;s;){var o=1<<31-Me(s);r.entanglements[1]|=o,s&=~o}Je(i),!(wt&6)&&(Ts=Te()+500,gi(0))}}break;case 31:case 13:r=bn(i,2),r!==null&&me(r,i,2),ar(),lu(i,2)}if(i=$c(n),i===null&&Fr(t,e,n,Ds,a),i===l)break;l=i}l!==null&&n.stopPropagation()}else Fr(t,e,n,null,a)}}function $c(t){return t=xo(t),su(t)}var Ds=null;function su(t){if(Ds=null,t=En(t),t!==null){var e=si(t);if(e===null)t=null;else{var a=e.tag;if(a===13){if(t=gd(e),t!==null)return t;t=null}else if(a===31){if(t=pd(e),t!==null)return t;t=null}else if(a===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Ds=t,null}function Im(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sg()){case vd:return 2;case Sd:return 8;case os:case rg:return 32;case wd:return 268435456;default:return 32}default:return 32}}var to=!1,Ha=null,Ga=null,qa=null,ni=new Map,li=new Map,ja=[],Sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bf(t,e){switch(t){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":ni.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(e.pointerId)}}function wl(t,e,a,n,l,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:a,eventSystemFlags:n,nativeEvent:i,targetContainers:[l]},e!==null&&(e=cl(e),e!==null&&Jm(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function wb(t,e,a,n,l){switch(e){case"focusin":return Ha=wl(Ha,t,e,a,n,l),!0;case"dragenter":return Ga=wl(Ga,t,e,a,n,l),!0;case"mouseover":return qa=wl(qa,t,e,a,n,l),!0;case"pointerover":var i=l.pointerId;return ni.set(i,wl(ni.get(i)||null,t,e,a,n,l)),!0;case"gotpointercapture":return i=l.pointerId,li.set(i,wl(li.get(i)||null,t,e,a,n,l)),!0}return!1}function Pm(t){var e=En(t.target);if(e!==null){var a=si(e);if(a!==null){if(e=a.tag,e===13){if(e=gd(a),e!==null){t.blockedOn=e,vu(t.priority,function(){Rf(a)});return}}else if(e===31){if(e=pd(a),e!==null){t.blockedOn=e,vu(t.priority,function(){Rf(a)});return}}else if(e===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ls(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var a=$c(t.nativeEvent);if(a===null){a=t.nativeEvent;var n=new a.constructor(a.type,a);yc=n,a.target.dispatchEvent(n),yc=null}else return e=cl(a),e!==null&&Jm(e),t.blockedOn=a,!1;e.shift()}return!0}function Hf(t,e,a){ls(t)&&a.delete(e)}function Tb(){to=!1,Ha!==null&&ls(Ha)&&(Ha=null),Ga!==null&&ls(Ga)&&(Ga=null),qa!==null&&ls(qa)&&(qa=null),ni.forEach(Hf),li.forEach(Hf)}function Oi(t,e){t.blockedOn===e&&(t.blockedOn=null,to||(to=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,Tb)))}var Di=null;function Gf(t){Di!==t&&(Di=t,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,function(){Di===t&&(Di=null);for(var e=0;e<t.length;e+=3){var a=t[e],n=t[e+1],l=t[e+2];if(typeof n!="function"){if(su(n||a)===null)continue;break}var i=cl(a);i!==null&&(t.splice(e,3),e-=3,Dc(i,{pending:!0,data:l,method:a.method,action:n},n,l))}}))}function il(t){function e(o){return Oi(o,t)}Ha!==null&&Oi(Ha,t),Ga!==null&&Oi(Ga,t),qa!==null&&Oi(qa,t),ni.forEach(e),li.forEach(e);for(var a=0;a<ja.length;a++){var n=ja[a];n.blockedOn===t&&(n.blockedOn=null)}for(;0<ja.length&&(a=ja[0],a.blockedOn===null);)Pm(a),a.blockedOn===null&&ja.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var l=a[n],i=a[n+1],s=l[ge]||null;if(typeof i=="function")s||Gf(a);else if(s){var r=null;if(i&&i.hasAttribute("formAction")){if(l=i,s=i[ge]||null)r=s.formAction;else if(su(l)!==null)continue}else r=s.action;typeof r=="function"?a[n+1]=r:(a.splice(n,3),n-=3),Gf(a)}}}function Wm(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(s){return l=s})},focusReset:"manual",scroll:"manual"})}function e(){l!==null&&(l(),l=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,l=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),l!==null&&(l(),l=null)}}}function ru(t){this._internalRoot=t}ir.prototype.render=ru.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));var a=e.current,n=je();Km(a,n,t,e,null,null)};ir.prototype.unmount=ru.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Km(t.current,2,null,t,null,null),ar(),e[rl]=null}};function ir(t){this._internalRoot=t}ir.prototype.unstable_scheduleHydration=function(t){if(t){var e=kd();t={blockedOn:null,target:t,priority:e};for(var a=0;a<ja.length&&e!==0&&e<ja[a].priority;a++);ja.splice(a,0,t),a===0&&Pm(t)}};var qf=hd.version;if(qf!=="19.2.4")throw Error(C(527,qf,"19.2.4"));Tt.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=$0(e),t=t!==null?bd(t):null,t=t===null?null:t.stateNode,t};var Nb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:tt,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ui.isDisabled&&Ui.supportsFiber)try{ri=Ui.inject(Nb),Ne=Ui}catch{}}Ys.createRoot=function(t,e){if(!md(t))throw Error(C(299));var a=!1,n="",l=Xh,i=Lh,s=Qh;return e!=null&&(e.unstable_strictMode===!0&&(a=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(l=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Zm(t,1,!1,null,null,a,n,null,l,i,s,Wm),t[rl]=e.current,eu(t),new ru(e)};Ys.hydrateRoot=function(t,e,a){if(!md(t))throw Error(C(299));var n=!1,l="",i=Xh,s=Lh,r=Qh,o=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(s=a.onCaughtError),a.onRecoverableError!==void 0&&(r=a.onRecoverableError),a.formState!==void 0&&(o=a.formState)),e=Zm(t,1,!0,e,a??null,n,l,o,i,s,r,Wm),e.context=Fm(null),a=e.current,n=je(),n=go(n),l=Da(n),l.callback=null,Ua(a,l,n),a=n,e.current.lanes=a,oi(e,a),Je(e),t[rl]=e.current,eu(t),new ir(e)};Ys.version="19.2.4";function $m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($m)}catch(t){console.error(t)}}$m(),rd.exports=Ys;var Mb=rd.exports;class jb{analyze(e,a){const n=[];if(e.length===0)return n;const l=e.reduce((g,h)=>g+h.diffCents,0)/e.length;Math.abs(l)>15&&n.push({category:"pitch",level:"warning",message:`${l>0?"":""}${l>0?"":""}`});const i=e.map(g=>g.guidePitch).sort((g,h)=>g-h),s=i[Math.floor(i.length*.8)],r=e.filter(g=>g.guidePitch>=s);r.length>5&&r.reduce((h,f)=>h+f.diffCents,0)/r.length<-20&&n.push({category:"pitch",level:"info",message:""});let o=0,u=0;for(let g=5;g<e.length;g++){const h=e[g-5],f=e[g],d=1200*Math.log2(f.guidePitch/h.guidePitch);Math.abs(d)>500&&(u++,Math.abs(f.diffCents)>50&&o++)}return u>0&&o/u>.4&&n.push({category:"pitch",level:"warning",message:""}),a>5&&n.push({category:"expression",level:"positive",message:""}),n}}class kb{constructor(){V(this,"frames",[]);V(this,"vibratoBuffer",[]);V(this,"lastVibratoTime",0);V(this,"vibratoState",!1);V(this,"vibratoCount",0);V(this,"advisor",new jb);V(this,"VIBRATO_WINDOW",.5);V(this,"VIBRATO_DEPTH_MIN",10);V(this,"phraseScores",[])}reset(){this.frames=[],this.vibratoBuffer=[],this.vibratoState=!1,this.vibratoCount=0}feed(e,a,n){if(a<=0)return this.vibratoBuffer=[],this.vibratoState=!1,{isVibrato:!1};let l=0;n>0&&(l=1200*Math.log2(a/n)),this.vibratoBuffer.push({t:e,p:a});const i=e;this.vibratoBuffer=this.vibratoBuffer.filter(r=>i-r.t<=this.VIBRATO_WINDOW);let s=!1;if(this.vibratoBuffer.length>5){const r=this.vibratoBuffer[0],o=this.vibratoBuffer.map(f=>1200*Math.log2(f.p/r.p)),u=Math.min(...o),h=Math.max(...o)-u;if(h>this.VIBRATO_DEPTH_MIN&&h<200){const f=o.reduce((y,x)=>y+x,0)/o.length;let d=0;for(let y=1;y<o.length;y++)(o[y]-f)*(o[y-1]-f)<0&&d++;d>=3&&d<=12&&(s=!0)}}return s?(this.vibratoState||this.vibratoCount++,this.vibratoState=!0,this.lastVibratoTime=i):i-this.lastVibratoTime>.2&&(this.vibratoState=!1),n>0&&this.frames.push({time:e,userPitch:a,guidePitch:n,diffCents:l,hasVibrato:this.vibratoState,isStable:Math.abs(l)<40}),{isVibrato:this.vibratoState}}summarize(e=[]){if(this.calculatePhraseScores(e),this.frames.length===0)return{totalScore:0,radar:{pitch:0,stability:0,expressiveness:0,rhythm:0,technique:0},tendency:0,vibratoCount:0,vibratoSec:0,notesHit:0,notesTotal:0,comment:"",advice:[],phraseScores:[],weakNotes:[]};const n=this.frames.filter(d=>d.userPitch>0&&d.guidePitch>0),l=this.frames.filter(d=>d.guidePitch>0).length,i=this.calculatePitchScore(n),s=this.calculateStabilityScore(n),r=Math.min(100,this.vibratoCount*10),o=l>0?n.length/l*100:0,u=n.reduce((d,y)=>d+y.diffCents,0)/(n.length||1),g=Math.round(i*.4+s*.2+o*.2+r*.2),h=this.advisor.analyze(this.frames,this.vibratoCount),f=this.analyzeWeakNotes(n);return{totalScore:Math.min(100,Math.max(0,g)),radar:{pitch:Math.round(i),stability:Math.round(s),expressiveness:Math.round(r),rhythm:Math.round(o),technique:Math.round(r)},tendency:u,vibratoCount:this.vibratoCount,vibratoSec:0,notesHit:0,notesTotal:0,comment:this.getComment(g),advice:h,phraseScores:this.phraseScores,weakNotes:f}}analyzeWeakNotes(e){const a={};return e.forEach(n=>{if(n.guidePitch<=0)return;const i=(Math.round(69+12*Math.log2(n.guidePitch/440))%12+12)%12;a[i]||(a[i]={sum:0,count:0}),a[i].sum+=n.diffCents,a[i].count++}),Object.entries(a).map(([n,l])=>({noteIndex:parseInt(n),diff:l.sum/l.count,count:l.count})).filter(n=>Math.abs(n.diff)>15).sort((n,l)=>Math.abs(l.diff)-Math.abs(n.diff)).slice(0,3)}calculatePhraseScores(e){this.phraseScores=[],!(!e||e.length===0)&&e.forEach(a=>{const n=this.frames.filter(r=>r.time>=a.startTime&&r.time<=a.endTime),l=n.filter(r=>r.userPitch>0&&r.guidePitch>0);if(n.length===0)return;let i=0;l.length>0&&(i=this.calculatePitchScore(l));let s="Bad";i>=90?s="Perfect":i>=70&&(s="Good"),this.phraseScores.push({phraseId:a.id,startTime:a.startTime,score:Math.round(i),evaluation:s})})}calculatePitchScore(e){if(e.length===0)return 0;const a=e.length;return e.filter(l=>Math.abs(l.diffCents)<50).length/a*100}calculateStabilityScore(e){if(e.length===0)return 0;const a=e.filter(l=>l.isStable&&!l.hasVibrato).length,n=e.filter(l=>!l.hasVibrato).length;return n>0?a/n*100:100}getComment(e){return e>=90?"":e>=80?"":e>=70?"":""}}var t0={},sr={};function Ab(t){var e=new oe(t),a=e.readChunk();if(a.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+a.id+"'";for(var n=zb(a.data),l=[],i=0;!e.eof()&&i<n.numTracks;i++){var s=e.readChunk();if(s.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+s.id+"'";var r=_b(s.data);l.push(r)}return{header:n,tracks:l}}function zb(t){var e=new oe(t),a=e.readUInt16(),n=e.readUInt16(),l={format:a,numTracks:n},i=e.readUInt16();return i&32768?(l.framesPerSecond=256-(i>>8),l.ticksPerFrame=i&255):l.ticksPerBeat=i,l}function _b(t){for(var e=new oe(t),a=[];!e.eof();){var n=i();a.push(n)}return a;var l;function i(){var s={};s.deltaTime=e.readVarInt();var r=e.readUInt8();if((r&240)===240)if(r===255){s.meta=!0;var o=e.readUInt8(),u=e.readVarInt();switch(o){case 0:if(s.type="sequenceNumber",u!==2)throw"Expected length for sequenceNumber event is 2, got "+u;return s.number=e.readUInt16(),s;case 1:return s.type="text",s.text=e.readString(u),s;case 2:return s.type="copyrightNotice",s.text=e.readString(u),s;case 3:return s.type="trackName",s.text=e.readString(u),s;case 4:return s.type="instrumentName",s.text=e.readString(u),s;case 5:return s.type="lyrics",s.text=e.readString(u),s;case 6:return s.type="marker",s.text=e.readString(u),s;case 7:return s.type="cuePoint",s.text=e.readString(u),s;case 32:if(s.type="channelPrefix",u!=1)throw"Expected length for channelPrefix event is 1, got "+u;return s.channel=e.readUInt8(),s;case 33:if(s.type="portPrefix",u!=1)throw"Expected length for portPrefix event is 1, got "+u;return s.port=e.readUInt8(),s;case 47:if(s.type="endOfTrack",u!=0)throw"Expected length for endOfTrack event is 0, got "+u;return s;case 81:if(s.type="setTempo",u!=3)throw"Expected length for setTempo event is 3, got "+u;return s.microsecondsPerBeat=e.readUInt24(),s;case 84:if(s.type="smpteOffset",u!=5)throw"Expected length for smpteOffset event is 5, got "+u;var g=e.readUInt8(),h={0:24,32:25,64:29,96:30};return s.frameRate=h[g&96],s.hour=g&31,s.min=e.readUInt8(),s.sec=e.readUInt8(),s.frame=e.readUInt8(),s.subFrame=e.readUInt8(),s;case 88:if(s.type="timeSignature",u!=2&&u!=4)throw"Expected length for timeSignature event is 4 or 2, got "+u;return s.numerator=e.readUInt8(),s.denominator=1<<e.readUInt8(),u===4?(s.metronome=e.readUInt8(),s.thirtyseconds=e.readUInt8()):(s.metronome=36,s.thirtyseconds=8),s;case 89:if(s.type="keySignature",u!=2)throw"Expected length for keySignature event is 2, got "+u;return s.key=e.readInt8(),s.scale=e.readUInt8(),s;case 127:return s.type="sequencerSpecific",s.data=e.readBytes(u),s;default:return s.type="unknownMeta",s.data=e.readBytes(u),s.metatypeByte=o,s}}else if(r==240){s.type="sysEx";var u=e.readVarInt();return s.data=e.readBytes(u),s}else if(r==247){s.type="endSysEx";var u=e.readVarInt();return s.data=e.readBytes(u),s}else throw"Unrecognised MIDI event type byte: "+r;else{var f;if(r&128)f=e.readUInt8(),l=r;else{if(l===null)throw"Running status byte encountered before status byte";f=r,r=l,s.running=!0}var d=r>>4;switch(s.channel=r&15,d){case 8:return s.type="noteOff",s.noteNumber=f,s.velocity=e.readUInt8(),s;case 9:var y=e.readUInt8();return s.type=y===0?"noteOff":"noteOn",s.noteNumber=f,s.velocity=y,y===0&&(s.byte9=!0),s;case 10:return s.type="noteAftertouch",s.noteNumber=f,s.amount=e.readUInt8(),s;case 11:return s.type="controller",s.controllerType=f,s.value=e.readUInt8(),s;case 12:return s.type="programChange",s.programNumber=f,s;case 13:return s.type="channelAftertouch",s.amount=f,s;case 14:return s.type="pitchBend",s.value=f+(e.readUInt8()<<7)-8192,s;default:throw"Unrecognised MIDI event type: "+d}}}}function oe(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}oe.prototype.eof=function(){return this.pos>=this.bufferLen};oe.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t};oe.prototype.readInt8=function(){var t=this.readUInt8();return t&128?t-256:t};oe.prototype.readUInt16=function(){var t=this.readUInt8(),e=this.readUInt8();return(t<<8)+e};oe.prototype.readInt16=function(){var t=this.readUInt16();return t&32768?t-65536:t};oe.prototype.readUInt24=function(){var t=this.readUInt8(),e=this.readUInt8(),a=this.readUInt8();return(t<<16)+(e<<8)+a};oe.prototype.readInt24=function(){var t=this.readUInt24();return t&8388608?t-16777216:t};oe.prototype.readUInt32=function(){var t=this.readUInt8(),e=this.readUInt8(),a=this.readUInt8(),n=this.readUInt8();return(t<<24)+(e<<16)+(a<<8)+n};oe.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e};oe.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)};oe.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(e&128)t+=e&127,t<<=7;else return t+e}return t};oe.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),a=this.readBytes(e);return{id:t,length:e,data:a}};var Cb=Ab;function Eb(t,e){if(typeof t!="object")throw"Invalid MIDI data";e=e||{};var a=t.header||{},n=t.tracks||[],l,i=n.length,s=new It;for(Ob(s,a,i),l=0;l<i;l++)Db(s,n[l],e);return s.buffer}function Ob(t,e,a){var n=e.format==null?1:e.format,l=128;e.timeDivision?l=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?l=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(l=e.ticksPerBeat&32767);var i=new It;i.writeUInt16(n),i.writeUInt16(a),i.writeUInt16(l),t.writeChunk("MThd",i.buffer)}function Db(t,e,a){var n=new It,l,i=e.length,s=null;for(l=0;l<i;l++)(a.running===!1||!a.running&&!e[l].running)&&(s=null),s=Ub(n,e[l],s,a.useByte9ForNoteOff);t.writeChunk("MTrk",n.buffer)}function Ub(t,e,a,n){var l=e.type,i=e.deltaTime,s=e.text||"",r=e.data||[],o=null;switch(t.writeVarInt(i),l){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(s.length),t.writeString(s);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(s.length),t.writeString(s);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(s.length),t.writeString(s);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(s.length),t.writeString(s);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(s.length),t.writeString(s);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(s.length),t.writeString(s);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(s.length),t.writeString(s);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var u={24:0,25:32,29:64,30:96},g=e.hour&31|u[e.frameRate];t.writeUInt8(g),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=Math.floor(Math.log(e.denominator)/Math.LN2)&255;t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(r.length),t.writeBytes(r);break;case"unknownMeta":e.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(r.length),t.writeBytes(r));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(r.length),t.writeBytes(r);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(r.length),t.writeBytes(r);break;case"noteOff":var f=n!==!1&&e.byte9||n&&e.velocity==0?144:128;o=f|e.channel,o!==a&&t.writeUInt8(o),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":o=144|e.channel,o!==a&&t.writeUInt8(o),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":o=160|e.channel,o!==a&&t.writeUInt8(o),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":o=176|e.channel,o!==a&&t.writeUInt8(o),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":o=192|e.channel,o!==a&&t.writeUInt8(o),t.writeUInt8(e.programNumber);break;case"channelAftertouch":o=208|e.channel,o!==a&&t.writeUInt8(o),t.writeUInt8(e.amount);break;case"pitchBend":o=224|e.channel,o!==a&&t.writeUInt8(o);var d=8192+e.value,y=d&127,x=d>>7&127;t.writeUInt8(y),t.writeUInt8(x);break;default:throw"Unrecognized event type: "+l}return o}function It(){this.buffer=[]}It.prototype.writeUInt8=function(t){this.buffer.push(t&255)};It.prototype.writeInt8=It.prototype.writeUInt8;It.prototype.writeUInt16=function(t){var e=t>>8&255,a=t&255;this.writeUInt8(e),this.writeUInt8(a)};It.prototype.writeInt16=It.prototype.writeUInt16;It.prototype.writeUInt24=function(t){var e=t>>16&255,a=t>>8&255,n=t&255;this.writeUInt8(e),this.writeUInt8(a),this.writeUInt8(n)};It.prototype.writeInt24=It.prototype.writeUInt24;It.prototype.writeUInt32=function(t){var e=t>>24&255,a=t>>16&255,n=t>>8&255,l=t&255;this.writeUInt8(e),this.writeUInt8(a),this.writeUInt8(n),this.writeUInt8(l)};It.prototype.writeInt32=It.prototype.writeUInt32;It.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))};It.prototype.writeString=function(t){var e,a=t.length,n=[];for(e=0;e<a;e++)n.push(t.codePointAt(e));this.writeBytes(n)};It.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,a=[];for(a.push(e&127),e>>=7;e;){var n=e&127|128;a.push(n),e>>=7}this.writeBytes(a.reverse())}};It.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)};var Rb=Eb;sr.parseMidi=Cb;sr.writeMidi=Rb;var Us={},hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.insert=hn.search=void 0;function e0(t,e,a){a===void 0&&(a="ticks");var n=0,l=t.length,i=l;if(l>0&&t[l-1][a]<=e)return l-1;for(;n<i;){var s=Math.floor(n+(i-n)/2),r=t[s],o=t[s+1];if(r[a]===e){for(var u=s;u<t.length;u++){var g=t[u];g[a]===e&&(s=u)}return s}else{if(r[a]<e&&o[a]>e)return s;r[a]>e?i=s:r[a]<e&&(n=s+1)}}return-1}hn.search=e0;function Bb(t,e,a){if(a===void 0&&(a="ticks"),t.length){var n=e0(t,e[a],a);t.splice(n+1,0,e)}else t.push(e)}hn.insert=Bb;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.keySignatureKeys=void 0;var e=hn,a=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var n=function(){function l(i){var s=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",a.set(this,480),i){a.set(this,i.header.ticksPerBeat),i.tracks.forEach(function(o){o.forEach(function(u){u.meta&&(u.type==="timeSignature"?s.timeSignatures.push({ticks:u.absoluteTime,timeSignature:[u.numerator,u.denominator]}):u.type==="setTempo"?s.tempos.push({bpm:6e7/u.microsecondsPerBeat,ticks:u.absoluteTime}):u.type==="keySignature"&&s.keySignatures.push({key:t.keySignatureKeys[u.key+7],scale:u.scale===0?"major":"minor",ticks:u.absoluteTime}))})});var r=0;i.tracks[0].forEach(function(o){r+=o.deltaTime,o.meta&&(o.type==="trackName"?s.name=o.text:(o.type==="text"||o.type==="cuePoint"||o.type==="marker"||o.type==="lyrics")&&s.meta.push({text:o.text,ticks:r,type:o.type}))}),this.update()}}return l.prototype.update=function(){var i=this,s=0,r=0;this.tempos.sort(function(o,u){return o.ticks-u.ticks}),this.tempos.forEach(function(o,u){var g=u>0?i.tempos[u-1].bpm:i.tempos[0].bpm,h=o.ticks/i.ppq-r,f=60/g*h;o.time=f+s,s=o.time,r+=h}),this.timeSignatures.sort(function(o,u){return o.ticks-u.ticks}),this.timeSignatures.forEach(function(o,u){var g=u>0?i.timeSignatures[u-1]:i.timeSignatures[0],h=(o.ticks-g.ticks)/i.ppq,f=h/g.timeSignature[0]/(g.timeSignature[1]/4);g.measures=g.measures||0,o.measures=f+g.measures})},l.prototype.ticksToSeconds=function(i){var s=(0,e.search)(this.tempos,i);if(s!==-1){var r=this.tempos[s],o=r.time,u=(i-r.ticks)/this.ppq;return o+60/r.bpm*u}else{var g=i/this.ppq;return 60/120*g}},l.prototype.ticksToMeasures=function(i){var s=(0,e.search)(this.timeSignatures,i);if(s!==-1){var r=this.timeSignatures[s],o=(i-r.ticks)/this.ppq;return r.measures+o/(r.timeSignature[0]/r.timeSignature[1])/4}else return i/this.ppq/4},Object.defineProperty(l.prototype,"ppq",{get:function(){return a.get(this)},enumerable:!1,configurable:!0}),l.prototype.secondsToTicks=function(i){var s=(0,e.search)(this.tempos,i,"time");if(s!==-1){var r=this.tempos[s],o=r.time,u=i-o,g=u/(60/r.bpm);return Math.round(r.ticks+g*this.ppq)}else{var h=i/.5;return Math.round(h*this.ppq)}},l.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(i){return{bpm:i.bpm,ticks:i.ticks}}),timeSignatures:this.timeSignatures}},l.prototype.fromJSON=function(i){this.name=i.name,this.tempos=i.tempos.map(function(s){return Object.assign({},s)}),this.timeSignatures=i.timeSignatures.map(function(s){return Object.assign({},s)}),this.keySignatures=i.keySignatures.map(function(s){return Object.assign({},s)}),this.meta=i.meta.map(function(s){return Object.assign({},s)}),a.set(this,i.ppq),this.update()},l.prototype.setTempo=function(i){this.tempos=[{bpm:i,ticks:0}],this.update()},l}();t.Header=n})(Us);var ii={},cu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(l,i){return l[t.controlChangeNames[i]]=i,l},{});var e=new WeakMap,a=new WeakMap,n=function(){function l(i,s){e.set(this,s),a.set(this,i.controllerType),this.ticks=i.absoluteTime,this.value=i.value}return Object.defineProperty(l.prototype,"number",{get:function(){return a.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"time",{get:function(){var i=e.get(this);return i.ticksToSeconds(this.ticks)},set:function(i){var s=e.get(this);this.ticks=s.secondsToTicks(i)},enumerable:!1,configurable:!0}),l.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},l}();t.ControlChange=n})(cu);var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.createControlChanges=void 0;var Ri=cu;function Hb(){return new Proxy({},{get:function(t,e){if(t[e])return t[e];if(Ri.controlChangeIds.hasOwnProperty(e))return t[Ri.controlChangeIds[e]]},set:function(t,e,a){return Ri.controlChangeIds.hasOwnProperty(e)?t[Ri.controlChangeIds[e]]=a:t[e]=a,!0}})}rr.createControlChanges=Hb;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.PitchBend=void 0;var Ir=new WeakMap,Gb=function(){function t(e,a){Ir.set(this,a),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(t.prototype,"time",{get:function(){var e=Ir.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var a=Ir.get(this);this.ticks=a.secondsToTicks(e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();cr.PitchBend=Gb;var or={},Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.DrumKitByPatchID=Va.InstrumentFamilyByID=Va.instrumentByPatchID=void 0;Va.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];Va.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];Va.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(or,"__esModule",{value:!0});or.Instrument=void 0;var Bi=Va,Vf=new WeakMap,qb=function(){function t(e,a){if(this.number=0,Vf.set(this,a),this.number=0,e){var n=e.find(function(l){return l.type==="programChange"});n&&(this.number=n.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?Bi.DrumKitByPatchID[this.number]:Bi.instrumentByPatchID[this.number]},set:function(e){var a=Bi.instrumentByPatchID.indexOf(e);a!==-1&&(this.number=a)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":Bi.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){var e=Vf.get(this);return e.channel===9},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(e){this.number=e.number},t}();or.Instrument=qb;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.Note=void 0;function Vb(t){var e=Math.floor(t/12)-1;return a0(t)+e.toString()}function a0(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a=t%12;return e[a]}function Yb(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.indexOf(t)}var Xb=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(a){var n=t.exec(a),l=n[1],i=n[2],s=e[l.toLowerCase()];return s+(parseInt(i,10)+1)*12}}(),wn=new WeakMap,Lb=function(){function t(e,a,n){wn.set(this,n),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=a.velocity,this.ticks=e.ticks,this.durationTicks=a.ticks-e.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return Vb(this.midi)},set:function(e){this.midi=Xb(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var a=e-this.octave;this.midi+=a*12},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return a0(this.midi)},set:function(e){this.midi=12*(this.octave+1)+Yb(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=wn.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var a=wn.get(this),n=a.secondsToTicks(this.time+e);this.durationTicks=n-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var e=wn.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var a=wn.get(this);this.ticks=a.secondsToTicks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){var e=wn.get(this);return e.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();ur.Note=Lb;Object.defineProperty(ii,"__esModule",{value:!0});ii.Track=void 0;var Pr=hn,Qb=cu,Zb=rr,Fb=cr,Yf=or,Kb=ur,Hi=new WeakMap,Jb=function(){function t(e,a){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,Zb.createControlChanges)(),this.pitchBends=[],Hi.set(this,a),e){var l=e.find(function(f){return f.type==="trackName"});this.name=l?l.text:""}if(this.instrument=new Yf.Instrument(e,this),this.channel=0,e){for(var i=e.filter(function(f){return f.type==="noteOn"}),s=e.filter(function(f){return f.type==="noteOff"}),r=function(){var f=i.shift();o.channel=f.channel;var d=s.findIndex(function(x){return x.noteNumber===f.noteNumber&&x.absoluteTime>=f.absoluteTime});if(d!==-1){var y=s.splice(d,1)[0];o.addNote({durationTicks:y.absoluteTime-f.absoluteTime,midi:f.noteNumber,noteOffVelocity:y.velocity/127,ticks:f.absoluteTime,velocity:f.velocity/127})}},o=this;i.length;)r();var u=e.filter(function(f){return f.type==="controller"});u.forEach(function(f){n.addCC({number:f.controllerType,ticks:f.absoluteTime,value:f.value/127})});var g=e.filter(function(f){return f.type==="pitchBend"});g.forEach(function(f){n.addPitchBend({ticks:f.absoluteTime,value:f.value/Math.pow(2,13)})});var h=e.find(function(f){return f.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return t.prototype.addNote=function(e){var a=Hi.get(this),n=new Kb.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},a);return Object.assign(n,e),(0,Pr.insert)(this.notes,n,"ticks"),this},t.prototype.addCC=function(e){var a=Hi.get(this),n=new Qb.ControlChange({controllerType:e.number},a);return delete e.number,Object.assign(n,e),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,Pr.insert)(this.controlChanges[n.number],n,"ticks"),this},t.prototype.addPitchBend=function(e){var a=Hi.get(this),n=new Fb.PitchBend({},a);return Object.assign(n,e),(0,Pr.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,a=0;a<this.notes.length-1;a++){var n=this.notes[a].time+this.notes[a].duration;e<n&&(e=n)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,a=0;a<this.notes.length-1;a++){var n=this.notes[a].ticks+this.notes[a].durationTicks;e<n&&(e=n)}return e},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(e){var a=this;this.name=e.name,this.channel=e.channel,this.instrument=new Yf.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(var n in e.controlChanges)e.controlChanges[n]&&e.controlChanges[n].forEach(function(l){a.addCC({number:l.number,ticks:l.ticks,value:l.value})});e.notes.forEach(function(l){a.addNote({durationTicks:l.durationTicks,midi:l.midi,ticks:l.ticks,velocity:l.velocity})})},t.prototype.toJSON=function(){for(var e={},a=0;a<127;a++)this.controlChanges.hasOwnProperty(a)&&(e[a]=this.controlChanges[a].map(function(l){return l.toJSON()}));var n={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(function(l){return l.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(l){return l.toJSON()})};return this.endOfTrackTicks!==void 0&&(n.endOfTrackTicks=this.endOfTrackTicks),n},t}();ii.Track=Jb;var fr={};function Ib(t){var e=[];return n0(t,e),e}function n0(t,e){for(var a=0;a<t.length;a++){var n=t[a];Array.isArray(n)?n0(n,e):e.push(n)}}const Pb=Object.freeze(Object.defineProperty({__proto__:null,flatten:Ib},Symbol.toStringTag,{value:"Module"})),Wb=A0(Pb);var xa=zn&&zn.__spreadArray||function(t,e,a){if(a||arguments.length===2)for(var n=0,l=e.length,i;n<l;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(fr,"__esModule",{value:!0});fr.encode=void 0;var $b=sr,ty=Us,ey=Wb;function ay(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(t.velocity*127)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(t.noteOffVelocity*127)}]}function ny(t){return(0,ey.flatten)(t.notes.map(function(e){return ay(e,t.channel)}))}function ly(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(t.value*127)}}function iy(t){for(var e=[],a=0;a<127;a++)t.controlChanges.hasOwnProperty(a)&&t.controlChanges[a].forEach(function(n){e.push(ly(n,t.channel))});return e}function sy(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}function ry(t){var e=[];return t.pitchBends.forEach(function(a){e.push(sy(a,t.channel))}),e}function cy(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}function oy(t){return{absoluteTime:0,deltaTime:0,meta:!0,text:t,type:"trackName"}}function uy(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}function fy(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function dy(t){var e=ty.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:t.scale==="major"?0:1,type:"keySignature"}}function hy(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}function my(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:xa([xa(xa(xa(xa([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(a){return dy(a)}),!0),t.header.meta.map(function(a){return hy(a)}),!0),t.header.tempos.map(function(a){return uy(a)}),!0),t.header.timeSignatures.map(function(a){return fy(a)}),!0)],t.tracks.map(function(a){return xa(xa(xa([oy(a.name),cy(a)],ny(a),!0),iy(a),!0),ry(a),!0)}),!0)};return e.tracks=e.tracks.map(function(a){a=a.sort(function(l,i){return l.absoluteTime-i.absoluteTime});var n=0;return a.forEach(function(l){l.deltaTime=l.absoluteTime-n,n=l.absoluteTime,delete l.absoluteTime}),a.push({deltaTime:0,meta:!0,type:"endOfTrack"}),a}),new Uint8Array((0,$b.writeMidi)(e))}fr.encode=my;(function(t){var e=zn&&zn.__awaiter||function(h,f,d,y){function x(w){return w instanceof d?w:new d(function(p){p(w)})}return new(d||(d=Promise))(function(w,p){function m(T){try{S(y.next(T))}catch(N){p(N)}}function b(T){try{S(y.throw(T))}catch(N){p(N)}}function S(T){T.done?w(T.value):x(T.value).then(m,b)}S((y=y.apply(h,f||[])).next())})},a=zn&&zn.__generator||function(h,f){var d={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},y,x,w,p;return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(S){return function(T){return b([S,T])}}function b(S){if(y)throw new TypeError("Generator is already executing.");for(;d;)try{if(y=1,x&&(w=S[0]&2?x.return:S[0]?x.throw||((w=x.return)&&w.call(x),0):x.next)&&!(w=w.call(x,S[1])).done)return w;switch(x=0,w&&(S=[S[0]&2,w.value]),S[0]){case 0:case 1:w=S;break;case 4:return d.label++,{value:S[1],done:!1};case 5:d.label++,x=S[1],S=[0];continue;case 7:S=d.ops.pop(),d.trys.pop();continue;default:if(w=d.trys,!(w=w.length>0&&w[w.length-1])&&(S[0]===6||S[0]===2)){d=0;continue}if(S[0]===3&&(!w||S[1]>w[0]&&S[1]<w[3])){d.label=S[1];break}if(S[0]===6&&d.label<w[1]){d.label=w[1],w=S;break}if(w&&d.label<w[2]){d.label=w[2],d.ops.push(S);break}w[2]&&d.ops.pop(),d.trys.pop();continue}S=f.call(h,d)}catch(T){S=[6,T],x=0}finally{y=w=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.Track=t.Midi=void 0;var n=sr,l=Us,i=ii,s=fr,r=function(){function h(f){var d=this,y=null;if(f){var x=f instanceof ArrayBuffer?new Uint8Array(f):f;y=(0,n.parseMidi)(x),y.tracks.forEach(function(w){var p=0;w.forEach(function(m){p+=m.deltaTime,m.absoluteTime=p})}),y.tracks=g(y.tracks)}this.header=new l.Header(y),this.tracks=[],f&&(this.tracks=y.tracks.map(function(w){return new i.Track(w,d.header)}),y.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return h.fromUrl=function(f){return e(this,void 0,void 0,function(){var d,y;return a(this,function(x){switch(x.label){case 0:return[4,fetch(f)];case 1:return d=x.sent(),d.ok?[4,d.arrayBuffer()]:[3,3];case 2:return y=x.sent(),[2,new h(y)];case 3:throw new Error("Could not load '".concat(f,"'"))}})})},Object.defineProperty(h.prototype,"name",{get:function(){return this.header.name},set:function(f){this.header.name=f},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){var f=this.tracks.map(function(d){return d.duration});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){var f=this.tracks.map(function(d){return d.durationTicks});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),h.prototype.addTrack=function(){var f=new i.Track(void 0,this.header);return this.tracks.push(f),f},h.prototype.toArray=function(){return(0,s.encode)(this)},h.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(f){return f.toJSON()})}},h.prototype.fromJSON=function(f){var d=this;this.header=new l.Header,this.header.fromJSON(f.header),this.tracks=f.tracks.map(function(y){var x=new i.Track(void 0,d.header);return x.fromJSON(y),x})},h.prototype.clone=function(){var f=new h;return f.fromJSON(this.toJSON()),f},h}();t.Midi=r;var o=ii;Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return o.Track}});var u=Us;Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return u.Header}});function g(h){for(var f=[],d=0;d<h.length;d++)for(var y=f.length,x=new Map,w=Array(16).fill(0),p=0,m=h[d];p<m.length;p++){var b=m[p],S=y,T=b.channel;if(T!==void 0){b.type==="programChange"&&(w[T]=b.programNumber);var N=w[T],M="".concat(N," ").concat(T);x.has(M)?S=x.get(M):(S=y+x.size,x.set(M,S))}f[S]||f.push([]),f[S].push(b)}return f}})(t0);const Wr="ontei_db",$r=1,Tn="files",Gi={async init(){return new Promise((t,e)=>{const a=indexedDB.open(Wr,$r);a.onupgradeneeded=n=>{const l=n.target.result;l.objectStoreNames.contains(Tn)||l.createObjectStore(Tn)},a.onsuccess=()=>t(),a.onerror=()=>e(a.error)})},async saveMidi(t){return this._put("lastMidi",t)},async loadMidi(){return await this._get("lastMidi")??null},async _put(t,e){return new Promise((a,n)=>{const l=indexedDB.open(Wr,$r);l.onsuccess=()=>{const s=l.result.transaction(Tn,"readwrite");s.objectStore(Tn).put(e,t),s.oncomplete=()=>a(),s.onerror=()=>n(s.error)},l.onerror=()=>n(l.error)})},async _get(t){return new Promise((e,a)=>{const n=indexedDB.open(Wr,$r);n.onsuccess=()=>{const r=n.result.transaction(Tn,"readonly").objectStore(Tn).get(t);r.onsuccess=()=>e(r.result),r.onerror=()=>a(r.error)},n.onerror=()=>a(n.error)})}};function be(t){if(this.size=t|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(this.size*2),a=0;a<e.length;a+=2){const o=Math.PI*a/this.size;e[a]=Math.cos(o),e[a+1]=-Math.sin(o)}this.table=e;for(var n=0,l=1;this.size>l;l<<=1)n++;this._width=n%2===0?n-1:n,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var s=0;s<this._width;s+=2){var r=this._width-s-2;this._bitrev[i]|=(i>>>s&3)<<r}}this._out=null,this._data=null,this._inv=0}var gy=be;be.prototype.fromComplexArray=function(e,a){for(var n=a||new Array(e.length>>>1),l=0;l<e.length;l+=2)n[l>>>1]=e[l];return n};be.prototype.createComplexArray=function(){const e=new Array(this._csize);for(var a=0;a<e.length;a++)e[a]=0;return e};be.prototype.toComplexArray=function(e,a){for(var n=a||this.createComplexArray(),l=0;l<n.length;l+=2)n[l]=e[l>>>1],n[l+1]=0;return n};be.prototype.completeSpectrum=function(e){for(var a=this._csize,n=a>>>1,l=2;l<n;l+=2)e[a-l]=e[l],e[a-l+1]=-e[l+1]};be.prototype.transform=function(e,a){if(e===a)throw new Error("Input and output buffers must be different");this._out=e,this._data=a,this._inv=0,this._transform4(),this._out=null,this._data=null};be.prototype.realTransform=function(e,a){if(e===a)throw new Error("Input and output buffers must be different");this._out=e,this._data=a,this._inv=0,this._realTransform4(),this._out=null,this._data=null};be.prototype.inverseTransform=function(e,a){if(e===a)throw new Error("Input and output buffers must be different");this._out=e,this._data=a,this._inv=1,this._transform4();for(var n=0;n<e.length;n++)e[n]/=this.size;this._out=null,this._data=null};be.prototype._transform4=function(){var e=this._out,a=this._csize,n=this._width,l=1<<n,i=a/l<<1,s,r,o=this._bitrev;if(i===4)for(s=0,r=0;s<a;s+=i,r++){const x=o[r];this._singleTransform2(s,x,l)}else for(s=0,r=0;s<a;s+=i,r++){const x=o[r];this._singleTransform4(s,x,l)}var u=this._inv?-1:1,g=this.table;for(l>>=2;l>=2;l>>=2){i=a/l<<1;var h=i>>>2;for(s=0;s<a;s+=i)for(var f=s+h,d=s,y=0;d<f;d+=2,y+=l){const x=d,w=x+h,p=w+h,m=p+h,b=e[x],S=e[x+1],T=e[w],N=e[w+1],M=e[p],v=e[p+1],k=e[m],E=e[m+1],O=b,J=S,at=g[y],ft=u*g[y+1],et=T*at-N*ft,_=T*ft+N*at,D=g[2*y],A=u*g[2*y+1],Q=M*D-v*A,lt=M*A+v*D,vt=g[3*y],K=u*g[3*y+1],R=k*vt-E*K,Y=k*K+E*vt,W=O+Q,ut=J+lt,nt=O-Q,rt=J-lt,gt=et+R,I=_+Y,yt=u*(et-R),Nt=u*(_-Y),z=W+gt,U=ut+I,Z=W-gt,q=ut-I,$=nt+Nt,P=rt-yt,pt=nt-Nt,B=rt+yt;e[x]=z,e[x+1]=U,e[w]=$,e[w+1]=P,e[p]=Z,e[p+1]=q,e[m]=pt,e[m+1]=B}}};be.prototype._singleTransform2=function(e,a,n){const l=this._out,i=this._data,s=i[a],r=i[a+1],o=i[a+n],u=i[a+n+1],g=s+o,h=r+u,f=s-o,d=r-u;l[e]=g,l[e+1]=h,l[e+2]=f,l[e+3]=d};be.prototype._singleTransform4=function(e,a,n){const l=this._out,i=this._data,s=this._inv?-1:1,r=n*2,o=n*3,u=i[a],g=i[a+1],h=i[a+n],f=i[a+n+1],d=i[a+r],y=i[a+r+1],x=i[a+o],w=i[a+o+1],p=u+d,m=g+y,b=u-d,S=g-y,T=h+x,N=f+w,M=s*(h-x),v=s*(f-w),k=p+T,E=m+N,O=b+v,J=S-M,at=p-T,ft=m-N,et=b-v,_=S+M;l[e]=k,l[e+1]=E,l[e+2]=O,l[e+3]=J,l[e+4]=at,l[e+5]=ft,l[e+6]=et,l[e+7]=_};be.prototype._realTransform4=function(){var e=this._out,a=this._csize,n=this._width,l=1<<n,i=a/l<<1,s,r,o=this._bitrev;if(i===4)for(s=0,r=0;s<a;s+=i,r++){const xi=o[r];this._singleRealTransform2(s,xi>>>1,l>>>1)}else for(s=0,r=0;s<a;s+=i,r++){const xi=o[r];this._singleRealTransform4(s,xi>>>1,l>>>1)}var u=this._inv?-1:1,g=this.table;for(l>>=2;l>=2;l>>=2){i=a/l<<1;var h=i>>>1,f=h>>>1,d=f>>>1;for(s=0;s<a;s+=i)for(var y=0,x=0;y<=d;y+=2,x+=l){var w=s+y,p=w+f,m=p+f,b=m+f,S=e[w],T=e[w+1],N=e[p],M=e[p+1],v=e[m],k=e[m+1],E=e[b],O=e[b+1],J=S,at=T,ft=g[x],et=u*g[x+1],_=N*ft-M*et,D=N*et+M*ft,A=g[2*x],Q=u*g[2*x+1],lt=v*A-k*Q,vt=v*Q+k*A,K=g[3*x],R=u*g[3*x+1],Y=E*K-O*R,W=E*R+O*K,ut=J+lt,nt=at+vt,rt=J-lt,gt=at-vt,I=_+Y,yt=D+W,Nt=u*(_-Y),z=u*(D-W),U=ut+I,Z=nt+yt,q=rt+z,$=gt-Nt;if(e[w]=U,e[w+1]=Z,e[p]=q,e[p+1]=$,y===0){var P=ut-I,pt=nt-yt;e[m]=P,e[m+1]=pt;continue}if(y!==d){var B=rt,F=-gt,ct=ut,H=-nt,Mt=-u*z,te=-u*Nt,Bt=-u*yt,Ge=-u*I,Yt=B+Mt,Ie=F+te,ye=ct+Ge,Pe=H-Bt,yi=s+f-y,xn=s+h-y;e[yi]=Yt,e[yi+1]=Ie,e[xn]=ye,e[xn+1]=Pe}}}};be.prototype._singleRealTransform2=function(e,a,n){const l=this._out,i=this._data,s=i[a],r=i[a+n],o=s+r,u=s-r;l[e]=o,l[e+1]=0,l[e+2]=u,l[e+3]=0};be.prototype._singleRealTransform4=function(e,a,n){const l=this._out,i=this._data,s=this._inv?-1:1,r=n*2,o=n*3,u=i[a],g=i[a+n],h=i[a+r],f=i[a+o],d=u+h,y=u-h,x=g+f,w=s*(g-f),p=d+x,m=y,b=-w,S=d-x,T=y,N=w;l[e]=p,l[e+1]=0,l[e+2]=m,l[e+3]=b,l[e+4]=S,l[e+5]=0,l[e+6]=T,l[e+7]=N};const py=k0(gy);class Xl{constructor(e,a){V(this,"_inputLength");V(this,"_fft");V(this,"_bufferSupplier");V(this,"_paddedInputBuffer");V(this,"_transformBuffer");V(this,"_inverseBuffer");if(e<1)throw new Error("Input length must be at least one");this._inputLength=e,this._fft=new py(xy(2*e)),this._bufferSupplier=a,this._paddedInputBuffer=this._bufferSupplier(this._fft.size),this._transformBuffer=this._bufferSupplier(2*this._fft.size),this._inverseBuffer=this._bufferSupplier(2*this._fft.size)}static forFloat32Array(e){return new Xl(e,a=>new Float32Array(a))}static forFloat64Array(e){return new Xl(e,a=>new Float64Array(a))}static forNumberArray(e){return new Xl(e,a=>Array(a))}get inputLength(){return this._inputLength}autocorrelate(e,a=this._bufferSupplier(e.length)){if(e.length!==this._inputLength)throw new Error(`Input must have length ${this._inputLength} but had length ${e.length}`);for(let l=0;l<e.length;l++)this._paddedInputBuffer[l]=e[l];for(let l=e.length;l<this._paddedInputBuffer.length;l++)this._paddedInputBuffer[l]=0;this._fft.realTransform(this._transformBuffer,this._paddedInputBuffer),this._fft.completeSpectrum(this._transformBuffer);const n=this._transformBuffer;for(let l=0;l<n.length;l+=2)n[l]=n[l]*n[l]+n[l+1]*n[l+1],n[l+1]=0;this._fft.inverseTransform(this._inverseBuffer,this._transformBuffer);for(let l=0;l<e.length;l++)a[l]=this._inverseBuffer[2*l];return a}}function by(t){const e=[];let a=!1,n=-1/0,l=-1;for(let i=1;i<t.length-1;i++)t[i-1]<=0&&t[i]>0?(a=!0,l=i,n=t[i]):t[i-1]>0&&t[i]<=0?(a=!1,l!==-1&&e.push(l)):a&&t[i]>n&&(n=t[i],l=i);return e}function yy(t,e){const[a,n,l]=[t-1,t,t+1],[i,s,r]=[e[a],e[n],e[l]],o=i/2-s+r/2,u=-(i/2)*(n+l)+s*(a+l)-r/2*(a+n),g=i*n*l/2-s*a*l+r*a*n/2,h=-u/(2*o),f=o*h*h+u*h+g;return[h,f]}class Ll{constructor(e,a){V(this,"_autocorrelator");V(this,"_nsdfBuffer");V(this,"_clarityThreshold",.9);V(this,"_minVolumeAbsolute",0);V(this,"_maxInputAmplitude",1);this._autocorrelator=new Xl(e,a),this._nsdfBuffer=a(e)}static forFloat32Array(e){return new Ll(e,a=>new Float32Array(a))}static forFloat64Array(e){return new Ll(e,a=>new Float64Array(a))}static forNumberArray(e){return new Ll(e,a=>Array(a))}get inputLength(){return this._autocorrelator.inputLength}set clarityThreshold(e){if(!Number.isFinite(e)||e<=0||e>1)throw new Error("clarityThreshold must be a number in the range (0, 1]");this._clarityThreshold=e}set minVolumeAbsolute(e){if(!Number.isFinite(e)||e<0||e>this._maxInputAmplitude)throw new Error(`minVolumeAbsolute must be a number in the range [0, ${this._maxInputAmplitude}]`);this._minVolumeAbsolute=e}set minVolumeDecibels(e){if(!Number.isFinite(e)||e>0)throw new Error("minVolumeDecibels must be a number <= 0");this._minVolumeAbsolute=this._maxInputAmplitude*10**(e/10)}set maxInputAmplitude(e){if(!Number.isFinite(e)||e<=0)throw new Error("maxInputAmplitude must be a number > 0");this._maxInputAmplitude=e}findPitch(e,a){if(this._belowMinimumVolume(e))return[0,0];this._nsdf(e);const n=by(this._nsdfBuffer);if(n.length===0)return[0,0];const l=Math.max(...n.map(o=>this._nsdfBuffer[o])),i=n.find(o=>this._nsdfBuffer[o]>=this._clarityThreshold*l),[s,r]=yy(i,this._nsdfBuffer);return[a/s,Math.min(r,1)]}_belowMinimumVolume(e){if(this._minVolumeAbsolute===0)return!1;let a=0;for(let n=0;n<e.length;n++)a+=e[n]**2;return Math.sqrt(a/e.length)<this._minVolumeAbsolute}_nsdf(e){this._autocorrelator.autocorrelate(e,this._nsdfBuffer);let a=2*this._nsdfBuffer[0],n;for(n=0;n<this._nsdfBuffer.length&&a>0;n++)this._nsdfBuffer[n]=2*this._nsdfBuffer[n]/a,a-=e[n]**2+e[e.length-n-1]**2;for(;n<this._nsdfBuffer.length;n++)this._nsdfBuffer[n]=0}}function xy(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}class l0{constructor(){V(this,"detector",null);V(this,"inputLength",0);V(this,"lastStableFreq",0);V(this,"consecutiveSilence",0)}analyze(e,a,n={viterbi:!0}){(!this.detector||this.inputLength!==e.length)&&(this.inputLength=e.length,this.detector=Ll.forFloat32Array(this.inputLength),this.detector.minVolumeDecibels=-60);let l=0;for(let g=0;g<e.length;g++)l+=e[g]*e[g];l=Math.sqrt(l/e.length);const i=n.minRms??.01;if(l<i)return this.consecutiveSilence++,this.consecutiveSilence>5&&(this.lastStableFreq=0),{freq:0,conf:0};this.consecutiveSilence=0;const[s,r]=this.detector.findPitch(e,a);if(r<.5||s<60||s>4200)return{freq:0,conf:0};let o=s,u=r;if(n.guideFreq&&n.guideFreq>0){const g=n.guideFreq,h=12*Math.log2(o/g),f=Math.abs(h);Math.abs(f-12)<2&&u<.98&&(h>0?o/=2:o*=2,u=Math.min(1,u*1.2))}if(this.lastStableFreq>0){const g=12*Math.log2(o/this.lastStableFreq);Math.abs(g)<1?o=this.lastStableFreq*(1-.5)+o*.5:Math.abs(Math.abs(g)-12)<1&&u<.9&&(o=this.lastStableFreq)}return this.lastStableFreq=o,{freq:o,conf:u}}}function Xf(t,e="alphabet"){const a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=["","#","","#","","","#","","#","","#",""],l=Math.round(t),i=Math.floor(l/12)-1,s=(l%12+12)%12;return(e==="katakana"?n[s]:a[s])+i}function Ja(t){const e=Math.max(0,t|0);return Math.round(Math.max(60,Math.min(e-80,e*.33)))}class vy{constructor(e){V(this,"canvas");V(this,"ctx");V(this,"pxPerPitch",20);V(this,"particles",[]);V(this,"lastPhraseId",null);this.canvas=e;const a=e.getContext("2d");if(!a)throw new Error("Could not get 2d context");this.ctx=a}spawnParticles(e,a,n,l){for(let i=0;i<n;i++){const s=Math.random()*Math.PI*2,r=2+Math.random()*4;this.particles.push({x:e,y:a,vx:Math.cos(s)*r,vy:Math.sin(s)*r,color:l[Math.floor(Math.random()*l.length)],life:1,maxLife:1,size:2+Math.random()*3})}}updateParticles(){for(let e=this.particles.length-1;e>=0;e--){const a=this.particles[e];a.x+=a.vx,a.y+=a.vy,a.life-=.02,a.vy+=.1,a.life<=0&&this.particles.splice(e,1)}}draw(e){if(!this.ctx)return;const{width:a,height:n}=this.canvas,l=a,i=n,s=this.ctx,r=e.verticalZoom*12;if(this.pxPerPitch=n/r,s.fillStyle="#222",s.fillRect(0,0,a,n),s.save(),this.drawGrid(e),this.drawBpmMarkers(e),this.drawLoopRegion(e),this.drawPhraseBoundaries(e),e.lastPhraseResult&&e.lastPhraseResult.phraseId!==this.lastPhraseId&&(this.lastPhraseId=e.lastPhraseResult.phraseId,e.isParticlesEnabled)){const K=e.lastPhraseResult,R=Ja(a),Y=n/2;K.evaluation==="Perfect"?this.spawnParticles(R,Y,50,["#FFD700","#FFA500","#FFFFFF","#00FFFF"]):K.evaluation==="Good"&&this.spawnParticles(R,Y,20,["#00FF00","#AAFFAA","#FFFFFF"])}this.updateParticles();const{isCalibrating:o,isPracticing:u,isPitchOnlyMode:g,playbackPosition:h,timelineOffsetSec:f,verticalOffset:d,tempoFactor:y,pxPerSec:x,guideLineWidth:w,showNoteNames:p,currentTracks:m,melodyTrackIndex:b,pitchHistory:S,midiGhostNotes:T,micRenderMode:N,toleranceCents:M}=e,v=Ja(a),k=h+f,E=36+Math.round((96-r)*(d/100)),O=this.pxPerPitch,J=2,at=k-v/x*y-J,ft=k+(l-v)/x*y+J,_=60/(e.bpm||120)*4;s.save(),s.strokeStyle="rgba(255, 255, 255, 0.15)",s.lineWidth=1,s.beginPath();const D=at,A=ft,Q=Math.floor(D/_),lt=Math.ceil(A/_);for(let K=Q;K<=lt;K++){if(K<0)continue;const R=K*_,Y=v+(R-k)*x/y;Y>=0&&Y<=l&&(s.moveTo(Y,0),s.lineTo(Y,i),s.fillStyle="rgba(255,255,255,0.3)",s.fillText(String(K+1),Y+4,10))}if(s.stroke(),s.restore(),!o&&m[b]&&!g){const K=m[b];if(K.type==="audio"&&K.pitchData&&K.pitchData.length>0){s.save(),s.beginPath(),s.strokeStyle="#FFA500",s.lineWidth=3,s.lineCap="round",s.lineJoin="round",s.shadowBlur=10,s.shadowColor="#FFA500";let R=!0;const Y=K.pitchData;for(let W=0;W<Y.length;W++){const ut=Y[W];if(ut.time>ft)break;if(ut.time<at-.5)continue;const nt=69+12*Math.log2(ut.freq/440),rt=i-(nt-E+1)*O,gt=v+(ut.time-k)*x/y;if(!R&&W>0){const I=Y[W-1];ut.time-I.time>.1&&(s.stroke(),s.beginPath(),R=!0)}R?(s.moveTo(gt,rt),R=!1):s.lineTo(gt,rt)}s.stroke(),s.restore()}else{s.lineWidth=w,s.strokeStyle="#4e8cff";const R=K.notes;for(const Y of R){if(Y.time>ft)break;if(Y.time+Y.duration<at)continue;const W=v+(Y.time-k)*x/y;let ut=v+(Y.time+Y.duration-k)*x/y;if(ut-W>3&&(ut-=1),ut<0||W>l)continue;const nt=Y.midi+e.guideOctaveOffset*12+e.transposeOffset,rt=i-(nt-E+1)*O;if(s.beginPath(),s.moveTo(W,rt),s.lineTo(ut,rt),s.stroke(),ut-W>5){s.save(),s.lineWidth=2,s.strokeStyle="#ff0000",s.globalAlpha=1;const I=O;s.beginPath(),s.moveTo(ut,rt-I/2),s.lineTo(ut,rt+I/2),s.stroke(),s.restore()}e.editTool!=="view"&&e.selectedNote===Y&&(s.save(),s.strokeStyle="#ffdd55",s.lineWidth=w+2,s.beginPath(),s.moveTo(W,rt),s.lineTo(ut,rt),s.stroke(),s.fillStyle="#ffdd55",s.beginPath(),s.arc(W,rt,6,0,Math.PI*2),s.fill(),s.beginPath(),s.arc(ut,rt,6,0,Math.PI*2),s.fill(),s.restore());const gt=M/100*O;if(gt>.2&&(s.save(),s.lineWidth=1,s.strokeStyle="#ffffff",s.beginPath(),s.moveTo(W,rt-gt),s.lineTo(ut,rt-gt),s.stroke(),s.beginPath(),s.moveTo(W,rt+gt),s.lineTo(ut,rt+gt),s.stroke(),s.restore()),p){s.font="10px sans-serif",s.fillStyle="#fff",s.textAlign="center",s.textBaseline="middle";const I=Xf(nt);s.fillText(I,(W+ut)/2,rt-8)}}}}if(Array.isArray(T)&&T.length&&(!g||u)){s.save(),s.lineWidth=Math.max(2,w),s.lineWidth=Math.max(2,w);for(let K=0;K<T.length;K++){const R=T[K];if(R.role==="resp"||R.role==="calib"?(s.strokeStyle="#4e8cff",s.setLineDash([4,4])):R.role==="call"?(s.strokeStyle="#ff5050",s.setLineDash([])):R.role==="practice"?(s.strokeStyle="#ffb300",s.lineWidth=Math.max(3,w),s.setLineDash([])):(s.strokeStyle="rgba(255,80,80,0.9)",s.setLineDash([6,4])),R.time+R.duration<at||R.time>ft)continue;const Y=v+(R.time-k)*x/y,W=v+(R.time+R.duration-k)*x/y;if(W<0||Y>l)continue;const ut=R.midi+e.guideOctaveOffset*12+e.transposeOffset,nt=i-(ut-E+1)*O;if(s.beginPath(),s.moveTo(Y,nt),s.lineTo(W,nt),s.stroke(),R.role==="call"){const rt=T[K+1];if(rt&&rt.midi===R.midi&&rt.time-(R.time+R.duration)<.15){s.save(),s.globalAlpha=1;const Nt=Math.max(2,w)+0;s.lineWidth=3,s.strokeStyle="#000000",s.beginPath(),s.moveTo(W,nt-Nt/2),s.lineTo(W,nt+Nt/2),s.stroke(),s.lineWidth=1.5,s.strokeStyle="#ff0000",s.beginPath(),s.moveTo(W,nt-Nt/2),s.lineTo(W,nt+Nt/2),s.stroke(),s.restore()}}if(R.role==="call"||R.role==="resp"||R.role==="practice")try{const rt=R.label||Xf(Math.round(ut));s.save(),s.font="12px sans-serif",s.textAlign="center",s.textBaseline="bottom";const gt=(Y+W)/2,I=nt-6,yt=s.measureText(rt).width;s.fillStyle="rgba(0,0,0,0.6)",s.fillRect(gt-yt/2-4,I-16,yt+8,14),R.role==="practice"?s.fillStyle="#ffca28":s.fillStyle=R.role==="call"?"#ffd27d":"#d6f0ff",s.fillText(rt,gt,I-2),s.restore()}catch{}}s.restore()}if(!o&&S&&S.length){const Y=Math.round(.05*1e3)/1e3,W=h-Y,ut=440,nt=36+Math.round((96-r)*(d/100)),rt=nt+r,gt=[];for(const I of S){const yt=I.time+(I.visOff!=null?I.visOff-.05:0);if(yt<at||yt>ft||yt>W)continue;const Nt=69+12*Math.log2(Math.max(1e-9,I.freq)/ut);Nt<nt||Nt>rt||gt.push({t:yt,midi:Nt,conf:I.conf,freq:I.freq})}if(N==="dot"){s.save();for(const I of gt){const yt=i-(I.midi-nt+1)*O,Nt=v+(I.t-k)*x/y;Nt<0||Nt>l||(s.beginPath(),s.arc(Nt,yt,3,0,Math.PI*2),s.fillStyle="#00FFCC",s.shadowBlur=10,s.shadowColor="#00FFCC",s.strokeStyle="#fff",s.lineWidth=1.5,s.fill(),s.stroke(),s.shadowBlur=0)}s.restore()}else if(gt.length>1){s.save(),s.beginPath(),s.strokeStyle="#39FF14",s.lineWidth=4,s.lineCap="round",s.lineJoin="round",s.shadowBlur=15,s.shadowColor="#39FF14";let I=!0;for(let yt=0;yt<gt.length;yt++){const Nt=gt[yt],z=i-(Nt.midi-nt+1)*O,U=v+(Nt.t-k)*x/y;if(!(U<-10)){if(U>l+10)break;if(yt>0){const Z=gt[yt-1];Nt.t-Z.t>.12&&(s.stroke(),s.beginPath(),s.strokeStyle="#39FF14",s.lineWidth=4,s.shadowBlur=15,s.shadowColor="#39FF14",I=!0)}I?(s.moveTo(U,z),I=!1):s.lineTo(U,z)}}s.stroke(),s.restore()}}if(e.currentMicPitch&&e.currentMicConf&&e.currentMicConf>.3){const K=e.currentMicPitch,R=36+Math.round((96-r)*(d/100)),W=69+12*Math.log2(K/440);if(W>=R&&W<=R+r){const ut=i-(W-R+1)*O;s.save(),s.beginPath(),s.arc(v,ut,5,0,Math.PI*2),s.fillStyle="#00FFFF",s.shadowBlur=15,s.shadowColor="#00FFFF",s.strokeStyle="#fff",s.lineWidth=2,s.fill(),s.stroke(),s.restore()}}s.strokeStyle="#ffffff",s.beginPath(),s.moveTo(v+.5,0),s.lineTo(v+.5,i),s.stroke(),s.restore(),this.ctx.save(),this.ctx.resetTransform(),this.ctx.restore()}drawPianoKeys(e){if(!this.ctx)return;const{height:a}=this.canvas,{verticalOffset:n,verticalZoom:l}=e,i=40;this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,i,a);const s=l*12,r=36,u=r+Math.round((132-r-s)*(n/100)),g=u+s,h=this.pxPerPitch;this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.ctx.font="10px sans-serif";for(let f=Math.floor(u);f<=Math.ceil(g);f++){if(f<0||f>127)continue;const d=a-(f-u+1)*h,y=[1,3,6,8,10].includes(f%12);y||(this.ctx.fillStyle="#ccc",this.ctx.fillRect(0,d+h-1,i,1)),f%12===0&&(this.ctx.fillStyle="#333",this.ctx.fillText("C"+(f/12-1),i-4,d+h/2)),y&&(this.ctx.fillStyle="black",this.ctx.fillRect(0,d,i*.6,h),this.ctx.strokeStyle="#555",this.ctx.strokeRect(0,d,i*.6,h))}this.ctx.fillStyle="#555",this.ctx.fillRect(i-1,0,1,a)}drawPhraseBoundaries(e){if(!e.phrases||e.phrases.length===0)return;const a=this.ctx,{width:n,height:l}=this.canvas,i=Ja(n),{playbackPosition:s,timelineOffsetSec:r,pxPerSec:o,tempoFactor:u}=e,g=s+r;a.save(),a.strokeStyle="rgba(255, 255, 255, 0.1)",a.lineWidth=2,a.setLineDash([5,5]),e.phrases.forEach(h=>{const f=h.endTime,d=i+(f-g)*o/u;d>=0&&d<=n&&(a.beginPath(),a.moveTo(d,0),a.lineTo(d,l),a.stroke())}),a.restore()}drawGrid(e){if(!this.ctx)return;const{width:a,height:n}=this.canvas,{timelineOffsetSec:l,verticalOffset:i,bpm:s,pxPerSec:r,verticalZoom:o}=e;this.ctx.font="10px sans-serif",this.ctx.fillStyle="#ffffff",this.ctx.textAlign="left",this.ctx.textBaseline="bottom";const u=o*12,g=36,f=g+Math.round((132-g-u)*(i/100)),d=f+u,y=this.pxPerPitch;for(let N=Math.floor(f);N<=Math.ceil(d);N++){const M=n-(N-f+1)*y,v=[1,3,6,8,10].includes(N%12),k=N%12===0;this.ctx.beginPath(),k?(this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2):v?(this.ctx.strokeStyle="rgba(255, 255, 255, 0.08)",this.ctx.lineWidth=1):(this.ctx.strokeStyle="rgba(255, 255, 255, 0.5)",this.ctx.lineWidth=1),this.ctx.moveTo(0,M),this.ctx.lineTo(a,M),this.ctx.stroke(),k&&(this.ctx.fillStyle="rgba(255, 255, 255, 0.6)",this.ctx.fillText("C"+(N/12-1),2,M-2))}const x=60/s,w=Ja(a),p=e.playbackPosition+l,m=p+(0-w)*e.tempoFactor/r,b=p+(a-w)*e.tempoFactor/r,S=Math.floor(m/x),T=Math.ceil(b/x);for(let N=S;N<=T;N++){const M=N*x,v=w+(M-p)*r/e.tempoFactor;N%4===0?this.ctx.strokeStyle="rgba(255, 255, 255, 0.3)":this.ctx.strokeStyle="rgba(255, 255, 255, 0.1)",this.ctx.beginPath(),this.ctx.moveTo(v,0),this.ctx.lineTo(v,n),this.ctx.stroke()}}getQuantizedTimeMidi(e,a,n){const l=this.canvas.width,i=this.canvas.height,{verticalZoom:s,verticalOffset:r,playbackPosition:o,timelineOffsetSec:u,pxPerSec:g,tempoFactor:h}=n,f=s*12,d=36,x=d+Math.round((132-d-f)*(r/100)),w=i/f,p=x-1+(i-a)/w,m=Math.round(p),b=Ja(l),T=o+u+(e-b)*h/g,N=.125;return{time:Math.round(T/N)*N,midi:m,exactTime:T,exactMidi:p}}drawBpmMarkers(e){if(!this.ctx||!e.tempoMap||e.tempoMap.length===0)return;const{width:a,height:n}=this.canvas,{timelineOffsetSec:l,playbackPosition:i,pxPerSec:s,tempoFactor:r}=e,o=Ja(a),u=i+l;this.ctx.save(),this.ctx.font="bold 12px sans-serif",this.ctx.textBaseline="top";for(const g of e.tempoMap){const h=o+(g.time-u)*s/r;h<-50||h>a+50||(this.ctx.beginPath(),this.ctx.strokeStyle="rgba(255, 215, 0, 0.7)",this.ctx.lineWidth=1,this.ctx.setLineDash([5,5]),this.ctx.moveTo(h,0),this.ctx.lineTo(h,n),this.ctx.stroke(),this.ctx.fillStyle="rgba(255, 215, 0, 1)",this.ctx.fillText(`BPM ${Math.round(g.bpm)}`,h+4,25))}this.ctx.restore()}drawLoopRegion(e){if(!e.loopEnabled||!this.ctx)return;const{width:a,height:n}=this.canvas,{timelineOffsetSec:l,playbackPosition:i,pxPerSec:s,tempoFactor:r}=e,o=Ja(a),u=i+l,g=e.loopEnd>e.loopStart,h=!g;if(g){const f=o+(e.loopStart-u)*s/r,d=o+(e.loopEnd-u)*s/r,y=Math.max(0,f),x=Math.min(a,d);x>y&&(this.ctx.save(),this.ctx.fillStyle="rgba(0, 200, 100, 0.15)",this.ctx.fillRect(y,0,x-y,n),this.ctx.strokeStyle="rgba(0, 200, 100, 0.7)",this.ctx.lineWidth=2,f>=0&&f<=a&&(this.ctx.beginPath(),this.ctx.moveTo(f,0),this.ctx.lineTo(f,n),this.ctx.stroke()),d>=0&&d<=a&&(this.ctx.beginPath(),this.ctx.moveTo(d,0),this.ctx.lineTo(d,n),this.ctx.stroke()),this.ctx.font="bold 10px sans-serif",this.ctx.fillStyle="rgba(0, 200, 100, 0.9)",this.ctx.fillText("LOOP",y+5,12),this.ctx.restore())}else if(h){const f=o+(e.loopStart-u)*s/r,y=o-l*s/r;if(y>f){const x=Math.max(0,f),w=Math.min(a,y);if(w>x){this.ctx.save();const p=.1+.05*Math.sin(Date.now()/200);this.ctx.fillStyle=`rgba(234, 179, 8, ${p})`,this.ctx.fillRect(x,0,w-x,n),this.ctx.strokeStyle="rgba(234, 179, 8, 0.9)",this.ctx.lineWidth=3,f>=0&&f<=a&&(this.ctx.beginPath(),this.ctx.moveTo(f,0),this.ctx.lineTo(f,n),this.ctx.stroke()),y>=0&&y<=a&&(this.ctx.setLineDash([8,8]),this.ctx.strokeStyle="rgba(234, 179, 8, 0.6)",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(y,0),this.ctx.lineTo(y,n),this.ctx.stroke(),this.ctx.setLineDash([])),x+100<a&&(this.ctx.font="bold 11px sans-serif",this.ctx.fillStyle="rgba(234, 179, 8, 1)",this.ctx.fillText(" ",x+8,14)),this.ctx.restore()}}}}}async function Sy(t,e=20,a=440,n=!1,l=null,i=s=>{}){const s=t.sampleRate,r=t.getChannelData(0),o=t.numberOfChannels>1?t.getChannelData(1):null,u=new Float32Array(r.length);for(let z=0;z<u.length;z++)u[z]=r[z]*(o?.5:1)+(o?o[z]*.5:0);function g(z,U,Z){if(!(Z>0)||Z>=U*.5)return 0;const q=2*Math.PI*Z/U,P=2*Math.cos(q);let pt=0,B=0,F=0;for(let H=0;H<z.length;H++)pt=z[H]+P*B-F,F=B,B=pt;const ct=B*B+F*F-P*B*F;return Math.max(0,ct)}function h(z,U,Z,q){if(!(Z>0))return 0;const $=Math.max(1,q|0);let P=0,pt=0;for(let B=1;B<=$;B++){const F=Z*B;if(F>=U*.5)break;const ct=g(z,U,F);P+=(ct>0?Math.sqrt(ct):0)*(1/B),pt++}return pt?P/pt:0}try{let U=0;for(let Z=0;Z<u.length;Z++){const q=u[Z];u[Z]=q-.97*U,U=q}}catch{}i(10);const d=Math.max(1,Math.floor(s/44100)),y=s/d,x=Math.floor(u.length/d),w=new Float32Array(x);for(let z=0,U=0;z<x;z++,U+=d){let Z=0,q=0;for(let $=0;$<d&&U+$<u.length;$++)Z+=u[U+$],q++;w[z]=Z/Math.max(1,q)}i(20);const p=Math.max(28,Math.min(60,(e||20)+25)),b=Math.floor(y*.09),T=Math.max(1024,Math.min(2048,(z=>1<<Math.round(Math.log2(Math.max(1,z))))(b))),N=Math.max(1,Math.floor(y/Math.max(28,p))),M=new Float32Array(T);for(let z=0;z<T;z++)M[z]=.5*(1-Math.cos(2*Math.PI*z/(T-1)));const v=new Float32Array(Math.ceil(w.length/N)),k=new Float32Array(Math.ceil(w.length/N)),E=new l0;let O=0;for(;O*N+T<w.length;){const z=O*N,U=w.subarray(z,z+T),Z=E.analyze(U,y,{viterbi:!0,minRms:.002});if(v[O]=Z.freq,k[O]=Z.conf,O++,O%200===0){const q=20+O/(w.length/N)*70;i(Math.min(90,q)),await new Promise($=>setTimeout($,0))}}i(95);const J=[],at=z=>z*N/y,ft=.07,et=2,_=.045;let D=null,A=0,Q=0,lt=null;for(let z=0;z<v.length;z++){const U=v[z],Z=at(z);if(U<=0){if(D!=null){const P=Z-A;P>0&&J.push({midi:D,time:Math.max(0,A-_),duration:P}),D=null}Q=0,lt=null;continue}let q=69+12*Math.log2(U/a);if(D!=null){for(;q-D>6;)q-=12;for(;D-q>6;)q+=12}const $=Math.round(q);if(D==null)D=$,A=Z,Q=0,lt=$;else if($!==D){if(lt===$?Q++:(Q=1,lt=$),Q>=et){const P=Z-A;P>0&&J.push({midi:D,time:Math.max(0,A-_),duration:P}),D=$,A=Z,Q=0}}else Q=0,lt=$}if(D!=null){const U=at(v.length)-A;U>0&&J.push({midi:D,time:Math.max(0,A-_),duration:U})}const vt=[];for(const z of J){if(!vt.length){vt.push(z);continue}const U=vt[vt.length-1];z.midi===U.midi&&z.time-(U.time+U.duration)<.02||z.duration<ft&&Math.abs(z.midi-U.midi)<=1&&z.time-(U.time+U.duration)<.03?U.duration=z.time+z.duration-U.time:vt.push(z)}const K=[];for(let z=0;z<vt.length;z++){if(z>0&&z<vt.length-1){const U=vt[z-1],Z=vt[z],q=vt[z+1],$=Z.time-(U.time+U.duration),P=q.time-(Z.time+Z.duration);if(Z.duration<Math.min(.06,ft)&&U.midi===q.midi&&Math.abs(Z.midi-U.midi)<=1&&$<.03&&P<.03){U.duration=q.time+q.duration-U.time,z++;continue}}K.push(vt[z])}const R=36,Y=127,W=z=>Math.max(0,Math.min(v.length-1,Math.round(z*y/N))),ut=z=>Math.max(R,Math.min(Y,z)),nt=z=>{const U=z.slice().sort((q,$)=>q-$),Z=U.length;return Z?Z%2?U[Z-1>>1]:.5*(U[Z/2-1]+U[Z/2]):0},rt=[],gt=[];for(const z of K){const U=W(z.time),Z=W(z.time+z.duration),q=[];for(let P=U;P<=Z;P++){const pt=v[P];pt>0&&isFinite(pt)&&q.push(pt)}const $=q.length?nt(q):a*Math.pow(2,(z.midi-69)/12);rt.push($),gt.push(69+12*Math.log2($/a))}(function(){const z=new Float32Array(T),U=q=>{const $=q*N;if($+T>w.length)return null;let P=0;for(let B=0;B<T;B++)P+=w[$+B];P/=T;let pt=0;for(let B=0;B<T;B++){const F=(w[$+B]-P)*M[B];z[B]=F,pt+=F*F}return Math.sqrt(pt/T)},Z=(q,$)=>{if(!($>0)&&isFinite($))return 0;const P=U(q);return!P||P<1e-5?0:h(z,y,$,8)};for(let q=0;q<K.length;q++){const $=gt[q],P=rt[q];if(!(P>0)&&isFinite(P))continue;const pt=W(K[q].time),B=W(K[q].time+K[q].duration);let F=0,ct=0,H=0;const Mt=Math.max(1,Math.floor((B-pt+1)/24));for(let Bt=pt;Bt<=B;Bt+=Mt)ct+=Z(Bt,P),F+=Z(Bt,P*.5),H+=Z(Bt,P*2);const te=F>=ct&&F>=H?-12:H>=ct&&H>=F?12:0;te!==0&&(gt[q]=$+te)}})();const I=[];for(let z=0;z<K.length;z++)I.push(Math.round(gt[z]));if(n&&I.length>=2){let z=function(H,Mt){const te=Z[Mt];let Bt=0;return te!==0&&(Bt+=.12),Bt},U=function(H,Mt,te){const Bt=Z[Mt],Ge=Z[te],Yt=I[H-1]+Bt,Ie=I[H]+Ge,ye=Math.abs(Ie-Yt),Pe=B[H],yi=Pe>1.8||Pe<.55;let xn=.1*ye;return Math.min(Math.abs(ye-12),Math.abs(ye-24))<.6&&(xn+=yi?.05:1.1),ye<=6&&(xn-=.03),xn};const Z=[-24,-12,0,12,24],q=I.length,$=Z.length,P=new Array(q),pt=new Array(q);for(let H=0;H<q;H++)P[H]=new Array($).fill(1/0),pt[H]=new Array($).fill(-1);const B=new Array(q).fill(1);for(let H=1;H<q;H++){const Mt=rt[H-1]>0&&rt[H]>0?rt[H]/rt[H-1]:1;B[H]=Mt}for(let H=0;H<$;H++)P[0][H]=z(0,H),pt[0][H]=-1;for(let H=1;H<q;H++)for(let Mt=0;Mt<$;Mt++){let te=1/0,Bt=-1;const Ge=z(H,Mt);for(let Yt=0;Yt<$;Yt++){const Ie=U(H,Yt,Mt),ye=P[H-1][Yt]+Ge+Ie;ye<te&&(te=ye,Bt=Yt)}P[H][Mt]=te,pt[H][Mt]=Bt}let F=0;{let H=1/0;for(let Mt=0;Mt<$;Mt++)P[q-1][Mt]<H&&(H=P[q-1][Mt],F=Mt)}const ct=new Array(q).fill(0);for(let H=q-1;H>=0;H--)ct[H]=Z[F],F=pt[H][F]>=0?pt[H][F]:0;for(let H=0;H<q;H++)I[H]=ut(I[H]+ct[H])}else for(let z=1;z<I.length;z++)Math.abs(I[z]-I[z-1]);(function(){if(K.length<=1)return;const z=.26,U=[];let Z=0;for(let F=1;F<K.length;F++){const ct=K[F-1];K[F].time-(ct.time+ct.duration)>=z&&(U.push({s:Z,e:F-1}),Z=F)}if(U.push({s:Z,e:K.length-1}),U.length<=1)return;const q=F=>{const ct=F.slice().sort((Mt,te)=>Mt-te),H=ct.length;return H?ct[H-1>>1]:0},$=[-24,-12,0,12,24],P=U[0];let pt=q(I.slice(P.s,P.e+1)),B=I[P.e];for(let F=1;F<U.length;F++){const ct=U[F],H=I.slice(ct.s,ct.e+1);if(!H.length)continue;const Mt=H[0],te=q(H);let Bt=0,Ge=1e9;for(const Yt of $){const Ie=Math.abs(Mt+Yt-B),ye=Math.abs(te+Yt-pt),Pe=1.2*Ie+1*ye;Pe<Ge&&(Ge=Pe,Bt=Yt)}if(Bt!==0)for(let Yt=ct.s;Yt<=ct.e;Yt++)I[Yt]=ut(I[Yt]+Bt);pt=q(I.slice(ct.s,ct.e+1)),B=I[ct.e]}})();for(let z=0;z<K.length;z++)K[z].midi=I[z];const yt=[];for(const z of K){if(!yt.length){yt.push(z);continue}const U=yt[yt.length-1];z.midi===U.midi&&z.time<=U.time+U.duration+.03?U.duration=Math.max(U.duration,z.time+z.duration-U.time):yt.push(z)}const Nt=[];if(v.length>0){const z=new Float32Array(v.length);for(let B=0;B<v.length;B++)k[B]>=.4&&v[B]>0?z[B]=v[B]:z[B]=0;const U=[];for(let B=0;B<z.length;B++)if(z[B]>0){const F=69+12*Math.log2(z[B]/a);U.push(F)}let Z=0;if(U.length>0){U.sort((B,F)=>B-F),Z=U[Math.floor(U.length/2)];for(let B=0;B<z.length;B++)if(z[B]>0){const F=69+12*Math.log2(z[B]/a);Math.abs(F-Z)>36&&(z[B]=0)}}const q=new Float32Array(z.length),$=2;for(let B=0;B<z.length;B++){const F=[];for(let ct=-$;ct<=$;ct++)if(B+ct>=0&&B+ct<z.length){const H=z[B+ct];H>0&&F.push(H)}F.length===0?q[B]=0:(F.sort((ct,H)=>ct-H),q[B]=F[Math.floor(F.length/2)])}const P=new Float32Array(q.length);P.set(q);let pt=-1;for(let B=0;B<P.length;B++){const F=P[B];if(F<=0)continue;const ct=69+12*Math.log2(F/a);if(pt>0){const H=ct-pt,Mt=Math.abs(H);if(Math.abs(Mt-12)<2.5||Math.abs(Mt-24)<2.5){const Bt=H>0?-12:12,Ge=H>0?-24:24,Yt=ct+Bt,Ie=ct+Ge,ye=Math.abs(Yt-pt),Pe=Math.abs(Ie-pt);ye<4?P[B]=F*Math.pow(2,Bt/12):Pe<4&&(P[B]=F*Math.pow(2,Ge/12))}}pt=69+12*Math.log2(P[B]/a)}for(let B=0;B<P.length;B++){const F=P[B];F>0&&Nt.push({time:at(B),freq:F})}}return{notes:yt,pitchData:Nt}}const Lf=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class eo{static getMidiFromNoteName(e,a=4){const n=Lf.indexOf(e);return n===-1?60:12*(a+1)+n}static getNoteName(e){const a=Math.round(e)%12;return Lf[a]}static generateScale(e,a,n=120,l=0,i="AscDesc"){const s=this.SCALES[a],o=60/n/2,u=[];if((i==="Ascending"||i==="AscDesc")&&u.push(...s.map(f=>e+f)),i==="Descending")u.push(...[...s].reverse().map(f=>e+f));else if(i==="AscDesc"){const f=[...s].reverse().slice(1).map(d=>e+d);u.push(...f)}const g=u.map((f,d)=>({midi:f,time:l+d*o,duration:o*.9,role:"practice",label:this.getNoteName(f)})),h=g.length*o;return{notes:g,duration:h}}static generateArpeggio(e,a,n=120,l=0,i="AscDesc"){const s=this.ARPEGGIOS[a],o=60/n/2,u=[];if((i==="Ascending"||i==="AscDesc")&&u.push(...s.map(f=>e+f)),i==="Descending")u.push(...[...s].reverse().map(f=>e+f));else if(i==="AscDesc"){const f=[...s].reverse().slice(1).map(d=>e+d);u.push(...f)}const g=u.map((f,d)=>({midi:f,time:l+d*o,duration:o*.95,role:"practice",label:this.getNoteName(f)})),h=g.length*o;return{notes:g,duration:h}}static generateExercise(e,a,n=120,l=0){const i=60/n,s=[];if(a==="LongTone")s.push({midi:e,dur:i*4});else if(a==="FiveNote"){const u=i/2;[0,2,4,5,7,5,4,2,0].forEach(h=>s.push({midi:e+h,dur:u}))}else if(a==="Triad"){const u=i;[0,4,7,4,0].forEach(h=>s.push({midi:e+h,dur:u}))}else if(a==="Thirds"){const u=i,g=[0,2,4,5,7,9,11,12];[[0,2],[1,3],[2,4]].forEach(f=>{s.push({midi:e+g[f[0]],dur:u}),s.push({midi:e+g[f[1]],dur:u})}),s.push({midi:e,dur:u*2})}else a==="Octave"&&(s.push({midi:e,dur:i*2}),s.push({midi:e+12,dur:i*2}),s.push({midi:e,dur:i*4}));const r=[];let o=l;return s.forEach(u=>{r.push({midi:u.midi,time:o,duration:u.dur*.95,role:"practice",label:this.getNoteName(u.midi)}),o+=u.dur}),{notes:r,duration:o-l}}static generateRandomBatch(e,a=60,n=120,l={mode:"Mix"}){const i=[];let s=e,r=a;const o=72,u=l.maxPitch??103,g=(h,f=20)=>{var x,w,p;for(let m=0;m<f;m++){let b=!1,S=!1;if(l.mode==="Scale")b=!0;else if(l.mode==="Arpeggio")b=!1;else if(l.mode==="Exercise")S=!0;else{const O=Math.random();O<.4?b=!0:O<.7?S=!0:b=!1}const M=Math.max(o,u-15)-o,v=o+Math.floor(Math.random()*(M+1));let k;if(S){const O=(x=l.allowedExercises)!=null&&x.length?l.allowedExercises:["LongTone","FiveNote","Triad"],J=O[Math.floor(Math.random()*O.length)];k=this.generateExercise(v,J,n,h)}else if(b){const O=(w=l.allowedScales)!=null&&w.length?l.allowedScales:["Major","NaturalMinor","MajorPentatonic"],J=O[Math.floor(Math.random()*O.length)];k=this.generateScale(v,J,n,h,"AscDesc")}else{const O=(p=l.allowedArpeggios)!=null&&p.length?l.allowedArpeggios:["Major","Minor"],J=O[Math.floor(Math.random()*O.length)];k=this.generateArpeggio(v,J,n,h,"AscDesc")}if(Math.max(...k.notes.map(O=>O.midi))<=u)return k}return console.warn(`[Generator] Failed to generate pattern within limit ${u} after ${f} tries. Using fallback.`),this.generateScale(60,"Major",n,h,"AscDesc")};for(;r>0;){const f=60/n*4,d=g(s);if(!d){s+=f,r-=f;continue}const y=d.notes.map(T=>({...T,role:"call"}));i.push(...y);const x=d.duration,p=Math.ceil(x/f)*f,m=s+p,b=d.notes.map(T=>({...T,time:T.time-s+m,role:"resp"}));i.push(...b);const S=p*2;s+=S,r=e+a-s}return{notes:i,nextStartTime:s}}}V(eo,"SCALES",{Major:[0,2,4,5,7,9,11,12],NaturalMinor:[0,2,3,5,7,8,10,12],HarmonicMinor:[0,2,3,5,7,8,11,12],MelodicMinor:[0,2,3,5,7,9,11,12],MajorPentatonic:[0,2,4,7,9,12],MinorPentatonic:[0,3,5,7,10,12],Chromatic:[0,1,2,3,4,5,6,7,8,9,10,11,12]}),V(eo,"ARPEGGIOS",{Major:[0,4,7,12],Minor:[0,3,7,12],Major7:[0,4,7,11,12],Minor7:[0,3,7,10,12],Dominant7:[0,4,7,10,12]});class wy{constructor(){V(this,"state");V(this,"visualizer",null);V(this,"pitchAnalyzer");V(this,"scoreAnalyzer");V(this,"audioCtx",null);V(this,"micStream",null);V(this,"micSource",null);V(this,"micAnalyser",null);V(this,"micData",null);V(this,"masterGain",null);V(this,"melodyGain",null);V(this,"accompGain",null);V(this,"analysisTimer",null);V(this,"playbackStartTime",0);V(this,"playbackStartPerf",0);V(this,"reqFrameId",null);V(this,"analysisRate",20);V(this,"listeners",[]);V(this,"history",[]);V(this,"redoStack",[]);V(this,"loadedMidi",null);V(this,"processedPhrases",new Set);V(this,"backingBuffer",null);V(this,"backingSource",null);V(this,"nextGuideNoteIndex",0);V(this,"originalGhostNotes",null);V(this,"nextPracticeTime",0);V(this,"nextMetronomeTime",0);V(this,"practiceQueue",[]);V(this,"nextNoteIndexToSchedule",0);V(this,"_isSeeking",!1);V(this,"mediaRecorder",null);V(this,"recordedChunks",[]);V(this,"isRecording",!1);this.pitchAnalyzer=new l0,this.scoreAnalyzer=new kb,this.state={isPlaying:!1,isPracticing:!1,isCalibrating:!1,isPitchOnlyMode:!1,playbackPosition:0,timelineOffsetSec:-.05,verticalZoom:3,verticalOffset:60,tempoFactor:1,pxPerSec:100,guideLineWidth:4,showNoteNames:!0,toleranceCents:40,currentTracks:[],melodyTrackIndex:-1,pitchHistory:[],midiGhostNotes:[],phrases:[],practiceExpectedNotes:null,micRenderMode:"graph",practiceMode:"free",editTool:"view",gateThreshold:-50,guideVolume:.8,accompVolume:.8,selectedNote:null,bpm:120,isMonophonic:!0,guideOctaveOffset:1,scoreResult:null,loadingProgress:null,isGuideSoundEnabled:!0,isBackingSoundEnabled:!0,tempoMap:[],loopEnabled:!1,loopStart:0,loopEnd:0,transposeOffset:0,isParticlesEnabled:!0,noteNotation:"alphabet",metronomeMode:"off"},this.loadSettings()}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(a=>a!==e)}}notify(){this.listeners.forEach(e=>e())}pushHistory(){const e=JSON.parse(JSON.stringify(this.state.currentTracks));this.history.push(e),this.history.length>50&&this.history.shift(),this.redoStack=[]}undo(){if(this.history.length===0)return;const e=JSON.parse(JSON.stringify(this.state.currentTracks));this.redoStack.push(e);const a=this.history.pop();a&&(this.state.currentTracks=a,this.draw(),this.notify())}redo(){if(this.redoStack.length===0)return;const e=JSON.parse(JSON.stringify(this.state.currentTracks));this.history.push(e);const a=this.redoStack.pop();a&&(this.state.currentTracks=a,this.draw(),this.notify())}setCanvas(e){this.visualizer=new vy(e),this.draw()}setTool(e){this.state.editTool=e,e!=="view"&&(!this.state.currentTracks.length||this.state.melodyTrackIndex===-1)&&(this.state.currentTracks=[{name:"Guide Track",notes:[]}],this.state.melodyTrackIndex=0),this.draw(),this.notify()}async ensureAudio(){var e;if(!this.audioCtx){const a=window.AudioContext||window.webkitAudioContext;if(!a)throw new Error("AudioContext not supported");this.audioCtx=new a({latencyHint:"interactive"})}!this.masterGain&&this.audioCtx&&(this.masterGain=this.audioCtx.createGain(),this.masterGain.connect(this.audioCtx.destination),this.melodyGain=this.audioCtx.createGain(),this.melodyGain.connect(this.masterGain)),((e=this.audioCtx)==null?void 0:e.state)==="suspended"&&await this.audioCtx.resume()}async initMic(e){if(await this.ensureAudio(),!this.audioCtx)return!1;try{this.micStream&&this.micStream.getTracks().forEach(n=>n.stop());const a={audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,deviceId:e?{exact:e}:void 0}};return this.micStream=await navigator.mediaDevices.getUserMedia(a),this.micSource=this.audioCtx.createMediaStreamSource(this.micStream),this.micAnalyser=this.audioCtx.createAnalyser(),this.micAnalyser.fftSize=2048,this.micData=new Float32Array(this.micAnalyser.fftSize),this.micSource.connect(this.micAnalyser),this.startAnalysis(),!0}catch(a){return console.error("initMic failed",a),!1}}startAnalysis(){this.analysisTimer&&clearInterval(this.analysisTimer),this.analysisTimer=window.setInterval(()=>this.analyze(),1e3/this.analysisRate)}analyze(){if(!this.micAnalyser||!this.micData||!this.audioCtx)return;this.micAnalyser.getFloatTimeDomainData(this.micData);let e=0;const a=this.state.playbackPosition+this.state.timelineOffsetSec;if(Array.isArray(this.state.midiGhostNotes)){const s=this.state.midiGhostNotes.find(r=>a>=r.time&&a<=r.time+r.duration);if(s){const r=this.state.guideOctaveOffset*12;e=440*Math.pow(2,(s.midi+r-69)/12)}}const n=this.pitchAnalyzer.analyze(this.micData,this.audioCtx.sampleRate,{viterbi:!0,guideFreq:e}),{freq:l,conf:i}=n;if(this.state.currentMicPitch=l,this.state.currentMicConf=i,this.state.isPlaying){const s=this.state.playbackPosition;this.scoreAnalyzer.feed(s,l,e)}if(l>0&&this.state.isPlaying){const s=this.state.playbackPosition,r=.05;this.isRecording&&(this.state.pitchHistory=this.state.pitchHistory.filter(u=>u.time<s-.1||u.time>s+.1)),this.state.pitchHistory.push({time:s-r,visOff:r,freq:l,conf:i}),this.state.pitchHistory.length>2e3&&this.state.pitchHistory.shift()}this.state.isPlaying||this.draw()}async startPractice(e={mode:"Mix"}){var a;if(await this.ensureAudio(),this.state.isPracticing?!this.originalGhostNotes&&this.state.midiGhostNotes.length>0&&((a=this.state.practiceConfig)==null?void 0:a.mode)==="Midi"&&(console.log("[Practice] Switching from MIDI practice, backing up notes."),this.originalGhostNotes=[...this.state.midiGhostNotes]):this.state.midiGhostNotes.length>0?(console.log("[Practice] Initial Backup: Saved",this.state.midiGhostNotes.length,"guide notes."),this.originalGhostNotes=[...this.state.midiGhostNotes]):this.originalGhostNotes=null,this.stopPractice(),this.state.isPracticing=!0,this.state.isPitchOnlyMode=!0,this.state.practiceConfig=e,!this.audioCtx){console.error("Failed to initialize AudioContext");return}if(this.audioCtx.state==="suspended"&&await this.audioCtx.resume(),this.state.playbackPosition=0,this.playbackStartTime=this.audioCtx.currentTime,console.log(`[Practice] Started (${e.mode}).`),this.state.isPlaying=!0,this.state.scoreResult=null,this.nextPracticeTime=0,this.nextMetronomeTime=this.audioCtx.currentTime,this.nextNoteIndexToSchedule=0,e.mode==="Midi")if(this.state.midiGhostNotes.length===0&&this.state.melodyTrackIndex!==-1&&this.state.currentTracks[this.state.melodyTrackIndex]&&(this.state.midiGhostNotes=this.state.currentTracks[this.state.melodyTrackIndex].notes.map(n=>({...n,role:"call"}))),this.state.midiGhostNotes.length>0){const n=this.state.midiGhostNotes[this.state.midiGhostNotes.length-1];this.nextPracticeTime=n.time+n.duration}else{console.warn("[Practice] MIDI mode selected but no melody track is set."),this.stopPractice();return}else this.state.midiGhostNotes=[],this.updatePracticeQueue();this.reqFrameId||this.loop(),this.notify()}stopPractice(){var e;this.stopPlayback(),this.state.isPracticing&&(this.state.isPracticing=!1,this.state.isPitchOnlyMode=!1,((e=this.state.practiceConfig)==null?void 0:e.mode)!=="Midi"&&(this.originalGhostNotes?(console.log("[Practice] Restoring",this.originalGhostNotes.length,"original guide notes."),this.state.midiGhostNotes=[...this.originalGhostNotes],this.originalGhostNotes=null):(console.log("[Practice] No backup notes to restore. Clearing."),this.state.midiGhostNotes=[]),this.state.scoreResult=null)),this.practiceQueue=[],this.nextNoteIndexToSchedule=0,this.notify()}updatePracticeQueue(){var n;if(!this.state.isPracticing||((n=this.state.practiceConfig)==null?void 0:n.mode)==="Midi")return;const e=10,a=this.state.playbackPosition;if(this.nextPracticeTime<a+e)try{const l=Math.max(a,this.nextPracticeTime),i=eo.generateRandomBatch(l,15,this.state.bpm||120,this.state.practiceConfig);i.notes.length>0?(this.state.midiGhostNotes.push(...i.notes),this.nextPracticeTime=i.nextStartTime,this.generatePhrases(),this.notify()):(console.warn("[Practice] No notes generated. Skipping forward."),this.nextPracticeTime+=5)}catch(l){console.error("[Practice] Error generating patterns:",l),this.nextPracticeTime+=5}}async startPlayback(){this.state.isPlaying||this.audioCtx&&(this.ensureAudio(),this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.state.isPlaying=!0,this.state.scoreResult=null,this.scoreAnalyzer.reset(),this.playbackStartTime=this.audioCtx.currentTime-this.state.playbackPosition,this.playbackStartPerf=performance.now(),this.onSeek(this.state.playbackPosition),this.loop(),this.notify())}stopPlayback(){if(this.state.isPlaying=!1,this.reqFrameId&&cancelAnimationFrame(this.reqFrameId),this.reqFrameId=null,this.backingSource){try{this.backingSource.stop()}catch{}this.backingSource=null}if(this.scoreAnalyzer){const e=this.scoreAnalyzer.summarize(this.state.phrases);this.updateState({scoreResult:e})}this.checkPhraseCompletion(),this.draw(),this.notify()}checkPhraseCompletion(){if(!this.state.isPlaying||!this.scoreAnalyzer||this.state.phrases.length===0)return;const e=this.state.playbackPosition,a=.1;for(const n of this.state.phrases)if(!this.processedPhrases.has(n.id)&&e>n.endTime+a){this.processedPhrases.add(n.id);const l=this.scoreAnalyzer.summarize([n]);if(l.phraseScores.length>0){const i=l.phraseScores[0];console.log(`Phrase finished: ${i.evaluation} (${i.score})`),this.updateState({lastPhraseResult:i})}}}syncBackingTrack(){if(this.backingSource){try{this.backingSource.stop()}catch{}this.backingSource=null}if(!this.state.isPlaying||!this.audioCtx||!this.backingBuffer||!this.state.isBackingSoundEnabled)return;const e=this.state.playbackPosition;e<this.backingBuffer.duration&&(this.backingSource=this.audioCtx.createBufferSource(),this.backingSource.buffer=this.backingBuffer,this.backingSource.connect(this.masterGain),this.backingSource.start(0,e))}onSeek(e){if(this.audioCtx&&(this.playbackStartTime=this.audioCtx.currentTime-e,this.nextMetronomeTime=0),this.state.isPlaying&&!this._isSeeking&&this.syncBackingTrack(),this.state.melodyTrackIndex!==-1&&this.state.currentTracks[this.state.melodyTrackIndex]){const a=this.state.currentTracks[this.state.melodyTrackIndex].notes;let n=0;for(;n<a.length&&a[n].time+a[n].duration<e;)n++;this.nextGuideNoteIndex=n}}startSeek(){var e;this._isSeeking||(this._isSeeking=!0,this.masterGain&&this.masterGain.gain.setValueAtTime(0,((e=this.audioCtx)==null?void 0:e.currentTime)||0))}endSeek(){var e;this._isSeeking&&(this._isSeeking=!1,this.masterGain&&this.masterGain.gain.setValueAtTime(1,((e=this.audioCtx)==null?void 0:e.currentTime)||0),this.state.isPlaying&&this.syncBackingTrack())}loadSettings(){try{const e=localStorage.getItem("ontei-settings");if(e){const a=JSON.parse(e),n=["verticalZoom","pxPerSec","noteNotation","tempoFactor","guideOctaveOffset","transposeOffset","guideVolume","accompVolume","gateThreshold","toleranceCents","isParticlesEnabled"],l={};n.forEach(i=>{a[i]!==void 0&&(l[i]=a[i])}),this.state={...this.state,...l},console.log("[AudioEngine] Settings loaded",l)}}catch(e){console.error("Failed to load settings",e)}}saveSettings(){try{const a=["verticalZoom","pxPerSec","noteNotation","tempoFactor","guideOctaveOffset","transposeOffset","guideVolume","accompVolume","gateThreshold","toleranceCents","isParticlesEnabled"].reduce((n,l)=>(n[l]=this.state[l],n),{});localStorage.setItem("ontei-settings",JSON.stringify(a))}catch(e){console.error("Failed to save settings",e)}}updateState(e){this.state={...this.state,...e},e.playbackPosition!==void 0&&this.onSeek(e.playbackPosition),e.isBackingSoundEnabled!==void 0&&this.syncBackingTrack();const a=["verticalZoom","pxPerSec","noteNotation","tempoFactor","guideOctaveOffset","transposeOffset","guideVolume","accompVolume","gateThreshold","toleranceCents","isParticlesEnabled"];Object.keys(e).some(n=>a.includes(n))&&this.saveSettings(),this.draw(),this.notify()}loop(){if(!this.state.isPlaying)return;this.audioCtx&&(this.state.playbackPosition=this.audioCtx.currentTime-this.playbackStartTime),this.state.loopEnabled&&this.state.loopEnd>this.state.loopStart&&this.state.playbackPosition>=this.state.loopEnd&&(this.state.playbackPosition=this.state.loopStart,this.playbackStartTime=this.audioCtx.currentTime-this.state.loopStart,this.onSeek(this.state.loopStart),this.syncBackingTrack());const e=1;let a=0;if(this.backingBuffer&&(a=Math.max(a,this.backingBuffer.duration)),this.state.melodyTrackIndex!==-1&&this.state.currentTracks[this.state.melodyTrackIndex]){const n=this.state.currentTracks[this.state.melodyTrackIndex].notes;if(n.length>0){const l=n[n.length-1];a=Math.max(a,l.time+l.duration)}}if(this.state.midiGhostNotes.length>0){const n=this.state.midiGhostNotes[this.state.midiGhostNotes.length-1];a=Math.max(a,n.time+n.duration)}if(a>0&&this.state.playbackPosition>a+e){console.log("Auto-stopping at end of track"),this.stopPlayback();return}this.state.isPracticing&&(this.schedulePracticeNotes(),this.updatePracticeQueue()),this.state.isGuideSoundEnabled&&(this.state.melodyTrackIndex!==-1||this.state.midiGhostNotes.length>0)&&this.scheduleGuideNotes(),this.scheduleMetronome(),this.draw(),this.reqFrameId=requestAnimationFrame(()=>this.loop())}scheduleMetronome(){if(this.state.metronomeMode==="off"||!this.audioCtx)return;this.nextMetronomeTime<this.audioCtx.currentTime-.2&&(this.nextMetronomeTime=this.audioCtx.currentTime+.1);const e=60/(this.state.bpm||120),a=.5;for(;this.nextMetronomeTime<this.audioCtx.currentTime+a;){const n=this.nextMetronomeTime-this.playbackStartTime,i=Math.round(n/e)%4===0;let s=!1;this.state.metronomeMode==="measure"?i&&(s=!0):this.state.metronomeMode==="beat"&&(s=!0),s&&this.playClick(this.nextMetronomeTime,i),this.nextMetronomeTime+=e}}playClick(e,a){if(!this.audioCtx||!this.masterGain)return;const n=this.audioCtx.createOscillator(),l=this.audioCtx.createGain();n.connect(l),l.connect(this.masterGain),n.type="triangle",n.frequency.value=a?1e3:800,l.gain.setValueAtTime(.3,e),l.gain.exponentialRampToValueAtTime(.001,e+.05),n.start(e),n.stop(e+.05)}scheduleGuideNotes(){if(!this.audioCtx)return;const e=.1,a=this.state.playbackPosition;let n=[],l=!1;const i=this.state.melodyTrackIndex!==-1?this.state.currentTracks[this.state.melodyTrackIndex]:null;if(i&&i.type!=="audio")n=i.notes;else if(this.state.midiGhostNotes.length>0)n=this.state.midiGhostNotes,l=!0;else return;for(;this.nextGuideNoteIndex<n.length;){const s=n[this.nextGuideNoteIndex];if(l&&s.role==="resp"){this.nextGuideNoteIndex++;continue}if(s.time+s.duration<a-.05){this.nextGuideNoteIndex++;continue}if(s.time>a+e)break;const r=Math.max(0,a-s.time);if(s.duration-r>.05){const u=Math.max(this.audioCtx.currentTime,this.playbackStartTime+s.time),h=this.playbackStartTime+s.time+s.duration-u;if(h>.03){const f=this.state.guideOctaveOffset*12+this.state.transposeOffset;this.scheduleNote(s.midi+f,u,h,r>0)}}this.nextGuideNoteIndex++}}schedulePracticeNotes(){if(!this.audioCtx)return;const e=.1,a=this.state.playbackPosition,n=this.state.midiGhostNotes;for(;this.nextNoteIndexToSchedule<n.length;){const l=n[this.nextNoteIndexToSchedule];if(l.time>a+e)break;if(l.role==="call"){const i=this.playbackStartTime+l.time;if(i>=this.audioCtx.currentTime-.05){const s=this.state.guideOctaveOffset*12;this.scheduleNote(l.midi+s,i,l.duration)}}this.nextNoteIndexToSchedule++}}scheduleNote(e,a,n,l=!1){if(!this.audioCtx||!this.masterGain)return;const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="triangle";const r=440*Math.pow(2,(e-69)/12);i.frequency.value=r,l?(s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(.4*this.state.guideVolume,a+.05)):(s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(.4*this.state.guideVolume,a+.01)),s.gain.exponentialRampToValueAtTime(.01,a+n-.01),s.gain.setValueAtTime(0,a+n),i.connect(s),s.connect(this.masterGain),i.start(a),i.stop(a+n+.1),setTimeout(()=>{i.disconnect(),s.disconnect()},(a-this.audioCtx.currentTime+n+.2)*1e3)}draw(){this.visualizer&&this.visualizer.draw(this.state)}async loadAudioFile(e){if(this.state.midiGhostNotes.length>0&&(this.state.midiGhostNotes=[],this.state.scoreResult=null),this.updateState({loadingProgress:0}),await this.ensureAudio(),!this.audioCtx){this.updateState({loadingProgress:null});return}try{const a=await e.arrayBuffer();this.updateState({loadingProgress:10});const n=await this.audioCtx.decodeAudioData(a);this.updateState({loadingProgress:15}),this.backingBuffer=n;const l=await Sy(n,20,440,!0,null,i=>this.updateState({loadingProgress:i}));this.state.currentTracks=[{name:e.name,notes:l.notes,pitchData:l.pitchData,type:"audio"}],this.state.melodyTrackIndex=0,this.state.playbackPosition=0,this.state.midiGhostNotes=[],this.state.scoreResult=null}catch(a){console.error("Load Audio Failed",a),alert("")}finally{this.updateState({loadingProgress:null}),this.draw()}}addNote(e){if(this.state.melodyTrackIndex===-1)return;this.pushHistory();const a=this.state.currentTracks[this.state.melodyTrackIndex];a.notes.push(e),a.notes.sort((n,l)=>n.time-l.time),this.draw(),this.notify()}removeNote(e){if(this.state.melodyTrackIndex===-1)return;this.pushHistory();const a=this.state.currentTracks[this.state.melodyTrackIndex];a.notes=a.notes.filter(n=>n!==e),this.draw(),this.notify()}async previewNote(e){if(this.audioCtx||await this.ensureAudio(),!this.audioCtx)return;const a=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();a.type="triangle";const l=440*Math.pow(2,(e-69)/12);a.frequency.setValueAtTime(l,this.audioCtx.currentTime);const i=this.audioCtx.currentTime;n.gain.setValueAtTime(0,i),n.gain.linearRampToValueAtTime(.5,i+.02),n.gain.exponentialRampToValueAtTime(.01,i+.5),a.connect(n),n.connect(this.masterGain),a.start(i),a.stop(i+.6),setTimeout(()=>{a.disconnect(),n.disconnect()},600)}async loadMidiFile(e){const a=await e.arrayBuffer();try{await Gi.saveMidi(a),console.log("[AudioEngine] MIDI saved to storage")}catch(n){console.warn("[AudioEngine] Failed to save MIDI to storage",n)}return this.loadMidiFromBuffer(a)}loadMidiFromBuffer(e){const a=new t0.Midi(e);this.loadedMidi=a;const n=a.tracks.map((i,s)=>({id:s,name:i.name,instrument:i.instrument.name,noteCount:i.notes.length,channel:i.channel})),l=n.filter(i=>i.noteCount>0);return this.updateState({scoreResult:null}),n.length===1?(this.importMidiTrack(n[0].id),n):l.length===1?(this.importMidiTrack(l[0].id),n):(this.updateState({midiTrackCandidates:n}),n)}async startRecording(){if(this.micStream||await this.initMic(),!this.micStream){console.error("No mic stream available for recording");return}this.recordedChunks=[],this.mediaRecorder=new MediaRecorder(this.micStream),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.recordedChunks.push(e.data)},this.mediaRecorder.start(),this.isRecording=!0,this.notify()}async stopRecording(){return new Promise(e=>{if(!this.mediaRecorder||this.mediaRecorder.state==="inactive"){e(null);return}this.mediaRecorder.onstop=()=>{const a=new Blob(this.recordedChunks,{type:"audio/webm"});this.recordedChunks=[],this.isRecording=!1,this.notify(),e(a)},this.mediaRecorder.stop()})}generatePhrases(){const e=this.state.midiGhostNotes.sort((s,r)=>s.time-r.time);if(e.length===0)return;const a=[];let n=[],l=e[0].time;const i=1.5;for(let s=0;s<e.length;s++){const r=e[s];n.push(r);const o=e[s+1];if(!o||o.time-(r.time+r.duration)>i){const g=r.time+r.duration;a.push({id:crypto.randomUUID(),startTime:l,endTime:g,notes:[...n]}),n=[],o&&(l=o.time)}}console.log(`Generated ${a.length} phrases`),this.updateState({phrases:a})}importMidiTrack(e){if(!this.loadedMidi)return;this.state.midiGhostNotes.length>0&&(this.state.midiGhostNotes=[],this.state.scoreResult=null);const a=this.loadedMidi.tracks[e];if(!a)return;const n=this.loadedMidi.header.tempos.map(i=>({time:i.time||0,bpm:i.bpm}));n.length>0&&(this.state.bpm=Math.round(n[0].bpm)),this.state.tempoMap=n;const l=a.notes.map(i=>({midi:i.midi,time:i.time,duration:i.duration,role:"call"}));this.state.midiGhostNotes=l,this.state.playbackPosition=0,this.notify()}exportSession(){const e={version:1,timestamp:new Date().toISOString(),bpm:this.state.bpm,tempoMap:this.state.tempoMap,practiceConfig:this.state.practiceConfig,ghostNotes:this.state.midiGhostNotes};return JSON.stringify(e,null,2)}async importSession(e){this.state.midiGhostNotes.length>0;const a=await e.text();try{const n=JSON.parse(a);return n.bpm&&(this.state.bpm=n.bpm),n.tempoMap&&(this.state.tempoMap=n.tempoMap),n.practiceConfig&&(this.state.practiceConfig=n.practiceConfig),n.ghostNotes&&(this.state.midiGhostNotes=n.ghostNotes,this.state.isPracticing=!0),this.notify(),!0}catch(n){return console.error("Failed to import session",n),!1}}triggerSessionDownload(){const e=this.exportSession(),a=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download=`practice_session_${new Date().toISOString().slice(0,19).replace(/[:T]/g,"-")}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}async importBackingFile(e){if(this.audioCtx||await this.ensureAudio(),!!this.audioCtx)try{const a=await e.arrayBuffer(),n=await this.audioCtx.decodeAudioData(a);this.backingBuffer=n,this.state.isBackingSoundEnabled=!0,console.log(`[AudioEngine] Loaded Backing Track: ${e.name} (${n.duration.toFixed(2)}s)`),this.notify()}catch(a){console.error("Failed to load backing file:",a)}}async initFromStorage(){try{await Gi.init();const e=await Gi.loadMidi();if(e){console.log("[AudioEngine] Restoring MIDI from storage...");const a=this.loadMidiFromBuffer(e);if(a&&a.length>0){const n=a.filter(l=>l.noteCount>0);n.length===1&&this.importMidiTrack(n[0].id)}}}catch(e){console.warn("[AudioEngine] Failed to restore from storage",e)}}resetSession(e){this.stopPlayback(),this.stopPractice(),e==="all"?(this.state.currentTracks=[],this.state.melodyTrackIndex=-1,this.state.midiGhostNotes=[],this.state.pitchHistory=[],this.state.phrases=[],this.state.scoreResult=null,this.state.playbackPosition=0,this.backingBuffer=null,this.loadedMidi=null,this.originalGhostNotes=null,Gi.saveMidi(new ArrayBuffer(0)).catch(()=>{}),console.log("[AudioEngine] Session fully reset")):(this.state.pitchHistory=[],this.state.scoreResult=null,console.log("[AudioEngine] Pitch history cleared")),this.draw(),this.notify()}}const j=new wy;window.audioEngine=j;function qi(t){const e=Math.max(0,t|0);return Math.round(Math.max(60,Math.min(e-80,e*.33)))}function Ty(){const t=G.useRef(null),e=G.useRef(null),[a,n]=G.useState("default"),l=G.useRef("idle"),i=G.useRef({x:0,y:0}),s=G.useRef({vOffset:0,tOffset:0,noteTime:0,noteMidi:0,noteDur:0,noteStartTime:0,noteStartMidi:0,clickTimeOffset:0,clickMidiOffset:0,playbackPosition:0}),r=G.useRef(null),o=G.useRef(null);G.useEffect(()=>{if(t.current&&e.current){const f=()=>{if(e.current&&t.current){const d=e.current.clientWidth,y=e.current.clientHeight;(Math.abs(t.current.width-d)>1||Math.abs(t.current.height-y)>1)&&(t.current.width=d,t.current.height=y,j.draw())}};return f(),window.addEventListener("resize",f),j.setCanvas(t.current),()=>window.removeEventListener("resize",f)}},[]),G.useEffect(()=>{const f=t.current;if(!f)return;let d=0,y=0,x=!1,w=0;const p=N=>{if(N.length<2)return 0;const M=N[0].clientX-N[1].clientX,v=N[0].clientY-N[1].clientY;return Math.sqrt(M*M+v*v)},m=N=>{var M;return N.length<2?((M=N[0])==null?void 0:M.clientX)||0:(N[0].clientX+N[1].clientX)/2},b=N=>{if(N.touches.length===2){N.preventDefault(),x=!0,d=p(N.touches),y=m(N.touches);const M=f.getBoundingClientRect(),v=y-M.left,k=qi(f.width),E=j.state.pxPerSec/j.state.tempoFactor;w=j.state.playbackPosition+j.state.timelineOffsetSec+(v-k)/E,j.startSeek()}},S=N=>{if(!x||N.touches.length<2)return;N.preventDefault();const M=f.getBoundingClientRect(),v=p(N.touches),k=m(N.touches),E=k-M.left,O=qi(f.width);if(d>0){const at=v/d;if(Math.abs(at-1)>.01){const ft=j.state.pxPerSec,et=Math.max(20,Math.min(800,ft*at)),_=et/j.state.tempoFactor,D=Math.max(0,w-j.state.timelineOffsetSec-(E-O)/_);j.updateState({pxPerSec:et,playbackPosition:D})}}const J=k-y;if(Math.abs(J)>2){const at=j.state.pxPerSec/j.state.tempoFactor,ft=-J/at,et=Math.max(0,j.state.playbackPosition+ft);j.updateState({playbackPosition:et}),w=et+j.state.timelineOffsetSec+(E-O)/at}d=v,y=k},T=N=>{x&&N.touches.length<2&&(x=!1,j.endSeek())};return f.addEventListener("touchstart",b,{passive:!1}),f.addEventListener("touchmove",S,{passive:!1}),f.addEventListener("touchend",T),f.addEventListener("touchcancel",T),()=>{f.removeEventListener("touchstart",b),f.removeEventListener("touchmove",S),f.removeEventListener("touchend",T),f.removeEventListener("touchcancel",T)}},[]);const u=f=>{var et;j.audioCtx||j.ensureAudio();const d=t.current;if(!d)return;const y=d.getBoundingClientRect(),x=f.clientX-y.left,w=f.clientY-y.top;d.setPointerCapture(f.pointerId),i.current={x,y:w};const{editTool:p,timelineOffsetSec:m,verticalOffset:b,selectedNote:S,playbackPosition:T,pxPerSec:N,tempoFactor:M,guideOctaveOffset:v}=j.state,k=v*12;if(w<30){const _=qi(d.width),D=N/M,A=T+m+(x-_)/D,Q=Math.max(0,A-m);if(f.altKey){l.current="set_loop",j.updateState({loopEnabled:!0,loopStart:Q,loopEnd:Q}),s.current.playbackPosition=Q,n("col-resize");return}l.current="scrub",j.updateState({playbackPosition:Q}),s.current.playbackPosition=Q,j.startSeek(),n("ew-resize");return}if(p==="view"){l.current="pan",s.current.playbackPosition=T,s.current.vOffset=b,j.startSeek(),n("grabbing");return}const E=(et=j.visualizer)==null?void 0:et.getQuantizedTimeMidi(x,w,j.state);let O=null,J=!1,at=!1;if(E){const{exactTime:_,exactMidi:D}=E;if(console.log("[Debug] PointerDown",JSON.stringify({x,y:w,exactTime:_,exactMidi:D,offset:k})),S){const A=S.time,Q=S.time+S.duration,lt=S.midi+k;Math.abs(_-A)<.2&&Math.abs(D-lt)<1?(O=S,at=!0):Math.abs(_-Q)<.2&&Math.abs(D-lt)<1&&(O=S,J=!0)}if(!O){const A=j.state.currentTracks[j.state.melodyTrackIndex];O=(A==null?void 0:A.notes.find(Q=>{const lt=Math.abs(Q.midi+k-D),vt=_>=Q.time&&_<=Q.time+Q.duration&&lt<.8;return console.log("[Debug] Check Note",JSON.stringify({noteTime:Q.time,noteMidi:Q.midi,visMidi:Q.midi+k,exactTime:_,exactMidi:D,diffMidi:lt,match:vt})),vt}))||null}O&&(s.current.noteStartTime=O.time,s.current.noteStartMidi=O.midi,s.current.noteDur=O.duration,s.current.clickTimeOffset=_-O.time,s.current.clickMidiOffset=D-(O.midi+k))}if(p==="eraser"){O&&(j.removeNote(O),S===O&&j.updateState({selectedNote:null}));return}if(p==="select"||p==="pencil"&&O){if(O){o.current=JSON.parse(JSON.stringify(j.state.currentTracks)),r.current=O,at?(l.current="resize_note_left",n("ew-resize")):J?(l.current="resize_note_right",n("ew-resize")):(j.previewNote(O.midi+k),l.current="move_note",n("move")),j.updateState({selectedNote:O});return}p==="select"&&j.updateState({selectedNote:null})}if(p==="pencil"&&E&&!O){let _=.25;const D=j.state.currentTracks[j.state.melodyTrackIndex];if(D){if(D.notes.find(R=>E.time>=R.time&&E.time<R.time+R.duration-.001&&Math.abs(R.midi+k-E.midi)<.5)||j.state.isMonophonic&&D.notes.find(Y=>E.time>=Y.time&&E.time<Y.time+Y.duration-.001))return;const vt=j.state.isMonophonic,K=D.notes.filter(R=>R.time<=E.time+.001?!1:vt?!0:Math.abs(R.midi+k-E.midi)<.5).sort((R,Y)=>R.time-Y.time)[0];if(K&&(_=Math.min(.25,K.time-E.time),_<=0))return}const A={time:E.time,midi:E.midi-k,duration:_};j.addNote(A),j.updateState({selectedNote:A}),j.previewNote(E.midi),s.current.noteStartTime=E.time,s.current.noteStartMidi=E.midi,l.current="creating_note",r.current=A,n("crosshair"),o.current=null}},g=f=>{var M;if(l.current==="idle")return;const d=t.current;if(!d)return;const y=d.getBoundingClientRect(),x=f.clientX-y.left,w=f.clientY-y.top,p=x-i.current.x,m=w-i.current.y,{pxPerSec:b,tempoFactor:S}=j.state;if(l.current==="scrub"){const v=b/S,k=p/v,E=Math.max(0,s.current.playbackPosition+k);j.updateState({playbackPosition:E});return}if(l.current==="set_loop"){const v=b/S,k=qi(d.width),O=j.state.playbackPosition+j.state.timelineOffsetSec+(x-k)/v,J=s.current.playbackPosition,at=Math.max(J+.5,O);j.updateState({loopEnd:at});return}if(l.current==="pan"){const v=b/S,k=-p/v,E=Math.max(0,s.current.playbackPosition+k);j.updateState({playbackPosition:E,timelineOffsetSec:0,verticalOffset:s.current.vOffset+m/5});return}const T=(M=j.visualizer)==null?void 0:M.getQuantizedTimeMidi(x,w,j.state);if(!T||!r.current)return;const N=r.current;if(l.current==="move_note"){const v=T.exactTime-s.current.clickTimeOffset,k=T.exactMidi-s.current.clickMidiOffset,E=Math.max(0,Math.round(v*20)/20),O=j.state.guideOctaveOffset*12,at=Math.max(0,Math.min(127,Math.round(k)))-O,ft=j.state.currentTracks[j.state.melodyTrackIndex];if(ft){const et=j.state.isMonophonic,_=E+N.duration;if(ft.notes.some(A=>{if(A===N)return!1;const Q=A.time+A.duration;return E<Q-.01&&_>A.time+.01?et?!0:Math.abs(A.midi-at)<.5:!1}))return}N.time=E,N.midi=at,j.draw()}else if(l.current==="resize_note_right"||l.current==="resize_note"){let v=Math.max(N.time+.05,T.time);const k=j.state.currentTracks[j.state.melodyTrackIndex];if(k){const E=j.state.isMonophonic,O=k.notes.filter(J=>J===N||J.time<N.time?!1:E?!0:Math.abs(J.midi-N.midi)<.5).sort((J,at)=>J.time-at.time)[0];O&&(v=Math.min(v,O.time))}N.duration=Math.max(.05,Math.round((v-N.time)*20)/20),j.draw()}else if(l.current==="resize_note_left"){const v=s.current.noteStartTime+s.current.noteDur;let k=T.time;k=Math.min(v-.05,k),k=Math.max(0,k);const E=j.state.currentTracks[j.state.melodyTrackIndex];if(E){const at=j.state.isMonophonic,ft=E.notes.filter(et=>et===N||et.time>=v?!1:at?!0:Math.abs(et.midi-N.midi)<.5).filter(et=>et.time<N.time).sort((et,_)=>_.time-et.time)[0];ft&&(k=Math.max(k,ft.time+ft.duration))}const O=Math.max(.05,Math.round((v-k)*20)/20),J=v-O;N.time=J,N.duration=O,j.draw()}else if(l.current==="creating_note"){let v=Math.max(s.current.noteStartTime+.05,T.time);const k=j.state.currentTracks[j.state.melodyTrackIndex],E=j.state.isMonophonic,O=j.state.guideOctaveOffset*12,J=T.midi,at=J-O;if(k){const ft=k.notes.filter(et=>et===N||et.time<N.time?!1:E?!0:Math.abs(et.midi-at)<.5).sort((et,_)=>et.time-_.time)[0];ft&&(v=Math.min(v,ft.time))}N.duration=Math.max(.05,Math.round((v-N.time)*20)/20),N.midi!==at&&(N.midi=at,j.previewNote(J)),j.draw()}},h=f=>{const d=t.current;if(d&&d.releasePointerCapture(f.pointerId),(l.current==="resize_note_right"||l.current==="resize_note_left")&&r.current&&j.previewNote(r.current.midi+j.state.guideOctaveOffset*12),o.current){const y=JSON.stringify(j.state.currentTracks),x=JSON.stringify(o.current);y!==x&&(j.history.push(o.current),j.history.length>50&&j.history.shift(),j.redoStack=[])}if((l.current==="scrub"||l.current==="pan")&&j.endSeek(),o.current=null,l.current="idle",n("default"),r.current=null,j.state.editTool==="pencil"||j.state.editTool==="select"){const y=j.state.currentTracks[j.state.melodyTrackIndex];y&&y.notes.sort((x,w)=>x.time-w.time),j.notify()}};return c.jsx("div",{ref:e,className:"w-full h-full relative overflow-hidden bg-[#222]",children:c.jsx("canvas",{ref:t,className:"absolute inset-0 block touch-none w-full h-full",style:{cursor:a},onPointerDown:u,onPointerMove:g,onPointerUp:h,onPointerCancel:h,onWheel:f=>{f.preventDefault(),f.ctrlKey;const{deltaX:d,deltaY:y,ctrlKey:x,shiftKey:w,altKey:p,metaKey:m}=f,b=x||m,S=p,T=w;if(b){const v=y>0?.9:1.1,k=Math.max(10,Math.min(1e3,j.state.pxPerSec*v));j.updateState({pxPerSec:k});return}if(S){const v=y>0?1.1:.9,k=Math.max(1,Math.min(10,j.state.verticalZoom*v));j.updateState({verticalZoom:k});return}if(T||Math.abs(d)>Math.abs(y)){const k=(d!==0?d:y)/j.state.pxPerSec,E=Math.max(0,j.state.playbackPosition+k);j.updateState({playbackPosition:E});return}const N=y/500*10,M=Math.max(0,Math.min(100,j.state.verticalOffset-N));j.updateState({verticalOffset:M})}})})}/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i0=(...t)=>t.filter((e,a,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===a).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var My={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=G.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:l="",children:i,iconNode:s,...r},o)=>G.createElement("svg",{ref:o,...My,width:e,height:e,stroke:t,strokeWidth:n?Number(a)*24/Number(e):a,className:i0("lucide",l),...r},[...s.map(([u,g])=>G.createElement(u,g)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(t,e)=>{const a=G.forwardRef(({className:n,...l},i)=>G.createElement(jy,{ref:i,iconNode:e,className:i0(`lucide-${Ny(t)}`,n),...l}));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Rs=xt("Activity",ky);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],s0=xt("Calendar",Ay);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],r0=xt("ChartColumn",zy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],tc=xt("Check",_y);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ey=xt("CircleAlert",Cy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dy=xt("CircleCheckBig",Oy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ry=xt("CircleHelp",Uy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Hy=xt("CircleX",By);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ou=xt("Clock",Gy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Vy=xt("Download",qy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],c0=xt("Eraser",Yy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]],Ly=xt("FileX",Xy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Zy=xt("Flame",Qy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Ky=xt("Hand",Fy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Iy=xt("Info",Jy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],ao=xt("Mic",Py);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],$y=xt("MousePointer2",Wy);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Bs=xt("Music",tx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],ax=xt("Pause",ex);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],lx=xt("PenLine",nx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],sx=xt("Pencil",ix);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],uu=xt("Play",rx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],ox=xt("Repeat",cx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],fx=xt("Settings2",ux);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],o0=xt("Settings",dx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],u0=xt("Square",hx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Hs=xt("Target",mx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],dr=xt("Trash2",gx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Qf=xt("TrendingUp",px);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Gs=xt("Trophy",bx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ye=xt("X",yx);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vx=xt("Zap",xx);function Sx({tracks:t,onSelect:e,onCancel:a,open:n}){return n?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:c.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-xl w-full max-w-lg max-h-[80vh] flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[c.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[c.jsx(Bs,{className:"w-5 h-5 text-emerald-400"}),"Select MIDI Track to Practice"]}),c.jsx("button",{onClick:a,className:"p-1 hover:bg-white/10 rounded-full transition-colors text-white/50 hover:text-white",children:c.jsx(Ye,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"overflow-y-auto p-2 flex-1 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",children:t.length===0?c.jsxs("div",{className:"p-12 text-center text-white/50 flex flex-col items-center gap-2",children:[c.jsx(Bs,{className:"w-12 h-12 opacity-20"}),c.jsx("p",{children:"No playable tracks found in this MIDI file."})]}):c.jsx("div",{className:"grid gap-2",children:t.map(l=>c.jsxs("button",{onClick:()=>e(l.id),className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-all group text-left border border-white/5 hover:border-emerald-500/30",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-400 font-mono text-sm shrink-0",children:l.id+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-white font-medium truncate text-lg",children:l.name||`Track ${l.id+1}`}),c.jsxs("div",{className:"text-white/50 text-sm flex items-center gap-3",children:[c.jsx("span",{className:"flex items-center gap-1",children:l.instrument}),c.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),c.jsxs("span",{children:[l.noteCount," notes"]})]})]}),c.jsx("div",{className:"text-emerald-400 opacity-0 group-hover:opacity-100 transition-opacity text-sm font-semibold whitespace-nowrap px-2",children:"Select"})]},l.id))})}),c.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-800/30 text-xs text-center text-white/40",children:"Importing a track will set it as the Guide (Call) for practice."})]})}):null}function f0(t){var e,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(a=f0(t[e]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function wx(){for(var t,e,a=0,n="",l=arguments.length;a<l;a++)(t=arguments[a])&&(e=f0(t))&&(n&&(n+=" "),n+=e);return n}const Tx=(t,e)=>{const a=new Array(t.length+e.length);for(let n=0;n<t.length;n++)a[n]=t[n];for(let n=0;n<e.length;n++)a[t.length+n]=e[n];return a},Nx=(t,e)=>({classGroupId:t,validator:e}),d0=(t=new Map,e=null,a)=>({nextPart:t,validators:e,classGroupId:a}),qs="-",Zf=[],Mx="arbitrary..",jx=t=>{const e=Ax(t),{conflictingClassGroups:a,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:s=>{if(s.startsWith("[")&&s.endsWith("]"))return kx(s);const r=s.split(qs),o=r[0]===""&&r.length>1?1:0;return h0(r,o,e)},getConflictingClassGroupIds:(s,r)=>{if(r){const o=n[s],u=a[s];return o?u?Tx(u,o):o:u||Zf}return a[s]||Zf}}},h0=(t,e,a)=>{if(t.length-e===0)return a.classGroupId;const l=t[e],i=a.nextPart.get(l);if(i){const u=h0(t,e+1,i);if(u)return u}const s=a.validators;if(s===null)return;const r=e===0?t.join(qs):t.slice(e).join(qs),o=s.length;for(let u=0;u<o;u++){const g=s[u];if(g.validator(r))return g.classGroupId}},kx=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),a=e.indexOf(":"),n=e.slice(0,a);return n?Mx+n:void 0})(),Ax=t=>{const{theme:e,classGroups:a}=t;return zx(a,e)},zx=(t,e)=>{const a=d0();for(const n in t){const l=t[n];fu(l,a,n,e)}return a},fu=(t,e,a,n)=>{const l=t.length;for(let i=0;i<l;i++){const s=t[i];_x(s,e,a,n)}},_x=(t,e,a,n)=>{if(typeof t=="string"){Cx(t,e,a);return}if(typeof t=="function"){Ex(t,e,a,n);return}Ox(t,e,a,n)},Cx=(t,e,a)=>{const n=t===""?e:m0(e,t);n.classGroupId=a},Ex=(t,e,a,n)=>{if(Dx(t)){fu(t(n),e,a,n);return}e.validators===null&&(e.validators=[]),e.validators.push(Nx(a,t))},Ox=(t,e,a,n)=>{const l=Object.entries(t),i=l.length;for(let s=0;s<i;s++){const[r,o]=l[s];fu(o,m0(e,r),a,n)}},m0=(t,e)=>{let a=t;const n=e.split(qs),l=n.length;for(let i=0;i<l;i++){const s=n[i];let r=a.nextPart.get(s);r||(r=d0(),a.nextPart.set(s,r)),a=r}return a},Dx=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,Ux=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,a=Object.create(null),n=Object.create(null);const l=(i,s)=>{a[i]=s,e++,e>t&&(e=0,n=a,a=Object.create(null))};return{get(i){let s=a[i];if(s!==void 0)return s;if((s=n[i])!==void 0)return l(i,s),s},set(i,s){i in a?a[i]=s:l(i,s)}}},no="!",Ff=":",Rx=[],Kf=(t,e,a,n,l)=>({modifiers:t,hasImportantModifier:e,baseClassName:a,maybePostfixModifierPosition:n,isExternal:l}),Bx=t=>{const{prefix:e,experimentalParseClassName:a}=t;let n=l=>{const i=[];let s=0,r=0,o=0,u;const g=l.length;for(let x=0;x<g;x++){const w=l[x];if(s===0&&r===0){if(w===Ff){i.push(l.slice(o,x)),o=x+1;continue}if(w==="/"){u=x;continue}}w==="["?s++:w==="]"?s--:w==="("?r++:w===")"&&r--}const h=i.length===0?l:l.slice(o);let f=h,d=!1;h.endsWith(no)?(f=h.slice(0,-1),d=!0):h.startsWith(no)&&(f=h.slice(1),d=!0);const y=u&&u>o?u-o:void 0;return Kf(i,d,f,y)};if(e){const l=e+Ff,i=n;n=s=>s.startsWith(l)?i(s.slice(l.length)):Kf(Rx,!1,s,void 0,!0)}if(a){const l=n;n=i=>a({className:i,parseClassName:l})}return n},Hx=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((a,n)=>{e.set(a,1e6+n)}),a=>{const n=[];let l=[];for(let i=0;i<a.length;i++){const s=a[i],r=s[0]==="[",o=e.has(s);r||o?(l.length>0&&(l.sort(),n.push(...l),l=[]),n.push(s)):l.push(s)}return l.length>0&&(l.sort(),n.push(...l)),n}},Gx=t=>({cache:Ux(t.cacheSize),parseClassName:Bx(t),sortModifiers:Hx(t),...jx(t)}),qx=/\s+/,Vx=(t,e)=>{const{parseClassName:a,getClassGroupId:n,getConflictingClassGroupIds:l,sortModifiers:i}=e,s=[],r=t.trim().split(qx);let o="";for(let u=r.length-1;u>=0;u-=1){const g=r[u],{isExternal:h,modifiers:f,hasImportantModifier:d,baseClassName:y,maybePostfixModifierPosition:x}=a(g);if(h){o=g+(o.length>0?" "+o:o);continue}let w=!!x,p=n(w?y.substring(0,x):y);if(!p){if(!w){o=g+(o.length>0?" "+o:o);continue}if(p=n(y),!p){o=g+(o.length>0?" "+o:o);continue}w=!1}const m=f.length===0?"":f.length===1?f[0]:i(f).join(":"),b=d?m+no:m,S=b+p;if(s.indexOf(S)>-1)continue;s.push(S);const T=l(p,w);for(let N=0;N<T.length;++N){const M=T[N];s.push(b+M)}o=g+(o.length>0?" "+o:o)}return o},Yx=(...t)=>{let e=0,a,n,l="";for(;e<t.length;)(a=t[e++])&&(n=g0(a))&&(l&&(l+=" "),l+=n);return l},g0=t=>{if(typeof t=="string")return t;let e,a="";for(let n=0;n<t.length;n++)t[n]&&(e=g0(t[n]))&&(a&&(a+=" "),a+=e);return a},Xx=(t,...e)=>{let a,n,l,i;const s=o=>{const u=e.reduce((g,h)=>h(g),t());return a=Gx(u),n=a.cache.get,l=a.cache.set,i=r,r(o)},r=o=>{const u=n(o);if(u)return u;const g=Vx(o,a);return l(o,g),g};return i=s,(...o)=>i(Yx(...o))},Lx=[],Ft=t=>{const e=a=>a[t]||Lx;return e.isThemeGetter=!0,e},p0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,b0=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Qx=/^\d+\/\d+$/,Zx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Kx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Jx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ix=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Nn=t=>Qx.test(t),ot=t=>!!t&&!Number.isNaN(Number(t)),va=t=>!!t&&Number.isInteger(Number(t)),ec=t=>t.endsWith("%")&&ot(t.slice(0,-1)),aa=t=>Zx.test(t),Px=()=>!0,Wx=t=>Fx.test(t)&&!Kx.test(t),y0=()=>!1,$x=t=>Jx.test(t),tv=t=>Ix.test(t),ev=t=>!X(t)&&!L(t),av=t=>ml(t,S0,y0),X=t=>p0.test(t),Ia=t=>ml(t,w0,Wx),ac=t=>ml(t,rv,ot),Jf=t=>ml(t,x0,y0),nv=t=>ml(t,v0,tv),Vi=t=>ml(t,T0,$x),L=t=>b0.test(t),Tl=t=>gl(t,w0),lv=t=>gl(t,cv),If=t=>gl(t,x0),iv=t=>gl(t,S0),sv=t=>gl(t,v0),Yi=t=>gl(t,T0,!0),ml=(t,e,a)=>{const n=p0.exec(t);return n?n[1]?e(n[1]):a(n[2]):!1},gl=(t,e,a=!1)=>{const n=b0.exec(t);return n?n[1]?e(n[1]):a:!1},x0=t=>t==="position"||t==="percentage",v0=t=>t==="image"||t==="url",S0=t=>t==="length"||t==="size"||t==="bg-size",w0=t=>t==="length",rv=t=>t==="number",cv=t=>t==="family-name",T0=t=>t==="shadow",ov=()=>{const t=Ft("color"),e=Ft("font"),a=Ft("text"),n=Ft("font-weight"),l=Ft("tracking"),i=Ft("leading"),s=Ft("breakpoint"),r=Ft("container"),o=Ft("spacing"),u=Ft("radius"),g=Ft("shadow"),h=Ft("inset-shadow"),f=Ft("text-shadow"),d=Ft("drop-shadow"),y=Ft("blur"),x=Ft("perspective"),w=Ft("aspect"),p=Ft("ease"),m=Ft("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...S(),L,X],N=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],v=()=>[L,X,o],k=()=>[Nn,"full","auto",...v()],E=()=>[va,"none","subgrid",L,X],O=()=>["auto",{span:["full",va,L,X]},va,L,X],J=()=>[va,"auto",L,X],at=()=>["auto","min","max","fr",L,X],ft=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],et=()=>["start","end","center","stretch","center-safe","end-safe"],_=()=>["auto",...v()],D=()=>[Nn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...v()],A=()=>[t,L,X],Q=()=>[...S(),If,Jf,{position:[L,X]}],lt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],vt=()=>["auto","cover","contain",iv,av,{size:[L,X]}],K=()=>[ec,Tl,Ia],R=()=>["","none","full",u,L,X],Y=()=>["",ot,Tl,Ia],W=()=>["solid","dashed","dotted","double"],ut=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],nt=()=>[ot,ec,If,Jf],rt=()=>["","none",y,L,X],gt=()=>["none",ot,L,X],I=()=>["none",ot,L,X],yt=()=>[ot,L,X],Nt=()=>[Nn,"full",...v()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[aa],breakpoint:[aa],color:[Px],container:[aa],"drop-shadow":[aa],ease:["in","out","in-out"],font:[ev],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[aa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[aa],shadow:[aa],spacing:["px",ot],text:[aa],"text-shadow":[aa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Nn,X,L,w]}],container:["container"],columns:[{columns:[ot,X,L,r]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[va,"auto",L,X]}],basis:[{basis:[Nn,"full","auto",r,...v()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,Nn,"auto","initial","none",X]}],grow:[{grow:["",ot,L,X]}],shrink:[{shrink:["",ot,L,X]}],order:[{order:[va,"first","last","none",L,X]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":at()}],"auto-rows":[{"auto-rows":at()}],gap:[{gap:v()}],"gap-x":[{"gap-x":v()}],"gap-y":[{"gap-y":v()}],"justify-content":[{justify:[...ft(),"normal"]}],"justify-items":[{"justify-items":[...et(),"normal"]}],"justify-self":[{"justify-self":["auto",...et()]}],"align-content":[{content:["normal",...ft()]}],"align-items":[{items:[...et(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...et(),{baseline:["","last"]}]}],"place-content":[{"place-content":ft()}],"place-items":[{"place-items":[...et(),"baseline"]}],"place-self":[{"place-self":["auto",...et()]}],p:[{p:v()}],px:[{px:v()}],py:[{py:v()}],ps:[{ps:v()}],pe:[{pe:v()}],pt:[{pt:v()}],pr:[{pr:v()}],pb:[{pb:v()}],pl:[{pl:v()}],m:[{m:_()}],mx:[{mx:_()}],my:[{my:_()}],ms:[{ms:_()}],me:[{me:_()}],mt:[{mt:_()}],mr:[{mr:_()}],mb:[{mb:_()}],ml:[{ml:_()}],"space-x":[{"space-x":v()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":v()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[r,"screen",...D()]}],"min-w":[{"min-w":[r,"screen","none",...D()]}],"max-w":[{"max-w":[r,"screen","none","prose",{screen:[s]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",a,Tl,Ia]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,L,ac]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ec,X]}],"font-family":[{font:[lv,X,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,L,X]}],"line-clamp":[{"line-clamp":[ot,"none",L,ac]}],leading:[{leading:[i,...v()]}],"list-image":[{"list-image":["none",L,X]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",L,X]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:A()}],"text-color":[{text:A()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",L,Ia]}],"text-decoration-color":[{decoration:A()}],"underline-offset":[{"underline-offset":[ot,"auto",L,X]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:v()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",L,X]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",L,X]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Q()}],"bg-repeat":[{bg:lt()}],"bg-size":[{bg:vt()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},va,L,X],radial:["",L,X],conic:[va,L,X]},sv,nv]}],"bg-color":[{bg:A()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:A()}],"gradient-via":[{via:A()}],"gradient-to":[{to:A()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...W(),"hidden","none"]}],"divide-style":[{divide:[...W(),"hidden","none"]}],"border-color":[{border:A()}],"border-color-x":[{"border-x":A()}],"border-color-y":[{"border-y":A()}],"border-color-s":[{"border-s":A()}],"border-color-e":[{"border-e":A()}],"border-color-t":[{"border-t":A()}],"border-color-r":[{"border-r":A()}],"border-color-b":[{"border-b":A()}],"border-color-l":[{"border-l":A()}],"divide-color":[{divide:A()}],"outline-style":[{outline:[...W(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,L,X]}],"outline-w":[{outline:["",ot,Tl,Ia]}],"outline-color":[{outline:A()}],shadow:[{shadow:["","none",g,Yi,Vi]}],"shadow-color":[{shadow:A()}],"inset-shadow":[{"inset-shadow":["none",h,Yi,Vi]}],"inset-shadow-color":[{"inset-shadow":A()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:A()}],"ring-offset-w":[{"ring-offset":[ot,Ia]}],"ring-offset-color":[{"ring-offset":A()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":A()}],"text-shadow":[{"text-shadow":["none",f,Yi,Vi]}],"text-shadow-color":[{"text-shadow":A()}],opacity:[{opacity:[ot,L,X]}],"mix-blend":[{"mix-blend":[...ut(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ut()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":nt()}],"mask-image-linear-to-pos":[{"mask-linear-to":nt()}],"mask-image-linear-from-color":[{"mask-linear-from":A()}],"mask-image-linear-to-color":[{"mask-linear-to":A()}],"mask-image-t-from-pos":[{"mask-t-from":nt()}],"mask-image-t-to-pos":[{"mask-t-to":nt()}],"mask-image-t-from-color":[{"mask-t-from":A()}],"mask-image-t-to-color":[{"mask-t-to":A()}],"mask-image-r-from-pos":[{"mask-r-from":nt()}],"mask-image-r-to-pos":[{"mask-r-to":nt()}],"mask-image-r-from-color":[{"mask-r-from":A()}],"mask-image-r-to-color":[{"mask-r-to":A()}],"mask-image-b-from-pos":[{"mask-b-from":nt()}],"mask-image-b-to-pos":[{"mask-b-to":nt()}],"mask-image-b-from-color":[{"mask-b-from":A()}],"mask-image-b-to-color":[{"mask-b-to":A()}],"mask-image-l-from-pos":[{"mask-l-from":nt()}],"mask-image-l-to-pos":[{"mask-l-to":nt()}],"mask-image-l-from-color":[{"mask-l-from":A()}],"mask-image-l-to-color":[{"mask-l-to":A()}],"mask-image-x-from-pos":[{"mask-x-from":nt()}],"mask-image-x-to-pos":[{"mask-x-to":nt()}],"mask-image-x-from-color":[{"mask-x-from":A()}],"mask-image-x-to-color":[{"mask-x-to":A()}],"mask-image-y-from-pos":[{"mask-y-from":nt()}],"mask-image-y-to-pos":[{"mask-y-to":nt()}],"mask-image-y-from-color":[{"mask-y-from":A()}],"mask-image-y-to-color":[{"mask-y-to":A()}],"mask-image-radial":[{"mask-radial":[L,X]}],"mask-image-radial-from-pos":[{"mask-radial-from":nt()}],"mask-image-radial-to-pos":[{"mask-radial-to":nt()}],"mask-image-radial-from-color":[{"mask-radial-from":A()}],"mask-image-radial-to-color":[{"mask-radial-to":A()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":nt()}],"mask-image-conic-to-pos":[{"mask-conic-to":nt()}],"mask-image-conic-from-color":[{"mask-conic-from":A()}],"mask-image-conic-to-color":[{"mask-conic-to":A()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Q()}],"mask-repeat":[{mask:lt()}],"mask-size":[{mask:vt()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",L,X]}],filter:[{filter:["","none",L,X]}],blur:[{blur:rt()}],brightness:[{brightness:[ot,L,X]}],contrast:[{contrast:[ot,L,X]}],"drop-shadow":[{"drop-shadow":["","none",d,Yi,Vi]}],"drop-shadow-color":[{"drop-shadow":A()}],grayscale:[{grayscale:["",ot,L,X]}],"hue-rotate":[{"hue-rotate":[ot,L,X]}],invert:[{invert:["",ot,L,X]}],saturate:[{saturate:[ot,L,X]}],sepia:[{sepia:["",ot,L,X]}],"backdrop-filter":[{"backdrop-filter":["","none",L,X]}],"backdrop-blur":[{"backdrop-blur":rt()}],"backdrop-brightness":[{"backdrop-brightness":[ot,L,X]}],"backdrop-contrast":[{"backdrop-contrast":[ot,L,X]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,L,X]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,L,X]}],"backdrop-invert":[{"backdrop-invert":["",ot,L,X]}],"backdrop-opacity":[{"backdrop-opacity":[ot,L,X]}],"backdrop-saturate":[{"backdrop-saturate":[ot,L,X]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,L,X]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":v()}],"border-spacing-x":[{"border-spacing-x":v()}],"border-spacing-y":[{"border-spacing-y":v()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",L,X]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",L,X]}],ease:[{ease:["linear","initial",p,L,X]}],delay:[{delay:[ot,L,X]}],animate:[{animate:["none",m,L,X]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,L,X]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:gt()}],"rotate-x":[{"rotate-x":gt()}],"rotate-y":[{"rotate-y":gt()}],"rotate-z":[{"rotate-z":gt()}],scale:[{scale:I()}],"scale-x":[{"scale-x":I()}],"scale-y":[{"scale-y":I()}],"scale-z":[{"scale-z":I()}],"scale-3d":["scale-3d"],skew:[{skew:yt()}],"skew-x":[{"skew-x":yt()}],"skew-y":[{"skew-y":yt()}],transform:[{transform:[L,X,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Nt()}],"translate-x":[{"translate-x":Nt()}],"translate-y":[{"translate-y":Nt()}],"translate-z":[{"translate-z":Nt()}],"translate-none":["translate-none"],accent:[{accent:A()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:A()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",L,X]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":v()}],"scroll-mx":[{"scroll-mx":v()}],"scroll-my":[{"scroll-my":v()}],"scroll-ms":[{"scroll-ms":v()}],"scroll-me":[{"scroll-me":v()}],"scroll-mt":[{"scroll-mt":v()}],"scroll-mr":[{"scroll-mr":v()}],"scroll-mb":[{"scroll-mb":v()}],"scroll-ml":[{"scroll-ml":v()}],"scroll-p":[{"scroll-p":v()}],"scroll-px":[{"scroll-px":v()}],"scroll-py":[{"scroll-py":v()}],"scroll-ps":[{"scroll-ps":v()}],"scroll-pe":[{"scroll-pe":v()}],"scroll-pt":[{"scroll-pt":v()}],"scroll-pr":[{"scroll-pr":v()}],"scroll-pb":[{"scroll-pb":v()}],"scroll-pl":[{"scroll-pl":v()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",L,X]}],fill:[{fill:["none",...A()]}],"stroke-w":[{stroke:[ot,Tl,Ia,ac]}],stroke:[{stroke:["none",...A()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},uv=Xx(ov);function St(...t){return uv(wx(t))}function fv({onOpenSettings:t,onOpenPractice:e,onOpenHistory:a,onRecordingComplete:n}){const[l,i]=G.useState(j.state.isPlaying),[s,r]=G.useState(!!j.micStream),[o,u]=G.useState(j.isRecording),[g,h]=G.useState(j.state.editTool),[f,d]=G.useState(j.state.loopEnabled),[y,x]=G.useState([]),[w,p]=G.useState(!1);G.useEffect(()=>{const M=j.subscribe(()=>{i(j.state.isPlaying),r(!!j.micStream),u(j.isRecording),h(j.state.editTool),d(j.state.loopEnabled);const k=j.state.midiTrackCandidates;k&&k.length>0&&(x(k),p(!0),j.updateState({midiTrackCandidates:void 0}))}),v=setInterval(()=>{},100);return()=>{M(),clearInterval(v)}},[]);const[,m]=G.useState(0);G.useEffect(()=>j.subscribe(()=>m(M=>M+1)),[]);const b=async()=>{j.state.isPlaying?j.stopPlayback():(await j.ensureAudio(),j.startPlayback())},S=async()=>{s?j.micStream&&(j.micStream.getTracks().forEach(M=>M.stop()),j.micStream=null,j.notify()):await j.initMic()},T=M=>{j.importMidiTrack(M),j.startPractice({mode:"Midi"}),p(!1)},N=async()=>{if(o){const M=await j.stopRecording();M&&n&&n(M)}else await j.startRecording()};return c.jsxs("div",{id:"bottom-controls-panel",className:"fixed bottom-0 left-0 right-0 bg-neutral-900 border-t border-white/10 p-4 z-50 shadow-2xl",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4 overflow-x-auto no-scrollbar",children:[c.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[c.jsx("button",{onClick:b,className:St("w-12 h-12 rounded-full flex items-center justify-center transition-all",l?"bg-red-500/20 text-red-500 hover:bg-red-500/30":"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-500/20"),title:l?"Stop (Space)":"Play (Space)",children:l?c.jsx(u0,{className:"w-5 h-5 fill-current"}):c.jsx(uu,{className:"w-5 h-5 fill-current translate-x-0.5"})}),c.jsx("button",{onClick:S,className:St("w-10 h-10 rounded-full flex items-center justify-center transition-all border",s?"bg-red-500 text-white border-red-500 shadow-red-500/20 animate-pulse":"bg-white/5 border-white/10 text-white/70 hover:text-white hover:bg-white/10"),title:"Toggle Microphone",children:c.jsx(ao,{className:"w-5 h-5"})}),c.jsx("button",{onClick:N,className:St("w-10 h-10 rounded-full flex items-center justify-center transition-all border",o?"bg-red-600 text-white border-red-600 shadow-lg shadow-red-600/30":"bg-white/5 border-white/10 text-white/70 hover:text-white hover:bg-white/10"),title:o?"Stop Recording":"Start Recording",children:c.jsx("div",{className:St("w-4 h-4 rounded-full transition-all",o?"bg-white rounded-sm":"bg-red-500")})})]}),c.jsx("div",{className:"w-px h-8 bg-white/10 shrink-0 hidden sm:block"}),c.jsx("button",{onClick:()=>{const M=!j.state.loopEnabled;if(M&&j.state.loopEnd<=j.state.loopStart){const v=j.state.playbackPosition;j.updateState({loopEnabled:!0,loopStart:v,loopEnd:v+10})}else j.updateState({loopEnabled:M})},className:St("p-2.5 rounded-lg border transition-all shrink-0",f?"bg-orange-500/20 border-orange-500/40 text-orange-400":"bg-white/5 border-white/10 text-white/50 hover:text-white hover:bg-white/10"),title:f?"OFF":"ON",children:c.jsx(ox,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center bg-white/5 rounded-full p-1 gap-1 shrink-0",children:[{id:"select",icon:$y,label:"Select"},{id:"view",icon:Ky,label:"Pan"},{id:"pencil",icon:sx,label:"Draw"},{id:"eraser",icon:c0,label:"Erase"}].map(M=>c.jsx("button",{onClick:()=>j.setTool(M.id),className:St("p-2 rounded-full transition-all relative group",g===M.id?"bg-blue-600 text-white shadow-md":"text-white/50 hover:text-white hover:bg-white/10"),title:M.label,children:c.jsx(M.icon,{className:"w-5 h-5"})},M.id))}),c.jsx("div",{className:"w-px h-8 bg-white/10 shrink-0 hidden sm:block"}),c.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-auto",children:[e&&c.jsx("button",{onClick:e,className:"p-2.5 rounded-lg border border-white/10 bg-white/5 text-white/70 hover:text-white hover:bg-white/10 transition-all",title:"Practice Tools",children:c.jsx(Rs,{className:"w-5 h-5"})}),a&&c.jsx("button",{onClick:a,className:"p-2.5 rounded-lg border border-white/10 bg-white/5 text-white/70 hover:text-white hover:bg-white/10 transition-all",title:"History & Analytics",children:c.jsx(ou,{className:"w-5 h-5"})}),c.jsx("button",{onClick:t,className:"p-2.5 rounded-lg border border-white/10 bg-white/5 text-white/70 hover:text-white hover:bg-white/10 transition-all",title:"Settings",children:c.jsx(o0,{className:"w-5 h-5"})})]})]}),w&&c.jsx(Sx,{tracks:y,onSelect:T,onCancel:()=>p(!1),open:w})]})}function dv({onClose:t}){const[e,a]=G.useState("basic");return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[c.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between bg-white/5",children:[c.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 text-white",children:[c.jsx("span",{className:"w-8 h-8 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center",children:"?"}),""]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/70 hover:text-white",children:c.jsx(Ye,{size:20})})]}),c.jsxs("div",{className:"flex border-b border-white/10 bg-black/20 overflow-x-auto",children:[c.jsx("button",{onClick:()=>a("basic"),className:St("px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap",e==="basic"?"text-blue-400 border-b-2 border-blue-400 bg-blue-500/5":"text-white/50 hover:text-white hover:bg-white/5"),children:""}),c.jsx("button",{onClick:()=>a("tools"),className:St("px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap",e==="tools"?"text-blue-400 border-b-2 border-blue-400 bg-blue-500/5":"text-white/50 hover:text-white hover:bg-white/5"),children:""}),c.jsx("button",{onClick:()=>a("settings"),className:St("px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap",e==="settings"?"text-blue-400 border-b-2 border-blue-400 bg-blue-500/5":"text-white/50 hover:text-white hover:bg-white/5"),children:""})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6 text-white/80 space-y-8",children:[e==="basic"&&c.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300",children:[c.jsxs("section",{children:[c.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[c.jsx(Bs,{className:"w-5 h-5 text-blue-400"}),""]}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm ml-2",children:[c.jsxs("li",{children:[" ",c.jsx("span",{className:"text-blue-300",children:" "})," MIDI"]}),c.jsxs("li",{children:[c.jsx("span",{className:"text-purple-300",children:" "})," "]})]})]}),c.jsxs("section",{children:[c.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[c.jsx(ao,{className:"w-5 h-5 text-red-400"}),""]}),c.jsxs("div",{className:"space-y-2 text-sm ml-2",children:[c.jsxs("p",{children:[" ",c.jsx("span",{className:"inline-block p-1 bg-red-500/20 rounded border border-red-500/50",children:c.jsx(ao,{className:"w-3 h-3 inline"})})," "]}),c.jsx("p",{children:""}),c.jsxs("p",{children:["",c.jsx("span",{className:"text-green-400 font-bold",children:""}),""]})]})]})]}),e==="tools"&&c.jsx("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300",children:c.jsxs("section",{children:[c.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[c.jsx(lx,{className:"w-5 h-5 text-yellow-400"}),""]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[c.jsx("div",{className:"font-bold text-white mb-1",children:"  (Pan)"}),c.jsx("div",{className:"text-xs text-white/60",children:""})]}),c.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[c.jsx("div",{className:"font-bold text-white mb-1",children:"  (Select)"}),c.jsx("div",{className:"text-xs text-white/60",children:""})]}),c.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[c.jsx("div",{className:"font-bold text-white mb-1",children:"  (Pencil)"}),c.jsx("div",{className:"text-xs text-white/60",children:""})]}),c.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[c.jsx("div",{className:"font-bold text-white mb-1",children:"  (Eraser)"}),c.jsx("div",{className:"text-xs text-white/60",children:""})]})]})]})}),e==="settings"&&c.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300",children:[c.jsxs("section",{children:[c.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[c.jsx(o0,{className:"w-5 h-5 text-gray-400"}),""]}),c.jsx("p",{className:"text-sm",children:" "})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-white font-bold text-lg mb-3 text-red-400",children:""}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm ml-2",children:[c.jsxs("li",{children:[c.jsx("span",{className:"font-bold text-white",children:":"})," "]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-bold text-white",children:":"})," "]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-bold text-white",children:":"})," "]})]})]})]})]}),c.jsx("div",{className:"p-4 border-t border-white/10 bg-white/5 flex justify-end",children:c.jsx("button",{onClick:t,className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-colors",children:""})})]})})}function hv({onClose:t}){const[e,a]=G.useState(j.state),[n,l]=G.useState(!1);G.useEffect(()=>j.subscribe(()=>a(j.state)),[]);const i=(s,r)=>{j.updateState({[s]:r})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"absolute top-14 right-2 md:right-4 z-50 w-[95vw] md:w-80 max-w-[95vw] md:max-w-none bg-black/90 backdrop-blur-md rounded-2xl border border-white/10 shadow-2xl overflow-hidden text-white/90 animate-in fade-in slide-in-from-right-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-white/5",children:[c.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-6 bg-blue-500 rounded-full"}),""]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>l(!0),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-blue-300 hover:text-blue-200",title:"",children:c.jsx(Ry,{size:20})}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors","aria-label":"",children:c.jsx(Ye,{size:20})})]})]}),c.jsxs("div",{className:"p-5 space-y-6 max-h-[75vh] overflow-y-auto overscroll-contain",children:[c.jsxs("div",{className:"bg-white/5 rounded-lg overflow-hidden border border-white/5",children:[c.jsx("div",{className:"px-4 py-2 bg-white/10 text-xs font-bold uppercase tracking-wider text-white/70",children:""}),c.jsxs("div",{className:"p-4 space-y-6",children:[c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:""}),c.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>i("noteNotation","alphabet"),className:`px-3 py-1 rounded-md text-xs transition-all ${e.noteNotation==="alphabet"?"bg-blue-500 text-white shadow-sm":"text-white/50 hover:text-white/80"}`,children:"CDE"}),c.jsx("button",{onClick:()=>i("noteNotation","katakana"),className:`px-3 py-1 rounded-md text-xs transition-all ${e.noteNotation==="katakana"?"bg-blue-500 text-white shadow-sm":"text-white/50 hover:text-white/80"}`,children:""})]})]})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:" ()"}),c.jsxs("span",{className:"font-mono text-blue-400 bg-blue-400/10 px-2 py-0.5 rounded",children:[e.verticalZoom.toFixed(1)," Octave"]})]}),c.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:e.verticalZoom,onChange:s=>i("verticalZoom",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"font-mono text-blue-400 bg-blue-400/10 px-2 py-0.5 rounded",children:[e.pxPerSec," px/s"]})]}),c.jsx("input",{type:"range",min:"50",max:"300",step:"10",value:e.pxPerSec,onChange:s=>i("pxPerSec",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-white/5",children:[c.jsx("span",{children:""}),c.jsx("button",{onClick:()=>i("isParticlesEnabled",!e.isParticlesEnabled),className:`w-10 h-5 rounded-full transition-colors relative ${e.isParticlesEnabled?"bg-blue-500":"bg-white/10"}`,children:c.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-transform duration-200 ${e.isParticlesEnabled?"left-5.5":"left-0.5"}`})})]})]})]}),c.jsxs("div",{className:"bg-white/5 rounded-lg overflow-hidden border border-white/5",children:[c.jsx("div",{className:"px-4 py-2 bg-white/10 text-xs font-bold uppercase tracking-wider text-white/70",children:""}),c.jsxs("div",{className:"p-4 space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:" ()"}),c.jsxs("span",{className:"font-mono text-orange-400 bg-orange-400/10 px-2 py-0.5 rounded",children:["x",e.tempoFactor.toFixed(2)]})]}),c.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.05",value:e.tempoFactor,onChange:s=>i("tempoFactor",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-orange-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"font-mono text-yellow-400 bg-yellow-400/10 px-2 py-0.5 rounded",children:[e.guideOctaveOffset>0?"+":"",e.guideOctaveOffset," Oct"]})]}),c.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1 gap-1",children:[c.jsx("button",{onClick:()=>i("guideOctaveOffset",e.guideOctaveOffset-1),className:"flex-1 py-1 hover:bg-white/10 rounded-md transition-colors text-white/80",children:"-1"}),c.jsx("button",{onClick:()=>i("guideOctaveOffset",0),className:"flex-1 py-1 hover:bg-white/10 rounded-md transition-colors text-xs text-white/40",children:"Reset"}),c.jsx("button",{onClick:()=>i("guideOctaveOffset",e.guideOctaveOffset+1),className:"flex-1 py-1 hover:bg-white/10 rounded-md transition-colors text-white/80",children:"+1"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"font-mono text-cyan-400 bg-cyan-400/10 px-2 py-0.5 rounded",children:[e.transposeOffset>0?"+":"",e.transposeOffset," "]})]}),c.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:e.transposeOffset,onChange:s=>i("transposeOffset",parseInt(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-cyan-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"}),c.jsxs("div",{className:"flex justify-between text-[10px] text-white/30 px-1",children:[c.jsx("span",{children:"-1"}),c.jsx("button",{onClick:()=>i("transposeOffset",0),className:"text-white/50 hover:text-white",children:"Reset"}),c.jsx("span",{children:"+1"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"font-mono text-blue-400 bg-blue-400/10 px-2 py-0.5 rounded",children:[(e.guideVolume*100).toFixed(0),"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:e.guideVolume,onChange:s=>i("guideVolume",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-blue-400 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"font-mono text-purple-400 bg-purple-400/10 px-2 py-0.5 rounded",children:[(e.accompVolume*100).toFixed(0),"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:e.accompVolume,onChange:s=>i("accompVolume",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-purple-400 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]})]})]}),c.jsxs("div",{className:"bg-white/5 rounded-lg overflow-hidden border border-white/5",children:[c.jsx("div",{className:"px-4 py-2 bg-white/10 text-xs font-bold uppercase tracking-wider text-white/70",children:""}),c.jsxs("div",{className:"p-4 space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:" (Gate)"}),c.jsxs("span",{className:"font-mono text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:[e.gateThreshold," dB"]})]}),c.jsx("input",{type:"range",min:"-80",max:"0",step:"1",value:e.gateThreshold,onChange:s=>i("gateThreshold",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-red-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm items-center",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"font-mono text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded",children:["",e.toleranceCents," cent"]})]}),c.jsx("input",{type:"range",min:"10",max:"100",step:"5",value:e.toleranceCents,onChange:s=>i("toleranceCents",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-emerald-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-110 transition-all"})]})]})]})]}),c.jsx("div",{className:"pt-4 pb-4 text-center",children:c.jsx("p",{className:"text-[10px] text-white/20",children:"Ontei Web - Refactor"})})]}),n&&c.jsx(dv,{onClose:()=>l(!1)})]})}const mv=["Major","NaturalMinor","HarmonicMinor","MelodicMinor","MajorPentatonic","MinorPentatonic","Chromatic"],gv=["Major","Minor","Major7","Minor7","Dominant7"],pv=["LongTone","FiveNote","Triad","Thirds","Octave"],bv=({audioEngine:t,isPracticing:e,onClose:a})=>{var S,T,N,M;const[n,l]=G.useState("Exercise"),[i,s]=G.useState(["Major","NaturalMinor"]),[r,o]=G.useState(["Major","Minor"]),[u,g]=G.useState(["LongTone","FiveNote","Triad"]),[h,f]=G.useState(103),[d,y]=G.useState(!0),x=()=>{const v={mode:n,allowedScales:i,allowedArpeggios:r,allowedExercises:u,maxPitch:h};t.startPractice(v),y(!1)},w=()=>{t.stopPractice()},p=v=>{i.includes(v)?s(i.filter(k=>k!==v)):s([...i,v])},m=v=>{r.includes(v)?o(r.filter(k=>k!==v)):o([...r,v])},b=v=>{u.includes(v)?g(u.filter(k=>k!==v)):g([...u,v])};return c.jsxs("div",{className:"absolute top-20 right-4 z-40 w-80 bg-black/90 backdrop-blur-md rounded-2xl border border-white/10 shadow-2xl overflow-hidden text-white/90 animate-in fade-in slide-in-from-right-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-white/5",children:[c.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[c.jsx("span",{className:"p-1 rounded bg-green-500/20 text-green-400",children:c.jsx(Rs,{size:16})}),""]}),c.jsxs("div",{className:"flex items-center gap-1",children:[!e&&c.jsx("button",{onClick:()=>y(!d),className:St("p-2 rounded-full transition-colors",d?"bg-white/20 text-white":"hover:bg-white/10 text-white/60"),title:"",children:c.jsx(fx,{size:18})}),c.jsx("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-full transition-colors","aria-label":"",children:c.jsx(Ye,{size:18})})]})]}),c.jsxs("div",{className:"p-5 space-y-6 max-h-[70vh] overflow-y-auto",children:[c.jsx("div",{className:"space-y-2",children:c.jsx("p",{className:"text-sm text-white/60 leading-relaxed",children:""})}),d&&!e&&c.jsxs("div",{className:"space-y-4 bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),c.jsx("div",{className:"flex bg-black/40 p-1 rounded-lg",children:["Exercise","Mix","Scale","Arpeggio"].map(v=>c.jsx("button",{onClick:()=>l(v),className:St("flex-1 py-1.5 text-xs font-medium rounded-md transition-all",n===v?"bg-white/20 text-white shadow-sm":"text-white/40 hover:text-white/60"),children:v==="Mix"?"":v==="Scale"?"":v==="Arpeggio"?"":""},v))})]}),(n==="Scale"||n==="Mix")&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:mv.map(v=>c.jsxs("button",{onClick:()=>p(v),className:St("px-2 py-1.5 text-[10px] text-left rounded border transition-all flex items-center justify-between",i.includes(v)?"bg-green-500/20 border-green-500/30 text-green-300":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"),children:[c.jsx("span",{className:"truncate",children:v==="Major"?" ()":v==="NaturalMinor"?"":v==="HarmonicMinor"?"":v==="MelodicMinor"?"":v==="MajorPentatonic"?"":v==="MinorPentatonic"?"":" ()"}),i.includes(v)&&c.jsx(tc,{size:10})]},v))})]}),(n==="Arpeggio"||n==="Mix")&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:gv.map(v=>c.jsxs("button",{onClick:()=>m(v),className:St("px-2 py-1.5 text-[10px] text-left rounded border transition-all flex items-center justify-between",r.includes(v)?"bg-blue-500/20 border-blue-500/30 text-blue-300":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"),children:[c.jsx("span",{className:"truncate",children:v==="Major"?"":v==="Minor"?"":v==="Major7"?"7th":v==="Minor7"?"7th":"7th"}),r.includes(v)&&c.jsx(tc,{size:10})]},v))})]}),(n==="Exercise"||n==="Mix")&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:pv.map(v=>c.jsxs("button",{onClick:()=>b(v),className:St("px-2 py-1.5 text-[10px] text-left rounded border transition-all flex items-center justify-between",u.includes(v)?"bg-purple-500/20 border-purple-500/30 text-purple-300":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"),children:[c.jsx("span",{className:"truncate",children:v==="LongTone"?"":v==="FiveNote"?"5":v==="Triad"?" (3)":v==="Thirds"?"3":""}),u.includes(v)&&c.jsx(tc,{size:10})]},v))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:""}),c.jsx("div",{className:"flex bg-black/40 p-1 rounded-lg",children:[{label:"G6 ()",val:91},{label:"C7 ()",val:96},{label:"G7 ()",val:103},{label:"C8 ()",val:108}].map(v=>c.jsx("button",{onClick:()=>f(v.val),className:St("flex-1 py-1.5 text-[10px] font-medium rounded-md transition-all",h===v.val?"bg-white/20 text-white shadow-sm":"text-white/40 hover:text-white/60"),children:v.label},v.val))})]})]}),e?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-xl space-y-2 animate-pulse",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-ping"}),c.jsx("span",{className:"text-green-400 font-medium text-sm",children:"..."})]}),c.jsxs("div",{className:"text-[10px] text-green-300/60 pl-5",children:["Mode: ",((S=t.state.practiceConfig)==null?void 0:S.mode)==="Mix"?"":((T=t.state.practiceConfig)==null?void 0:T.mode)==="Scale"?"":((N=t.state.practiceConfig)==null?void 0:N.mode)==="Arpeggio"?"":((M=t.state.practiceConfig)==null?void 0:M.mode)==="Exercise"?"":""]})]}),c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/10",children:[c.jsx("span",{className:"text-xs text-white/60",children:""}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>{t.updateState({guideOctaveOffset:t.state.guideOctaveOffset-1})},className:"p-1 hover:bg-white/10 rounded",children:"-"}),c.jsxs("span",{className:"text-sm font-bold w-4 text-center",children:[t.state.guideOctaveOffset>0?"+":"",t.state.guideOctaveOffset]}),c.jsx("button",{onClick:()=>{t.updateState({guideOctaveOffset:t.state.guideOctaveOffset+1})},className:"p-1 hover:bg-white/10 rounded",children:"+"})]})]}),c.jsxs("button",{onClick:w,className:"w-full py-3 bg-red-500/20 hover:bg-red-500/30 text-red-400 hover:text-red-300 font-bold rounded-xl flex items-center justify-center gap-2 transition-all border border-red-500/20 active:scale-95",children:[c.jsx(u0,{size:18,className:"fill-current"}),""]})]}):c.jsxs("button",{onClick:x,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-green-500/20 active:scale-95",children:[c.jsx(uu,{size:18,className:"fill-white"}),""]}),c.jsx("div",{className:"pt-2 text-[10px] text-center text-white/20 border-t border-white/5",children:"Continuous Practice Generator v1.1"})]})]})},nc="ontei-practice-history",en=class en{constructor(){}static getInstance(){return en.instance||(en.instance=new en),en.instance}getRecords(){try{const e=localStorage.getItem(nc);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load history:",e),[]}}saveRecord(e){const a={...e,id:crypto.randomUUID(),date:new Date().toISOString()},n=this.getRecords();n.unshift(a),n.length>100&&(n.length=100);try{localStorage.setItem(nc,JSON.stringify(n))}catch(l){console.error("Failed to save history:",l)}return a}clearHistory(){localStorage.removeItem(nc)}getStats(){const e=this.getRecords();if(e.length===0)return{totalDuration:0,averageScore:0,bestScore:0,totalSessions:0};const a=e.reduce((i,s)=>i+s.duration,0),n=e.reduce((i,s)=>i+s.score,0)/e.length,l=Math.max(...e.map(i=>i.score));return{totalDuration:a,averageScore:n,bestScore:l,totalSessions:e.length}}};V(en,"instance");let lo=en;const An=lo.getInstance(),lc="ontei-practice-history",N0={getSessions(){try{const t=localStorage.getItem(lc);return t?JSON.parse(t):[]}catch{return[]}},saveSession(t){const e=this.getSessions(),a={...t,id:crypto.randomUUID(),date:new Date().toISOString()};e.push(a);const n=e.slice(-100);localStorage.setItem(lc,JSON.stringify(n))},getStats(){var g;const t=this.getSessions();if(t.length===0)return{totalSessions:0,totalPracticeTime:0,averageScore:0,bestScore:0,streakDays:0,lastPracticeDate:"",sessionsThisWeek:0,scoreHistory:[],weeklyPracticeTime:{}};const e=new Date,a=new Date(e.getTime()-7*24*60*60*1e3);let n=0;const l=new Set(t.map(h=>h.date.slice(0,10))),i=Array.from(l).sort().reverse();for(let h=0;h<i.length;h++){const f=new Date(e);f.setDate(f.getDate()-h);const d=f.toISOString().slice(0,10);if(i.includes(d))n++;else if(h>0)break}const s={},r=["","","","","","",""];for(let h=6;h>=0;h--){const f=new Date(e);f.setDate(f.getDate()-h);const d=r[f.getDay()],y=f.toISOString().slice(0,10),x=t.filter(w=>w.date.slice(0,10)===y).reduce((w,p)=>w+p.duration,0);s[d]=(s[d]||0)+x}const o=t.slice(-30).map(h=>({date:h.date.slice(0,10),score:h.score})),u=t.filter(h=>new Date(h.date)>=a).length;return{totalSessions:t.length,totalPracticeTime:t.reduce((h,f)=>h+f.duration,0),averageScore:Math.round(t.reduce((h,f)=>h+f.score,0)/t.length),bestScore:Math.max(...t.map(h=>h.score)),streakDays:n,lastPracticeDate:((g=t[t.length-1])==null?void 0:g.date)||"",sessionsThisWeek:u,scoreHistory:o,weeklyPracticeTime:s}},clearAll(){localStorage.removeItem(lc)}},yv=t=>{const e=Math.floor(t/60),a=Math.floor(t%60);return`${e}:${a.toString().padStart(2,"0")}`},Pf=({result:t,onClose:e})=>{const a=G.useRef(!1);G.useEffect(()=>{a.current||(An.saveRecord({score:t.totalScore,accuracy:t.radar.pitch,songName:"Unknown Song",duration:0}),N0.saveSession({duration:j.state.playbackPosition||60,score:t.totalScore,pitchAccuracy:t.radar.pitch,rhythmAccuracy:t.radar.rhythm,notesHit:t.totalScore>0?Math.round(t.totalScore/10):0,notesTotal:j.state.midiGhostNotes.length||10,songName:""}),a.current=!0)},[t]);const n=[{label:"",val:t.radar.pitch,full:100},{label:"",val:t.radar.stability,full:100},{label:"",val:t.radar.expressiveness,full:100},{label:"",val:t.radar.rhythm,full:100},{label:"",val:t.radar.technique,full:100}],l=80,i=100,s=n.map((o,u)=>{const g=Math.PI*2*u/5-Math.PI/2,h=o.val/100*l,f=i+h*Math.cos(g),d=i+h*Math.sin(g);return`${f},${d}`}).join(" "),r=n.map((o,u)=>{const g=Math.PI*2*u/5-Math.PI/2,h=i+l*Math.cos(g),f=i+l*Math.sin(g);return`${h},${f}`}).join(" ");return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-300 p-4",children:c.jsxs("div",{className:"w-full max-w-4xl bg-[#1a1a1e] rounded-3xl border border-white/10 shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-purple-900/50 p-6 flex items-center justify-between border-b border-white/10",children:[c.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 text-white",children:[c.jsx(Gs,{className:"text-yellow-400 fill-yellow-400"}),""]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/60 hover:text-white",children:c.jsx(Ye,{})})]}),c.jsxs("div",{className:"p-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-6 text-center md:text-left",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("span",{className:"text-sm font-bold tracking-widest text-white/40 uppercase",children:"Total Score"}),c.jsxs("div",{className:"text-8xl font-black text-transparent bg-clip-text bg-gradient-to-br from-white to-white/50 shadow-glow",children:[t.totalScore,c.jsx("span",{className:"text-2xl text-white/30 font-normal ml-2",children:"pts"})]})]}),c.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/5",children:[c.jsx("h3",{className:"text-sm font-bold text-blue-300 mb-1",children:""}),c.jsx("p",{className:"text-white/80 leading-relaxed text-sm",children:t.comment})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-xs text-white/40 uppercase font-bold",children:[c.jsx("span",{children:"Flat ()"}),c.jsx("span",{children:"Perfect"}),c.jsx("span",{children:"Sharp ()"})]}),c.jsxs("div",{className:"h-4 bg-black/50 rounded-full relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white/30 left-1/2 -ml-[0.5px]"}),c.jsx("div",{className:St("absolute top-1 bottom-1 rounded-full transition-all",t.tendency>0?"bg-red-500 left-1/2":"bg-blue-500 right-1/2"),style:{[(t.tendency>0,"width")]:`${Math.min(50,Math.abs(t.tendency))}%`}})]}),c.jsxs("div",{className:"text-center text-xs text-white/30 font-mono",children:[": ",Math.abs(t.tendency).toFixed(1)," cent ",t.tendency>0?"":t.tendency<0?"":""]})]}),t.advice&&t.advice.length>0&&c.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[c.jsxs("h3",{className:"text-sm font-bold text-white/50 uppercase tracking-widest flex items-center gap-2",children:[c.jsx(vx,{size:14,className:"text-yellow-400"}),"Expert Analysis"]}),c.jsx("div",{className:"space-y-2 max-h-[150px] overflow-y-auto pr-2 custom-scrollbar",children:t.advice.map((o,u)=>c.jsxs("div",{className:St("flex items-start gap-3 p-3 rounded-lg border text-sm",o.level==="warning"?"bg-red-500/10 border-red-500/30 text-red-200":o.level==="positive"?"bg-green-500/10 border-green-500/30 text-green-200":"bg-blue-500/10 border-blue-500/30 text-blue-200"),children:[c.jsx("div",{className:"mt-0.5 shrink-0",children:o.level==="warning"?c.jsx(Ye,{size:16}):o.level==="positive"?c.jsx(Gs,{size:16}):c.jsx(Bs,{size:16})}),c.jsx("span",{className:"leading-snug",children:o.message})]},u))})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"aspect-square w-full max-w-[280px] mx-auto relative",children:c.jsxs("svg",{viewBox:"-30 -30 260 260",className:"w-full h-full drop-shadow-2xl",children:[c.jsx("polygon",{points:r,fill:"#ffffff05",stroke:"#ffffff20",strokeWidth:"1"}),[.8,.6,.4,.2].map(o=>c.jsx("polygon",{points:n.map((u,g)=>{const h=Math.PI*2*g/5-Math.PI/2,f=o*l;return`${i+f*Math.cos(h)},${i+f*Math.sin(h)}`}).join(" "),fill:"none",stroke:"#ffffff10",strokeWidth:"1"},o)),c.jsx("polygon",{points:s,fill:"rgba(99, 102, 241, 0.4)",stroke:"#818cf8",strokeWidth:"2"}),n.map((o,u)=>{const g=Math.PI*2*u/5-Math.PI/2,h=l+20,f=i+h*Math.cos(g),d=i+h*Math.sin(g);return c.jsx("text",{x:f,y:d,fill:"white",fontSize:"10",textAnchor:"middle",dominantBaseline:"middle",children:o.label},u)})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[c.jsxs("div",{className:"bg-white/5 p-3 rounded-xl flex items-center gap-3 border border-white/5",children:[c.jsx("div",{className:"p-2 bg-pink-500/20 rounded-lg text-pink-400",children:c.jsx(Rs,{size:16})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-white/40 uppercase",children:"Vibrato"}),c.jsxs("div",{className:"font-bold text-white",children:[t.vibratoCount," ",c.jsxs("span",{className:"text-xs font-normal text-white/40",children:["(",t.vibratoSec.toFixed(1),"s)"]})]})]})]}),c.jsxs("div",{className:"bg-white/5 p-3 rounded-xl flex items-center gap-3 border border-white/5",children:[c.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:c.jsx(Hs,{size:16})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-white/40 uppercase",children:"Accuracy"}),c.jsxs("div",{className:"font-bold text-white",children:[t.radar.pitch,c.jsx("span",{className:"text-xs",children:"%"})]})]})]})]}),t.weakNotes&&t.weakNotes.length>0&&c.jsxs("div",{className:"mt-4 bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsxs("h3",{className:"text-sm font-bold text-white/50 uppercase tracking-widest mb-3 flex items-center gap-2",children:[c.jsx(Hs,{size:14,className:"text-red-400"}),"Weak Point Analysis"]}),c.jsx("div",{className:"space-y-2",children:t.weakNotes.map((o,u)=>{const g=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],h=["","#","","#","","","#","","#","","#",""],d=(j.state.noteNotation||"alphabet")==="katakana"?h[o.noteIndex]:g[o.noteIndex];return c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold w-12 h-6 flex items-center justify-center bg-white/10 rounded text-white/80 text-xs",children:d}),c.jsx("span",{className:"text-white/60",children:""}),c.jsx("span",{className:St("font-bold",o.diff>0?"text-red-400":"text-blue-400"),children:o.diff>0?"":""}),c.jsx("span",{className:"text-white/60",children:""})]}),c.jsxs("div",{className:"font-mono text-xs opacity-50",children:[o.diff>0?"+":"",o.diff.toFixed(1)," cent"]})]},u)})})]}),t.phraseScores&&t.phraseScores.length>0&&c.jsxs("div",{className:"mt-6 space-y-3",children:[c.jsxs("h3",{className:"text-sm font-bold text-white/50 uppercase tracking-widest flex items-center gap-2",children:[c.jsx(Rs,{size:14,className:"text-blue-400"}),"Phrase Analysis"]}),c.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto custom-scrollbar pr-2",children:t.phraseScores.map(o=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/5 hover:bg-white/10 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-xs font-mono text-white/50",children:[yv(o.startTime),c.jsx("span",{className:"mx-1",children:"~"})]}),c.jsx("span",{className:St("text-xs font-bold px-2 py-0.5 rounded-full border",o.evaluation==="Perfect"?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30":o.evaluation==="Good"?"bg-green-500/20 text-green-300 border-green-500/30":"bg-white/10 text-white/40 border-white/10"),children:o.evaluation})]}),c.jsxs("div",{className:"font-bold text-white",children:[o.score," ",c.jsx("span",{className:"text-xs font-normal text-white/30",children:"pts"})]})]},o.phraseId))})]})]})]})]})})};function xv({records:t}){const e=G.useRef(null);return G.useEffect(()=>{const a=e.current;if(!a)return;const n=a.getContext("2d");if(!n)return;const l=window.devicePixelRatio||1,i=a.getBoundingClientRect();a.width=i.width*l,a.height=i.height*l,n.scale(l,l);const s=i.width,r=i.height;if(n.clearRect(0,0,s,r),t.length<2){n.fillStyle="rgba(255, 255, 255, 0.3)",n.font="14px sans-serif",n.textAlign="center",n.fillText("",s/2,r/2);return}const o=[...t].reverse().slice(-20),u={top:20,right:20,bottom:30,left:40},g=s-u.left-u.right,h=r-u.top-u.bottom,f=x=>u.left+x/(o.length-1)*g,d=x=>u.top+h-x/100*h;n.strokeStyle="rgba(255, 255, 255, 0.1)",n.lineWidth=1,n.beginPath();for(let x=0;x<=4;x++){const w=u.top+x/4*h;n.moveTo(u.left,w),n.lineTo(s-u.right,w),n.fillStyle="rgba(255, 255, 255, 0.3)",n.font="10px sans-serif",n.textAlign="right",n.fillText(`${100-x*25}`,u.left-5,w+4)}n.stroke(),n.strokeStyle="#3b82f6",n.lineWidth=3,n.beginPath(),o.forEach((x,w)=>{const p=f(w),m=d(x.score);w===0?n.moveTo(p,m):n.lineTo(p,m)}),n.stroke();const y=n.createLinearGradient(0,u.top,0,r-u.bottom);if(y.addColorStop(0,"rgba(59, 130, 246, 0.3)"),y.addColorStop(1,"rgba(59, 130, 246, 0)"),n.fillStyle=y,n.lineTo(f(o.length-1),r-u.bottom),n.lineTo(f(0),r-u.bottom),n.fill(),o.forEach((x,w)=>{const p=f(w),m=d(x.score);n.fillStyle="#1a1a1a",n.beginPath(),n.arc(p,m,4,0,Math.PI*2),n.fill(),n.strokeStyle="#60a5fa",n.lineWidth=2,n.beginPath(),n.arc(p,m,4,0,Math.PI*2),n.stroke()}),n.fillStyle="rgba(255, 255, 255, 0.3)",n.textAlign="center",o.length>0){const x=new Date(o[0].date).toLocaleDateString(void 0,{month:"numeric",day:"numeric"});n.fillText(x,u.left,r-10);const w=new Date(o[o.length-1].date).toLocaleDateString(void 0,{month:"numeric",day:"numeric"});n.fillText(w,s-u.right,r-10)}},[t]),c.jsx("canvas",{ref:e,className:"w-full h-48 bg-white/5 rounded-xl border border-white/10"})}function vv({onClose:t}){const[e,a]=G.useState(()=>An.getRecords()),[n,l]=G.useState(()=>An.getStats()),i=()=>{a(An.getRecords()),l(An.getStats())},s=()=>{confirm("")&&(An.clearHistory(),i())};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-white/5",children:[c.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-white",children:[c.jsx(ou,{className:"text-blue-400"}),""]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/60 hover:text-white",children:c.jsx(Ye,{size:20})})]}),c.jsxs("div",{className:"overflow-y-auto p-6 space-y-8 custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsx("div",{className:"text-white/40 text-xs font-bold uppercase mb-1",children:""}),c.jsxs("div",{className:"text-2xl font-bold text-white",children:[n.totalSessions," ",c.jsx("span",{className:"text-sm font-normal text-white/40",children:""})]})]}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsx("div",{className:"text-white/40 text-xs font-bold uppercase mb-1",children:""}),c.jsxs("div",{className:"text-2xl font-bold text-white",children:[(n.totalDuration/60).toFixed(1)," ",c.jsx("span",{className:"text-sm font-normal text-white/40",children:""})]})]}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsx("div",{className:"text-white/40 text-xs font-bold uppercase mb-1",children:""}),c.jsx("div",{className:St("text-2xl font-bold",n.averageScore>=80?"text-green-400":"text-yellow-400"),children:n.averageScore.toFixed(1)})]}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsx("div",{className:"text-white/40 text-xs font-bold uppercase mb-1",children:""}),c.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center gap-1",children:[n.bestScore>0&&c.jsx(Gs,{size:16}),n.bestScore.toFixed(1)]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-white/70 font-bold mb-3 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-4 bg-blue-500 rounded-full"}),""]}),c.jsx(xv,{records:e})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("h3",{className:"text-white/70 font-bold flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-4 bg-purple-500 rounded-full"}),""]}),e.length>0&&c.jsxs("button",{onClick:s,className:"text-xs text-red-400 hover:text-red-300 flex items-center gap-1 px-2 py-1 hover:bg-red-500/10 rounded transition-colors",children:[c.jsx(dr,{size:12}),""]})]}),c.jsx("div",{className:"space-y-2",children:e.length===0?c.jsxs("div",{className:"text-center py-8 text-white/30 border border-dashed border-white/10 rounded-xl",children:["",c.jsx("br",{}),""]}):e.map(r=>c.jsxs("div",{className:"bg-white/5 hover:bg-white/10 transition-colors p-3 rounded-xl border border-white/5 flex items-center justify-between group",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:St("w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",r.score>=90?"bg-purple-500/20 text-purple-300 border border-purple-500/40":r.score>=80?"bg-green-500/20 text-green-300 border border-green-500/40":"bg-yellow-500/20 text-yellow-300 border border-yellow-500/40"),children:Math.round(r.score)}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-bold text-white/90",children:r.songName}),c.jsxs("div",{className:"text-xs text-white/50 flex items-center gap-2",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(s0,{size:10})," ",new Date(r.date).toLocaleString()]}),c.jsx("span",{children:""}),c.jsxs("span",{children:[Math.floor(r.duration/60)," ",Math.floor(r.duration%60),""]})]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs text-white/40 mb-0.5",children:""}),c.jsxs("div",{className:"text-sm font-mono text-white/80",children:[r.accuracy.toFixed(1),"%"]})]})]},r.id))})]})]})]})})}function Sv({audioBlob:t,onClose:e}){const a=G.useRef(null),[n,l]=G.useState(!1),[i,s]=G.useState(0),[r,o]=G.useState(0),u=G.useRef(null),[g,h]=G.useState(new Array(30).fill(20));G.useEffect(()=>{if(!n)return;const m=setInterval(()=>{h(Array.from({length:30},()=>Math.random()*80+10))},50);return()=>clearInterval(m)},[n]),G.useEffect(()=>{const m=URL.createObjectURL(t);return u.current=m,a.current&&(a.current.src=m),()=>{URL.revokeObjectURL(m),u.current=null}},[t]);const f=()=>{a.current&&(n?a.current.pause():a.current.play(),l(!n))},d=()=>{a.current&&s(a.current.currentTime)},y=()=>{a.current&&o(a.current.duration)},x=m=>{const b=parseFloat(m.target.value);a.current&&(a.current.currentTime=b,s(b))},w=()=>{if(!u.current)return;const m=document.createElement("a");m.href=u.current,m.download=`ontei-recording-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.webm`,m.click()},p=m=>{if(!isFinite(m))return"0:00";const b=Math.floor(m/60),S=Math.floor(m%60);return`${b}:${S.toString().padStart(2,"0")}`};return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"w-full max-w-md bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl p-6 flex flex-col gap-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-6 bg-red-500 rounded-full animate-pulse"}),""]}),c.jsx("button",{onClick:e,className:"text-white/40 hover:text-white transition-colors",children:c.jsx(Ye,{size:20})})]}),c.jsx("audio",{ref:a,onTimeUpdate:d,onLoadedMetadata:y,onEnded:()=>l(!1)}),c.jsx("div",{className:"h-24 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center relative overflow-hidden group",children:c.jsx("div",{className:"flex items-center gap-1 h-full w-full justify-center px-4",children:Array.from({length:30}).map((m,b)=>c.jsx("div",{className:St("w-1 bg-white/20 rounded-full transition-all duration-100",n?"animate-pulse":""),style:{height:`${n?g[b]:20}%`,transition:"height 0.05s ease"}},b))})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-xs text-white/50 font-mono",children:[c.jsx("span",{children:p(i)}),c.jsx("span",{children:p(r)})]}),c.jsx("input",{type:"range",min:"0",max:r||100,value:i,onChange:x,className:"w-full h-1 bg-white/10 rounded-full appearance-none cursor-pointer outline-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-red-500"})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6",children:[c.jsx("button",{onClick:e,className:"p-3 rounded-full bg-white/5 text-white/40 hover:bg-red-500/10 hover:text-red-400 transition-all border border-transparent hover:border-red-500/20",title:"",children:c.jsx(dr,{size:20})}),c.jsx("button",{onClick:f,className:"w-16 h-16 rounded-full bg-red-500 flex items-center justify-center text-white shadow-lg shadow-red-500/20 hover:scale-105 hover:bg-red-400 transition-all",children:n?c.jsx(ax,{size:28,fill:"currentColor"}):c.jsx(uu,{size:28,fill:"currentColor",className:"ml-1"})}),c.jsx("button",{onClick:w,className:"p-3 rounded-full bg-white/5 text-blue-300 hover:bg-blue-500/10 transition-all border border-blue-500/20",title:"",children:c.jsx(Vy,{size:20})})]})]})})}function wv({open:t,onClose:e,onResetAll:a,onResetPitchOnly:n}){return t?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:c.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[c.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx(dr,{className:"w-5 h-5 text-red-400"}),""]}),c.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors text-white/50 hover:text-white",children:c.jsx(Ye,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4 space-y-3",children:[c.jsx("p",{className:"text-white/60 text-sm mb-4",children:""}),c.jsx("button",{onClick:()=>{a(),e()},className:St("w-full p-4 rounded-xl text-left transition-all","bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 hover:border-red-500/40","group"),children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center",children:c.jsx(Ly,{className:"w-5 h-5 text-red-400"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-white font-medium",children:""}),c.jsx("div",{className:"text-white/50 text-sm",children:""})]})]})}),c.jsx("button",{onClick:()=>{n(),e()},className:St("w-full p-4 rounded-xl text-left transition-all","bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 hover:border-emerald-500/40","group"),children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center",children:c.jsx(c0,{className:"w-5 h-5 text-emerald-400"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-white font-medium",children:""}),c.jsx("div",{className:"text-white/50 text-sm",children:""})]})]})})]}),c.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-800/30",children:c.jsx("button",{onClick:e,className:"w-full py-2.5 rounded-lg bg-white/5 hover:bg-white/10 text-white/70 hover:text-white transition-all text-sm font-medium",children:""})})]})}):null}let is=[],io=[];const Tv=()=>{is.forEach(t=>t([...io]))},Nv={success:Dy,error:Hy,warning:Ey,info:Iy},Mv={success:"bg-emerald-500/20 border-emerald-500/40 text-emerald-300",error:"bg-red-500/20 border-red-500/40 text-red-300",warning:"bg-yellow-500/20 border-yellow-500/40 text-yellow-300",info:"bg-blue-500/20 border-blue-500/40 text-blue-300"};function jv(){const[t,e]=G.useState([]);G.useEffect(()=>{const n=l=>e(l);return is.push(n),()=>{is=is.filter(l=>l!==n)}},[]);const a=G.useCallback(n=>{io=io.filter(l=>l.id!==n),Tv()},[]);return t.length===0?null:c.jsx("div",{className:"fixed top-16 right-4 z-[300] flex flex-col gap-2 max-w-sm",children:t.map(n=>{const l=Nv[n.type];return c.jsxs("div",{className:St("flex items-center gap-3 px-4 py-3 rounded-xl border backdrop-blur-md shadow-lg","animate-in slide-in-from-right duration-300",Mv[n.type]),children:[c.jsx(l,{className:"w-5 h-5 shrink-0"}),c.jsx("span",{className:"text-sm font-medium flex-1",children:n.message}),c.jsx("button",{onClick:()=>a(n.id),className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:c.jsx(Ye,{className:"w-4 h-4"})})]},n.id)})})}function kv(){const[t,e]=G.useState({currentPitch:0,targetPitch:0,cents:0,isActive:!1});if(G.useEffect(()=>{const o=setInterval(()=>{const u=j.state,g=u.currentMicPitch||0,h=u.currentMicConf||0;let f=0;const d=u.playbackPosition+u.timelineOffsetSec,y=u.midiGhostNotes.find(w=>d>=w.time&&d<=w.time+w.duration);if(y){const w=u.guideOctaveOffset*12;f=440*Math.pow(2,(y.midi+w-69)/12)}let x=0;g>0&&f>0&&(x=Math.round(1200*Math.log2(g/f))),e({currentPitch:g,targetPitch:f,cents:x,isActive:u.isPlaying&&h>.5&&g>0})},50);return()=>clearInterval(o)},[]),!t.isActive||t.targetPitch===0)return null;const a=Math.abs(t.cents),n=a<=20,l=a<=50,s=50+Math.max(-100,Math.min(100,t.cents))/100*50;return c.jsx("div",{className:"absolute top-16 left-1/2 -translate-x-1/2 z-50 pointer-events-none",children:c.jsxs("div",{className:"bg-black/70 backdrop-blur-md rounded-2xl px-6 py-3 border border-white/10 shadow-2xl",children:[c.jsxs("div",{className:"w-48 h-3 bg-white/10 rounded-full relative overflow-hidden mb-2",children:[c.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-white/30 -translate-x-1/2"}),c.jsx("div",{className:"absolute left-[40%] right-[40%] top-0 bottom-0 bg-emerald-500/20"}),c.jsx("div",{className:St("absolute top-0 bottom-0 w-2 rounded-full transition-all duration-75 -translate-x-1/2",n?"bg-emerald-400 shadow-lg shadow-emerald-400/50":l?"bg-yellow-400 shadow-lg shadow-yellow-400/50":"bg-red-400 shadow-lg shadow-red-400/50"),style:{left:`${s}%`}})]}),c.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:St("font-mono font-bold text-sm",n?"text-emerald-400":l?"text-yellow-400":"text-red-400"),children:[t.cents>0?"+":"",t.cents,""]}),c.jsx("span",{children:""})]}),c.jsx("div",{className:St("text-center text-xs font-medium mt-1",n?"text-emerald-400":l?"text-yellow-400":"text-red-400"),children:n?" Perfect!":l?t.cents>0?"":"":t.cents>0?"":""})]})})}function Av({open:t,onClose:e}){const[a,n]=G.useState(null);if(G.useEffect(()=>{t&&n(N0.getStats())},[t]),!t||!a)return null;const l=s=>{const r=Math.floor(s/3600),o=Math.floor(s%3600/60);return r>0?`${r}${o}`:`${o}`},i=Math.max(...Object.values(a.weeklyPracticeTime),1);return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:c.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-2xl w-full max-w-lg max-h-[90vh] shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200 flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50 shrink-0",children:[c.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx(r0,{className:"w-5 h-5 text-blue-400"}),""]}),c.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors text-white/50 hover:text-white",children:c.jsx(Ye,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-4 overflow-y-auto flex-1 space-y-4",children:a.totalSessions===0?c.jsxs("div",{className:"text-center py-12 text-white/50",children:[c.jsx(Hs,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:""}),c.jsx("p",{className:"text-sm mt-2",children:""})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx(Xi,{icon:c.jsx(ou,{className:"w-5 h-5"}),label:"",value:l(a.totalPracticeTime),color:"blue"}),c.jsx(Xi,{icon:c.jsx(Hs,{className:"w-5 h-5"}),label:"",value:`${a.averageScore}`,color:"emerald"}),c.jsx(Xi,{icon:c.jsx(Qf,{className:"w-5 h-5"}),label:"",value:`${a.bestScore}`,color:"yellow"}),c.jsx(Xi,{icon:c.jsx(Zy,{className:"w-5 h-5"}),label:"",value:`${a.streakDays}`,color:"orange"})]}),c.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(s0,{className:"w-4 h-4 text-white/50"}),c.jsx("span",{className:"text-sm text-white/70",children:""}),c.jsxs("span",{className:"ml-auto text-xs text-white/40",children:[a.sessionsThisWeek,""]})]}),c.jsx("div",{className:"flex items-end gap-1 h-20",children:Object.entries(a.weeklyPracticeTime).map(([s,r])=>c.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[c.jsx("div",{className:St("w-full rounded-t transition-all",r>0?"bg-blue-500":"bg-white/10"),style:{height:`${Math.max(4,r/i*60)}px`}}),c.jsx("span",{className:"text-xs text-white/40",children:s})]},s))})]}),a.scoreHistory.length>0&&c.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(Qf,{className:"w-4 h-4 text-white/50"}),c.jsx("span",{className:"text-sm text-white/70",children:""})]}),c.jsx("div",{className:"flex items-end gap-0.5 h-16",children:a.scoreHistory.map((s,r)=>c.jsx("div",{className:St("flex-1 rounded-t transition-all min-w-[4px]",s.score>=80?"bg-emerald-500":s.score>=60?"bg-yellow-500":"bg-red-500"),style:{height:`${s.score/100*100}%`},title:`${s.date}: ${s.score}`},r))})]})]})})]})})}function Xi({icon:t,label:e,value:a,color:n}){const l={blue:"bg-blue-500/10 border-blue-500/20 text-blue-400",emerald:"bg-emerald-500/10 border-emerald-500/20 text-emerald-400",yellow:"bg-yellow-500/10 border-yellow-500/20 text-yellow-400",orange:"bg-orange-500/10 border-orange-500/20 text-orange-400"};return c.jsxs("div",{className:St("rounded-xl p-3 border",l[n]),children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t,c.jsx("span",{className:"text-xs text-white/50",children:e})]}),c.jsx("div",{className:"text-xl font-bold text-white",children:a})]})}function zv(){const[t]=G.useState(()=>j),[e,a]=G.useState(!1),[n,l]=G.useState(!1),[i,s]=G.useState(!1),[r,o]=G.useState(!1),[u,g]=G.useState(!1),[h,f]=G.useState(!1),[d,y]=G.useState(null),[x,w]=G.useState(j.state);return G.useEffect(()=>{j.initFromStorage()},[]),G.useEffect(()=>t.subscribe(()=>{w({...t.state})}),[t]),c.jsxs("div",{className:"w-screen h-[100dvh] bg-[#1a1a1a] text-white overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"h-12 border-b border-white/10 flex items-center px-2 md:px-4 bg-white/5 backdrop-blur-sm z-10 overflow-x-auto no-scrollbar gap-2",children:[c.jsxs("h1",{className:"font-bold text-base md:text-lg tracking-tight bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent truncate max-w-[120px] md:max-w-none",children:["Ontei ",c.jsx("span",{className:"hidden md:inline text-xs text-white/40 font-normal ml-2",children:"Legacy Refactor"})]}),c.jsxs("div",{id:"top-bar-import-controls",className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>{var p;return(p=document.getElementById("hidden-import-guide"))==null?void 0:p.click()},className:"h-8 w-24 rounded-full bg-blue-500/20 text-blue-300 text-xs hover:bg-blue-500/30 transition-all border border-blue-500/30 flex items-center justify-center gap-1.5",title:"(MIDI/)",children:[c.jsx("span",{className:"text-lg md:text-base",children:""})," ",c.jsx("span",{className:"hidden md:inline",children:""})]}),c.jsx("input",{type:"file",accept:".mid,.midi,.mp3,.wav,.ogg,.m4a",onChange:p=>{var b;const m=(b=p.target.files)==null?void 0:b[0];m&&(m.name.endsWith(".mid")||m.name.endsWith(".midi")?t.loadMidiFile(m):t.loadAudioFile(m))},className:"hidden",id:"hidden-import-guide"}),c.jsxs("button",{onClick:()=>{var p;return(p=document.getElementById("hidden-import-audio"))==null?void 0:p.click()},className:"h-8 w-24 rounded-full bg-purple-500/20 text-purple-300 text-xs hover:bg-purple-500/30 transition-all border border-purple-500/30 flex items-center justify-center gap-1.5",title:"(MP3/WAV)",children:[c.jsx("span",{className:"text-lg md:text-base",children:""})," ",c.jsx("span",{className:"hidden md:inline",children:""})]}),c.jsx("input",{type:"file",accept:".mp3,.wav,.ogg,.m4a",onChange:p=>{var m;return((m=p.target.files)==null?void 0:m[0])&&t.importBackingFile(p.target.files[0])},className:"hidden",id:"hidden-import-audio"}),c.jsxs("button",{onClick:()=>{const p=j.exportSession(),m=new Blob([p],{type:"application/json"}),b=URL.createObjectURL(m),S=document.createElement("a");S.href=b,S.download=`ontei-session-${new Date().toISOString().slice(0,10)}.json`,S.click(),URL.revokeObjectURL(b)},className:"h-8 w-24 rounded-full bg-green-500/20 text-green-300 text-xs hover:bg-green-500/30 transition-all border border-green-500/30 flex items-center justify-center gap-1.5 ml-2",title:"",children:[c.jsx("span",{className:"hidden md:inline",children:" SAVE"}),c.jsx("span",{className:"md:hidden",children:""})]}),c.jsxs("button",{onClick:()=>{var p;return(p=document.getElementById("hidden-import-json"))==null?void 0:p.click()},className:"h-8 w-24 rounded-full bg-white/5 text-white/70 text-xs hover:bg-white/10 transition-all border border-white/10 flex items-center justify-center gap-1.5 ml-2",title:"",children:[c.jsx("span",{className:"text-lg md:text-base",children:""})," ",c.jsx("span",{className:"hidden md:inline",children:"LOAD"})]}),c.jsx("input",{type:"file",accept:".json",onChange:p=>{var m;return((m=p.target.files)==null?void 0:m[0])&&t.importSession(p.target.files[0])},className:"hidden",id:"hidden-import-json"}),c.jsxs("button",{onClick:()=>x.scoreResult&&x.scoreResult.totalScore>0&&s(!0),disabled:!x.scoreResult||x.scoreResult.totalScore<=0,className:`h-8 w-28 rounded-full text-xs transition-all border flex items-center justify-center gap-1.5 ml-4 ${x.scoreResult&&x.scoreResult.totalScore>0?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30 hover:bg-yellow-500/30 cursor-pointer":"bg-gray-800/50 text-gray-500 border-gray-700/50 cursor-not-allowed opacity-70"}`,title:x.scoreResult&&x.scoreResult.totalScore>0?"":"",children:[c.jsx(Gs,{className:`w-3 h-3 ${x.scoreResult&&x.scoreResult.totalScore>0?"text-yellow-300":"text-gray-500"}`}),c.jsx("span",{className:"hidden md:inline",children:""})]})]}),c.jsx("div",{className:"flex items-center gap-2 bg-black/20 rounded-full px-3 py-1 border border-white/10 shrink-0",children:c.jsxs("span",{className:"text-xs text-white/60 font-medium",children:["BPM: ",x.bpm]})}),c.jsx("button",{onClick:()=>f(!0),className:"h-8 w-8 rounded-full bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 transition-all border border-blue-500/20 flex items-center justify-center shrink-0 ml-auto",title:"",children:c.jsx(r0,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>g(!0),className:"h-8 w-8 rounded-full bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all border border-red-500/20 flex items-center justify-center shrink-0",title:"",children:c.jsx(dr,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"flex-1 relative min-h-0",children:[c.jsx(Ty,{}),c.jsx(kv,{}),e&&c.jsx(hv,{onClose:()=>a(!1)}),n&&c.jsx(bv,{audioEngine:t,isPracticing:x.isPracticing,onClose:()=>{t.stopPractice(),l(!1)}}),r&&c.jsx(vv,{onClose:()=>o(!1)}),u&&c.jsx(wv,{open:u,onClose:()=>g(!1),onResetAll:()=>t.resetSession("all"),onResetPitchOnly:()=>t.resetSession("pitchOnly")}),c.jsx(Av,{open:h,onClose:()=>f(!1)}),d&&c.jsx(Sv,{audioBlob:d,onClose:()=>y(null)}),i&&c.jsx(Pf,{result:x.scoreResult,onClose:()=>{s(!1)}}),x.loadingProgress!==null&&c.jsxs("div",{className:"absolute inset-0 z-[200] bg-black/80 backdrop-blur-md flex flex-col items-center justify-center gap-4 animate-in fade-in duration-300",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-blue-500 rounded-full animate-spin"}),c.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:"Analyzing Audio..."}),c.jsxs("div",{className:"text-white/60 font-mono text-sm",children:[Math.round(x.loadingProgress),"%"]}),c.jsx("div",{className:"w-64 h-1.5 bg-white/10 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-blue-500 transition-all duration-100 ease-out",style:{width:`${x.loadingProgress}%`}})})]}),i&&x.scoreResult&&c.jsx(Pf,{result:x.scoreResult,onClose:()=>s(!1)}),c.jsx(fv,{onOpenSettings:()=>a(!0),onOpenPractice:()=>{n||x.isPracticing?(t.stopPractice(),l(!1)):l(!0)},onOpenHistory:()=>o(!0),onRecordingComplete:p=>y(p)})]}),c.jsx(jv,{})]})}Mb.createRoot(document.getElementById("root")).render(c.jsx(G.StrictMode,{children:c.jsx(zv,{})}));window.addEventListener("error",t=>{const e=document.getElementById("root");e&&e.innerHTML===""&&(e.innerHTML=`<div style="padding: 20px; color: #f87171; background: #222; height: 100vh;">
            <h1>Startup Error</h1>
            <pre>${t.message}</pre>
            <p>Check console for more details.</p>
        </div>`)});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});
